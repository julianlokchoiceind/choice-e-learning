"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/admin/courses/route";
exports.ids = ["app/api/admin/courses/route"];
exports.modules = {

/***/ "@prisma/client":
/*!*********************************!*\
  !*** external "@prisma/client" ***!
  \*********************************/
/***/ ((module) => {

module.exports = require("@prisma/client");

/***/ }),

/***/ "../../client/components/action-async-storage.external":
/*!*******************************************************************************!*\
  !*** external "next/dist/client/components/action-async-storage.external.js" ***!
  \*******************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/client/components/action-async-storage.external.js");

/***/ }),

/***/ "../../client/components/request-async-storage.external":
/*!********************************************************************************!*\
  !*** external "next/dist/client/components/request-async-storage.external.js" ***!
  \********************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/client/components/request-async-storage.external.js");

/***/ }),

/***/ "../../client/components/static-generation-async-storage.external":
/*!******************************************************************************************!*\
  !*** external "next/dist/client/components/static-generation-async-storage.external.js" ***!
  \******************************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/client/components/static-generation-async-storage.external.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "assert":
/*!*************************!*\
  !*** external "assert" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("assert");

/***/ }),

/***/ "buffer":
/*!*************************!*\
  !*** external "buffer" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("buffer");

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("crypto");

/***/ }),

/***/ "events":
/*!*************************!*\
  !*** external "events" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("events");

/***/ }),

/***/ "http":
/*!***********************!*\
  !*** external "http" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("http");

/***/ }),

/***/ "https":
/*!************************!*\
  !*** external "https" ***!
  \************************/
/***/ ((module) => {

module.exports = require("https");

/***/ }),

/***/ "querystring":
/*!******************************!*\
  !*** external "querystring" ***!
  \******************************/
/***/ ((module) => {

module.exports = require("querystring");

/***/ }),

/***/ "url":
/*!**********************!*\
  !*** external "url" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("url");

/***/ }),

/***/ "util":
/*!***********************!*\
  !*** external "util" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("util");

/***/ }),

/***/ "zlib":
/*!***********************!*\
  !*** external "zlib" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("zlib");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fadmin%2Fcourses%2Froute&page=%2Fapi%2Fadmin%2Fcourses%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fadmin%2Fcourses%2Froute.ts&appDir=%2FUsers%2Fjulianlok%2FDocuments%2Fchoice-e-learning%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fjulianlok%2FDocuments%2Fchoice-e-learning&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!***************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fadmin%2Fcourses%2Froute&page=%2Fapi%2Fadmin%2Fcourses%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fadmin%2Fcourses%2Froute.ts&appDir=%2FUsers%2Fjulianlok%2FDocuments%2Fchoice-e-learning%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fjulianlok%2FDocuments%2Fchoice-e-learning&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \***************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   headerHooks: () => (/* binding */ headerHooks),\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage),\n/* harmony export */   staticGenerationBailout: () => (/* binding */ staticGenerationBailout)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _Users_julianlok_Documents_choice_e_learning_src_app_api_admin_courses_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./src/app/api/admin/courses/route.ts */ \"(rsc)/./src/app/api/admin/courses/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/admin/courses/route\",\n        pathname: \"/api/admin/courses\",\n        filename: \"route\",\n        bundlePath: \"app/api/admin/courses/route\"\n    },\n    resolvedPagePath: \"/Users/julianlok/Documents/choice-e-learning/src/app/api/admin/courses/route.ts\",\n    nextConfigOutput,\n    userland: _Users_julianlok_Documents_choice_e_learning_src_app_api_admin_courses_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks, headerHooks, staticGenerationBailout } = routeModule;\nconst originalPathname = \"/api/admin/courses/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZhZG1pbiUyRmNvdXJzZXMlMkZyb3V0ZSZwYWdlPSUyRmFwaSUyRmFkbWluJTJGY291cnNlcyUyRnJvdXRlJmFwcFBhdGhzPSZwYWdlUGF0aD1wcml2YXRlLW5leHQtYXBwLWRpciUyRmFwaSUyRmFkbWluJTJGY291cnNlcyUyRnJvdXRlLnRzJmFwcERpcj0lMkZVc2VycyUyRmp1bGlhbmxvayUyRkRvY3VtZW50cyUyRmNob2ljZS1lLWxlYXJuaW5nJTJGc3JjJTJGYXBwJnBhZ2VFeHRlbnNpb25zPXRzeCZwYWdlRXh0ZW5zaW9ucz10cyZwYWdlRXh0ZW5zaW9ucz1qc3gmcGFnZUV4dGVuc2lvbnM9anMmcm9vdERpcj0lMkZVc2VycyUyRmp1bGlhbmxvayUyRkRvY3VtZW50cyUyRmNob2ljZS1lLWxlYXJuaW5nJmlzRGV2PXRydWUmdHNjb25maWdQYXRoPXRzY29uZmlnLmpzb24mYmFzZVBhdGg9JmFzc2V0UHJlZml4PSZuZXh0Q29uZmlnT3V0cHV0PSZwcmVmZXJyZWRSZWdpb249Jm1pZGRsZXdhcmVDb25maWc9ZTMwJTNEISIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7OztBQUFzRztBQUN2QztBQUNjO0FBQytCO0FBQzVHO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixnSEFBbUI7QUFDM0M7QUFDQSxjQUFjLHlFQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxZQUFZO0FBQ1osQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBLFFBQVEsdUdBQXVHO0FBQy9HO0FBQ0E7QUFDQSxXQUFXLDRFQUFXO0FBQ3RCO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDNko7O0FBRTdKIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vY2hvaWNlLWUtbGVhcm5pbmcvPzlmZDkiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQXBwUm91dGVSb3V0ZU1vZHVsZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1tb2R1bGVzL2FwcC1yb3V0ZS9tb2R1bGUuY29tcGlsZWRcIjtcbmltcG9ydCB7IFJvdXRlS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1raW5kXCI7XG5pbXBvcnQgeyBwYXRjaEZldGNoIGFzIF9wYXRjaEZldGNoIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvbGliL3BhdGNoLWZldGNoXCI7XG5pbXBvcnQgKiBhcyB1c2VybGFuZCBmcm9tIFwiL1VzZXJzL2p1bGlhbmxvay9Eb2N1bWVudHMvY2hvaWNlLWUtbGVhcm5pbmcvc3JjL2FwcC9hcGkvYWRtaW4vY291cnNlcy9yb3V0ZS50c1wiO1xuLy8gV2UgaW5qZWN0IHRoZSBuZXh0Q29uZmlnT3V0cHV0IGhlcmUgc28gdGhhdCB3ZSBjYW4gdXNlIHRoZW0gaW4gdGhlIHJvdXRlXG4vLyBtb2R1bGUuXG5jb25zdCBuZXh0Q29uZmlnT3V0cHV0ID0gXCJcIlxuY29uc3Qgcm91dGVNb2R1bGUgPSBuZXcgQXBwUm91dGVSb3V0ZU1vZHVsZSh7XG4gICAgZGVmaW5pdGlvbjoge1xuICAgICAgICBraW5kOiBSb3V0ZUtpbmQuQVBQX1JPVVRFLFxuICAgICAgICBwYWdlOiBcIi9hcGkvYWRtaW4vY291cnNlcy9yb3V0ZVwiLFxuICAgICAgICBwYXRobmFtZTogXCIvYXBpL2FkbWluL2NvdXJzZXNcIixcbiAgICAgICAgZmlsZW5hbWU6IFwicm91dGVcIixcbiAgICAgICAgYnVuZGxlUGF0aDogXCJhcHAvYXBpL2FkbWluL2NvdXJzZXMvcm91dGVcIlxuICAgIH0sXG4gICAgcmVzb2x2ZWRQYWdlUGF0aDogXCIvVXNlcnMvanVsaWFubG9rL0RvY3VtZW50cy9jaG9pY2UtZS1sZWFybmluZy9zcmMvYXBwL2FwaS9hZG1pbi9jb3Vyc2VzL3JvdXRlLnRzXCIsXG4gICAgbmV4dENvbmZpZ091dHB1dCxcbiAgICB1c2VybGFuZFxufSk7XG4vLyBQdWxsIG91dCB0aGUgZXhwb3J0cyB0aGF0IHdlIG5lZWQgdG8gZXhwb3NlIGZyb20gdGhlIG1vZHVsZS4gVGhpcyBzaG91bGRcbi8vIGJlIGVsaW1pbmF0ZWQgd2hlbiB3ZSd2ZSBtb3ZlZCB0aGUgb3RoZXIgcm91dGVzIHRvIHRoZSBuZXcgZm9ybWF0LiBUaGVzZVxuLy8gYXJlIHVzZWQgdG8gaG9vayBpbnRvIHRoZSByb3V0ZS5cbmNvbnN0IHsgcmVxdWVzdEFzeW5jU3RvcmFnZSwgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MsIGhlYWRlckhvb2tzLCBzdGF0aWNHZW5lcmF0aW9uQmFpbG91dCB9ID0gcm91dGVNb2R1bGU7XG5jb25zdCBvcmlnaW5hbFBhdGhuYW1lID0gXCIvYXBpL2FkbWluL2NvdXJzZXMvcm91dGVcIjtcbmZ1bmN0aW9uIHBhdGNoRmV0Y2goKSB7XG4gICAgcmV0dXJuIF9wYXRjaEZldGNoKHtcbiAgICAgICAgc2VydmVySG9va3MsXG4gICAgICAgIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2VcbiAgICB9KTtcbn1cbmV4cG9ydCB7IHJvdXRlTW9kdWxlLCByZXF1ZXN0QXN5bmNTdG9yYWdlLCBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcywgaGVhZGVySG9va3MsIHN0YXRpY0dlbmVyYXRpb25CYWlsb3V0LCBvcmlnaW5hbFBhdGhuYW1lLCBwYXRjaEZldGNoLCAgfTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YXBwLXJvdXRlLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fadmin%2Fcourses%2Froute&page=%2Fapi%2Fadmin%2Fcourses%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fadmin%2Fcourses%2Froute.ts&appDir=%2FUsers%2Fjulianlok%2FDocuments%2Fchoice-e-learning%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fjulianlok%2FDocuments%2Fchoice-e-learning&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./src/app/api/admin/courses/route.ts":
/*!********************************************!*\
  !*** ./src/app/api/admin/courses/route.ts ***!
  \********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GET: () => (/* binding */ GET),\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/web/exports/next-response */ \"(rsc)/./node_modules/next/dist/server/web/exports/next-response.js\");\n/* harmony import */ var _lib_db__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/db */ \"(rsc)/./src/lib/db.ts\");\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! zod */ \"(rsc)/./node_modules/zod/lib/index.mjs\");\n/* harmony import */ var _lib_auth_session__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/lib/auth/session */ \"(rsc)/./src/lib/auth/session.ts\");\n/* harmony import */ var _lib_auth_roles__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/lib/auth/roles */ \"(rsc)/./src/lib/auth/roles.ts\");\n/* harmony import */ var uuid__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! uuid */ \"(rsc)/./node_modules/uuid/dist/esm-node/v4.js\");\n\n\n\n\n\n\n// Schema for course validation\nconst courseSchema = zod__WEBPACK_IMPORTED_MODULE_4__.z.object({\n    title: zod__WEBPACK_IMPORTED_MODULE_4__.z.string().min(1, \"Title is required\"),\n    description: zod__WEBPACK_IMPORTED_MODULE_4__.z.string().min(10, \"Description must be at least 10 characters\"),\n    price: zod__WEBPACK_IMPORTED_MODULE_4__.z.number().min(0, \"Price must be a positive number\"),\n    level: zod__WEBPACK_IMPORTED_MODULE_4__.z.enum([\n        \"beginner\",\n        \"intermediate\",\n        \"advanced\"\n    ]),\n    topics: zod__WEBPACK_IMPORTED_MODULE_4__.z.array(zod__WEBPACK_IMPORTED_MODULE_4__.z.string()),\n    videoUrl: zod__WEBPACK_IMPORTED_MODULE_4__.z.string().url(\"Must be a valid URL\").optional(),\n    imageUrl: zod__WEBPACK_IMPORTED_MODULE_4__.z.string().url(\"Must be a valid URL\").optional()\n});\n// POST - Create a new course\nasync function POST(req) {\n    try {\n        const user = await (0,_lib_auth_session__WEBPACK_IMPORTED_MODULE_2__.getCurrentUser)();\n        ;\n        ;\n        ;\n        if (!user) {\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                error: \"Unauthorized. Please login.\"\n            }, {\n                status: 401\n            });\n        }\n        if (!(0,_lib_auth_roles__WEBPACK_IMPORTED_MODULE_3__.isAdmin)(user)) {\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                error: \"Forbidden. Only admins can create courses.\"\n            }, {\n                status: 403\n            });\n        }\n        const CourseSchema = zod__WEBPACK_IMPORTED_MODULE_4__.z.object({\n            title: zod__WEBPACK_IMPORTED_MODULE_4__.z.string().min(3, {\n                message: \"Title must be at least 3 characters\"\n            }),\n            description: zod__WEBPACK_IMPORTED_MODULE_4__.z.string().min(10, {\n                message: \"Description must be at least 10 characters\"\n            }),\n            imageUrl: zod__WEBPACK_IMPORTED_MODULE_4__.z.string().url({\n                message: \"Please provide a valid URL for image\"\n            }).optional(),\n            price: zod__WEBPACK_IMPORTED_MODULE_4__.z.number().nonnegative({\n                message: \"Price must be a positive number\"\n            }),\n            level: zod__WEBPACK_IMPORTED_MODULE_4__.z.enum([\n                \"beginner\",\n                \"intermediate\",\n                \"advanced\"\n            ]),\n            topics: zod__WEBPACK_IMPORTED_MODULE_4__.z.array(zod__WEBPACK_IMPORTED_MODULE_4__.z.string()),\n            videoUrl: zod__WEBPACK_IMPORTED_MODULE_4__.z.string().url({\n                message: \"Please provide a valid URL for video\"\n            }).optional()\n        });\n        const body = await req.json();\n        const validationResult = CourseSchema.safeParse(body);\n        if (!validationResult.success) {\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                error: \"Invalid course data\",\n                details: validationResult.error.format()\n            }, {\n                status: 400\n            });\n        }\n        const { title, description, imageUrl, price, level, topics, videoUrl } = validationResult.data;\n        // Generate a slug from the title\n        const slug = title.toLowerCase().replace(/\\s+/g, \"-\") + \"-\" + (0,uuid__WEBPACK_IMPORTED_MODULE_5__[\"default\"])().substring(0, 8);\n        // Create the course with Prisma\n        const newCourse = await _lib_db__WEBPACK_IMPORTED_MODULE_1__[\"default\"].course.create({\n            data: {\n                title,\n                description,\n                slug,\n                imageUrl: imageUrl || \"/images/course-default.jpg\",\n                price,\n                level,\n                topics,\n                videoUrl,\n                instructorId: user.id,\n                studentIds: []\n            }\n        });\n        // Check if course was created successfully\n        if (!newCourse) {\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                error: \"Failed to create course\"\n            }, {\n                status: 500\n            });\n        }\n        // Return the created course\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n            success: true,\n            course: newCourse\n        }, {\n            status: 201\n        });\n    } catch (error) {\n        console.error(\"Error creating course:\", error);\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n            error: \"Failed to create course\",\n            details: error.message\n        }, {\n            status: 500\n        });\n    }\n}\n// GET - Get all courses (admin view)\nasync function GET(req) {\n    try {\n        const user = await (0,_lib_auth_session__WEBPACK_IMPORTED_MODULE_2__.getCurrentUser)();\n        if (!user) {\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                error: \"Unauthorized. Please login.\"\n            }, {\n                status: 401\n            });\n        }\n        if (!(0,_lib_auth_roles__WEBPACK_IMPORTED_MODULE_3__.isAdmin)(user)) {\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                error: \"Forbidden. Only admins can view courses.\"\n            }, {\n                status: 403\n            });\n        }\n        // Find all courses created by the admin using Prisma\n        const courses = await _lib_db__WEBPACK_IMPORTED_MODULE_1__[\"default\"].course.findMany({\n            where: {\n                instructorId: user.id\n            },\n            include: {\n                _count: {\n                    select: {\n                        students: true,\n                        lessons: true\n                    }\n                }\n            }\n        });\n        // Format the courses for response\n        const formattedCourses = courses.map((course)=>({\n                id: course.id,\n                title: course.title,\n                description: course.description,\n                price: course.price,\n                level: course.level,\n                topics: course.topics,\n                imageUrl: course.imageUrl,\n                studentsCount: course._count.students,\n                lessonsCount: course._count.lessons,\n                createdAt: course.createdAt,\n                updatedAt: course.updatedAt\n            }));\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n            success: true,\n            courses: formattedCourses\n        });\n    } catch (error) {\n        console.error(\"Error fetching courses:\", error);\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n            error: \"Failed to fetch courses\",\n            details: error.message\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvYXBwL2FwaS9hZG1pbi9jb3Vyc2VzL3JvdXRlLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7O0FBQXdEO0FBQzFCO0FBRU47QUFDNEI7QUFDVDtBQUNQO0FBRXBDLCtCQUErQjtBQUMvQixNQUFNTyxlQUFlTCxrQ0FBQ0EsQ0FBQ00sTUFBTSxDQUFDO0lBQzVCQyxPQUFPUCxrQ0FBQ0EsQ0FBQ1EsTUFBTSxHQUFHQyxHQUFHLENBQUMsR0FBRztJQUN6QkMsYUFBYVYsa0NBQUNBLENBQUNRLE1BQU0sR0FBR0MsR0FBRyxDQUFDLElBQUk7SUFDaENFLE9BQU9YLGtDQUFDQSxDQUFDWSxNQUFNLEdBQUdILEdBQUcsQ0FBQyxHQUFHO0lBQ3pCSSxPQUFPYixrQ0FBQ0EsQ0FBQ2MsSUFBSSxDQUFDO1FBQUM7UUFBWTtRQUFnQjtLQUFXO0lBQ3REQyxRQUFRZixrQ0FBQ0EsQ0FBQ2dCLEtBQUssQ0FBQ2hCLGtDQUFDQSxDQUFDUSxNQUFNO0lBQ3hCUyxVQUFVakIsa0NBQUNBLENBQUNRLE1BQU0sR0FBR1UsR0FBRyxDQUFDLHVCQUF1QkMsUUFBUTtJQUN4REMsVUFBVXBCLGtDQUFDQSxDQUFDUSxNQUFNLEdBQUdVLEdBQUcsQ0FBQyx1QkFBdUJDLFFBQVE7QUFDMUQ7QUFFQSw2QkFBNkI7QUFDdEIsZUFBZUUsS0FBS0MsR0FBWTtJQUNyQyxJQUFJO1FBQ0YsTUFBTUMsT0FBTyxNQUFNdEIsaUVBQWNBOzs7O1FBT2pDLElBQUksQ0FBQ3NCLE1BQU07WUFDVCxPQUFPekIsa0ZBQVlBLENBQUMwQixJQUFJLENBQ3RCO2dCQUFFQyxPQUFPO1lBQThCLEdBQ3ZDO2dCQUFFQyxRQUFRO1lBQUk7UUFFbEI7UUFFQSxJQUFJLENBQUN4Qix3REFBT0EsQ0FBQ3FCLE9BQU87WUFDbEIsT0FBT3pCLGtGQUFZQSxDQUFDMEIsSUFBSSxDQUN0QjtnQkFBRUMsT0FBTztZQUE2QyxHQUN0RDtnQkFBRUMsUUFBUTtZQUFJO1FBRWxCO1FBRUEsTUFBTUMsZUFBZTNCLGtD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b3Vyc2VzL3JvdXRlLnRzP2U0MDAiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTmV4dFJlcXVlc3QsIE5leHRSZXNwb25zZSB9IGZyb20gJ25leHQvc2VydmVyJztcbmltcG9ydCBwcmlzbWEgZnJvbSAnQC9saWIvZGInO1xuaW1wb3J0IHsgcmVxdWlyZUFkbWluIH0gZnJvbSAnQC9saWIvYXV0aC9hdXRoLW1pZGRsZXdhcmUnO1xuaW1wb3J0IHsgeiB9IGZyb20gJ3pvZCc7XG5pbXBvcnQgeyBnZXRDdXJyZW50VXNlciB9IGZyb20gJ0AvbGliL2F1dGgvc2Vzc2lvbic7XG5pbXBvcnQgeyBpc0FkbWluIH0gZnJvbSAnQC9saWIvYXV0aC9yb2xlcyc7XG5pbXBvcnQgeyB2NCBhcyB1dWlkdjQgfSBmcm9tICd1dWlkJztcblxuLy8gU2NoZW1hIGZvciBjb3Vyc2UgdmFsaWRhdGlvblxuY29uc3QgY291cnNlU2NoZW1hID0gei5vYmplY3Qoe1xuICB0aXRsZTogei5zdHJpbmcoKS5taW4oMSwgXCJUaXRsZSBpcyByZXF1aXJlZFwiKSxcbiAgZGVzY3JpcHRpb246IHouc3RyaW5nKCkubWluKDEwLCBcIkRlc2NyaXB0aW9uIG11c3QgYmUgYXQgbGVhc3QgMTAgY2hhcmFjdGVyc1wiKSxcbiAgcHJpY2U6IHoubnVtYmVyKCkubWluKDAsIFwiUHJpY2UgbXVzdCBiZSBhIHBvc2l0aXZlIG51bWJlclwiKSxcbiAgbGV2ZWw6IHouZW51bShbXCJiZWdpbm5lclwiLCBcImludGVybWVkaWF0ZVwiLCBcImFkdmFuY2VkXCJdKSxcbiAgdG9waWNzOiB6LmFycmF5KHouc3RyaW5nKCkpLFxuICB2aWRlb1VybDogei5zdHJpbmcoKS51cmwoXCJNdXN0IGJlIGEgdmFsaWQgVVJMXCIpLm9wdGlvbmFsKCksXG4gIGltYWdlVXJsOiB6LnN0cmluZygpLnVybChcIk11c3QgYmUgYSB2YWxpZCBVUkxcIikub3B0aW9uYWwoKSxcbn0pO1xuXG4vLyBQT1NUIC0gQ3JlYXRlIGEgbmV3IGNvdXJzZVxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIFBPU1QocmVxOiBSZXF1ZXN0KSB7XG4gIHRyeSB7XG4gICAgY29uc3QgdXNlciA9IGF3YWl0IGdldEN1cnJlbnRVc2VyKCk7XG5cbiAgICAvLyBUaMOqbSBjw6FjIGTDsm5nIGxvZyBuw6B5XG4gICAgY29uc29sZS5sb2coJ0N1cnJlbnQgdXNlcjonLCB1c2VyKTtcbiAgICBjb25zb2xlLmxvZygnQ3VycmVudCB1c2VyIHJvbGU6JywgdXNlcj8ucm9sZSk7XG4gICAgY29uc29sZS5sb2coJ0lzIHVzZXIgYWRtaW4/JywgaXNBZG1pbih1c2VyKSk7XG4gICAgXG4gICAgaWYgKCF1c2VyKSB7XG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICAgIHsgZXJyb3I6ICdVbmF1dGhvcml6ZWQuIFBsZWFzZSBsb2dpbi4nIH0sXG4gICAgICAgIHsgc3RhdHVzOiA0MDEgfVxuICAgICAgKTtcbiAgICB9XG5cbiAgICBpZiAoIWlzQWRtaW4odXNlcikpIHtcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgICAgeyBlcnJvcjogJ0ZvcmJpZGRlbi4gT25seSBhZG1pbnMgY2FuIGNyZWF0ZSBjb3Vyc2VzLicgfSxcbiAgICAgICAgeyBzdGF0dXM6IDQwMyB9XG4gICAgICApO1xuICAgIH1cbiAgICBcbiAgICBjb25zdCBDb3Vyc2VTY2hlbWEgPSB6Lm9iamVjdCh7XG4gICAgICB0aXRsZTogei5zdHJpbmcoKS5taW4oMywgeyBtZXNzYWdlOiAnVGl0bGUgbXVzdCBiZSBhdCBsZWFzdCAzIGNoYXJhY3RlcnMnIH0pLFxuICAgICAgZGVzY3JpcHRpb246IHouc3RyaW5nKCkubWluKDEwLCB7IG1lc3NhZ2U6ICdEZXNjcmlwdGlvbiBtdXN0IGJlIGF0IGxlYXN0IDEwIGNoYXJhY3RlcnMnIH0pLFxuICAgICAgaW1hZ2VVcmw6IHouc3RyaW5nKCkudXJsKHsgbWVzc2FnZTogJ1BsZWFzZSBwcm92aWRlIGEgdmFsaWQgVVJMIGZvciBpbWFnZScgfSkub3B0aW9uYWwoKSxcbiAgICAgIHByaWNlOiB6Lm51bWJlcigpLm5vbm5lZ2F0aXZlKHsgbWVzc2FnZTogJ1ByaWNlIG11c3QgYmUgYSBwb3NpdGl2ZSBudW1iZXInIH0pLFxuICAgICAgbGV2ZWw6IHouZW51bShbJ2JlZ2lubmVyJywgJ2ludGVybWVkaWF0ZScsICdhZHZhbmNlZCddKSxcbiAgICAgIHRvcGljczogei5hcnJheSh6LnN0cmluZygpKSxcbiAgICAgIHZpZGVvVXJsOiB6LnN0cmluZygpLnVybCh7IG1lc3NhZ2U6ICdQbGVhc2UgcHJvdmlkZSBhIHZhbGlkIFVSTCBmb3IgdmlkZW8nIH0pLm9wdGlvbmFsKCksXG4gICAgfSk7XG5cbiAgICBjb25zdCBib2R5ID0gYXdhaXQgcmVxLmpzb24oKTtcbiAgICBjb25zdCB2YWxpZGF0aW9uUmVzdWx0ID0gQ291cnNlU2NoZW1hLnNhZmVQYXJzZShib2R5KTtcblxuICAgIGlmICghdmFsaWRhdGlvblJlc3VsdC5zdWNjZXNzKSB7XG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICAgIHsgZXJyb3I6ICdJbnZhbGlkIGNvdXJzZSBkYXRhJywgZGV0YWlsczogdmFsaWRhdGlvblJlc3VsdC5lcnJvci5mb3JtYXQoKSB9LFxuICAgICAgICB7IHN0YXR1czogNDAwIH1cbiAgICAgICk7XG4gICAgfVxuXG4gICAgY29uc3QgeyBcbiAgICAgIHRpdGxlLCBcbiAgICAgIGRlc2NyaXB0aW9uLCBcbiAgICAgIGltYWdlVXJsLCBcbiAgICAgIHByaWNlLCBcbiAgICAgIGxldmVsLFxuICAgICAgdG9waWNzLFxuICAgICAgdmlkZW9VcmxcbiAgICB9ID0gdmFsaWRhdGlvblJlc3VsdC5kYXRhO1xuXG4gICAgLy8gR2VuZXJhdGUgYSBzbHVnIGZyb20gdGhlIHRpdGxlXG4gICAgY29uc3Qgc2x1ZyA9IHRpdGxlLnRvTG93ZXJDYXNlKCkucmVwbGFjZSgvXFxzKy9nLCAnLScpICsgJy0nICsgdXVpZHY0KCkuc3Vic3RyaW5nKDAsIDgpO1xuXG4gICAgLy8gQ3JlYXRlIHRoZSBjb3Vyc2Ugd2l0aCBQcmlzbWFcbiAgICBjb25zdCBuZXdDb3Vyc2UgPSBhd2FpdCBwcmlzbWEuY291cnNlLmNyZWF0ZSh7XG4gICAgICBkYXRhOiB7XG4gICAgICAgIHRpdGxlLFxuICAgICAgICBkZXNjcmlwdGlvbixcbiAgICAgICAgc2x1ZyxcbiAgICAgICAgaW1hZ2VVcmw6IGltYWdlVXJsIHx8ICcvaW1hZ2VzL2NvdXJzZS1kZWZhdWx0LmpwZycsXG4gICAgICAgIHByaWNlLFxuICAgICAgICBsZXZlbCxcbiAgICAgICAgdG9waWNzLFxuICAgICAgICB2aWRlb1VybCxcbiAgICAgICAgaW5zdHJ1Y3RvcklkOiB1c2VyLmlkLFxuICAgICAgICBzdHVkZW50SWRzOiBbXSxcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIC8vIENoZWNrIGlmIGNvdXJzZSB3YXMgY3JlYXRlZCBzdWNjZXNzZnVsbHlcbiAgICBpZiAoIW5ld0NvdXJzZSkge1xuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgICB7IGVycm9yOiAnRmFpbGVkIHRvIGNyZWF0ZSBjb3Vyc2UnIH0sXG4gICAgICAgIHsgc3RhdHVzOiA1MDAgfVxuICAgICAgKTtcbiAgICB9XG5cbiAgICAvLyBSZXR1cm4gdGhlIGNyZWF0ZWQgY291cnNlXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHtcbiAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICBjb3Vyc2U6IG5ld0NvdXJzZVxuICAgIH0sIHsgc3RhdHVzOiAyMDEgfSk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgY3JlYXRpbmcgY291cnNlOicsIGVycm9yKTtcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICB7IGVycm9yOiAnRmFpbGVkIHRvIGNyZWF0ZSBjb3Vyc2UnLCBkZXRhaWxzOiAoZXJyb3IgYXMgRXJyb3IpLm1lc3NhZ2UgfSxcbiAgICAgIHsgc3RhdHVzOiA1MDAgfVxuICAgICk7XG4gIH1cbn1cblxuLy8gR0VUIC0gR2V0IGFsbCBjb3Vyc2VzIChhZG1pbiB2aWV3KVxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIEdFVChyZXE6IFJlcXVlc3QpIHtcbiAgdHJ5IHtcbiAgICBjb25zdCB1c2VyID0gYXdhaXQgZ2V0Q3VycmVudFVzZXIoKTtcbiAgICBcbiAgICBpZiAoIXVzZXIpIHtcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgICAgeyBlcnJvcjogJ1VuYXV0aG9yaXplZC4gUGxlYXNlIGxvZ2luLicgfSxcbiAgICAgICAgeyBzdGF0dXM6IDQwMSB9XG4gICAgICApO1xuICAgIH1cblxuICAgIGlmICghaXNBZG1pbih1c2VyKSkge1xuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgICB7IGVycm9yOiAnRm9yYmlkZGVuLiBPbmx5IGFkbWlucyBjYW4gdmlldyBjb3Vyc2VzLicgfSxcbiAgICAgICAgeyBzdGF0dXM6IDQwMyB9XG4gICAgICApO1xuICAgIH1cbiAgICBcbiAgICAvLyBGaW5kIGFsbCBjb3Vyc2VzIGNyZWF0ZWQgYnkgdGhlIGFkbWluIHVzaW5nIFByaXNtYVxuICAgIGNvbnN0IGNvdXJzZXMgPSBhd2FpdCBwcmlzbWEuY291cnNlLmZpbmRNYW55KHtcbiAgICAgIHdoZXJlOiB7XG4gICAgICAgIGluc3RydWN0b3JJZDogdXNlci5pZFxuICAgICAgfSxcbiAgICAgIGluY2x1ZGU6IHtcbiAgICAgICAgX2NvdW50OiB7XG4gICAgICAgICAgc2VsZWN0OiB7XG4gICAgICAgICAgICBzdHVkZW50czogdHJ1ZSxcbiAgICAgICAgICAgIGxlc3NvbnM6IHRydWVcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KTtcbiAgICBcbiAgICAvLyBGb3JtYXQgdGhlIGNvdXJzZXMgZm9yIHJlc3BvbnNlXG4gICAgY29uc3QgZm9ybWF0dGVkQ291cnNlcyA9IGNvdXJzZXMubWFwKGNvdXJzZSA9PiAoe1xuICAgICAgaWQ6IGNvdXJzZS5pZCxcbiAgICAgIHRpdGxlOiBjb3Vyc2UudGl0bGUsXG4gICAgICBkZXNjcmlwdGlvbjogY291cnNlLmRlc2NyaXB0aW9uLFxuICAgICAgcHJpY2U6IGNvdXJzZS5wcmljZSxcbiAgICAgIGxldmVsOiBjb3Vyc2UubGV2ZWwsXG4gICAgICB0b3BpY3M6IGNvdXJzZS50b3BpY3MsXG4gICAgICBpbWFnZVVybDogY291cnNlLmltYWdlVXJsLFxuICAgICAgc3R1ZGVudHNDb3VudDogY291cnNlLl9jb3VudC5zdHVkZW50cyxcbiAgICAgIGxlc3NvbnNDb3VudDogY291cnNlLl9jb3VudC5sZXNzb25zLFxuICAgICAgY3JlYXRlZEF0OiBjb3Vyc2UuY3JlYXRlZEF0LFxuICAgICAgdXBkYXRlZEF0OiBjb3Vyc2UudXBkYXRlZEF0XG4gICAgfSkpO1xuICAgIFxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7XG4gICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgY291cnNlczogZm9ybWF0dGVkQ291cnNlc1xuICAgIH0pO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGZldGNoaW5nIGNvdXJzZXM6JywgZXJyb3IpO1xuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgIHsgZXJyb3I6ICdGYWlsZWQgdG8gZmV0Y2ggY291cnNlcycsIGRldGFpbHM6IChlcnJvciBhcyBFcnJvcikubWVzc2FnZSB9LFxuICAgICAgeyBzdGF0dXM6IDUwMCB9XG4gICAgKTtcbiAgfVxufSAiXSwibmFtZXMiOlsiTmV4dFJlc3BvbnNlIiwicHJpc21hIiwieiIsImdldEN1cnJlbnRVc2VyIiwiaXNBZG1pbiIsInY0IiwidXVpZHY0IiwiY291cnNlU2NoZW1hIiwib2JqZWN0IiwidGl0bGUiLCJzdHJpbmciLCJtaW4iLCJkZXNjcmlwdGlvbiIsInByaWNlIiwibnVtYmVyIiwibGV2ZWwiLCJlbnVtIiwidG9waWNzIiwiYXJyYXkiLCJ2aWRlb1VybCIsInVybCIsIm9wdGlvbmFsIiwiaW1hZ2VVcmwiLCJQT1NUIiwicmVxIiwidXNlciIsImpzb24iLCJlcnJvciIsInN0YXR1cyIsIkNvdXJzZVNjaGVtYSIsIm1lc3NhZ2UiLCJub25uZWdhdGl2ZSIsImJvZHkiLCJ2YWxpZGF0aW9uUmVzdWx0Iiwic2FmZVBhcnNlIiwic3VjY2VzcyIsImRldGFpbHMiLCJmb3JtYXQiLCJkYXRhIiwic2x1ZyIsInRvTG93ZXJDYXNlIiwicmVwbGFjZSIsInN1YnN0cmluZyIsIm5ld0NvdXJzZSIsImNvdXJzZSIsImNyZWF0ZSIsImluc3RydWN0b3JJZCIsImlkIiwic3R1ZGVudElkcyIsImNvbnNvbGUiLCJHRVQiLCJjb3Vyc2VzIiwiZmluZE1hbnkiLCJ3aGVyZSIsImluY2x1ZGUiLCJfY291bnQiLCJzZWxlY3QiLCJzdHVkZW50cyIsImxlc3NvbnMiLCJmb3JtYXR0ZWRDb3Vyc2VzIiwibWFwIiwic3R1ZGVudHNDb3VudCIsImxlc3NvbnNDb3VudCIsImNyZWF0ZWRBdCIsInVwZGF0ZWRBdCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/app/api/admin/courses/route.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/auth/auth-options.ts":
/*!**************************************!*\
  !*** ./src/lib/auth/auth-options.ts ***!
  \**************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Role: () => (/* binding */ Role),\n/* harmony export */   authOptions: () => (/* binding */ authOptions),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var next_auth_providers_credentials__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next-auth/providers/credentials */ \"(rsc)/./node_modules/next-auth/providers/credentials.js\");\n/* harmony import */ var next_auth_providers_google__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next-auth/providers/google */ \"(rsc)/./node_modules/next-auth/providers/google.js\");\n/* harmony import */ var next_auth_providers_github__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next-auth/providers/github */ \"(rsc)/./node_modules/next-auth/providers/github.js\");\n/* harmony import */ var next_auth_providers_facebook__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! next-auth/providers/facebook */ \"(rsc)/./node_modules/next-auth/providers/facebook.js\");\n/* harmony import */ var next_auth_providers_azure_ad__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! next-auth/providers/azure-ad */ \"(rsc)/./node_modules/next-auth/providers/azure-ad.js\");\n/* harmony import */ var _utils_password_utils__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./utils/password-utils */ \"(rsc)/./src/lib/auth/utils/password-utils.ts\");\n/* harmony import */ var _lib_db_services_user_service__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @/lib/db/services/user-service */ \"(rsc)/./src/lib/db/services/user-service.ts\");\n/* harmony import */ var _lib_db__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @/lib/db */ \"(rsc)/./src/lib/db.ts\");\n\n\n\n\n\n\n\n\n// Check if environment variables are set\nfunction validateEnvVariables() {\n    const requiredVars = [\n        {\n            key: \"NEXTAUTH_SECRET\",\n            value: process.env.NEXTAUTH_SECRET\n        },\n        {\n            key: \"NEXTAUTH_URL\",\n            value: process.env.NEXTAUTH_URL\n        },\n        {\n            key: \"FACEBOOK_CLIENT_ID\",\n            value: process.env.FACEBOOK_CLIENT_ID\n        },\n        {\n            key: \"FACEBOOK_CLIENT_SECRET\",\n            value: process.env.FACEBOOK_CLIENT_SECRET\n        },\n        {\n            key: \"MICROSOFT_CLIENT_ID\",\n            value: process.env.MICROSOFT_CLIENT_ID\n        },\n        {\n            key: \"MICROSOFT_CLIENT_SECRET\",\n            value: process.env.MICROSOFT_CLIENT_SECRET\n        }\n    ];\n    const missingVars = requiredVars.filter((v)=>!v.value);\n    if (missingVars.length > 0) {\n        console.error(\"Missing required environment variables:\", missingVars.map((v)=>v.key));\n    } else {\n        ;\n    }\n    ;\n    ;\n    ;\n}\n// Validate environment variables on startup\nvalidateEnvVariables();\nvar Role;\n(function(Role) {\n    Role[\"student\"] = \"student\";\n    Role[\"instructor\"] = \"instructor\";\n    Role[\"admin\"] = \"admin\";\n})(Role || (Role = {}));\nconst authOptions = {\n    providers: [\n        (0,next_auth_providers_credentials__WEBPACK_IMPORTED_MODULE_0__[\"default\"])({\n            name: \"Credentials\",\n            credentials: {\n                email: {\n                    label: \"Email\",\n                    type: \"email\"\n                },\n                password: {\n                    label: \"Password\",\n                    type: \"password\"\n                }\n            },\n            async authorize (credentials) {\n                try {\n                    if (!credentials?.email || !credentials?.password) {\n                        console.error(\"Missing credentials\");\n                        throw new Error(\"Email and password are required\");\n                    }\n                    // Find the user by email (case insensitive)\n                    const user = await (0,_lib_db_services_user_service__WEBPACK_IMPORTED_MODULE_6__.findUserByEmail)(credentials.email);\n                    // If user doesn't exist\n                    if (!user) {\n                        console.error(\"User not found\");\n                        throw new Error(\"Invalid email or password\");\n                    }\n                    // Verify the password\n                    const isPasswordValid = await (0,_utils_password_utils__WEBPACK_IMPORTED_MODULE_5__.comparePasswords)(credentials.password, user.password);\n                    if (!isPasswordValid) {\n                        console.error(\"Password invalid\");\n                        throw new Error(\"Invalid email or password\");\n                    }\n                    ;\n                    // Return user object without password\n                    return {\n                        id: user.id,\n                        name: user.name,\n                        email: user.email,\n                        role: user.role\n                    };\n                } catch (error) {\n                    console.error(\"Authentication error:\", error);\n                    // Re-throw to be handled by NextAuth\n                    throw error;\n                }\n            }\n        }),\n        // Add Google Provider\n        (0,next_auth_providers_google__WEBPACK_IMPORTED_MODULE_1__[\"default\"])({\n            clientId: process.env.GOOGLE_CLIENT_ID || \"\",\n            clientSecret: process.env.GOOGLE_CLIENT_SECRET || \"\",\n            authorization: {\n                params: {\n                    prompt: \"consent\",\n                    access_type: \"offline\",\n                    response_type: \"code\"\n                }\n            }\n        }),\n        // Add GitHub Provider\n        (0,next_auth_providers_github__WEBPACK_IMPORTED_MODULE_2__[\"default\"])({\n            clientId: process.env.GITHUB_CLIENT_ID || \"\",\n            clientSecret: process.env.GITHUB_CLIENT_SECRET || \"\"\n        }),\n        // Add Facebook Provider\n        (0,next_auth_providers_facebook__WEBPACK_IMPORTED_MODULE_3__[\"default\"])({\n            clientId: process.env.FACEBOOK_CLIENT_ID || \"\",\n            clientSecret: process.env.FACEBOOK_CLIENT_SECRET || \"\",\n            version: \"12.0\",\n            authorization: {\n                params: {\n                    scope: \"email,public_profile\",\n                    display: \"popup\",\n                    auth_type: \"rerequest\"\n                }\n            },\n            userinfo: {\n                url: \"https://graph.facebook.com/me\",\n                params: {\n                    fields: \"id,name,email,picture\"\n                }\n            },\n            profile (profile) {\n                ;\n                return {\n                    id: profile.id,\n                    name: profile.name,\n                    email: profile.email || `${profile.id}@facebook.com`,\n                    image: profile.picture?.data?.url,\n                    role: \"student\"\n                };\n            },\n            checks: [\n                \"state\"\n            ]\n        }),\n        // Add Microsoft Provider (via Azure AD)\n        (0,next_auth_providers_azure_ad__WEBPACK_IMPORTED_MODULE_4__[\"default\"])({\n            clientId: process.env.MICROSOFT_CLIENT_ID || \"\",\n            clientSecret: process.env.MICROSOFT_CLIENT_SECRET || \"\",\n            tenantId: process.env.MICROSOFT_TENANT_ID || \"organizations\",\n            authorization: {\n                params: {\n                    scope: \"openid profile email User.Read\"\n                }\n            },\n            profile (profile) {\n                ;\n                return {\n                    id: profile.sub || profile.oid,\n                    name: profile.name || profile.preferred_username,\n                    email: profile.email || profile.preferred_username || `${profile.sub || profile.oid}@microsoft.com`,\n                    image: null,\n                    role: \"student\"\n                };\n            },\n            checks: [\n                \"pkce\",\n                \"state\"\n            ]\n        })\n    ],\n    callbacks: {\n        async signIn ({ user, account, profile, email }) {\n            try {\n                ;\n                // For OAuth providers\n                if (account && account.provider && account.provider !== \"credentials\") {\n                    ;\n                    // Special handling for Microsoft provider\n                    if (account.provider === \"azure-ad\") {\n                        ;\n                    }\n                    // Special handling for Facebook provider\n                    if (account.provider === \"facebook\") {\n                        ;\n                    }\n                    // Validate email presence\n                    let userEmail = user.email || profile?.email || email;\n                    if (!userEmail || typeof userEmail !== \"string\") {\n                        console.error(\"OAuth account missing email:\", {\n                            provider: account.provider,\n                            user,\n                            profile,\n                            email\n                        });\n                        // Instead of throwing an error, continue with a generated email\n                        if (account.provider === \"facebook\") {\n                            user.email = `${user.id}@facebook.com`;\n                            userEmail = user.email;\n                            ;\n                        } else if (account.provider === \"azure-ad\") {\n                            user.email = `${user.id}@microsoft.com`;\n                            userEmail = user.email;\n                            ;\n                        } else {\n                            throw new Error(\"Email is required for authentication\");\n                        }\n                    }\n                    // Ensure userEmail is a string for database operations\n                    const normalizedEmail = typeof userEmail === \"string\" ? userEmail.toLowerCase() : typeof user.email === \"string\" ? user.email.toLowerCase() : \"\";\n                    // Check if user already exists\n                    const existingUser = await (0,_lib_db_services_user_service__WEBPACK_IMPORTED_MODULE_6__.findUserByEmail)(normalizedEmail);\n                    if (existingUser) {\n                        ;\n                        try {\n                            // Update login history and OAuth info\n                            await _lib_db__WEBPACK_IMPORTED_MODULE_7__[\"default\"].user.update({\n                                where: {\n                                    id: existingUser.id\n                                },\n                                data: {\n                                    updatedAt: new Date(),\n                                    name: user.name || existingUser.name\n                                }\n                            });\n                        } catch (updateError) {\n                            console.error(\"Error updating user login history:\", updateError);\n                        // Continue with sign in even if update fails\n                        }\n                        // Set the user ID for the session\n                        user.id = existingUser.id;\n                        user.role = existingUser.role;\n                    } else {\n                        ;\n                        try {\n                            const newUser = await _lib_db__WEBPACK_IMPORTED_MODULE_7__[\"default\"].user.create({\n                                data: {\n                                    name: user.name || profile?.name || \"OAuth User\",\n                                    email: normalizedEmail,\n                                    password: \"\",\n                                    role: \"student\"\n                                }\n                            });\n                            ;\n                            user.id = newUser.id;\n                            user.role = newUser.role;\n                        } catch (createError) {\n                            console.error(\"Error creating new user:\", createError);\n                            throw new Error(\"Failed to create user account\");\n                        }\n                    }\n                } else if (account && account.provider === \"credentials\") {\n                    // For credentials login, update login history\n                    try {\n                        if (user.email) {\n                            const existingUser = await (0,_lib_db_services_user_service__WEBPACK_IMPORTED_MODULE_6__.findUserByEmail)(user.email);\n                            if (existingUser) {\n                                await (0,_lib_db_services_user_service__WEBPACK_IMPORTED_MODULE_6__.updateUserLoginInfo)(existingUser.id);\n                                // Check and award achievements for login if needed\n                                try {\n                                    // We need to dynamically import this to avoid circular dependencies\n                                    const { checkAndAwardAchievements } = await __webpack_require__.e(/*! import() */ \"_rsc_src_services_achievements_ts\").then(__webpack_require__.bind(__webpack_require__, /*! @/services/achievements */ \"(rsc)/./src/services/achievements.ts\"));\n                                    await checkAndAwardAchievements(existingUser.id);\n                                } catch (achievementError) {\n                                    console.error(\"Error checking achievements:\", achievementError);\n                                // Don't fail login if achievements check fails\n                                }\n                            }\n                        }\n                    } catch (error) {\n                        console.error(\"Error updating login history:\", error);\n                    // Don't prevent login if this fails\n                    }\n                }\n                return true;\n            } catch (error) {\n                console.error(\"Error in signIn callback:\", error);\n                return false;\n            }\n        },\n        async jwt ({ token, user, account }) {\n            if (user) {\n                token.id = user.id;\n                token.role = user.role || \"student\";\n            }\n            return token;\n        },\n        async session ({ session, token }) {\n            if (session.user) {\n                session.user.id = token.id;\n                session.user.role = token.role;\n            }\n            return session;\n        },\n        async redirect ({ url, baseUrl }) {\n            ;\n            try {\n                // Handle redirect after sign in\n                if (url.startsWith(\"/\")) {\n                    // For relative URLs, prefix with base URL\n                    return `${baseUrl}${url}`;\n                } else if (new URL(url).origin === baseUrl) {\n                    // Allow redirects to same origin\n                    return url;\n                }\n                // Default to dashboard for all other cases\n                return `${baseUrl}/dashboard`;\n            } catch (error) {\n                console.error(\"Error in redirect callback:\", error);\n                return `${baseUrl}/dashboard`;\n            }\n        }\n    },\n    pages: {\n        signIn: \"/login\",\n        signOut: \"/\",\n        error: \"/login\",\n        verifyRequest: \"/login\",\n        newUser: \"/dashboard\"\n    },\n    session: {\n        strategy: \"jwt\",\n        maxAge: 30 * 24 * 60 * 60\n    },\n    secret: process.env.NEXTAUTH_SECRET,\n    debug: false,\n    logger: {\n        error: (code, metadata)=>{\n            if (code !== \"DEBUG_ENABLED\") {\n                console.error(`[NextAuth][Error][${code}]:`, metadata);\n            }\n        },\n        warn: (code)=>{\n            if (code !== \"DEBUG_ENABLED\") {\n                console.warn(`[NextAuth][Warning][${code}]`);\n            }\n        },\n        debug: ()=>{}\n    },\n    events: {\n        async signIn ({ user, account, isNewUser }) {\n            ;\n        }\n    }\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (authOptions);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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RSxDQUFDLEVBQUVDO1lBQy9DO1FBQ0Y7UUFDQUMsTUFBTSxDQUFDRjtZQUNMLElBQUlBLFNBQVMsaUJBQWlCO2dCQUM1QmhGLFFBQVFrRixJQUFJLENBQUMsQ0FBQyxvQkFBb0IsRUFBRUYsS0FBSyxDQUFDLENBQUM7WUFDN0M7UUFDRjtRQUNBRixPQUFPLEtBQ1A7SUFDRjtJQUNBSyxRQUFRO1FBQ04sTUFBTXBDLFFBQU8sRUFBRWpDLElBQUksRUFBRWtDLE9BQU8sRUFBRW9DLFNBQVMsRUFBRTs7UUFLekM7SUFDRjtBQUNGLEVBQUU7QUFFRixpRUFBZWhGLFdBQVdBLEVBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9jaG9pY2UtZS1sZWFybmluZy8uL3NyYy9saWIvYXV0aC9hdXRoLW9wdGlvbnMudHM/OGRjMyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBOZXh0QXV0aE9wdGlvbnMgfSBmcm9tICduZXh0LWF1dGgnO1xuaW1wb3J0IENyZWRlbnRpYWxzUHJvdmlkZXIgZnJvbSAnbmV4dC1hdXRoL3Byb3ZpZGVycy9jcmVkZW50aWFscyc7XG5pbXBvcnQgR29vZ2xlUHJvdmlkZXIgZnJvbSAnbmV4dC1hdXRoL3Byb3ZpZGVycy9nb29nbGUnO1xuaW1wb3J0IEdpdEh1YlByb3ZpZGVyIGZyb20gJ25leHQtYXV0aC9wcm92aWRlcnMvZ2l0aHViJztcbmltcG9ydCBGYWNlYm9va1Byb3ZpZGVyIGZyb20gJ25leHQtYXV0aC9wcm92aWRlcnMvZmFjZWJvb2snO1xuaW1wb3J0IE1pY3Jvc29mdFByb3ZpZGVyIGZyb20gJ25leHQtYXV0aC9wcm92aWRlcnMvYXp1cmUtYWQnO1xuaW1wb3J0IHsgY29tcGFyZVBhc3N3b3JkcyB9IGZyb20gJy4vdXRpbHMvcGFzc3dvcmQtdXRpbHMnO1xuaW1wb3J0IHsgZmluZFVzZXJCeUVtYWlsLCB1cGRhdGVVc2VyTG9naW5JbmZvIH0gZnJvbSAnQC9saWIvZGIvc2VydmljZXMvdXNlci1zZXJ2aWNlJztcbmltcG9ydCBwcmlzbWEgZnJvbSAnQC9saWIvZGInO1xuXG4vLyBDaGVjayBpZiBlbnZpcm9ubWVudCB2YXJpYWJsZXMgYXJlIHNldFxuZnVuY3Rpb24gdmFsaWRhdGVFbnZWYXJpYWJsZXMoKSB7XG4gIGNvbnN0IHJlcXVpcmVkVmFycyA9IFtcbiAgICB7IGtleTogJ05FWFRBVVRIX1NFQ1JFVCcsIHZhbHVlOiBwcm9jZXNzLmVudi5ORVhUQVVUSF9TRUNSRVQgfSxcbiAgICB7IGtleTogJ05FWFRBVVRIX1VSTCcsIHZhbHVlOiBwcm9jZXNzLmVudi5ORVhUQVVUSF9VUkwgfSxcbiAgICB7IGtleTogJ0ZBQ0VCT09LX0NMSUVOVF9JRCcsIHZhbHVlOiBwcm9jZXNzLmVudi5GQUNFQk9PS19DTElFTlRfSUQgfSxcbiAgICB7IGtleTogJ0ZBQ0VCT09LX0NMSUVOVF9TRUNSRVQnLCB2YWx1ZTogcHJvY2Vzcy5lbnYuRkFDRUJPT0tfQ0xJRU5UX1NFQ1JFVCB9LFxuICAgIHsga2V5OiAnTUlDUk9TT0ZUX0NMSUVOVF9JRCcsIHZhbHVlOiBwcm9jZXNzLmVudi5NSUNST1NPRlRfQ0xJRU5UX0lEIH0sXG4gICAgeyBrZXk6ICdNSUNST1NPRlRfQ0xJRU5UX1NFQ1JFVCcsIHZhbHVlOiBwcm9jZXNzLmVudi5NSUNST1NPRlRfQ0xJRU5UX1NFQ1JFVCB9LFxuICBdO1xuICBcbiAgY29uc3QgbWlzc2luZ1ZhcnMgPSByZXF1aXJlZFZhcnMuZmlsdGVyKHYgPT4gIXYudmFsdWUpO1xuICBcbiAgaWYgKG1pc3NpbmdWYXJzLmxlbmd0aCA+IDApIHtcbiAgICBjb25zb2xlLmVycm9yKCdNaXNzaW5nIHJlcXVpcmVkIGVudmlyb25tZW50IHZhcmlhYmxlczonLCBtaXNzaW5nVmFycy5tYXAodiA9PiB2LmtleSkpO1xuICB9IGVsc2Uge1xuICAgIGNvbnNvbGUubG9nKCdBbGwgcmVxdWlyZWQgZW52aXJvbm1lbnQgdmFyaWFibGVzIGFyZSBzZXQnKTtcbiAgfVxuICBcbiAgLy8gTG9nIHByb3ZpZGVyIGRldGFpbHMgZm9yIGRlYnVnZ2luZ1xuICBjb25zb2xlLmxvZygnT0F1dGggUHJvdmlkZXIgRGV0YWlsczonKTtcbiAgY29uc29sZS5sb2coJy0gRmFjZWJvb2sgQ2xpZW50IElEOicsIHByb2Nlc3MuZW52LkZBQ0VCT09LX0NMSUVOVF9JRD8uc3Vic3RyaW5nKDAsIDUpICsgJy4uLicpO1xuICBjb25zb2xlLmxvZygnLSBNaWNyb3NvZnQgQ2xpZW50IElEOicsIHByb2Nlc3MuZW52Lk1JQ1JPU09GVF9DTElFTlRfSUQ/LnN1YnN0cmluZygwLCA1KSArICcuLi4nKTtcbn1cblxuLy8gVmFsaWRhdGUgZW52aXJvbm1lbnQgdmFyaWFibGVzIG9uIHN0YXJ0dXBcbnZhbGlkYXRlRW52VmFyaWFibGVzKCk7XG5cbi8vIERlZmluZSBSb2xlIGVudW1cbmV4cG9ydCBlbnVtIFJvbGUge1xuICBzdHVkZW50ID0gJ3N0dWRlbnQnLFxuICBpbnN0cnVjdG9yID0gJ2luc3RydWN0b3InLFxuICBhZG1pbiA9ICdhZG1pbidcbn1cblxuLy8gRXh0ZW5kIHRoZSBidWlsdC1pbiBzZXNzaW9uIHR5cGVzXG5kZWNsYXJlIG1vZHVsZSBcIm5leHQtYXV0aFwiIHtcbiAgaW50ZXJmYWNlIFVzZXIge1xuICAgIGlkOiBzdHJpbmc7XG4gICAgcm9sZTogUm9sZTtcbiAgfVxuICBcbiAgaW50ZXJmYWNlIFNlc3Npb24ge1xuICAgIHVzZXI6IHtcbiAgICAgIGlkOiBzdHJpbmc7XG4gICAgICBuYW1lPzogc3RyaW5nIHwgbnVsbDtcbiAgICAgIGVtYWlsPzogc3RyaW5nIHwgbnVsbDtcbiAgICAgIGltYWdlPzogc3RyaW5nIHwgbnVsbDtcbiAgICAgIHJvbGU6IFJvbGU7XG4gICAgfVxuICB9XG59XG5cbmRlY2xhcmUgbW9kdWxlIFwibmV4dC1hdXRoL2p3dFwiIHtcbiAgaW50ZXJmYWNlIEpXVCB7XG4gICAgaWQ6IHN0cmluZztcbiAgICByb2xlOiBSb2xlO1xuICB9XG59XG5cbmV4cG9ydCBjb25zdCBhdXRoT3B0aW9uczogTmV4dEF1dGhPcHRpb25zID0ge1xuICBwcm92aWRlcnM6IFtcbiAgICBDcmVkZW50aWFsc1Byb3ZpZGVyKHtcbiAgICAgIG5hbWU6ICdDcmVkZW50aWFscycsXG4gICAgICBjcmVkZW50aWFsczoge1xuICAgICAgICBlbWFpbDogeyBsYWJlbDogJ0VtYWlsJywgdHlwZTogJ2VtYWlsJyB9LFxuICAgICAgICBwYXNzd29yZDogeyBsYWJlbDogJ1Bhc3N3b3JkJywgdHlwZTogJ3Bhc3N3b3JkJyB9LFxuICAgICAgfSxcbiAgICAgIGFzeW5jIGF1dGhvcml6ZShjcmVkZW50aWFscykge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIGlmICghY3JlZGVudGlhbHM/LmVtYWlsIHx8ICFjcmVkZW50aWFscz8ucGFzc3dvcmQpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ01pc3NpbmcgY3JlZGVudGlhbHMnKTtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignRW1haWwgYW5kIHBhc3N3b3JkIGFyZSByZXF1aXJlZCcpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIC8vIEZpbmQgdGhlIHVzZXIgYnkgZW1haWwgKGNhc2UgaW5zZW5zaXRpdmUpXG4gICAgICAgICAgY29uc3QgdXNlciA9IGF3YWl0IGZpbmRVc2VyQnlFbWFpbChjcmVkZW50aWFscy5lbWFpbCk7XG5cbiAgICAgICAgICAvLyBJZiB1c2VyIGRvZXNuJ3QgZXhpc3RcbiAgICAgICAgICBpZiAoIXVzZXIpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1VzZXIgbm90IGZvdW5kJyk7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgZW1haWwgb3IgcGFzc3dvcmQnKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICAvLyBWZXJpZnkgdGhlIHBhc3N3b3JkXG4gICAgICAgICAgY29uc3QgaXNQYXNzd29yZFZhbGlkID0gYXdhaXQgY29tcGFyZVBhc3N3b3JkcyhjcmVkZW50aWFscy5wYXNzd29yZCwgdXNlci5wYXNzd29yZCk7XG4gICAgICAgICAgaWYgKCFpc1Bhc3N3b3JkVmFsaWQpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1Bhc3N3b3JkIGludmFsaWQnKTtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignSW52YWxpZCBlbWFpbCBvciBwYXNzd29yZCcpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGNvbnNvbGUubG9nKCdBdXRoZW50aWNhdGlvbiBzdWNjZXNzZnVsIGZvcjonLCBjcmVkZW50aWFscy5lbWFpbCk7XG5cbiAgICAgICAgICAvLyBSZXR1cm4gdXNlciBvYmplY3Qgd2l0aG91dCBwYXNzd29yZFxuICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBpZDogdXNlci5pZCxcbiAgICAgICAgICAgIG5hbWU6IHVzZXIubmFtZSxcbiAgICAgICAgICAgIGVtYWlsOiB1c2VyLmVtYWlsLFxuICAgICAgICAgICAgcm9sZTogdXNlci5yb2xlIGFzIFJvbGVcbiAgICAgICAgICB9O1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0F1dGhlbnRpY2F0aW9uIGVycm9yOicsIGVycm9yKTtcbiAgICAgICAgICAvLyBSZS10aHJvdyB0byBiZSBoYW5kbGVkIGJ5IE5leHRBdXRoXG4gICAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgfSksXG4gICAgXG4gICAgLy8gQWRkIEdvb2dsZSBQcm92aWRlclxuICAgIEdvb2dsZVByb3ZpZGVyKHtcbiAgICAgIGNsaWVudElkOiBwcm9jZXNzLmVudi5HT09HTEVfQ0xJRU5UX0lEIHx8ICcnLFxuICAgICAgY2xpZW50U2VjcmV0OiBwcm9jZXNzLmVudi5HT09HTEVfQ0xJRU5UX1NFQ1JFVCB8fCAnJyxcbiAgICAgIGF1dGhvcml6YXRpb246IHtcbiAgICAgICAgcGFyYW1zOiB7XG4gICAgICAgICAgcHJvbXB0OiBcImNvbnNlbnRcIixcbiAgICAgICAgICBhY2Nlc3NfdHlwZTogXCJvZmZsaW5lXCIsXG4gICAgICAgICAgcmVzcG9uc2VfdHlwZTogXCJjb2RlXCJcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pLFxuICAgIFxuICAgIC8vIEFkZCBHaXRIdWIgUHJvdmlkZXJcbiAgICBHaXRIdWJQcm92aWRlcih7XG4gICAgICBjbGllbnRJZDogcHJvY2Vzcy5lbnYuR0lUSFVCX0NMSUVOVF9JRCB8fCAnJyxcbiAgICAgIGNsaWVudFNlY3JldDogcHJvY2Vzcy5lbnYuR0lUSFVCX0NMSUVOVF9TRUNSRVQgfHwgJycsXG4gICAgfSksXG4gICAgXG4gICAgLy8gQWRkIEZhY2Vib29rIFByb3ZpZGVyXG4gICAgRmFjZWJvb2tQcm92aWRlcih7XG4gICAgICBjbGllbnRJZDogcHJvY2Vzcy5lbnYuRkFDRUJPT0tfQ0xJRU5UX0lEIHx8ICcnLFxuICAgICAgY2xpZW50U2VjcmV0OiBwcm9jZXNzLmVudi5GQUNFQk9PS19DTElFTlRfU0VDUkVUIHx8ICcnLFxuICAgICAgdmVyc2lvbjogXCIxMi4wXCIsIC8vIFNldCBsYXRlc3QgQVBJIHZlcnNpb25cbiAgICAgIGF1dGhvcml6YXRpb246IHtcbiAgICAgICAgcGFyYW1zOiB7XG4gICAgICAgICAgc2NvcGU6IFwiZW1haWwscHVibGljX3Byb2ZpbGVcIixcbiAgICAgICAgICBkaXNwbGF5OiBcInBvcHVwXCIsXG4gICAgICAgICAgYXV0aF90eXBlOiBcInJlcmVxdWVzdFwiXG4gICAgICAgIH0sXG4gICAgICB9LFxuICAgICAgdXNlcmluZm86IHtcbiAgICAgICAgdXJsOiBcImh0dHBzOi8vZ3JhcGguZmFjZWJvb2suY29tL21lXCIsXG4gICAgICAgIHBhcmFtczogeyBcbiAgICAgICAgICBmaWVsZHM6IFwiaWQsbmFtZSxlbWFpbCxwaWN0dXJlXCIgXG4gICAgICAgIH0sXG4gICAgICB9LFxuICAgICAgcHJvZmlsZShwcm9maWxlKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdGYWNlYm9vayBwcm9maWxlIGRhdGE6JywgcHJvZmlsZSk7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgaWQ6IHByb2ZpbGUuaWQsXG4gICAgICAgICAgbmFtZTogcHJvZmlsZS5uYW1lLFxuICAgICAgICAgIGVtYWlsOiBwcm9maWxlLmVtYWlsIHx8IGAke3Byb2ZpbGUuaWR9QGZhY2Vib29rLmNvbWAsIC8vIFByb3ZpZGUgZmFsbGJhY2sgZW1haWxcbiAgICAgICAgICBpbWFnZTogcHJvZmlsZS5waWN0dXJlPy5kYXRhPy51cmwsXG4gICAgICAgICAgcm9sZTogUm9sZS5zdHVkZW50LFxuICAgICAgICB9O1xuICAgICAgfSxcbiAgICAgIGNoZWNrczogW1wic3RhdGVcIl0sXG4gICAgfSksXG4gICAgXG4gICAgLy8gQWRkIE1pY3Jvc29mdCBQcm92aWRlciAodmlhIEF6dXJlIEFEKVxuICAgIE1pY3Jvc29mdFByb3ZpZGVyKHtcbiAgICAgIGNsaWVudElkOiBwcm9jZXNzLmVudi5NSUNST1NPRlRfQ0xJRU5UX0lEIHx8ICcnLFxuICAgICAgY2xpZW50U2VjcmV0OiBwcm9jZXNzLmVudi5NSUNST1NPRlRfQ0xJRU5UX1NFQ1JFVCB8fCAnJyxcbiAgICAgIHRlbmFudElkOiBwcm9jZXNzLmVudi5NSUNST1NPRlRfVEVOQU5UX0lEIHx8IFwib3JnYW5pemF0aW9uc1wiLCAvLyBDaGFuZ2UgZnJvbSBcImNvbW1vblwiIHRvIFwib3JnYW5pemF0aW9uc1wiIFxuICAgICAgYXV0aG9yaXphdGlvbjoge1xuICAgICAgICBwYXJhbXM6IHtcbiAgICAgICAgICBzY29wZTogXCJvcGVuaWQgcHJvZmlsZSBlbWFpbCBVc2VyLlJlYWRcIixcbiAgICAgICAgfSxcbiAgICAgIH0sXG4gICAgICBwcm9maWxlKHByb2ZpbGUpIHtcbiAgICAgICAgY29uc29sZS5sb2coJ01pY3Jvc29mdCBwcm9maWxlIGRhdGE6JywgcHJvZmlsZSk7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgaWQ6IHByb2ZpbGUuc3ViIHx8IHByb2ZpbGUub2lkLFxuICAgICAgICAgIG5hbWU6IHByb2ZpbGUubmFtZSB8fCBwcm9maWxlLnByZWZlcnJlZF91c2VybmFtZSxcbiAgICAgICAgICBlbWFpbDogcHJvZmlsZS5lbWFpbCB8fCBwcm9maWxlLnByZWZlcnJlZF91c2VybmFtZSB8fCBgJHtwcm9maWxlLnN1YiB8fCBwcm9maWxlLm9pZH1AbWljcm9zb2Z0LmNvbWAsIC8vIFByb3ZpZGUgZmFsbGJhY2sgZW1haWxcbiAgICAgICAgICBpbWFnZTogbnVsbCxcbiAgICAgICAgICByb2xlOiBSb2xlLnN0dWRlbnQsXG4gICAgICAgIH07XG4gICAgICB9LFxuICAgICAgY2hlY2tzOiBbXCJwa2NlXCIsIFwic3RhdGVcIl0sXG4gICAgfSksXG4gIF0sXG4gIGNhbGxiYWNrczoge1xuICAgIGFzeW5jIHNpZ25Jbih7IHVzZXIsIGFjY291bnQsIHByb2ZpbGUsIGVtYWlsIH0pIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdTaWduSW4gY2FsbGJhY2sgdHJpZ2dlcmVkOicsIHsgXG4gICAgICAgICAgcHJvdmlkZXI6IGFjY291bnQ/LnByb3ZpZGVyLFxuICAgICAgICAgIGhhc1VzZXI6ICEhdXNlcixcbiAgICAgICAgICBoYXNQcm9maWxlOiAhIXByb2ZpbGVcbiAgICAgICAgfSk7XG4gICAgICAgIFxuICAgICAgICAvLyBGb3IgT0F1dGggcHJvdmlkZXJzXG4gICAgICAgIGlmIChhY2NvdW50ICYmIGFjY291bnQucHJvdmlkZXIgJiYgYWNjb3VudC5wcm92aWRlciAhPT0gJ2NyZWRlbnRpYWxzJykge1xuICAgICAgICAgIGNvbnNvbGUubG9nKGBPQXV0aCBsb2dpbiBhdHRlbXB0IHdpdGggJHthY2NvdW50LnByb3ZpZGVyfTpgLCB7XG4gICAgICAgICAgICBhY2NvdW50VHlwZTogYWNjb3VudC50eXBlLFxuICAgICAgICAgICAgYWNjb3VudElkOiBhY2NvdW50LnByb3ZpZGVyQWNjb3VudElkLFxuICAgICAgICAgICAgaGFzVG9rZW5zOiAhIWFjY291bnQuYWNjZXNzX3Rva2VuXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgXG4gICAgICAgICAgLy8gU3BlY2lhbCBoYW5kbGluZyBmb3IgTWljcm9zb2Z0IHByb3ZpZGVyXG4gICAgICAgICAgaWYgKGFjY291bnQucHJvdmlkZXIgPT09ICdhenVyZS1hZCcpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdNaWNyb3NvZnQgbG9naW4gZGV0YWlsczonLCB7XG4gICAgICAgICAgICAgIHRva2VuVHlwZTogYWNjb3VudC50b2tlbl90eXBlLFxuICAgICAgICAgICAgICBzY29wZXM6IGFjY291bnQuc2NvcGUsXG4gICAgICAgICAgICAgIGV4cGlyZXNBdDogYWNjb3VudC5leHBpcmVzX2F0XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XG4gICAgICAgICAgXG4gICAgICAgICAgLy8gU3BlY2lhbCBoYW5kbGluZyBmb3IgRmFjZWJvb2sgcHJvdmlkZXJcbiAgICAgICAgICBpZiAoYWNjb3VudC5wcm92aWRlciA9PT0gJ2ZhY2Vib29rJykge1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ0ZhY2Vib29rIGxvZ2luIGRldGFpbHM6Jywge1xuICAgICAgICAgICAgICB0b2tlblR5cGU6IGFjY291bnQudG9rZW5fdHlwZSxcbiAgICAgICAgICAgICAgc2NvcGVzOiBhY2NvdW50LnNjb3BlLFxuICAgICAgICAgICAgICBleHBpcmVzQXQ6IGFjY291bnQuZXhwaXJlc19hdFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIFxuICAgICAgICAgIC8vIFZhbGlkYXRlIGVtYWlsIHByZXNlbmNlXG4gICAgICAgICAgbGV0IHVzZXJFbWFpbCA9IHVzZXIuZW1haWwgfHwgcHJvZmlsZT8uZW1haWwgfHwgZW1haWw7XG4gICAgICAgICAgaWYgKCF1c2VyRW1haWwgfHwgdHlwZW9mIHVzZXJFbWFpbCAhPT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ09BdXRoIGFjY291bnQgbWlzc2luZyBlbWFpbDonLCB7IFxuICAgICAgICAgICAgICBwcm92aWRlcjogYWNjb3VudC5wcm92aWRlciwgXG4gICAgICAgICAgICAgIHVzZXIsXG4gICAgICAgICAgICAgIHByb2ZpbGUsXG4gICAgICAgICAgICAgIGVtYWlsIFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAvLyBJbnN0ZWFkIG9mIHRocm93aW5nIGFuIGVycm9yLCBjb250aW51ZSB3aXRoIGEgZ2VuZXJhdGVkIGVtYWlsXG4gICAgICAgICAgICBpZiAoYWNjb3VudC5wcm92aWRlciA9PT0gJ2ZhY2Vib29rJykge1xuICAgICAgICAgICAgICB1c2VyLmVtYWlsID0gYCR7dXNlci5pZH1AZmFjZWJvb2suY29tYDtcbiAgICAgICAgICAgICAgdXNlckVtYWlsID0gdXNlci5lbWFpbDtcbiAgICAgICAgICAgICAgY29uc29sZS5sb2coJ1VzaW5nIGdlbmVyYXRlZCBlbWFpbCBmb3IgRmFjZWJvb2s6JywgdXNlci5lbWFpbCk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGFjY291bnQucHJvdmlkZXIgPT09ICdhenVyZS1hZCcpIHtcbiAgICAgICAgICAgICAgdXNlci5lbWFpbCA9IGAke3VzZXIuaWR9QG1pY3Jvc29mdC5jb21gO1xuICAgICAgICAgICAgICB1c2VyRW1haWwgPSB1c2VyLmVtYWlsO1xuICAgICAgICAgICAgICBjb25zb2xlLmxvZygnVXNpbmcgZ2VuZXJhdGVkIGVtYWlsIGZvciBNaWNyb3NvZnQ6JywgdXNlci5lbWFpbCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0VtYWlsIGlzIHJlcXVpcmVkIGZvciBhdXRoZW50aWNhdGlvbicpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBcbiAgICAgICAgICAvLyBFbnN1cmUgdXNlckVtYWlsIGlzIGEgc3RyaW5nIGZvciBkYXRhYmFzZSBvcGVyYXRpb25zXG4gICAgICAgICAgY29uc3Qgbm9ybWFsaXplZEVtYWlsID0gdHlwZW9mIHVzZXJFbWFpbCA9PT0gJ3N0cmluZycgPyB1c2VyRW1haWwudG9Mb3dlckNhc2UoKSA6IFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKHR5cGVvZiB1c2VyLmVtYWlsID09PSAnc3RyaW5nJyA/IHVzZXIuZW1haWwudG9Mb3dlckNhc2UoKSA6ICcnKTtcbiAgICAgICAgICBcbiAgICAgICAgICAvLyBDaGVjayBpZiB1c2VyIGFscmVhZHkgZXhpc3RzXG4gICAgICAgICAgY29uc3QgZXhpc3RpbmdVc2VyID0gYXdhaXQgZmluZFVzZXJCeUVtYWlsKG5vcm1hbGl6ZWRFbWFpbCk7XG4gICAgICAgICAgXG4gICAgICAgICAgaWYgKGV4aXN0aW5nVXNlcikge1xuICAgICAgICAgICAgLy8gVXNlciBleGlzdHMsIHVwZGF0ZSB0aGVpciBPQXV0aCBpbmZvIGFuZCBsb2dpbiBoaXN0b3J5XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhgRXhpc3RpbmcgdXNlciAke25vcm1hbGl6ZWRFbWFpbH0gc2lnbmVkIGluIHZpYSAke2FjY291bnQucHJvdmlkZXJ9YCk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgIC8vIFVwZGF0ZSBsb2dpbiBoaXN0b3J5IGFuZCBPQXV0aCBpbmZvXG4gICAgICAgICAgICAgIGF3YWl0IHByaXNtYS51c2VyLnVwZGF0ZSh7XG4gICAgICAgICAgICAgICAgd2hlcmU6IHsgaWQ6IGV4aXN0aW5nVXNlci5pZCB9LFxuICAgICAgICAgICAgICAgIGRhdGE6IHsgXG4gICAgICAgICAgICAgICAgICB1cGRhdGVkQXQ6IG5ldyBEYXRlKCksXG4gICAgICAgICAgICAgICAgICBuYW1lOiB1c2VyLm5hbWUgfHwgZXhpc3RpbmdVc2VyLm5hbWUsXG4gICAgICAgICAgICAgICAgICAvLyBOb3RlOiBBZGQgbW9yZSBmaWVsZHMgYXMgbmVlZGVkIGJhc2VkIG9uIHlvdXIgVXNlciBtb2RlbFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9IGNhdGNoICh1cGRhdGVFcnJvcikge1xuICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciB1cGRhdGluZyB1c2VyIGxvZ2luIGhpc3Rvcnk6JywgdXBkYXRlRXJyb3IpO1xuICAgICAgICAgICAgICAvLyBDb250aW51ZSB3aXRoIHNpZ24gaW4gZXZlbiBpZiB1cGRhdGUgZmFpbHNcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gU2V0IHRoZSB1c2VyIElEIGZvciB0aGUgc2Vzc2lvblxuICAgICAgICAgICAgdXNlci5pZCA9IGV4aXN0aW5nVXNlci5pZDtcbiAgICAgICAgICAgIHVzZXIucm9sZSA9IGV4aXN0aW5nVXNlci5yb2xlIGFzIFJvbGU7XG4gICAgICAgICAgICBcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLy8gQ3JlYXRlIGEgbmV3IHVzZXIgZnJvbSBPQXV0aCBkYXRhXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhgQ3JlYXRpbmcgbmV3IHVzZXIgZnJvbSAke2FjY291bnQucHJvdmlkZXJ9IE9BdXRoOmAsIHVzZXJFbWFpbCk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgIGNvbnN0IG5ld1VzZXIgPSBhd2FpdCBwcmlzbWEudXNlci5jcmVhdGUoe1xuICAgICAgICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgICAgICAgIG5hbWU6IHVzZXIubmFtZSB8fCBwcm9maWxlPy5uYW1lIHx8ICdPQXV0aCBVc2VyJyxcbiAgICAgICAgICAgICAgICAgIGVtYWlsOiBub3JtYWxpemVkRW1haWwsXG4gICAgICAgICAgICAgICAgICBwYXNzd29yZDogJycsIC8vIEVtcHR5IHBhc3N3b3JkIGZvciBPQXV0aCB1c2Vyc1xuICAgICAgICAgICAgICAgICAgcm9sZTogJ3N0dWRlbnQnLFxuICAgICAgICAgICAgICAgICAgLy8gQWRkIG90aGVyIGZpZWxkcyBhcyBuZWVkZWRcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgY29uc29sZS5sb2coJ0NyZWF0ZWQgbmV3IHVzZXIgZnJvbSBPQXV0aDonLCBuZXdVc2VyLmlkKTtcbiAgICAgICAgICAgICAgdXNlci5pZCA9IG5ld1VzZXIuaWQ7XG4gICAgICAgICAgICAgIHVzZXIucm9sZSA9IG5ld1VzZXIucm9sZSBhcyBSb2xlO1xuICAgICAgICAgICAgICBcbiAgICAgICAgICAgIH0gY2F0Y2ggKGNyZWF0ZUVycm9yKSB7XG4gICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGNyZWF0aW5nIG5ldyB1c2VyOicsIGNyZWF0ZUVycm9yKTtcbiAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdGYWlsZWQgdG8gY3JlYXRlIHVzZXIgYWNjb3VudCcpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmIChhY2NvdW50ICYmIGFjY291bnQucHJvdmlkZXIgPT09ICdjcmVkZW50aWFscycpIHtcbiAgICAgICAgICAvLyBGb3IgY3JlZGVudGlhbHMgbG9naW4sIHVwZGF0ZSBsb2dpbiBoaXN0b3J5XG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGlmICh1c2VyLmVtYWlsKSB7XG4gICAgICAgICAgICAgIGNvbnN0IGV4aXN0aW5nVXNlciA9IGF3YWl0IGZpbmRVc2VyQnlFbWFpbCh1c2VyLmVtYWlsKTtcbiAgICAgICAgICAgICAgaWYgKGV4aXN0aW5nVXNlcikge1xuICAgICAgICAgICAgICAgIGF3YWl0IHVwZGF0ZVVzZXJMb2dpbkluZm8oZXhpc3RpbmdVc2VyLmlkKTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAvLyBDaGVjayBhbmQgYXdhcmQgYWNoaWV2ZW1lbnRzIGZvciBsb2dpbiBpZiBuZWVkZWRcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgLy8gV2UgbmVlZCB0byBkeW5hbWljYWxseSBpbXBvcnQgdGhpcyB0byBhdm9pZCBjaXJjdWxhciBkZXBlbmRlbmNpZXNcbiAgICAgICAgICAgICAgICAgIGNvbnN0IHsgY2hlY2tBbmRBd2FyZEFjaGlldmVtZW50cyB9ID0gYXdhaXQgaW1wb3J0KCdAL3NlcnZpY2VzL2FjaGlldmVtZW50cycpO1xuICAgICAgICAgICAgICAgICAgYXdhaXQgY2hlY2tBbmRBd2FyZEFjaGlldmVtZW50cyhleGlzdGluZ1VzZXIuaWQpO1xuICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGFjaGlldmVtZW50RXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGNoZWNraW5nIGFjaGlldmVtZW50czonLCBhY2hpZXZlbWVudEVycm9yKTtcbiAgICAgICAgICAgICAgICAgIC8vIERvbid0IGZhaWwgbG9naW4gaWYgYWNoaWV2ZW1lbnRzIGNoZWNrIGZhaWxzXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHVwZGF0aW5nIGxvZ2luIGhpc3Rvcnk6JywgZXJyb3IpO1xuICAgICAgICAgICAgLy8gRG9uJ3QgcHJldmVudCBsb2dpbiBpZiB0aGlzIGZhaWxzXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGluIHNpZ25JbiBjYWxsYmFjazonLCBlcnJvcik7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICB9LFxuICAgIFxuICAgIGFzeW5jIGp3dCh7IHRva2VuLCB1c2VyLCBhY2NvdW50IH0pIHtcbiAgICAgIGlmICh1c2VyKSB7XG4gICAgICAgIHRva2VuLmlkID0gdXNlci5pZDtcbiAgICAgICAgdG9rZW4ucm9sZSA9IHVzZXIucm9sZSB8fCBSb2xlLnN0dWRlbnQ7XG4gICAgICB9XG4gICAgICByZXR1cm4gdG9rZW47XG4gICAgfSxcbiAgICBcbiAgICBhc3luYyBzZXNzaW9uKHsgc2Vzc2lvbiwgdG9rZW4gfSkge1xuICAgICAgaWYgKHNlc3Npb24udXNlcikge1xuICAgICAgICBzZXNzaW9uLnVzZXIuaWQgPSB0b2tlbi5pZDtcbiAgICAgICAgc2Vzc2lvbi51c2VyLnJvbGUgPSB0b2tlbi5yb2xlO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHNlc3Npb247XG4gICAgfSxcbiAgICBcbiAgICBhc3luYyByZWRpcmVjdCh7IHVybCwgYmFzZVVybCB9KSB7XG4gICAgICBjb25zb2xlLmxvZygnUmVkaXJlY3QgY2FsbGJhY2sgY2FsbGVkIHdpdGg6JywgeyB1cmwsIGJhc2VVcmwgfSk7XG4gICAgICBcbiAgICAgIHRyeSB7XG4gICAgICAgIC8vIEhhbmRsZSByZWRpcmVjdCBhZnRlciBzaWduIGluXG4gICAgICAgIGlmICh1cmwuc3RhcnRzV2l0aCgnLycpKSB7XG4gICAgICAgICAgLy8gRm9yIHJlbGF0aXZlIFVSTHMsIHByZWZpeCB3aXRoIGJhc2UgVVJMXG4gICAgICAgICAgcmV0dXJuIGAke2Jhc2VVcmx9JHt1cmx9YDtcbiAgICAgICAgfSBlbHNlIGlmIChuZXcgVVJMKHVybCkub3JpZ2luID09PSBiYXNlVXJsKSB7XG4gICAgICAgICAgLy8gQWxsb3cgcmVkaXJlY3RzIHRvIHNhbWUgb3JpZ2luXG4gICAgICAgICAgcmV0dXJuIHVybDtcbiAgICAgICAgfVxuICAgICAgICAvLyBEZWZhdWx0IHRvIGRhc2hib2FyZCBmb3IgYWxsIG90aGVyIGNhc2VzXG4gICAgICAgIHJldHVybiBgJHtiYXNlVXJsfS9kYXNoYm9hcmRgO1xuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgaW4gcmVkaXJlY3QgY2FsbGJhY2s6JywgZXJyb3IpO1xuICAgICAgICByZXR1cm4gYCR7YmFzZVVybH0vZGFzaGJvYXJkYDtcbiAgICAgIH1cbiAgICB9LFxuICB9LFxuICBwYWdlczoge1xuICAgIHNpZ25JbjogJy9sb2dpbicsXG4gICAgc2lnbk91dDogJy8nLFxuICAgIGVycm9yOiAnL2xvZ2luJyxcbiAgICB2ZXJpZnlSZXF1ZXN0OiAnL2xvZ2luJyxcbiAgICBuZXdVc2VyOiAnL2Rhc2hib2FyZCdcbiAgfSxcbiAgc2Vzc2lvbjoge1xuICAgIHN0cmF0ZWd5OiBcImp3dFwiLFxuICAgIG1heEFnZTogMzAgKiAyNCAqIDYwICogNjAsIC8vIDMwIGRheXNcbiAgfSxcbiAgc2VjcmV0OiBwcm9jZXNzLmVudi5ORVhUQVVUSF9TRUNSRVQsXG4gIGRlYnVnOiBmYWxzZSxcbiAgbG9nZ2VyOiB7XG4gICAgZXJyb3I6IChjb2RlLCBtZXRhZGF0YSkgPT4ge1xuICAgICAgaWYgKGNvZGUgIT09ICdERUJVR19FTkFCTEVEJykge1xuICAgICAgICBjb25zb2xlLmVycm9yKGBbTmV4dEF1dGhdW0Vycm9yXVske2NvZGV9XTpgLCBtZXRhZGF0YSk7XG4gICAgICB9XG4gICAgfSxcbiAgICB3YXJuOiAoY29kZSkgPT4ge1xuICAgICAgaWYgKGNvZGUgIT09ICdERUJVR19FTkFCTEVEJykge1xuICAgICAgICBjb25zb2xlLndhcm4oYFtOZXh0QXV0aF1bV2FybmluZ11bJHtjb2RlfV1gKTtcbiAgICAgIH1cbiAgICB9LFxuICAgIGRlYnVnOiAoKSA9PiB7XG4gICAgfSxcbiAgfSxcbiAgZXZlbnRzOiB7XG4gICAgYXN5bmMgc2lnbkluKHsgdXNlciwgYWNjb3VudCwgaXNOZXdVc2VyIH0pIHtcbiAgICAgIGNvbnNvbGUubG9nKGBVc2VyICR7dXNlci5lbWFpbH0gc2lnbmVkIGluIHZpYSAke2FjY291bnQ/LnByb3ZpZGVyfWAsIHtcbiAgICAgICAgaXNOZXdVc2VyLFxuICAgICAgICB1c2VySWQ6IHVzZXIuaWRcbiAgICAgIH0pO1xuICAgIH1cbiAgfSxcbn07XG5cbmV4cG9ydCBkZWZhdWx0IGF1dGhPcHRpb25zOyJdLCJuYW1lcyI6WyJDcmVkZW50aWFsc1Byb3ZpZGVyIiwiR29vZ2xlUHJvdmlkZXIiLCJHaXRIdWJQcm92aWRlciIsIkZhY2Vib29rUHJvdmlkZXIiLCJNaWNyb3NvZnRQcm92aWRlciIsImNvbXBhcmVQYXNzd29yZHMiLCJmaW5kVXNlckJ5RW1haWwiLCJ1cGRhdGVVc2VyTG9naW5JbmZvIiwicHJpc21hIiwidmFsaWRhdGVFbnZWYXJpYWJsZXMiLCJyZXF1aXJlZFZhcnMiLCJrZXkiLCJ2YWx1ZSIsInByb2Nlc3MiLCJlbnYiLCJORVhUQVVUSF9TRUNSRVQiLCJORVhUQVVUSF9VUkwiLCJGQUNFQk9PS19DTElFTlRfSUQiLCJGQUNFQk9PS19DTElFTlRfU0VDUkVUIiwiTUlDUk9TT0ZUX0NMSUVOVF9JRCIsIk1JQ1JPU09GVF9DTElFTlRfU0VDUkVUIiwibWlzc2luZ1ZhcnMiLCJmaWx0ZXIiLCJ2IiwibGVuZ3RoIiwiY29uc29sZSIsImVycm9yIiwibWFwIiwiUm9sZSIsImF1dGhPcHRpb25zIiwicHJvdmlkZXJzIiwibmFtZSIsImNyZWRlbnRpYWxzIiwiZW1haWwiLCJsYWJlbCIsInR5cGUiLCJwYXNzd29yZCIsImF1dGhvcml6ZSIsIkVycm9yIiwidXNlciIsImlzUGFzc3dvcmRWYWxpZCIsImlkIiwicm9sZSIsImNsaWVudElkIiwiR09PR0xFX0NMSUVOVF9JRCIsImNsaWVudFNlY3JldCIsIkdPT0dMRV9DTElFTlRfU0VDUkVUIiwiYXV0aG9yaXphdGlvbiIsInBhcmFtcyIsInByb21wdCIsImFjY2Vzc190eXBlIiwicmVzcG9uc2VfdHlwZSIsIkdJVEhVQl9DTElFTlRfSUQiLCJHSVRIVUJfQ0xJRU5UX1NFQ1JFVCIsInZlcnNpb24iLCJzY29wZSIsImRpc3BsYXkiLCJhdXRoX3R5cGUiLCJ1c2VyaW5mbyIsInVybCIsImZpZWxkcyIsInByb2ZpbGUiLCJpbWFnZSIsInBpY3R1cmUiLCJkYXRhIiwiY2hlY2tzIiwidGVuYW50SWQiLCJNSUNST1NPRlRfVEVOQU5UX0lEIiwic3ViIiwib2lkIiwicHJlZmVycmVkX3VzZXJuYW1lIiwiY2FsbGJhY2tzIiwic2lnbkluIiwiYWNjb3VudCIsInByb3ZpZGVyIiwidXNlckVtYWlsIiwibm9ybWFsaXplZEVtYWlsIiwidG9Mb3dlckNhc2UiLCJleGlzdGluZ1VzZXIiLCJ1cGRhdGUiLCJ3aGVyZSIsInVwZGF0ZWRBdCIsIkRhdGUiLCJ1cGRhdGVFcnJvciIsIm5ld1VzZXIiLCJjcmVhdGUiLCJjcmVhdGVFcnJvciIsImNoZWNrQW5kQXdhcmRBY2hpZXZlbWVudHMiLCJhY2hpZXZlbWVudEVycm9yIiwiand0IiwidG9rZW4iLCJzZXNzaW9uIiwicmVkaXJlY3QiLCJiYXNlVXJsIiwic3RhcnRzV2l0aCIsIlVSTCIsIm9yaWdpbiIsInBhZ2VzIiwic2lnbk91dCIsInZlcmlmeVJlcXVlc3QiLCJzdHJhdGVneSIsIm1heEFnZSIsInNlY3JldCIsImRlYnVnIiwibG9nZ2VyIiwiY29kZSIsIm1ldGFkYXRhIiwid2FybiIsImV2ZW50cyIsImlzTmV3VXNlciJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/auth/auth-options.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/auth/roles.ts":
/*!*******************************!*\
  !*** ./src/lib/auth/roles.ts ***!
  \*******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   hasPermission: () => (/* binding */ hasPermission),\n/* harmony export */   hasRole: () => (/* binding */ hasRole),\n/* harmony export */   isAdmin: () => (/* binding */ isAdmin),\n/* harmony export */   isAuthenticated: () => (/* binding */ isAuthenticated),\n/* harmony export */   isStudent: () => (/* binding */ isStudent)\n/* harmony export */ });\n/* harmony import */ var _auth_options__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./auth-options */ \"(rsc)/./src/lib/auth/auth-options.ts\");\n\n/**\n * Role management utilities\n * Centralized utilities for role-based access control\n */ /**\n * Check if a user has the admin role\n * @param user The user object\n * @returns True if the user is an admin, false otherwise\n */ function isAdmin(user) {\n    if (!user) return false;\n    return user.role === _auth_options__WEBPACK_IMPORTED_MODULE_0__.Role.admin;\n}\n/**\n * Check if a user has the student role\n * @param user The user object\n * @returns True if the user is a student, false otherwise\n */ function isStudent(user) {\n    if (!user) return false;\n    return user.role === _auth_options__WEBPACK_IMPORTED_MODULE_0__.Role.student;\n}\n/**\n * Check if a user has the required role\n * @param user The user object\n * @param requiredRole The required role\n * @returns True if the user has the required role, false otherwise\n */ function hasRole(user, requiredRole) {\n    if (!user) return false;\n    // Admin role has access to everything\n    if (user.role === _auth_options__WEBPACK_IMPORTED_MODULE_0__.Role.admin) return true;\n    // Check if user has the specific required role\n    return user.role === requiredRole;\n}\n/**\n * Check if a user is authenticated\n * @param user The user object\n * @returns True if the user is authenticated, false otherwise\n */ function isAuthenticated(user) {\n    return !!user;\n}\n/**\n * Check if a user has permission to perform an action on a resource\n * @param user The user object\n * @param resourceOwnerId The ID of the resource owner\n * @returns True if the user has permission, false otherwise\n */ function hasPermission(user, resourceOwnerId) {\n    if (!user) return false;\n    // Admins have permission to do anything\n    if (user.role === _auth_options__WEBPACK_IMPORTED_MODULE_0__.Role.admin) return true;\n    // If no resource owner, only admins have permission\n    if (!resourceOwnerId) return false;\n    // Users can only modify their own resources\n    return user.id === resourceOwnerId;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL2F1dGgvcm9sZXMudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBQXNDO0FBR3RDOzs7Q0FHQyxHQUVEOzs7O0NBSUMsR0FDTSxTQUFTQyxRQUFRQyxJQUE2QjtJQUNuRCxJQUFJLENBQUNBLE1BQU0sT0FBTztJQUNsQixPQUFPQSxLQUFLQyxJQUFJLEtBQUtILCtDQUFJQSxDQUFDSSxLQUFLO0FBQ2pDO0FBRUE7Ozs7Q0FJQyxHQUNNLFNBQVNDLFVBQVVILElBQTZCO0lBQ3JELElBQUksQ0FBQ0EsTUFBTSxPQUFPO0lBQ2xCLE9BQU9BLEtBQUtDLElBQUksS0FBS0gsK0NBQUlBLENBQUNNLE9BQU87QUFDbkM7QUFFQTs7Ozs7Q0FLQyxHQUNNLFNBQVNDLFFBQVFMLElBQTZCLEVBQUVNLFlBQWtCO0lBQ3ZFLElBQUksQ0FBQ04sTUFBTSxPQUFPO0lBRWxCLHNDQUFzQztJQUN0QyxJQUFJQSxLQUFLQyxJQUFJLEtBQUtILCtDQUFJQSxDQUFDSSxLQUFLLEVBQUUsT0FBTztJQUVyQywrQ0FBK0M7SUFDL0MsT0FBT0YsS0FBS0MsSUFBSSxLQUFLSztBQUN2QjtBQUVBOzs7O0NBSUMsR0FDTSxTQUFTQyxnQkFBZ0JQLElBQTZCO0lBQzNELE9BQU8sQ0FBQyxDQUFDQTtBQUNYO0FBRUE7Ozs7O0NBS0MsR0FDTSxTQUFTUSxjQUFjUixJQUE2QixFQUFFUyxlQUE4QjtJQUN6RixJQUFJLENBQUNULE1BQU0sT0FBTztJQUVsQix3Q0FBd0M7SUFDeEMsSUFBSUEsS0FBS0MsSUFBSSxLQUFLSCwrQ0FBSUEsQ0FBQ0ksS0FBSyxFQUFFLE9BQU87SUFFckMsb0RBQW9EO0lBQ3BELElBQUksQ0FBQ08saUJBQWlCLE9BQU87SUFFN0IsNENBQTRDO0lBQzVDLE9BQU9ULEtBQUtVLEVBQUUsS0FBS0Q7QUFDckIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9jaG9pY2UtZS1sZWFybmluZy8uL3NyYy9saWIvYXV0aC9yb2xlcy50cz9mYjc3Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFJvbGUgfSBmcm9tICcuL2F1dGgtb3B0aW9ucyc7XG5pbXBvcnQgeyBVc2VyIH0gZnJvbSAnbmV4dC1hdXRoJztcblxuLyoqXG4gKiBSb2xlIG1hbmFnZW1lbnQgdXRpbGl0aWVzXG4gKiBDZW50cmFsaXplZCB1dGlsaXRpZXMgZm9yIHJvbGUtYmFzZWQgYWNjZXNzIGNvbnRyb2xcbiAqL1xuXG4vKipcbiAqIENoZWNrIGlmIGEgdXNlciBoYXMgdGhlIGFkbWluIHJvbGVcbiAqIEBwYXJhbSB1c2VyIFRoZSB1c2VyIG9iamVjdFxuICogQHJldHVybnMgVHJ1ZSBpZiB0aGUgdXNlciBpcyBhbiBhZG1pbiwgZmFsc2Ugb3RoZXJ3aXNlXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc0FkbWluKHVzZXI6IFVzZXIgfCBudWxsIHwgdW5kZWZpbmVkKTogYm9vbGVhbiB7XG4gIGlmICghdXNlcikgcmV0dXJuIGZhbHNlO1xuICByZXR1cm4gdXNlci5yb2xlID09PSBSb2xlLmFkbWluO1xufVxuXG4vKipcbiAqIENoZWNrIGlmIGEgdXNlciBoYXMgdGhlIHN0dWRlbnQgcm9sZVxuICogQHBhcmFtIHVzZXIgVGhlIHVzZXIgb2JqZWN0XG4gKiBAcmV0dXJucyBUcnVlIGlmIHRoZSB1c2VyIGlzIGEgc3R1ZGVudCwgZmFsc2Ugb3RoZXJ3aXNlXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc1N0dWRlbnQodXNlcjogVXNlciB8IG51bGwgfCB1bmRlZmluZWQpOiBib29sZWFuIHtcbiAgaWYgKCF1c2VyKSByZXR1cm4gZmFsc2U7XG4gIHJldHVybiB1c2VyLnJvbGUgPT09IFJvbGUuc3R1ZGVudDtcbn1cblxuLyoqXG4gKiBDaGVjayBpZiBhIHVzZXIgaGFzIHRoZSByZXF1aXJlZCByb2xlXG4gKiBAcGFyYW0gdXNlciBUaGUgdXNlciBvYmplY3RcbiAqIEBwYXJhbSByZXF1aXJlZFJvbGUgVGhlIHJlcXVpcmVkIHJvbGVcbiAqIEByZXR1cm5zIFRydWUgaWYgdGhlIHVzZXIgaGFzIHRoZSByZXF1aXJlZCByb2xlLCBmYWxzZSBvdGhlcndpc2VcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGhhc1JvbGUodXNlcjogVXNlciB8IG51bGwgfCB1bmRlZmluZWQsIHJlcXVpcmVkUm9sZTogUm9sZSk6IGJvb2xlYW4ge1xuICBpZiAoIXVzZXIpIHJldHVybiBmYWxzZTtcbiAgXG4gIC8vIEFkbWluIHJvbGUgaGFzIGFjY2VzcyB0byBldmVyeXRoaW5nXG4gIGlmICh1c2VyLnJvbGUgPT09IFJvbGUuYWRtaW4pIHJldHVybiB0cnVlO1xuICBcbiAgLy8gQ2hlY2sgaWYgdXNlciBoYXMgdGhlIHNwZWNpZmljIHJlcXVpcmVkIHJvbGVcbiAgcmV0dXJuIHVzZXIucm9sZSA9PT0gcmVxdWlyZWRSb2xlO1xufVxuXG4vKipcbiAqIENoZWNrIGlmIGEgdXNlciBpcyBhdXRoZW50aWNhdGVkXG4gKiBAcGFyYW0gdXNlciBUaGUgdXNlciBvYmplY3RcbiAqIEByZXR1cm5zIFRydWUgaWYgdGhlIHVzZXIgaXMgYXV0aGVudGljYXRlZCwgZmFsc2Ugb3RoZXJ3aXNlXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc0F1dGhlbnRpY2F0ZWQodXNlcjogVXNlciB8IG51bGwgfCB1bmRlZmluZWQpOiBib29sZWFuIHtcbiAgcmV0dXJuICEhdXNlcjtcbn1cblxuLyoqXG4gKiBDaGVjayBpZiBhIHVzZXIgaGFzIHBlcm1pc3Npb24gdG8gcGVyZm9ybSBhbiBhY3Rpb24gb24gYSByZXNvdXJjZVxuICogQHBhcmFtIHVzZXIgVGhlIHVzZXIgb2JqZWN0XG4gKiBAcGFyYW0gcmVzb3VyY2VPd25lcklkIFRoZSBJRCBvZiB0aGUgcmVzb3VyY2Ugb3duZXJcbiAqIEByZXR1cm5zIFRydWUgaWYgdGhlIHVzZXIgaGFzIHBlcm1pc3Npb24sIGZhbHNlIG90aGVyd2lzZVxuICovXG5leHBvcnQgZnVuY3Rpb24gaGFzUGVybWlzc2lvbih1c2VyOiBVc2VyIHwgbnVsbCB8IHVuZGVmaW5lZCwgcmVzb3VyY2VPd25lcklkOiBzdHJpbmcgfCBudWxsKTogYm9vbGVhbiB7XG4gIGlmICghdXNlcikgcmV0dXJuIGZhbHNlO1xuICBcbiAgLy8gQWRtaW5zIGhhdmUgcGVybWlzc2lvbiB0byBkbyBhbnl0aGluZ1xuICBpZiAodXNlci5yb2xlID09PSBSb2xlLmFkbWluKSByZXR1cm4gdHJ1ZTtcbiAgXG4gIC8vIElmIG5vIHJlc291cmNlIG93bmVyLCBvbmx5IGFkbWlucyBoYXZlIHBlcm1pc3Npb25cbiAgaWYgKCFyZXNvdXJjZU93bmVySWQpIHJldHVybiBmYWxzZTtcbiAgXG4gIC8vIFVzZXJzIGNhbiBvbmx5IG1vZGlmeSB0aGVpciBvd24gcmVzb3VyY2VzXG4gIHJldHVybiB1c2VyLmlkID09PSByZXNvdXJjZU93bmVySWQ7XG59XG4iXSwibmFtZXMiOlsiUm9sZSIsImlzQWRtaW4iLCJ1c2VyIiwicm9sZSIsImFkbWluIiwiaXNTdHVkZW50Iiwic3R1ZGVudCIsImhhc1JvbGUiLCJyZXF1aXJlZFJvbGUiLCJpc0F1dGhlbnRpY2F0ZWQiLCJoYXNQZXJtaXNzaW9uIiwicmVzb3VyY2VPd25lcklkIiwiaWQiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/auth/roles.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/auth/session.ts":
/*!*********************************!*\
  !*** ./src/lib/auth/session.ts ***!
  \*********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   checkUserRole: () => (/* binding */ checkUserRole),\n/* harmony export */   getCurrentUser: () => (/* binding */ getCurrentUser),\n/* harmony export */   getSession: () => (/* binding */ getSession),\n/* harmony export */   isAdmin: () => (/* binding */ isAdmin),\n/* harmony export */   isAuthenticated: () => (/* binding */ isAuthenticated),\n/* harmony export */   isStudent: () => (/* binding */ isStudent)\n/* harmony export */ });\n/* harmony import */ var next_auth_next__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next-auth/next */ \"(rsc)/./node_modules/next-auth/next/index.js\");\n/* harmony import */ var _auth_options__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./auth-options */ \"(rsc)/./src/lib/auth/auth-options.ts\");\n\n\n\n/**\n * Get the current user's session on the server side\n * @returns The user's session or null if not authenticated\n */ async function getSession() {\n    return await (0,next_auth_next__WEBPACK_IMPORTED_MODULE_0__.getServerSession)(_auth_options__WEBPACK_IMPORTED_MODULE_1__.authOptions);\n}\n/**\n * Get the current authenticated user from the session\n * @returns The user object or null if not authenticated\n */ async function getCurrentUser() {\n    const session = await getSession();\n    return session?.user || null;\n}\n/**\n * Check if the current user has the required role\n * @param requiredRole The role required to access a resource\n * @returns True if the user has the required role, false otherwise\n */ async function checkUserRole(requiredRole) {\n    const user = await getCurrentUser();\n    if (!user) return false;\n    // If admin role is required, only admin can access\n    if (requiredRole === _auth_options__WEBPACK_IMPORTED_MODULE_1__.Role.admin) {\n        return user.role === _auth_options__WEBPACK_IMPORTED_MODULE_1__.Role.admin;\n    }\n    // If student role is required, anyone authenticated can access\n    return true;\n}\n/**\n * Check if the current user is authenticated\n * @returns True if authenticated, false otherwise\n */ async function isAuthenticated() {\n    const session = await getSession();\n    return !!session;\n}\n/**\n * Check if the current user is an admin\n * @returns True if admin, false otherwise\n */ async function isAdmin() {\n    return await checkUserRole(_auth_options__WEBPACK_IMPORTED_MODULE_1__.Role.admin);\n}\n/**\n * Check if the current user is a student\n * @returns True if authenticated, false otherwise\n */ async function isStudent() {\n    return await isAuthenticated();\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL2F1dGgvc2Vzc2lvbi50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7OztBQUFrRDtBQUNMO0FBQ1A7QUFFdEM7OztDQUdDLEdBQ00sZUFBZUc7SUFDcEIsT0FBTyxNQUFNSCxnRUFBZ0JBLENBQUNDLHNEQUFXQTtBQUMzQztBQUVBOzs7Q0FHQyxHQUNNLGVBQWVHO0lBQ3BCLE1BQU1DLFVBQVUsTUFBTUY7SUFDdEIsT0FBT0UsU0FBU0MsUUFBUTtBQUMxQjtBQUVBOzs7O0NBSUMsR0FDTSxlQUFlQyxjQUFjQyxZQUFrQjtJQUNwRCxNQUFNRixPQUFPLE1BQU1GO0lBRW5CLElBQUksQ0FBQ0UsTUFBTSxPQUFPO0lBRWxCLG1EQUFtRDtJQUNuRCxJQUFJRSxpQkFBaUJOLCtDQUFJQSxDQUFDTyxLQUFLLEVBQUU7UUFDL0IsT0FBT0gsS0FBS0ksSUFBSSxLQUFLUiwrQ0FBSUEsQ0FBQ08sS0FBSztJQUNqQztJQUVBLCtEQUErRDtJQUMvRCxPQUFPO0FBQ1Q7QUFFQTs7O0NBR0MsR0FDTSxlQUFlRTtJQUNwQixNQUFNTixVQUFVLE1BQU1GO0lBQ3RCLE9BQU8sQ0FBQyxDQUFDRTtBQUNYO0FBRUE7OztDQUdDLEdBQ00sZUFBZU87SUFDcEIsT0FBTyxNQUFNTCxjQUFjTCwrQ0FBSUEsQ0FBQ08sS0FBSztBQUN2QztBQUVBOzs7Q0FHQyxHQUNNLGVBQWVJO0lBQ3BCLE9BQU8sTUFBTUY7QUFDZiIsInNvdXJjZXMiOlsid2VicGFjazovL2Nob2ljZS1lLWxlYXJuaW5nLy4vc3JjL2xpYi9hdXRoL3Nlc3Npb24udHM/NTg4OCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBnZXRTZXJ2ZXJTZXNzaW9uIH0gZnJvbSAnbmV4dC1hdXRoL25leHQnO1xuaW1wb3J0IHsgYXV0aE9wdGlvbnMgfSBmcm9tICcuL2F1dGgtb3B0aW9ucyc7XG5pbXBvcnQgeyBSb2xlIH0gZnJvbSAnLi9hdXRoLW9wdGlvbnMnO1xuXG4vKipcbiAqIEdldCB0aGUgY3VycmVudCB1c2VyJ3Mgc2Vzc2lvbiBvbiB0aGUgc2VydmVyIHNpZGVcbiAqIEByZXR1cm5zIFRoZSB1c2VyJ3Mgc2Vzc2lvbiBvciBudWxsIGlmIG5vdCBhdXRoZW50aWNhdGVkXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRTZXNzaW9uKCkge1xuICByZXR1cm4gYXdhaXQgZ2V0U2VydmVyU2Vzc2lvbihhdXRoT3B0aW9ucyk7XG59XG5cbi8qKlxuICogR2V0IHRoZSBjdXJyZW50IGF1dGhlbnRpY2F0ZWQgdXNlciBmcm9tIHRoZSBzZXNzaW9uXG4gKiBAcmV0dXJucyBUaGUgdXNlciBvYmplY3Qgb3IgbnVsbCBpZiBub3QgYXV0aGVudGljYXRlZFxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0Q3VycmVudFVzZXIoKSB7XG4gIGNvbnN0IHNlc3Npb24gPSBhd2FpdCBnZXRTZXNzaW9uKCk7XG4gIHJldHVybiBzZXNzaW9uPy51c2VyIHx8IG51bGw7XG59XG5cbi8qKlxuICogQ2hlY2sgaWYgdGhlIGN1cnJlbnQgdXNlciBoYXMgdGhlIHJlcXVpcmVkIHJvbGVcbiAqIEBwYXJhbSByZXF1aXJlZFJvbGUgVGhlIHJvbGUgcmVxdWlyZWQgdG8gYWNjZXNzIGEgcmVzb3VyY2VcbiAqIEByZXR1cm5zIFRydWUgaWYgdGhlIHVzZXIgaGFzIHRoZSByZXF1aXJlZCByb2xlLCBmYWxzZSBvdGhlcndpc2VcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNoZWNrVXNlclJvbGUocmVxdWlyZWRSb2xlOiBSb2xlKSB7XG4gIGNvbnN0IHVzZXIgPSBhd2FpdCBnZXRDdXJyZW50VXNlcigpO1xuICBcbiAgaWYgKCF1c2VyKSByZXR1cm4gZmFsc2U7XG4gIFxuICAvLyBJZiBhZG1pbiByb2xlIGlzIHJlcXVpcmVkLCBvbmx5IGFkbWluIGNhbiBhY2Nlc3NcbiAgaWYgKHJlcXVpcmVkUm9sZSA9PT0gUm9sZS5hZG1pbikge1xuICAgIHJldHVybiB1c2VyLnJvbGUgPT09IFJvbGUuYWRtaW47XG4gIH1cbiAgXG4gIC8vIElmIHN0dWRlbnQgcm9sZSBpcyByZXF1aXJlZCwgYW55b25lIGF1dGhlbnRpY2F0ZWQgY2FuIGFjY2Vzc1xuICByZXR1cm4gdHJ1ZTtcbn1cblxuLyoqXG4gKiBDaGVjayBpZiB0aGUgY3VycmVudCB1c2VyIGlzIGF1dGhlbnRpY2F0ZWRcbiAqIEByZXR1cm5zIFRydWUgaWYgYXV0aGVudGljYXRlZCwgZmFsc2Ugb3RoZXJ3aXNlXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBpc0F1dGhlbnRpY2F0ZWQoKSB7XG4gIGNvbnN0IHNlc3Npb24gPSBhd2FpdCBnZXRTZXNzaW9uKCk7XG4gIHJldHVybiAhIXNlc3Npb247XG59XG5cbi8qKlxuICogQ2hlY2sgaWYgdGhlIGN1cnJlbnQgdXNlciBpcyBhbiBhZG1pblxuICogQHJldHVybnMgVHJ1ZSBpZiBhZG1pbiwgZmFsc2Ugb3RoZXJ3aXNlXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBpc0FkbWluKCkge1xuICByZXR1cm4gYXdhaXQgY2hlY2tVc2VyUm9sZShSb2xlLmFkbWluKTtcbn1cblxuLyoqXG4gKiBDaGVjayBpZiB0aGUgY3VycmVudCB1c2VyIGlzIGEgc3R1ZGVudFxuICogQHJldHVybnMgVHJ1ZSBpZiBhdXRoZW50aWNhdGVkLCBmYWxzZSBvdGhlcndpc2VcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGlzU3R1ZGVudCgpIHtcbiAgcmV0dXJuIGF3YWl0IGlzQXV0aGVudGljYXRlZCgpO1xufSAiXSwibmFtZXMiOlsiZ2V0U2VydmVyU2Vzc2lvbiIsImF1dGhPcHRpb25zIiwiUm9sZSIsImdldFNlc3Npb24iLCJnZXRDdXJyZW50VXNlciIsInNlc3Npb24iLCJ1c2VyIiwiY2hlY2tVc2VyUm9sZSIsInJlcXVpcmVkUm9sZSIsImFkbWluIiwicm9sZSIsImlzQXV0aGVudGljYXRlZCIsImlzQWRtaW4iLCJpc1N0dWRlbnQiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/auth/session.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/auth/utils/password-utils.ts":
/*!**********************************************!*\
  !*** ./src/lib/auth/utils/password-utils.ts ***!
  \**********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   comparePasswords: () => (/* binding */ comparePasswords),\n/* harmony export */   hashPassword: () => (/* binding */ hashPassword)\n/* harmony export */ });\n/* harmony import */ var bcryptjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! bcryptjs */ \"(rsc)/./node_modules/bcryptjs/index.js\");\n/**\n * Password utilities for authentication\n */ \n/**\n * Hash a password with bcrypt\n * @param password The plain text password to hash\n * @returns The hashed password\n * @throws Error if hashing fails\n */ async function hashPassword(password) {\n    try {\n        if (!password) {\n            throw new Error(\"Password is required\");\n        }\n        const salt = await bcryptjs__WEBPACK_IMPORTED_MODULE_0__[\"default\"].genSalt(10);\n        const hash = await bcryptjs__WEBPACK_IMPORTED_MODULE_0__[\"default\"].hash(password, salt);\n        return hash;\n    } catch (error) {\n        console.error(\"Error in hashPassword function:\", error);\n        throw new Error(`Failed to hash password: ${error.message}`);\n    }\n}\n/**\n * Compare a plain text password with a hashed password\n * @param password The plain text password\n * @param hashedPassword The hashed password\n * @returns True if the passwords match, false otherwise\n */ async function comparePasswords(password, hashedPassword) {\n    try {\n        return await bcryptjs__WEBPACK_IMPORTED_MODULE_0__[\"default\"].compare(password, hashedPassword);\n    } catch (error) {\n        console.error(\"Error comparing passwords:\", error);\n        return false;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL2F1dGgvdXRpbHMvcGFzc3dvcmQtdXRpbHMudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQUE7O0NBRUMsR0FDNkI7QUFFOUI7Ozs7O0NBS0MsR0FDTSxlQUFlQyxhQUFhQyxRQUFnQjtJQUNqRCxJQUFJO1FBQ0YsSUFBSSxDQUFDQSxVQUFVO1lBQ2IsTUFBTSxJQUFJQyxNQUFNO1FBQ2xCO1FBRUEsTUFBTUMsT0FBTyxNQUFNSix3REFBYyxDQUFDO1FBQ2xDLE1BQU1NLE9BQU8sTUFBTU4scURBQVcsQ0FBQ0UsVUFBVUU7UUFFekMsT0FBT0U7SUFDVCxFQUFFLE9BQU9DLE9BQU87UUFDZEMsUUFBUUQsS0FBSyxDQUFDLG1DQUFtQ0E7UUFDakQsTUFBTSxJQUFJSixNQUFNLENBQUMseUJBQXlCLEVBQUUsTUFBaUJNLE9BQU8sQ0FBQyxDQUFDO0lBQ3hFO0FBQ0Y7QUFFQTs7Ozs7Q0FLQyxHQUNNLGVBQWVDLGlCQUFpQlIsUUFBZ0IsRUFBRVMsY0FBc0I7SUFDN0UsSUFBSTtRQUNGLE9BQU8sTUFBTVgsd0RBQWMsQ0FBQ0UsVUFBVVM7SUFDeEMsRUFBRSxPQUFPSixPQUFPO1FBQ2RDLFFBQVFELEtBQUssQ0FBQyw4QkFBOEJBO1FBQzVDLE9BQU87SUFDVDtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vY2hvaWNlLWUtbGVhcm5pbmcvLi9zcmMvbGliL2F1dGgvdXRpbHMvcGFzc3dvcmQtdXRpbHMudHM/OTI5ZiJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIFBhc3N3b3JkIHV0aWxpdGllcyBmb3IgYXV0aGVudGljYXRpb25cbiAqL1xuaW1wb3J0IGJjcnlwdCBmcm9tICdiY3J5cHRqcyc7XG5cbi8qKlxuICogSGFzaCBhIHBhc3N3b3JkIHdpdGggYmNyeXB0XG4gKiBAcGFyYW0gcGFzc3dvcmQgVGhlIHBsYWluIHRleHQgcGFzc3dvcmQgdG8gaGFzaFxuICogQHJldHVybnMgVGhlIGhhc2hlZCBwYXNzd29yZFxuICogQHRocm93cyBFcnJvciBpZiBoYXNoaW5nIGZhaWxzXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBoYXNoUGFzc3dvcmQocGFzc3dvcmQ6IHN0cmluZyk6IFByb21pc2U8c3RyaW5nPiB7XG4gIHRyeSB7XG4gICAgaWYgKCFwYXNzd29yZCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdQYXNzd29yZCBpcyByZXF1aXJlZCcpO1xuICAgIH1cbiAgICBcbiAgICBjb25zdCBzYWx0ID0gYXdhaXQgYmNyeXB0LmdlblNhbHQoMTApO1xuICAgIGNvbnN0IGhhc2ggPSBhd2FpdCBiY3J5cHQuaGFzaChwYXNzd29yZCwgc2FsdCk7XG4gICAgXG4gICAgcmV0dXJuIGhhc2g7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgaW4gaGFzaFBhc3N3b3JkIGZ1bmN0aW9uOicsIGVycm9yKTtcbiAgICB0aHJvdyBuZXcgRXJyb3IoYEZhaWxlZCB0byBoYXNoIHBhc3N3b3JkOiAkeyhlcnJvciBhcyBFcnJvcikubWVzc2FnZX1gKTtcbiAgfVxufVxuXG4vKipcbiAqIENvbXBhcmUgYSBwbGFpbiB0ZXh0IHBhc3N3b3JkIHdpdGggYSBoYXNoZWQgcGFzc3dvcmRcbiAqIEBwYXJhbSBwYXNzd29yZCBUaGUgcGxhaW4gdGV4dCBwYXNzd29yZFxuICogQHBhcmFtIGhhc2hlZFBhc3N3b3JkIFRoZSBoYXNoZWQgcGFzc3dvcmRcbiAqIEByZXR1cm5zIFRydWUgaWYgdGhlIHBhc3N3b3JkcyBtYXRjaCwgZmFsc2Ugb3RoZXJ3aXNlXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjb21wYXJlUGFzc3dvcmRzKHBhc3N3b3JkOiBzdHJpbmcsIGhhc2hlZFBhc3N3b3JkOiBzdHJpbmcpOiBQcm9taXNlPGJvb2xlYW4+IHtcbiAgdHJ5IHtcbiAgICByZXR1cm4gYXdhaXQgYmNyeXB0LmNvbXBhcmUocGFzc3dvcmQsIGhhc2hlZFBhc3N3b3JkKTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBjb21wYXJpbmcgcGFzc3dvcmRzOicsIGVycm9yKTtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbn1cbiJdLCJuYW1lcyI6WyJiY3J5cHQiLCJoYXNoUGFzc3dvcmQiLCJwYXNzd29yZCIsIkVycm9yIiwic2FsdCIsImdlblNhbHQiLCJoYXNoIiwiZXJyb3IiLCJjb25zb2xlIiwibWVzc2FnZSIsImNvbXBhcmVQYXNzd29yZHMiLCJoYXNoZWRQYXNzd29yZCIsImNvbXBhcmUiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/auth/utils/password-utils.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/db.ts":
/*!***********************!*\
  !*** ./src/lib/db.ts ***!
  \***********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   prisma: () => (/* reexport safe */ _db_index__WEBPACK_IMPORTED_MODULE_0__[\"default\"])\n/* harmony export */ });\n/* harmony import */ var _db_index__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./db/index */ \"(rsc)/./src/lib/db/index.ts\");\n/* harmony import */ var _db_services__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./db/services */ \"(rsc)/./src/lib/db/services/index.ts\");\n/* harmony reexport (unknown) */ var __WEBPACK_REEXPORT_OBJECT__ = {};\n/* harmony reexport (unknown) */ for(const __WEBPACK_IMPORT_KEY__ in _db_services__WEBPACK_IMPORTED_MODULE_1__) if([\"default\",\"prisma\"].indexOf(__WEBPACK_IMPORT_KEY__) < 0) __WEBPACK_REEXPORT_OBJECT__[__WEBPACK_IMPORT_KEY__] = () => _db_services__WEBPACK_IMPORTED_MODULE_1__[__WEBPACK_IMPORT_KEY__]\n/* harmony reexport (unknown) */ __webpack_require__.d(__webpack_exports__, __WEBPACK_REEXPORT_OBJECT__);\n// Export the Prisma client from our central location\n\n// Re-export all database services\n\n// Export prisma client directly for convenience\n\n// Export prisma client as default\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (_db_index__WEBPACK_IMPORTED_MODULE_0__[\"default\"]);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL2RiLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7QUFBQSxxREFBcUQ7QUFDckI7QUFFaEMsa0NBQWtDO0FBQ0o7QUFFOUIsZ0RBQWdEO0FBQzlCO0FBRWxCLGtDQUFrQztBQUNsQyxpRUFBZUEsaURBQU1BLEVBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9jaG9pY2UtZS1sZWFybmluZy8uL3NyYy9saWIvZGIudHM/OWU0ZiJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBFeHBvcnQgdGhlIFByaXNtYSBjbGllbnQgZnJvbSBvdXIgY2VudHJhbCBsb2NhdGlvblxuaW1wb3J0IHByaXNtYSBmcm9tICcuL2RiL2luZGV4JztcblxuLy8gUmUtZXhwb3J0IGFsbCBkYXRhYmFzZSBzZXJ2aWNlc1xuZXhwb3J0ICogZnJvbSAnLi9kYi9zZXJ2aWNlcyc7XG5cbi8vIEV4cG9ydCBwcmlzbWEgY2xpZW50IGRpcmVjdGx5IGZvciBjb252ZW5pZW5jZVxuZXhwb3J0IHsgcHJpc21hIH07XG5cbi8vIEV4cG9ydCBwcmlzbWEgY2xpZW50IGFzIGRlZmF1bHRcbmV4cG9ydCBkZWZhdWx0IHByaXNtYTsiXSwibmFtZXMiOlsicHJpc21hIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/db.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/db/index.ts":
/*!*****************************!*\
  !*** ./src/lib/db/index.ts ***!
  \*****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   prisma: () => (/* binding */ prisma)\n/* harmony export */ });\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @prisma/client */ \"@prisma/client\");\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_prisma_client__WEBPACK_IMPORTED_MODULE_0__);\n\n// PrismaClient is attached to the `global` object in development to prevent\n// exhausting your database connection limit.\n// Learn more: https://pris.ly/d/help/next-js-best-practices\nconst globalForPrisma = global;\nconst prisma = globalForPrisma.prisma || new _prisma_client__WEBPACK_IMPORTED_MODULE_0__.PrismaClient({\n    log:  true ? [\n        \"query\",\n        \"error\",\n        \"warn\"\n    ] : 0\n});\nif (true) globalForPrisma.prisma = prisma;\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (prisma);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL2RiL2luZGV4LnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBOEM7QUFFOUMsNEVBQTRFO0FBQzVFLDZDQUE2QztBQUM3Qyw0REFBNEQ7QUFFNUQsTUFBTUMsa0JBQWtCQztBQUVqQixNQUFNQyxTQUNYRixnQkFBZ0JFLE1BQU0sSUFDdEIsSUFBSUgsd0RBQVlBLENBQUM7SUFDZkksS0FBS0MsS0FBeUIsR0FBZ0I7UUFBQztRQUFTO1FBQVM7S0FBTyxHQUFHLENBQVM7QUFDdEYsR0FBRztBQUVMLElBQUlBLElBQXlCLEVBQWNKLGdCQUFnQkUsTUFBTSxHQUFHQTtBQUVwRSxpRUFBZUEsTUFBTUEsRUFBQyIsInNvdXJjZXMiOlsid2VicGFjazovL2Nob2ljZS1lLWxlYXJuaW5nLy4vc3JjL2xpYi9kYi9pbmRleC50cz81OGQ4Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFByaXNtYUNsaWVudCB9IGZyb20gJ0BwcmlzbWEvY2xpZW50JztcblxuLy8gUHJpc21hQ2xpZW50IGlzIGF0dGFjaGVkIHRvIHRoZSBgZ2xvYmFsYCBvYmplY3QgaW4gZGV2ZWxvcG1lbnQgdG8gcHJldmVudFxuLy8gZXhoYXVzdGluZyB5b3VyIGRhdGFiYXNlIGNvbm5lY3Rpb24gbGltaXQuXG4vLyBMZWFybiBtb3JlOiBodHRwczovL3ByaXMubHkvZC9oZWxwL25leHQtanMtYmVzdC1wcmFjdGljZXNcblxuY29uc3QgZ2xvYmFsRm9yUHJpc21hID0gZ2xvYmFsIGFzIHVua25vd24gYXMgeyBwcmlzbWE6IFByaXNtYUNsaWVudCB9O1xuXG5leHBvcnQgY29uc3QgcHJpc21hID1cbiAgZ2xvYmFsRm9yUHJpc21hLnByaXNtYSB8fFxuICBuZXcgUHJpc21hQ2xpZW50KHtcbiAgICBsb2c6IHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAnZGV2ZWxvcG1lbnQnID8gWydxdWVyeScsICdlcnJvcicsICd3YXJuJ10gOiBbJ2Vycm9yJ10sXG4gIH0pO1xuXG5pZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgZ2xvYmFsRm9yUHJpc21hLnByaXNtYSA9IHByaXNtYTtcblxuZXhwb3J0IGRlZmF1bHQgcHJpc21hOyAiXSwibmFtZXMiOlsiUHJpc21hQ2xpZW50IiwiZ2xvYmFsRm9yUHJpc21hIiwiZ2xvYmFsIiwicHJpc21hIiwibG9nIiwicHJvY2VzcyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/db/index.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/db/services/course-service.ts":
/*!***********************************************!*\
  !*** ./src/lib/db/services/course-service.ts ***!
  \***********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createCourse: () => (/* binding */ createCourse),\n/* harmony export */   deleteCourse: () => (/* binding */ deleteCourse),\n/* harmony export */   enrollStudent: () => (/* binding */ enrollStudent),\n/* harmony export */   findCourseById: () => (/* binding */ findCourseById),\n/* harmony export */   getCourses: () => (/* binding */ getCourses),\n/* harmony export */   getEnrolledCourses: () => (/* binding */ getEnrolledCourses),\n/* harmony export */   unenrollStudent: () => (/* binding */ unenrollStudent),\n/* harmony export */   updateCourse: () => (/* binding */ updateCourse)\n/* harmony export */ });\n/* harmony import */ var private_next_rsc_action_proxy__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! private-next-rsc-action-proxy */ \"(rsc)/./node_modules/next/dist/build/webpack/loaders/next-flight-loader/action-proxy.js\");\n/* harmony import */ var private_next_rsc_action_encryption__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! private-next-rsc-action-encryption */ \"(rsc)/./node_modules/next/dist/server/app-render/action-encryption.js\");\n/* harmony import */ var private_next_rsc_action_encryption__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(private_next_rsc_action_encryption__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _lib_db__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/lib/db */ \"(rsc)/./src/lib/db.ts\");\n/* harmony import */ var private_next_rsc_action_validate__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! private-next-rsc-action-validate */ \"(rsc)/./node_modules/next/dist/build/webpack/loaders/next-flight-loader/action-validate.js\");\n/* __next_internal_action_entry_do_not_use__ {\"2de26b7ad05b48affebb49e0e0a3f6eb1114b478\":\"unenrollStudent\",\"4e7daa72cfb6c88893e3c83fbf9014eb870cafa4\":\"getCourses\",\"4ef4c52e0874114f33e26877d04b34e92ed23804\":\"deleteCourse\",\"6f245e7b94574f23206e987d9ccac8601b008053\":\"findCourseById\",\"b561f155418cf1d4e9029465319d804497fc7de4\":\"enrollStudent\",\"d608042238ad3a8c4e490d67ddd489ce7ceb27a7\":\"createCourse\",\"da72108311d07880d3ed3b28a123df1aaf05c834\":\"getEnrolledCourses\",\"db7bbfbfa326ccf6a29257eb67f1756e8b1de031\":\"updateCourse\"} */ \n\n\n/**\n * Find a course by ID\n * @param id Course ID\n * @param includeRelations Include related data like lessons, students, reviews\n * @returns Course object or null if not found\n */ async function findCourseById(id, includeRelations = false) {\n    try {\n        if (!id.match(/^[0-9a-fA-F]{24}$/)) {\n            return null;\n        }\n        return await _lib_db__WEBPACK_IMPORTED_MODULE_2__[\"default\"].course.findUnique({\n            where: {\n                id\n            },\n            include: includeRelations ? {\n                lessons: {\n                    orderBy: {\n                        order: \"asc\"\n                    }\n                },\n                students: true,\n                reviews: {\n                    include: {\n                        user: {\n                            select: {\n                                id: true,\n                                name: true,\n                                email: true\n                            }\n                        }\n                    }\n                }\n            } : undefined\n        });\n    } catch (error) {\n        console.error(\"Error finding course by ID:\", error);\n        return null;\n    }\n}\n/**\n * Get all courses with pagination and optional filtering\n * @param page Page number (1-based)\n * @param pageSize Page size\n * @param filters Optional filter criteria\n * @returns Paginated courses\n */ async function getCourses(page = 1, pageSize = 10, filters = {}) {\n    try {\n        // Ensure page and pageSize are valid\n        page = Math.max(1, page);\n        pageSize = Math.max(1, Math.min(100, pageSize));\n        // Get total count\n        const total = await _lib_db__WEBPACK_IMPORTED_MODULE_2__[\"default\"].course.count({\n            where: filters\n        });\n        // Calculate total pages\n        const pages = Math.ceil(total / pageSize);\n        // Get courses for the requested page\n        const courses = await _lib_db__WEBPACK_IMPORTED_MODULE_2__[\"default\"].course.findMany({\n            where: filters,\n            skip: (page - 1) * pageSize,\n            take: pageSize,\n            orderBy: {\n                createdAt: \"desc\"\n            },\n            include: {\n                lessons: {\n                    select: {\n                        id: true,\n                        title: true,\n                        order: true\n                    },\n                    orderBy: {\n                        order: \"asc\"\n                    }\n                },\n                reviews: {\n                    select: {\n                        rating: true\n                    }\n                },\n                _count: {\n                    select: {\n                        students: true,\n                        lessons: true,\n                        reviews: true\n                    }\n                }\n            }\n        });\n        return {\n            courses,\n            total,\n            pages\n        };\n    } catch (error) {\n        console.error(\"Error getting courses:\", error);\n        return {\n            courses: [],\n            total: 0,\n            pages: 0\n        };\n    }\n}\n/**\n * Create a new course\n * @param data Course data\n * @returns Created course or null if creation failed\n */ async function createCourse(data) {\n    try {\n        return await _lib_db__WEBPACK_IMPORTED_MODULE_2__[\"default\"].course.create({\n            data,\n            include: {\n                lessons: true\n            }\n        });\n    } catch (error) {\n        console.error(\"Error creating course:\", error);\n        return null;\n    }\n}\n/**\n * Update course data\n * @param id Course ID\n * @param data Course data to update\n * @returns Updated course or null if update failed\n */ async function updateCourse(id, data) {\n    try {\n        return await _lib_db__WEBPACK_IMPORTED_MODULE_2__[\"default\"].course.update({\n            where: {\n                id\n            },\n            data,\n            include: {\n                lessons: {\n                    orderBy: {\n                        order: \"asc\"\n                    }\n                }\n            }\n        });\n    } catch (error) {\n        console.error(\"Error updating course:\", error);\n        return null;\n    }\n}\n/**\n * Delete a course\n * @param id Course ID\n * @returns Deleted course or null if deletion failed\n */ async function deleteCourse(id) {\n    try {\n        return await _lib_db__WEBPACK_IMPORTED_MODULE_2__[\"default\"].course.delete({\n            where: {\n                id\n            },\n            include: {\n                lessons: true\n            }\n        });\n    } catch (error) {\n        console.error(\"Error deleting course:\", error);\n        return null;\n    }\n}\n/**\n * Enroll a student in a course\n * @param courseId Course ID\n * @param userId User ID\n * @returns Updated course or null if enrollment failed\n */ async function enrollStudent(courseId, userId) {\n    try {\n        return await _lib_db__WEBPACK_IMPORTED_MODULE_2__[\"default\"].course.update({\n            where: {\n                id: courseId\n            },\n            data: {\n                students: {\n                    connect: {\n                        id: userId\n                    }\n                }\n            }\n        });\n    } catch (error) {\n        console.error(\"Error enrolling student:\", error);\n        return null;\n    }\n}\n/**\n * Unenroll a student from a course\n * @param courseId Course ID\n * @param userId User ID\n * @returns Updated course or null if unenrollment failed\n */ async function unenrollStudent(courseId, userId) {\n    try {\n        return await _lib_db__WEBPACK_IMPORTED_MODULE_2__[\"default\"].course.update({\n            where: {\n                id: courseId\n            },\n            data: {\n                students: {\n                    disconnect: {\n                        id: userId\n                    }\n                }\n            }\n        });\n    } catch (error) {\n        console.error(\"Error unenrolling student:\", error);\n        return null;\n    }\n}\n/**\n * Get courses a user is enrolled in\n * @param userId User ID\n * @param page Page number (1-based)\n * @param pageSize Page size\n * @returns Paginated courses the user is enrolled in\n */ async function getEnrolledCourses(userId, page = 1, pageSize = 10) {\n    try {\n        // Ensure page and pageSize are valid\n        page = Math.max(1, page);\n        pageSize = Math.max(1, Math.min(100, pageSize));\n        // Get total count\n        const total = await _lib_db__WEBPACK_IMPORTED_MODULE_2__[\"default\"].course.count({\n            where: {\n                students: {\n                    some: {\n                        id: userId\n                    }\n                }\n            }\n        });\n        // Calculate total pages\n        const pages = Math.ceil(total / pageSize);\n        // Get courses for the requested page\n        const courses = await _lib_db__WEBPACK_IMPORTED_MODULE_2__[\"default\"].course.findMany({\n            where: {\n                students: {\n                    some: {\n                        id: userId\n                    }\n                }\n            },\n            skip: (page - 1) * pageSize,\n            take: pageSize,\n            orderBy: {\n                createdAt: \"desc\"\n            },\n            include: {\n                lessons: {\n                    select: {\n                        id: true,\n                        title: true,\n                        order: true\n                    },\n                    orderBy: {\n                        order: \"asc\"\n                    }\n                },\n                reviews: {\n                    where: {\n                        userId\n                    },\n                    select: {\n                        id: true,\n                        rating: true,\n                        comment: true\n                    }\n                }\n            }\n        });\n        return {\n            courses,\n            total,\n            pages\n        };\n    } catch (error) {\n        console.error(\"Error getting enrolled courses:\", error);\n        return {\n            courses: [],\n            total: 0,\n            pages: 0\n        };\n    }\n}\n\n(0,private_next_rsc_action_validate__WEBPACK_IMPORTED_MODULE_3__.ensureServerEntryExports)([\n    findCourseById,\n    getCourses,\n    createCourse,\n    updateCourse,\n    deleteCourse,\n    enrollStudent,\n    unenrollStudent,\n    getEnrolledCourses\n]);\n(0,private_next_rsc_action_proxy__WEBPACK_IMPORTED_MODULE_0__.createActionProxy)(\"6f245e7b94574f23206e987d9ccac8601b008053\", findCourseById);\n(0,private_next_rsc_action_proxy__WEBPACK_IMPORTED_MODULE_0__.createActionProxy)(\"4e7daa72cfb6c88893e3c83fbf9014eb870cafa4\", getCourses);\n(0,private_next_rsc_action_proxy__WEBPACK_IMPORTED_MODULE_0__.createActionProxy)(\"d608042238ad3a8c4e490d67ddd489ce7ceb27a7\", createCourse);\n(0,private_next_rsc_action_proxy__WEBPACK_IMPORTED_MODULE_0__.createActionProxy)(\"db7bbfbfa326ccf6a29257eb67f1756e8b1de031\", updateCourse);\n(0,private_next_rsc_action_proxy__WEBPACK_IMPORTED_MODULE_0__.createActionProxy)(\"4ef4c52e0874114f33e26877d04b34e92ed23804\", deleteCourse);\n(0,private_next_rsc_action_proxy__WEBPACK_IMPORTED_MODULE_0__.createActionProxy)(\"b561f155418cf1d4e9029465319d804497fc7de4\", enrollStudent);\n(0,private_next_rsc_action_proxy__WEBPACK_IMPORTED_MODULE_0__.createActionProxy)(\"2de26b7ad05b48affebb49e0e0a3f6eb1114b478\", unenrollStudent);\n(0,private_next_rsc_action_proxy__WEBPACK_IMPORTED_MODULE_0__.createActionProxy)(\"da72108311d07880d3ed3b28a123df1aaf05c834\", getEnrolledCourses);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL2RiL3NlcnZpY2VzL2NvdXJzZS1zZXJ2aWNlLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUU4QjtBQUc5Qjs7Ozs7Q0FLQyxHQUNNLGVBQWVDLGVBQ3BCQyxFQUFVLEVBQ1ZDLG1CQUE0QixLQUFLO0lBRWpDLElBQUk7UUFDRixJQUFJLENBQUNELEdBQUdFLEtBQUssQ0FBQyxzQkFBc0I7WUFDbEMsT0FBTztRQUNUO1FBRUEsT0FBTyxNQUFNSixzREFBYSxDQUFDTSxVQUFVLENBQUM7WUFDcENDLE9BQU87Z0JBQUVMO1lBQUc7WUFDWk0sU0FBU0wsbUJBQW1CO2dCQUMxQk0sU0FBUztvQkFBRUMsU0FBUzt3QkFBRUMsT0FBTztvQkFBTTtnQkFBRTtnQkFDckNDLFVBQVU7Z0JBQ1ZDLFNBQVM7b0JBQ1BMLFNBQVM7d0JBQ1BNLE1BQU07NEJBQ0pDLFFBQVE7Z0NBQ05iLElBQUk7Z0NBQ0pjLE1BQU07Z0NBQ05DLE9BQU87NEJBQ1Q7d0JBQ0Y7b0JBQ0Y7Z0JBQ0Y7WUFDRixJQUFJQztRQUNOO0lBQ0YsRUFBRSxPQUFPQyxPQUFPO1FBQ2RDLFFBQVFELEtBQUssQ0FBQywrQkFBK0JBO1FBQzdDLE9BQU87SUFDVDtBQUNGO0FBRUE7Ozs7OztDQU1DLEdBQ00sZUFBZUUsV0FDcEJDLE9BQWUsQ0FBQyxFQUNoQkMsV0FBbUIsRUFBRSxFQUNyQkMsVUFBbUMsQ0FBQyxDQUFDO0lBTXJDLElBQUk7UUFDRixxQ0FBcUM7UUFDckNGLE9BQU9HLEtBQUtDLEdBQUcsQ0FBQyxHQUFHSjtRQUNuQkMsV0FBV0UsS0FBS0MsR0FBRyxDQUFDLEdBQUdELEtBQUtFLEdBQUcsQ0FBQyxLQUFLSjtRQUVyQyxrQkFBa0I7UUFDbEIsTUFBTUssUUFBUSxNQUFNNUIsc0RBQWEsQ0FBQzZCLEtBQUssQ0FBQztZQUN0Q3RCLE9BQU9pQjtRQUNUO1FBRUEsd0JBQXdCO1FBQ3hCLE1BQU1NLFFBQVFMLEtBQUtNLElBQUksQ0FBQ0gsUUFBUUw7UUFFaEMscUNBQXFDO1FBQ3JDLE1BQU1TLFVBQVUsTUFBTWhDLHNEQUFhLENBQUNpQyxRQUFRLENBQUM7WUFDM0MxQixPQUFPaUI7WUFDUFUsTUFBTSxDQUFDWixPQUFPLEtBQUtDO1lBQ25CWSxNQUFNWjtZQUNOYixTQUFTO2dCQUFFMEIsV0FBVztZQUFPO1lBQzdCNUIsU0FBUztnQkFDUEMsU0FBUztvQkFDUE0sUUFBUTt3QkFDTmIsSUFBSTt3QkFDSm1DLE9BQU87d0JBQ1AxQixPQUFPO29CQUNUO29CQUNBRCxTQUFTO3dCQUNQQyxPQUFPO29CQUNUO2dCQUNGO2dCQUNBRSxTQUFTO29CQUNQRSxRQUFRO3dCQUNOdUIsUUFBUTtvQkFDVjtnQkFDRjtnQkFDQUMsUUFBUTtvQkFDTnhCLFFBQVE7d0JBQ05ILFVBQVU7d0JBQ1ZILFNBQVM7d0JBQ1RJLFNBQVM7b0JBQ1g7Z0JBQ0Y7WUFDRjtRQUNGO1FBRUEsT0FBTztZQUNMbUI7WUFDQUo7WUFDQUU7UUFDRjtJQUNGLEVBQUUsT0FBT1gsT0FBTztRQUNkQyxRQUFRRCxLQUFLLENBQUMsMEJBQTBCQTtRQUN4QyxPQUFPO1lBQ0xhLFNBQVMsRUFBRTtZQUNYSixPQUFPO1lBQ1BFLE9BQU87UUFDVDtJQUNGO0FBQ0Y7QUFFQTs7OztDQUlDLEdBQ00sZUFBZVUsYUFBYUMsSUFBOEI7SUFDL0QsSUFBSTtRQUNGLE9BQU8sTUFBTXpDLHNEQUFhLENBQUMwQyxNQUFNLENBQUM7WUFDaENEO1lBQ0FqQyxTQUFTO2dCQUNQQyxTQUFTO1lBQ1g7UUFDRjtJQUNGLEVBQUUsT0FBT1UsT0FBTztRQUNkQyxRQUFRRCxLQUFLLENBQUMsMEJBQTBCQTtRQUN4QyxPQUFPO0lBQ1Q7QUFDRjtBQUVBOzs7OztDQUtDLEdBQ00sZUFBZXdCLGFBQ3BCekMsRUFBVSxFQUNWdUMsSUFBOEI7SUFFOUIsSUFBSTtRQUNGLE9BQU8sTUFBTXpDLHNEQUFhLENBQUM0QyxNQUFNLENBQUM7WUFDaENyQyxPQUFPO2dCQUFFTDtZQUFHO1lBQ1p1QztZQUNBakMsU0FBUztnQkFDUEMsU0FBUztvQkFDUEMsU0FBUzt3QkFDUEMsT0FBTztvQkFDVDtnQkFDRjtZQUNGO1FBQ0Y7SUFDRixFQUFFLE9BQU9RLE9BQU87UUFDZEMsUUFBUUQsS0FBSyxDQUFDLDBCQUEwQkE7UUFDeEMsT0FBTztJQUNUO0FBQ0Y7QUFFQTs7OztDQUlDLEdBQ00sZUFBZTBCLGFBQWEzQyxFQUFVO0lBQzNDLElBQUk7UUFDRixPQUFPLE1BQU1GLHNEQUFhLENBQUM4QyxNQUFNLENBQUM7WUFDaEN2QyxPQUFPO2dCQUFFTDtZQUFHO1lBQ1pNLFNBQVM7Z0JBQ1BDLFNBQVM7WUFDWDtRQUNGO0lBQ0YsRUFBRSxPQUFPVSxPQUFPO1FBQ2RDLFFBQVFELEtBQUssQ0FBQywwQkFBMEJBO1FBQ3hDLE9BQU87SUFDVDtBQUNGO0FBRUE7Ozs7O0NBS0MsR0FDTSxlQUFlNEIsY0FDcEJDLFFBQWdCLEVBQ2hCQyxNQUFjO0lBRWQsSUFBSTtRQUNGLE9BQU8sTUFBTWpELHNEQUFhLENBQUM0QyxNQUFNLENBQUM7WUFDaENyQyxPQUFPO2dCQUFFTCxJQUFJOEM7WUFBUztZQUN0QlAsTUFBTTtnQkFDSjdCLFVBQVU7b0JBQ1JzQyxTQUFTO3dCQUFFaEQsSUFBSStDO29CQUFPO2dCQUN4QjtZQUNGO1FBQ0Y7SUFDRixFQUFFLE9BQU85QixPQUFPO1FBQ2RDLFFBQVFELEtBQUssQ0FBQyw0QkFBNEJBO1FBQzFDLE9BQU87SUFDVDtBQUNGO0FBRUE7Ozs7O0NBS0MsR0FDTSxlQUFlZ0MsZ0JBQ3BCSCxRQUFnQixFQUNoQkMsTUFBYztJQUVkLElBQUk7UUFDRixPQUFPLE1BQU1qRCxzREFBYSxDQUFDNEMsTUFBTSxDQUFDO1lBQ2hDckMsT0FBTztnQkFBRUwsSUFBSThDO1lBQVM7WUFDdEJQLE1BQU07Z0JBQ0o3QixVQUFVO29CQUNSd0MsWUFBWTt3QkFBRWxELElBQUkrQztvQkFBTztnQkFDM0I7WUFDRjtRQUNGO0lBQ0YsRUFBRSxPQUFPOUIsT0FBTztRQUNkQyxRQUFRRCxLQUFLLENBQUMsOEJBQThCQTtRQUM1QyxPQUFPO0lBQ1Q7QUFDRjtBQUVBOzs7Ozs7Q0FNQyxHQUNNLGVBQWVrQyxtQkFDcEJKLE1BQWMsRUFDZDNCLE9BQWUsQ0FBQyxFQUNoQkMsV0FBbUIsRUFBRTtJQU1yQixJQUFJO1FBQ0YscUNBQXFDO1FBQ3JDRCxPQUFPRyxLQUFLQyxHQUFHLENBQUMsR0FBR0o7UUFDbkJDLFdBQVdFLEtBQUtDLEdBQUcsQ0FBQyxHQUFHRCxLQUFLRSxHQUFHLENBQUMsS0FBS0o7UUFFckMsa0JBQWtCO1FBQ2xCLE1BQU1LLFFBQVEsTUFBTTVCLHNEQUFhLENBQUM2QixLQUFLLENBQUM7WUFDdEN0QixPQUFPO2dCQUNMSyxVQUFVO29CQUNSMEMsTUFBTTt3QkFDSnBELElBQUkrQztvQkFDTjtnQkFDRjtZQUNGO1FBQ0Y7UUFFQSx3QkFBd0I7UUFDeEIsTUFBTW5CLFFBQVFMLEtBQUtNLElBQUksQ0FBQ0gsUUFBUUw7UUFFaEMscUNBQXFDO1FBQ3JDLE1BQU1TLFVBQVUsTUFBTWhDLHNEQUFhLENBQUNpQyxRQUFRLENBQUM7WUFDM0MxQixPQUFPO2dCQUNMSyxVQUFVO29CQUNSMEMsTUFBTTt3QkFDSnBELElBQUkrQztvQkFDTjtnQkFDRjtZQUNGO1lBQ0FmLE1BQU0sQ0FBQ1osT0FBTyxLQUFLQztZQUNuQlksTUFBTVo7WUFDTmIsU0FBUztnQkFBRTBCLFdBQVc7WUFBTztZQUM3QjVCLFNBQVM7Z0JBQ1BDLFNBQVM7b0JBQ1BNLFFBQVE7d0JBQ05iLElBQUk7d0JBQ0ptQyxPQUFPO3dCQUNQMUIsT0FBTztvQkFDVDtvQkFDQUQsU0FBUzt3QkFDUEMsT0FBTztvQkFDVDtnQkFDRjtnQkFDQUUsU0FBUztvQkFDUE4sT0FBTzt3QkFDTDBDO29CQUNGO29CQUNBbEMsUUFBUTt3QkFDTmIsSUFBSTt3QkFDSm9DLFFBQVE7d0JBQ1JpQixTQUFTO29CQUNYO2dCQUNGO1lBQ0Y7UUFDRjtRQUVBLE9BQU87WUFDTHZCO1lBQ0FKO1lBQ0FFO1FBQ0Y7SUFDRixFQUFFLE9BQU9YLE9BQU87UUFDZEMsUUFBUUQsS0FBSyxDQUFDLG1DQUFtQ0E7UUFDakQsT0FBTztZQUNMYSxTQUFTLEVBQUU7WUFDWEosT0FBTztZQUNQRSxPQUFPO1FBQ1Q7SUFDRjtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vY2hvaWNlLWUtbGVhcm5pbmcvLi9zcmMvbGliL2RiL3NlcnZpY2VzL2NvdXJzZS1zZXJ2aWNlLnRzPzJlYzEiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc2VydmVyXCI7XG5cbmltcG9ydCBwcmlzbWEgZnJvbSAnQC9saWIvZGInO1xuaW1wb3J0IHsgQ291cnNlLCBQcmlzbWEgfSBmcm9tICdAcHJpc21hL2NsaWVudCc7XG5cbi8qKlxuICogRmluZCBhIGNvdXJzZSBieSBJRFxuICogQHBhcmFtIGlkIENvdXJzZSBJRFxuICogQHBhcmFtIGluY2x1ZGVSZWxhdGlvbnMgSW5jbHVkZSByZWxhdGVkIGRhdGEgbGlrZSBsZXNzb25zLCBzdHVkZW50cywgcmV2aWV3c1xuICogQHJldHVybnMgQ291cnNlIG9iamVjdCBvciBudWxsIGlmIG5vdCBmb3VuZFxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZmluZENvdXJzZUJ5SWQoXG4gIGlkOiBzdHJpbmcsIFxuICBpbmNsdWRlUmVsYXRpb25zOiBib29sZWFuID0gZmFsc2Vcbik6IFByb21pc2U8Q291cnNlIHwgbnVsbD4ge1xuICB0cnkge1xuICAgIGlmICghaWQubWF0Y2goL15bMC05YS1mQS1GXXsyNH0kLykpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICBcbiAgICByZXR1cm4gYXdhaXQgcHJpc21hLmNvdXJzZS5maW5kVW5pcXVlKHtcbiAgICAgIHdoZXJlOiB7IGlkIH0sXG4gICAgICBpbmNsdWRlOiBpbmNsdWRlUmVsYXRpb25zID8ge1xuICAgICAgICBsZXNzb25zOiB7IG9yZGVyQnk6IHsgb3JkZXI6ICdhc2MnIH0gfSxcbiAgICAgICAgc3R1ZGVudHM6IHRydWUsXG4gICAgICAgIHJldmlld3M6IHtcbiAgICAgICAgICBpbmNsdWRlOiB7XG4gICAgICAgICAgICB1c2VyOiB7XG4gICAgICAgICAgICAgIHNlbGVjdDoge1xuICAgICAgICAgICAgICAgIGlkOiB0cnVlLFxuICAgICAgICAgICAgICAgIG5hbWU6IHRydWUsXG4gICAgICAgICAgICAgICAgZW1haWw6IHRydWVcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSA6IHVuZGVmaW5lZFxuICAgIH0pO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGZpbmRpbmcgY291cnNlIGJ5IElEOicsIGVycm9yKTtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxufVxuXG4vKipcbiAqIEdldCBhbGwgY291cnNlcyB3aXRoIHBhZ2luYXRpb24gYW5kIG9wdGlvbmFsIGZpbHRlcmluZ1xuICogQHBhcmFtIHBhZ2UgUGFnZSBudW1iZXIgKDEtYmFzZWQpXG4gKiBAcGFyYW0gcGFnZVNpemUgUGFnZSBzaXplXG4gKiBAcGFyYW0gZmlsdGVycyBPcHRpb25hbCBmaWx0ZXIgY3JpdGVyaWFcbiAqIEByZXR1cm5zIFBhZ2luYXRlZCBjb3Vyc2VzXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRDb3Vyc2VzKFxuICBwYWdlOiBudW1iZXIgPSAxLFxuICBwYWdlU2l6ZTogbnVtYmVyID0gMTAsXG4gIGZpbHRlcnM6IFByaXNtYS5Db3Vyc2VXaGVyZUlucHV0ID0ge31cbik6IFByb21pc2U8e1xuICBjb3Vyc2VzOiBDb3Vyc2VbXTtcbiAgdG90YWw6IG51bWJlcjtcbiAgcGFnZXM6IG51bWJlcjtcbn0+IHtcbiAgdHJ5IHtcbiAgICAvLyBFbnN1cmUgcGFnZSBhbmQgcGFnZVNpemUgYXJlIHZhbGlkXG4gICAgcGFnZSA9IE1hdGgubWF4KDEsIHBhZ2UpO1xuICAgIHBhZ2VTaXplID0gTWF0aC5tYXgoMSwgTWF0aC5taW4oMTAwLCBwYWdlU2l6ZSkpO1xuICAgIFxuICAgIC8vIEdldCB0b3RhbCBjb3VudFxuICAgIGNvbnN0IHRvdGFsID0gYXdhaXQgcHJpc21hLmNvdXJzZS5jb3VudCh7XG4gICAgICB3aGVyZTogZmlsdGVyc1xuICAgIH0pO1xuICAgIFxuICAgIC8vIENhbGN1bGF0ZSB0b3RhbCBwYWdlc1xuICAgIGNvbnN0IHBhZ2VzID0gTWF0aC5jZWlsKHRvdGFsIC8gcGFnZVNpemUpO1xuICAgIFxuICAgIC8vIEdldCBjb3Vyc2VzIGZvciB0aGUgcmVxdWVzdGVkIHBhZ2VcbiAgICBjb25zdCBjb3Vyc2VzID0gYXdhaXQgcHJpc21hLmNvdXJzZS5maW5kTWFueSh7XG4gICAgICB3aGVyZTogZmlsdGVycyxcbiAgICAgIHNraXA6IChwYWdlIC0gMSkgKiBwYWdlU2l6ZSxcbiAgICAgIHRha2U6IHBhZ2VTaXplLFxuICAgICAgb3JkZXJCeTogeyBjcmVhdGVkQXQ6ICdkZXNjJyB9LFxuICAgICAgaW5jbHVkZToge1xuICAgICAgICBsZXNzb25zOiB7XG4gICAgICAgICAgc2VsZWN0OiB7XG4gICAgICAgICAgICBpZDogdHJ1ZSxcbiAgICAgICAgICAgIHRpdGxlOiB0cnVlLFxuICAgICAgICAgICAgb3JkZXI6IHRydWVcbiAgICAgICAgICB9LFxuICAgICAgICAgIG9yZGVyQnk6IHtcbiAgICAgICAgICAgIG9yZGVyOiAnYXNjJ1xuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgcmV2aWV3czoge1xuICAgICAgICAgIHNlbGVjdDoge1xuICAgICAgICAgICAgcmF0aW5nOiB0cnVlXG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBfY291bnQ6IHtcbiAgICAgICAgICBzZWxlY3Q6IHtcbiAgICAgICAgICAgIHN0dWRlbnRzOiB0cnVlLFxuICAgICAgICAgICAgbGVzc29uczogdHJ1ZSxcbiAgICAgICAgICAgIHJldmlld3M6IHRydWVcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KTtcbiAgICBcbiAgICByZXR1cm4ge1xuICAgICAgY291cnNlcyxcbiAgICAgIHRvdGFsLFxuICAgICAgcGFnZXNcbiAgICB9O1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGdldHRpbmcgY291cnNlczonLCBlcnJvcik7XG4gICAgcmV0dXJuIHtcbiAgICAgIGNvdXJzZXM6IFtdLFxuICAgICAgdG90YWw6IDAsXG4gICAgICBwYWdlczogMFxuICAgIH07XG4gIH1cbn1cblxuLyoqXG4gKiBDcmVhdGUgYSBuZXcgY291cnNlXG4gKiBAcGFyYW0gZGF0YSBDb3Vyc2UgZGF0YVxuICogQHJldHVybnMgQ3JlYXRlZCBjb3Vyc2Ugb3IgbnVsbCBpZiBjcmVhdGlvbiBmYWlsZWRcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNyZWF0ZUNvdXJzZShkYXRhOiBQcmlzbWEuQ291cnNlQ3JlYXRlSW5wdXQpOiBQcm9taXNlPENvdXJzZSB8IG51bGw+IHtcbiAgdHJ5IHtcbiAgICByZXR1cm4gYXdhaXQgcHJpc21hLmNvdXJzZS5jcmVhdGUoe1xuICAgICAgZGF0YSxcbiAgICAgIGluY2x1ZGU6IHtcbiAgICAgICAgbGVzc29uczogdHJ1ZVxuICAgICAgfVxuICAgIH0pO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGNyZWF0aW5nIGNvdXJzZTonLCBlcnJvcik7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbn1cblxuLyoqXG4gKiBVcGRhdGUgY291cnNlIGRhdGFcbiAqIEBwYXJhbSBpZCBDb3Vyc2UgSURcbiAqIEBwYXJhbSBkYXRhIENvdXJzZSBkYXRhIHRvIHVwZGF0ZVxuICogQHJldHVybnMgVXBkYXRlZCBjb3Vyc2Ugb3IgbnVsbCBpZiB1cGRhdGUgZmFpbGVkXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiB1cGRhdGVDb3Vyc2UoXG4gIGlkOiBzdHJpbmcsXG4gIGRhdGE6IFByaXNtYS5Db3Vyc2VVcGRhdGVJbnB1dFxuKTogUHJvbWlzZTxDb3Vyc2UgfCBudWxsPiB7XG4gIHRyeSB7XG4gICAgcmV0dXJuIGF3YWl0IHByaXNtYS5jb3Vyc2UudXBkYXRlKHtcbiAgICAgIHdoZXJlOiB7IGlkIH0sXG4gICAgICBkYXRhLFxuICAgICAgaW5jbHVkZToge1xuICAgICAgICBsZXNzb25zOiB7XG4gICAgICAgICAgb3JkZXJCeToge1xuICAgICAgICAgICAgb3JkZXI6ICdhc2MnXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgdXBkYXRpbmcgY291cnNlOicsIGVycm9yKTtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxufVxuXG4vKipcbiAqIERlbGV0ZSBhIGNvdXJzZVxuICogQHBhcmFtIGlkIENvdXJzZSBJRFxuICogQHJldHVybnMgRGVsZXRlZCBjb3Vyc2Ugb3IgbnVsbCBpZiBkZWxldGlvbiBmYWlsZWRcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGRlbGV0ZUNvdXJzZShpZDogc3RyaW5nKTogUHJvbWlzZTxDb3Vyc2UgfCBudWxsPiB7XG4gIHRyeSB7XG4gICAgcmV0dXJuIGF3YWl0IHByaXNtYS5jb3Vyc2UuZGVsZXRlKHtcbiAgICAgIHdoZXJlOiB7IGlkIH0sXG4gICAgICBpbmNsdWRlOiB7XG4gICAgICAgIGxlc3NvbnM6IHRydWVcbiAgICAgIH1cbiAgICB9KTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBkZWxldGluZyBjb3Vyc2U6JywgZXJyb3IpO1xuICAgIHJldHVybiBudWxsO1xuICB9XG59XG5cbi8qKlxuICogRW5yb2xsIGEgc3R1ZGVudCBpbiBhIGNvdXJzZVxuICogQHBhcmFtIGNvdXJzZUlkIENvdXJzZSBJRFxuICogQHBhcmFtIHVzZXJJZCBVc2VyIElEXG4gKiBAcmV0dXJucyBVcGRhdGVkIGNvdXJzZSBvciBudWxsIGlmIGVucm9sbG1lbnQgZmFpbGVkXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBlbnJvbGxTdHVkZW50KFxuICBjb3Vyc2VJZDogc3RyaW5nLFxuICB1c2VySWQ6IHN0cmluZ1xuKTogUHJvbWlzZTxDb3Vyc2UgfCBudWxsPiB7XG4gIHRyeSB7XG4gICAgcmV0dXJuIGF3YWl0IHByaXNtYS5jb3Vyc2UudXBkYXRlKHtcbiAgICAgIHdoZXJlOiB7IGlkOiBjb3Vyc2VJZCB9LFxuICAgICAgZGF0YToge1xuICAgICAgICBzdHVkZW50czoge1xuICAgICAgICAgIGNvbm5lY3Q6IHsgaWQ6IHVzZXJJZCB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBlbnJvbGxpbmcgc3R1ZGVudDonLCBlcnJvcik7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbn1cblxuLyoqXG4gKiBVbmVucm9sbCBhIHN0dWRlbnQgZnJvbSBhIGNvdXJzZVxuICogQHBhcmFtIGNvdXJzZUlkIENvdXJzZSBJRFxuICogQHBhcmFtIHVzZXJJZCBVc2VyIElEXG4gKiBAcmV0dXJucyBVcGRhdGVkIGNvdXJzZSBvciBudWxsIGlmIHVuZW5yb2xsbWVudCBmYWlsZWRcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHVuZW5yb2xsU3R1ZGVudChcbiAgY291cnNlSWQ6IHN0cmluZyxcbiAgdXNlcklkOiBzdHJpbmdcbik6IFByb21pc2U8Q291cnNlIHwgbnVsbD4ge1xuICB0cnkge1xuICAgIHJldHVybiBhd2FpdCBwcmlzbWEuY291cnNlLnVwZGF0ZSh7XG4gICAgICB3aGVyZTogeyBpZDogY291cnNlSWQgfSxcbiAgICAgIGRhdGE6IHtcbiAgICAgICAgc3R1ZGVudHM6IHtcbiAgICAgICAgICBkaXNjb25uZWN0OiB7IGlkOiB1c2VySWQgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgdW5lbnJvbGxpbmcgc3R1ZGVudDonLCBlcnJvcik7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbn1cblxuLyoqXG4gKiBHZXQgY291cnNlcyBhIHVzZXIgaXMgZW5yb2xsZWQgaW5cbiAqIEBwYXJhbSB1c2VySWQgVXNlciBJRFxuICogQHBhcmFtIHBhZ2UgUGFnZSBudW1iZXIgKDEtYmFzZWQpXG4gKiBAcGFyYW0gcGFnZVNpemUgUGFnZSBzaXplXG4gKiBAcmV0dXJucyBQYWdpbmF0ZWQgY291cnNlcyB0aGUgdXNlciBpcyBlbnJvbGxlZCBpblxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0RW5yb2xsZWRDb3Vyc2VzKFxuICB1c2VySWQ6IHN0cmluZyxcbiAgcGFnZTogbnVtYmVyID0gMSxcbiAgcGFnZVNpemU6IG51bWJlciA9IDEwXG4pOiBQcm9taXNlPHtcbiAgY291cnNlczogQ291cnNlW107XG4gIHRvdGFsOiBudW1iZXI7XG4gIHBhZ2VzOiBudW1iZXI7XG59PiB7XG4gIHRyeSB7XG4gICAgLy8gRW5zdXJlIHBhZ2UgYW5kIHBhZ2VTaXplIGFyZSB2YWxpZFxuICAgIHBhZ2UgPSBNYXRoLm1heCgxLCBwYWdlKTtcbiAgICBwYWdlU2l6ZSA9IE1hdGgubWF4KDEsIE1hdGgubWluKDEwMCwgcGFnZVNpemUpKTtcbiAgICBcbiAgICAvLyBHZXQgdG90YWwgY291bnRcbiAgICBjb25zdCB0b3RhbCA9IGF3YWl0IHByaXNtYS5jb3Vyc2UuY291bnQoe1xuICAgICAgd2hlcmU6IHtcbiAgICAgICAgc3R1ZGVudHM6IHtcbiAgICAgICAgICBzb21lOiB7XG4gICAgICAgICAgICBpZDogdXNlcklkXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSk7XG4gICAgXG4gICAgLy8gQ2FsY3VsYXRlIHRvdGFsIHBhZ2VzXG4gICAgY29uc3QgcGFnZXMgPSBNYXRoLmNlaWwodG90YWwgLyBwYWdlU2l6ZSk7XG4gICAgXG4gICAgLy8gR2V0IGNvdXJzZXMgZm9yIHRoZSByZXF1ZXN0ZWQgcGFnZVxuICAgIGNvbnN0IGNvdXJzZXMgPSBhd2FpdCBwcmlzbWEuY291cnNlLmZpbmRNYW55KHtcbiAgICAgIHdoZXJlOiB7XG4gICAgICAgIHN0dWRlbnRzOiB7XG4gICAgICAgICAgc29tZToge1xuICAgICAgICAgICAgaWQ6IHVzZXJJZFxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIHNraXA6IChwYWdlIC0gMSkgKiBwYWdlU2l6ZSxcbiAgICAgIHRha2U6IHBhZ2VTaXplLFxuICAgICAgb3JkZXJCeTogeyBjcmVhdGVkQXQ6ICdkZXNjJyB9LFxuICAgICAgaW5jbHVkZToge1xuICAgICAgICBsZXNzb25zOiB7XG4gICAgICAgICAgc2VsZWN0OiB7XG4gICAgICAgICAgICBpZDogdHJ1ZSxcbiAgICAgICAgICAgIHRpdGxlOiB0cnVlLFxuICAgICAgICAgICAgb3JkZXI6IHRydWVcbiAgICAgICAgICB9LFxuICAgICAgICAgIG9yZGVyQnk6IHtcbiAgICAgICAgICAgIG9yZGVyOiAnYXNjJ1xuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgcmV2aWV3czoge1xuICAgICAgICAgIHdoZXJlOiB7XG4gICAgICAgICAgICB1c2VySWRcbiAgICAgICAgICB9LFxuICAgICAgICAgIHNlbGVjdDoge1xuICAgICAgICAgICAgaWQ6IHRydWUsXG4gICAgICAgICAgICByYXRpbmc6IHRydWUsXG4gICAgICAgICAgICBjb21tZW50OiB0cnVlXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSk7XG4gICAgXG4gICAgcmV0dXJuIHtcbiAgICAgIGNvdXJzZXMsXG4gICAgICB0b3RhbCxcbiAgICAgIHBhZ2VzXG4gICAgfTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBnZXR0aW5nIGVucm9sbGVkIGNvdXJzZXM6JywgZXJyb3IpO1xuICAgIHJldHVybiB7XG4gICAgICBjb3Vyc2VzOiBbXSxcbiAgICAgIHRvdGFsOiAwLFxuICAgICAgcGFnZXM6IDBcbiAgICB9O1xuICB9XG59XG4iXSwibmFtZXMiOlsicHJpc21hIiwiZmluZENvdXJzZUJ5SWQiLCJpZCIsImluY2x1ZGVSZWxhdGlvbnMiLCJtYXRjaCIsImNvdXJzZSIsImZpbmRVbmlxdWUiLCJ3aGVyZSIsImluY2x1ZGUiLCJsZXNzb25zIiwib3JkZXJCeSIsIm9yZGVyIiwic3R1ZGVudHMiLCJyZXZpZXdzIiwidXNlciIsInNlbGVjdCIsIm5hbWUiLCJlbWFpbCIsInVuZGVmaW5lZCIsImVycm9yIiwiY29uc29sZSIsImdldENvdXJzZXMiLCJwYWdlIiwicGFnZVNpemUiLCJmaWx0ZXJzIiwiTWF0aCIsIm1heCIsIm1pbiIsInRvdGFsIiwiY291bnQiLCJwYWdlcyIsImNlaWwiLCJjb3Vyc2VzIiwiZmluZE1hbnkiLCJza2lwIiwidGFrZSIsImNyZWF0ZWRBdCIsInRpdGxlIiwicmF0aW5nIiwiX2NvdW50IiwiY3JlYXRlQ291cnNlIiwiZGF0YSIsImNyZWF0ZSIsInVwZGF0ZUNvdXJzZSIsInVwZGF0ZSIsImRlbGV0ZUNvdXJzZSIsImRlbGV0ZSIsImVucm9sbFN0dWRlbnQiLCJjb3Vyc2VJZCIsInVzZXJJZCIsImNvbm5lY3QiLCJ1bmVucm9sbFN0dWRlbnQiLCJkaXNjb25uZWN0IiwiZ2V0RW5yb2xsZWRDb3Vyc2VzIiwic29tZSIsImNvbW1lbnQiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/db/services/course-service.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/db/services/db-service.ts":
/*!*******************************************!*\
  !*** ./src/lib/db/services/db-service.ts ***!
  \*******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   countRecords: () => (/* binding */ countRecords),\n/* harmony export */   createRecord: () => (/* binding */ createRecord),\n/* harmony export */   deleteRecord: () => (/* binding */ deleteRecord),\n/* harmony export */   executeTransaction: () => (/* binding */ executeTransaction),\n/* harmony export */   findById: () => (/* binding */ findById),\n/* harmony export */   findMany: () => (/* binding */ findMany),\n/* harmony export */   findOne: () => (/* binding */ findOne),\n/* harmony export */   updateRecord: () => (/* binding */ updateRecord)\n/* harmony export */ });\n/* harmony import */ var private_next_rsc_action_proxy__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! private-next-rsc-action-proxy */ \"(rsc)/./node_modules/next/dist/build/webpack/loaders/next-flight-loader/action-proxy.js\");\n/* harmony import */ var private_next_rsc_action_encryption__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! private-next-rsc-action-encryption */ \"(rsc)/./node_modules/next/dist/server/app-render/action-encryption.js\");\n/* harmony import */ var private_next_rsc_action_encryption__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(private_next_rsc_action_encryption__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _lib_db__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/lib/db */ \"(rsc)/./src/lib/db.ts\");\n/* harmony import */ var private_next_rsc_action_validate__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! private-next-rsc-action-validate */ \"(rsc)/./node_modules/next/dist/build/webpack/loaders/next-flight-loader/action-validate.js\");\n/* __next_internal_action_entry_do_not_use__ {\"13842d7780def5fd0a955c31a26e8e88e5be7fa0\":\"findMany\",\"1f4eab26907992a919fd0922e9cb5343e263aba4\":\"findOne\",\"53f54708a9f1340d28892ca49fa83cc1952b73f7\":\"executeTransaction\",\"679948099b136910b13260790db7f04fb1f58067\":\"deleteRecord\",\"78322f6c063687ec2005e0d47591c8293655c4cd\":\"findById\",\"ad9eb87420b24992938ac51dc9efc65ac01bf424\":\"countRecords\",\"e4bcb396ff6a6c3dbe8c44b45e58329daec99301\":\"updateRecord\",\"f0f7abe6842c4b9a6cb3cb216f8606c16b745c71\":\"createRecord\"} */ \n\n\n/**\n * Generic method to find a record by ID\n * @param model The Prisma model name\n * @param id The record ID\n * @returns The record or null if not found\n */ async function findById(model, id) {\n    try {\n        // Validate ID format for MongoDB\n        if (!id.match(/^[0-9a-fA-F]{24}$/)) {\n            console.error(`Invalid ID format: ${id}`);\n            return null;\n        }\n        const record = await _lib_db__WEBPACK_IMPORTED_MODULE_2__[\"default\"][model].findUnique({\n            where: {\n                id\n            }\n        });\n        return record;\n    } catch (error) {\n        console.error(`Error finding ${String(model)} by ID:`, error);\n        return null;\n    }\n}\n/**\n * Generic method to find records by a filter\n * @param model The Prisma model name\n * @param where The filter criteria\n * @param options Additional options like include, orderBy, etc.\n * @returns Array of matching records\n */ async function findMany(model, where = {}, options = {}) {\n    try {\n        const records = await _lib_db__WEBPACK_IMPORTED_MODULE_2__[\"default\"][model].findMany({\n            where,\n            ...options\n        });\n        return records;\n    } catch (error) {\n        console.error(`Error finding ${String(model)} records:`, error);\n        return [];\n    }\n}\n/**\n * Generic method to find a single record by filter\n * @param model The Prisma model name\n * @param where The filter criteria\n * @param options Additional options like include\n * @returns The record or null if not found\n */ async function findOne(model, where, options = {}) {\n    try {\n        const record = await _lib_db__WEBPACK_IMPORTED_MODULE_2__[\"default\"][model].findFirst({\n            where,\n            ...options\n        });\n        return record;\n    } catch (error) {\n        console.error(`Error finding ${String(model)} record:`, error);\n        return null;\n    }\n}\n/**\n * Generic method to create a record\n * @param model The Prisma model name\n * @param data The record data\n * @returns The created record or null if creation failed\n */ async function createRecord(model, data) {\n    try {\n        const record = await _lib_db__WEBPACK_IMPORTED_MODULE_2__[\"default\"][model].create({\n            data\n        });\n        return record;\n    } catch (error) {\n        console.error(`Error creating ${String(model)}:`, error);\n        return null;\n    }\n}\n/**\n * Generic method to update a record\n * @param model The Prisma model name\n * @param id The record ID\n * @param data The update data\n * @returns The updated record or null if update failed\n */ async function updateRecord(model, id, data) {\n    try {\n        // Validate ID format for MongoDB\n        if (!id.match(/^[0-9a-fA-F]{24}$/)) {\n            console.error(`Invalid ID format: ${id}`);\n            return null;\n        }\n        const record = await _lib_db__WEBPACK_IMPORTED_MODULE_2__[\"default\"][model].update({\n            where: {\n                id\n            },\n            data\n        });\n        return record;\n    } catch (error) {\n        console.error(`Error updating ${String(model)}:`, error);\n        return null;\n    }\n}\n/**\n * Generic method to delete a record\n * @param model The Prisma model name\n * @param id The record ID\n * @returns The deleted record or null if deletion failed\n */ async function deleteRecord(model, id) {\n    try {\n        // Validate ID format for MongoDB\n        if (!id.match(/^[0-9a-fA-F]{24}$/)) {\n            console.error(`Invalid ID format: ${id}`);\n            return null;\n        }\n        const record = await _lib_db__WEBPACK_IMPORTED_MODULE_2__[\"default\"][model].delete({\n            where: {\n                id\n            }\n        });\n        return record;\n    } catch (error) {\n        console.error(`Error deleting ${String(model)}:`, error);\n        return null;\n    }\n}\n/**\n * Generic method to count records\n * @param model The Prisma model name\n * @param where The filter criteria\n * @returns The count of matching records\n */ async function countRecords(model, where = {}) {\n    try {\n        const count = await _lib_db__WEBPACK_IMPORTED_MODULE_2__[\"default\"][model].count({\n            where\n        });\n        return count;\n    } catch (error) {\n        console.error(`Error counting ${String(model)} records:`, error);\n        return 0;\n    }\n}\n/**\n * Execute a transaction with multiple operations\n * @param fn Function containing the transaction operations\n * @returns Result of the transaction\n */ async function executeTransaction(fn) {\n    try {\n        return await _lib_db__WEBPACK_IMPORTED_MODULE_2__[\"default\"].$transaction(fn);\n    } catch (error) {\n        console.error(\"Transaction error:\", error);\n        return null;\n    }\n}\n\n(0,private_next_rsc_action_validate__WEBPACK_IMPORTED_MODULE_3__.ensureServerEntryExports)([\n    findById,\n    findMany,\n    findOne,\n    createRecord,\n    updateRecord,\n    deleteRecord,\n    countRecords,\n    executeTransaction\n]);\n(0,private_next_rsc_action_proxy__WEBPACK_IMPORTED_MODULE_0__.createActionProxy)(\"78322f6c063687ec2005e0d47591c8293655c4cd\", findById);\n(0,private_next_rsc_action_proxy__WEBPACK_IMPORTED_MODULE_0__.createActionProxy)(\"13842d7780def5fd0a955c31a26e8e88e5be7fa0\", findMany);\n(0,private_next_rsc_action_proxy__WEBPACK_IMPORTED_MODULE_0__.createActionProxy)(\"1f4eab26907992a919fd0922e9cb5343e263aba4\", findOne);\n(0,private_next_rsc_action_proxy__WEBPACK_IMPORTED_MODULE_0__.createActionProxy)(\"f0f7abe6842c4b9a6cb3cb216f8606c16b745c71\", createRecord);\n(0,private_next_rsc_action_proxy__WEBPACK_IMPORTED_MODULE_0__.createActionProxy)(\"e4bcb396ff6a6c3dbe8c44b45e58329daec99301\", updateRecord);\n(0,private_next_rsc_action_proxy__WEBPACK_IMPORTED_MODULE_0__.createActionProxy)(\"679948099b136910b13260790db7f04fb1f58067\", deleteRecord);\n(0,private_next_rsc_action_proxy__WEBPACK_IMPORTED_MODULE_0__.createActionProxy)(\"ad9eb87420b24992938ac51dc9efc65ac01bf424\", countRecords);\n(0,private_next_rsc_action_proxy__WEBPACK_IMPORTED_MODULE_0__.createActionProxy)(\"53f54708a9f1340d28892ca49fa83cc1952b73f7\", executeTransaction);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL2RiL3NlcnZpY2VzL2RiLXNlcnZpY2UudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBRThCO0FBRzlCOzs7OztDQUtDLEdBQ00sZUFBZUMsU0FDcEJDLEtBQVEsRUFDUkMsRUFBVTtJQUVWLElBQUk7UUFDRixpQ0FBaUM7UUFDakMsSUFBSSxDQUFDQSxHQUFHQyxLQUFLLENBQUMsc0JBQXNCO1lBQ2xDQyxRQUFRQyxLQUFLLENBQUMsQ0FBQyxtQkFBbUIsRUFBRUgsR0FBRyxDQUFDO1lBQ3hDLE9BQU87UUFDVDtRQUVBLE1BQU1JLFNBQVMsTUFBTSwrQ0FBTyxDQUFDTCxNQUFNLENBQVNNLFVBQVUsQ0FBQztZQUNyREMsT0FBTztnQkFBRU47WUFBRztRQUNkO1FBRUEsT0FBT0k7SUFDVCxFQUFFLE9BQU9ELE9BQU87UUFDZEQsUUFBUUMsS0FBSyxDQUFDLENBQUMsY0FBYyxFQUFFSSxPQUFPUixPQUFPLE9BQU8sQ0FBQyxFQUFFSTtRQUN2RCxPQUFPO0lBQ1Q7QUFDRjtBQUVBOzs7Ozs7Q0FNQyxHQUNNLGVBQWVLLFNBQ3BCVCxLQUFRLEVBQ1JPLFFBQWEsQ0FBQyxDQUFDLEVBQ2ZHLFVBQWUsQ0FBQyxDQUFDO0lBRWpCLElBQUk7UUFDRixNQUFNQyxVQUFVLE1BQU0sK0NBQU8sQ0FBQ1gsTUFBTSxDQUFTUyxRQUFRLENBQUM7WUFDcERGO1lBQ0EsR0FBR0csT0FBTztRQUNaO1FBRUEsT0FBT0M7SUFDVCxFQUFFLE9BQU9QLE9BQU87UUFDZEQsUUFBUUMsS0FBSyxDQUFDLENBQUMsY0FBYyxFQUFFSSxPQUFPUixPQUFPLFNBQVMsQ0FBQyxFQUFFSTtRQUN6RCxPQUFPLEVBQUU7SUFDWDtBQUNGO0FBRUE7Ozs7OztDQU1DLEdBQ00sZUFBZVEsUUFDcEJaLEtBQVEsRUFDUk8sS0FBVSxFQUNWRyxVQUFlLENBQUMsQ0FBQztJQUVqQixJQUFJO1FBQ0YsTUFBTUwsU0FBUyxNQUFNLCtDQUFPLENBQUNMLE1BQU0sQ0FBU2EsU0FBUyxDQUFDO1lBQ3BETjtZQUNBLEdBQUdHLE9BQU87UUFDWjtRQUVBLE9BQU9MO0lBQ1QsRUFBRSxPQUFPRCxPQUFPO1FBQ2RELFFBQVFDLEtBQUssQ0FBQyxDQUFDLGNBQWMsRUFBRUksT0FBT1IsT0FBTyxRQUFRLENBQUMsRUFBRUk7UUFDeEQsT0FBTztJQUNUO0FBQ0Y7QUFFQTs7Ozs7Q0FLQyxHQUNNLGVBQWVVLGFBQ3BCZCxLQUFRLEVBQ1JlLElBQVM7SUFFVCxJQUFJO1FBQ0YsTUFBTVYsU0FBUyxNQUFNLCtDQUFPLENBQUNMLE1BQU0sQ0FBU2dCLE1BQU0sQ0FBQztZQUNqREQ7UUFDRjtRQUVBLE9BQU9WO0lBQ1QsRUFBRSxPQUFPRCxPQUFPO1FBQ2RELFFBQVFDLEtBQUssQ0FBQyxDQUFDLGVBQWUsRUFBRUksT0FBT1IsT0FBTyxDQUFDLENBQUMsRUFBRUk7UUFDbEQsT0FBTztJQUNUO0FBQ0Y7QUFFQTs7Ozs7O0NBTUMsR0FDTSxlQUFlYSxhQUNwQmpCLEtBQVEsRUFDUkMsRUFBVSxFQUNWYyxJQUFTO0lBRVQsSUFBSTtRQUNGLGlDQUFpQztRQUNqQyxJQUFJLENBQUNkLEdBQUdDLEtBQUssQ0FBQyxzQkFBc0I7WUFDbENDLFFBQVFDLEtBQUssQ0FBQyxDQUFDLG1CQUFtQixFQUFFSCxHQUFHLENBQUM7WUFDeEMsT0FBTztRQUNUO1FBRUEsTUFBTUksU0FBUyxNQUFNLCtDQUFPLENBQUNMLE1BQU0sQ0FBU2tCLE1BQU0sQ0FBQztZQUNqRFgsT0FBTztnQkFBRU47WUFBRztZQUNaYztRQUNGO1FBRUEsT0FBT1Y7SUFDVCxFQUFFLE9BQU9ELE9BQU87UUFDZEQsUUFBUUMsS0FBSyxDQUFDLENBQUMsZUFBZSxFQUFFSSxPQUFPUixPQUFPLENBQUMsQ0FBQyxFQUFFSTtRQUNsRCxPQUFPO0lBQ1Q7QUFDRjtBQUVBOzs7OztDQUtDLEdBQ00sZUFBZWUsYUFDcEJuQixLQUFRLEVBQ1JDLEVBQVU7SUFFVixJQUFJO1FBQ0YsaUNBQWlDO1FBQ2pDLElBQUksQ0FBQ0EsR0FBR0MsS0FBSyxDQUFDLHNCQUFzQjtZQUNsQ0MsUUFBUUMsS0FBSyxDQUFDLENBQUMsbUJBQW1CLEVBQUVILEdBQUcsQ0FBQztZQUN4QyxPQUFPO1FBQ1Q7UUFFQSxNQUFNSSxTQUFTLE1BQU0sK0NBQU8sQ0FBQ0wsTUFBTSxDQUFTb0IsTUFBTSxDQUFDO1lBQ2pEYixPQUFPO2dCQUFFTjtZQUFHO1FBQ2Q7UUFFQSxPQUFPSTtJQUNULEVBQUUsT0FBT0QsT0FBTztRQUNkRCxRQUFRQyxLQUFLLENBQUMsQ0FBQyxlQUFlLEVBQUVJLE9BQU9SLE9BQU8sQ0FBQyxDQUFDLEVBQUVJO1FBQ2xELE9BQU87SUFDVDtBQUNGO0FBRUE7Ozs7O0NBS0MsR0FDTSxlQUFlaUIsYUFDcEJyQixLQUFRLEVBQ1JPLFFBQWEsQ0FBQyxDQUFDO0lBRWYsSUFBSTtRQUNGLE1BQU1lLFFBQVEsTUFBTSwrQ0FBTyxDQUFDdEIsTUFBTSxDQUFTc0IsS0FBSyxDQUFDO1lBQy9DZjtRQUNGO1FBRUEsT0FBT2U7SUFDVCxFQUFFLE9BQU9sQixPQUFPO1FBQ2RELFFBQVFDLEtBQUssQ0FBQyxDQUFDLGVBQWUsRUFBRUksT0FBT1IsT0FBTyxTQUFTLENBQUMsRUFBRUk7UUFDMUQsT0FBTztJQUNUO0FBQ0Y7QUFFQTs7OztDQUlDLEdBQ00sZUFBZW1CLG1CQUNwQkMsRUFBb0Q7SUFFcEQsSUFBSTtRQUNGLE9BQU8sTUFBTTFCLDREQUFtQixDQUFDMEI7SUFDbkMsRUFBRSxPQUFPcEIsT0FBTztRQUNkRCxRQUFRQyxLQUFLLENBQUMsc0JBQXNCQTtRQUNwQyxPQUFPO0lBQ1Q7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL2Nob2ljZS1lLWxlYXJuaW5nLy4vc3JjL2xpYi9kYi9zZXJ2aWNlcy9kYi1zZXJ2aWNlLnRzPzRiYWIiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc2VydmVyXCI7XG5cbmltcG9ydCBwcmlzbWEgZnJvbSAnQC9saWIvZGInO1xuaW1wb3J0IHsgUHJpc21hIH0gZnJvbSAnQHByaXNtYS9jbGllbnQnO1xuXG4vKipcbiAqIEdlbmVyaWMgbWV0aG9kIHRvIGZpbmQgYSByZWNvcmQgYnkgSURcbiAqIEBwYXJhbSBtb2RlbCBUaGUgUHJpc21hIG1vZGVsIG5hbWVcbiAqIEBwYXJhbSBpZCBUaGUgcmVjb3JkIElEXG4gKiBAcmV0dXJucyBUaGUgcmVjb3JkIG9yIG51bGwgaWYgbm90IGZvdW5kXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBmaW5kQnlJZDxUIGV4dGVuZHMga2V5b2YgdHlwZW9mIHByaXNtYT4oXG4gIG1vZGVsOiBULCBcbiAgaWQ6IHN0cmluZ1xuKTogUHJvbWlzZTxhbnkgfCBudWxsPiB7XG4gIHRyeSB7XG4gICAgLy8gVmFsaWRhdGUgSUQgZm9ybWF0IGZvciBNb25nb0RCXG4gICAgaWYgKCFpZC5tYXRjaCgvXlswLTlhLWZBLUZdezI0fSQvKSkge1xuICAgICAgY29uc29sZS5lcnJvcihgSW52YWxpZCBJRCBmb3JtYXQ6ICR7aWR9YCk7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgXG4gICAgY29uc3QgcmVjb3JkID0gYXdhaXQgKHByaXNtYVttb2RlbF0gYXMgYW55KS5maW5kVW5pcXVlKHtcbiAgICAgIHdoZXJlOiB7IGlkIH1cbiAgICB9KTtcbiAgICBcbiAgICByZXR1cm4gcmVjb3JkO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoYEVycm9yIGZpbmRpbmcgJHtTdHJpbmcobW9kZWwpfSBieSBJRDpgLCBlcnJvcik7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbn1cblxuLyoqXG4gKiBHZW5lcmljIG1ldGhvZCB0byBmaW5kIHJlY29yZHMgYnkgYSBmaWx0ZXJcbiAqIEBwYXJhbSBtb2RlbCBUaGUgUHJpc21hIG1vZGVsIG5hbWVcbiAqIEBwYXJhbSB3aGVyZSBUaGUgZmlsdGVyIGNyaXRlcmlhXG4gKiBAcGFyYW0gb3B0aW9ucyBBZGRpdGlvbmFsIG9wdGlvbnMgbGlrZSBpbmNsdWRlLCBvcmRlckJ5LCBldGMuXG4gKiBAcmV0dXJucyBBcnJheSBvZiBtYXRjaGluZyByZWNvcmRzXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBmaW5kTWFueTxUIGV4dGVuZHMga2V5b2YgdHlwZW9mIHByaXNtYT4oXG4gIG1vZGVsOiBULFxuICB3aGVyZTogYW55ID0ge30sXG4gIG9wdGlvbnM6IGFueSA9IHt9XG4pOiBQcm9taXNlPGFueVtdPiB7XG4gIHRyeSB7XG4gICAgY29uc3QgcmVjb3JkcyA9IGF3YWl0IChwcmlzbWFbbW9kZWxdIGFzIGFueSkuZmluZE1hbnkoe1xuICAgICAgd2hlcmUsXG4gICAgICAuLi5vcHRpb25zXG4gICAgfSk7XG4gICAgXG4gICAgcmV0dXJuIHJlY29yZHM7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcihgRXJyb3IgZmluZGluZyAke1N0cmluZyhtb2RlbCl9IHJlY29yZHM6YCwgZXJyb3IpO1xuICAgIHJldHVybiBbXTtcbiAgfVxufVxuXG4vKipcbiAqIEdlbmVyaWMgbWV0aG9kIHRvIGZpbmQgYSBzaW5nbGUgcmVjb3JkIGJ5IGZpbHRlclxuICogQHBhcmFtIG1vZGVsIFRoZSBQcmlzbWEgbW9kZWwgbmFtZVxuICogQHBhcmFtIHdoZXJlIFRoZSBmaWx0ZXIgY3JpdGVyaWFcbiAqIEBwYXJhbSBvcHRpb25zIEFkZGl0aW9uYWwgb3B0aW9ucyBsaWtlIGluY2x1ZGVcbiAqIEByZXR1cm5zIFRoZSByZWNvcmQgb3IgbnVsbCBpZiBub3QgZm91bmRcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGZpbmRPbmU8VCBleHRlbmRzIGtleW9mIHR5cGVvZiBwcmlzbWE+KFxuICBtb2RlbDogVCxcbiAgd2hlcmU6IGFueSxcbiAgb3B0aW9uczogYW55ID0ge31cbik6IFByb21pc2U8YW55IHwgbnVsbD4ge1xuICB0cnkge1xuICAgIGNvbnN0IHJlY29yZCA9IGF3YWl0IChwcmlzbWFbbW9kZWxdIGFzIGFueSkuZmluZEZpcnN0KHtcbiAgICAgIHdoZXJlLFxuICAgICAgLi4ub3B0aW9uc1xuICAgIH0pO1xuICAgIFxuICAgIHJldHVybiByZWNvcmQ7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcihgRXJyb3IgZmluZGluZyAke1N0cmluZyhtb2RlbCl9IHJlY29yZDpgLCBlcnJvcik7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbn1cblxuLyoqXG4gKiBHZW5lcmljIG1ldGhvZCB0byBjcmVhdGUgYSByZWNvcmRcbiAqIEBwYXJhbSBtb2RlbCBUaGUgUHJpc21hIG1vZGVsIG5hbWVcbiAqIEBwYXJhbSBkYXRhIFRoZSByZWNvcmQgZGF0YVxuICogQHJldHVybnMgVGhlIGNyZWF0ZWQgcmVjb3JkIG9yIG51bGwgaWYgY3JlYXRpb24gZmFpbGVkXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjcmVhdGVSZWNvcmQ8VCBleHRlbmRzIGtleW9mIHR5cGVvZiBwcmlzbWE+KFxuICBtb2RlbDogVCxcbiAgZGF0YTogYW55XG4pOiBQcm9taXNlPGFueSB8IG51bGw+IHtcbiAgdHJ5IHtcbiAgICBjb25zdCByZWNvcmQgPSBhd2FpdCAocHJpc21hW21vZGVsXSBhcyBhbnkpLmNyZWF0ZSh7XG4gICAgICBkYXRhXG4gICAgfSk7XG4gICAgXG4gICAgcmV0dXJuIHJlY29yZDtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKGBFcnJvciBjcmVhdGluZyAke1N0cmluZyhtb2RlbCl9OmAsIGVycm9yKTtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxufVxuXG4vKipcbiAqIEdlbmVyaWMgbWV0aG9kIHRvIHVwZGF0ZSBhIHJlY29yZFxuICogQHBhcmFtIG1vZGVsIFRoZSBQcmlzbWEgbW9kZWwgbmFtZVxuICogQHBhcmFtIGlkIFRoZSByZWNvcmQgSURcbiAqIEBwYXJhbSBkYXRhIFRoZSB1cGRhdGUgZGF0YVxuICogQHJldHVybnMgVGhlIHVwZGF0ZWQgcmVjb3JkIG9yIG51bGwgaWYgdXBkYXRlIGZhaWxlZFxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gdXBkYXRlUmVjb3JkPFQgZXh0ZW5kcyBrZXlvZiB0eXBlb2YgcHJpc21hPihcbiAgbW9kZWw6IFQsXG4gIGlkOiBzdHJpbmcsXG4gIGRhdGE6IGFueVxuKTogUHJvbWlzZTxhbnkgfCBudWxsPiB7XG4gIHRyeSB7XG4gICAgLy8gVmFsaWRhdGUgSUQgZm9ybWF0IGZvciBNb25nb0RCXG4gICAgaWYgKCFpZC5tYXRjaCgvXlswLTlhLWZBLUZdezI0fSQvKSkge1xuICAgICAgY29uc29sZS5lcnJvcihgSW52YWxpZCBJRCBmb3JtYXQ6ICR7aWR9YCk7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgXG4gICAgY29uc3QgcmVjb3JkID0gYXdhaXQgKHByaXNtYVttb2RlbF0gYXMgYW55KS51cGRhdGUoe1xuICAgICAgd2hlcmU6IHsgaWQgfSxcbiAgICAgIGRhdGFcbiAgICB9KTtcbiAgICBcbiAgICByZXR1cm4gcmVjb3JkO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoYEVycm9yIHVwZGF0aW5nICR7U3RyaW5nKG1vZGVsKX06YCwgZXJyb3IpO1xuICAgIHJldHVybiBudWxsO1xuICB9XG59XG5cbi8qKlxuICogR2VuZXJpYyBtZXRob2QgdG8gZGVsZXRlIGEgcmVjb3JkXG4gKiBAcGFyYW0gbW9kZWwgVGhlIFByaXNtYSBtb2RlbCBuYW1lXG4gKiBAcGFyYW0gaWQgVGhlIHJlY29yZCBJRFxuICogQHJldHVybnMgVGhlIGRlbGV0ZWQgcmVjb3JkIG9yIG51bGwgaWYgZGVsZXRpb24gZmFpbGVkXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBkZWxldGVSZWNvcmQ8VCBleHRlbmRzIGtleW9mIHR5cGVvZiBwcmlzbWE+KFxuICBtb2RlbDogVCxcbiAgaWQ6IHN0cmluZ1xuKTogUHJvbWlzZTxhbnkgfCBudWxsPiB7XG4gIHRyeSB7XG4gICAgLy8gVmFsaWRhdGUgSUQgZm9ybWF0IGZvciBNb25nb0RCXG4gICAgaWYgKCFpZC5tYXRjaCgvXlswLTlhLWZBLUZdezI0fSQvKSkge1xuICAgICAgY29uc29sZS5lcnJvcihgSW52YWxpZCBJRCBmb3JtYXQ6ICR7aWR9YCk7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgXG4gICAgY29uc3QgcmVjb3JkID0gYXdhaXQgKHByaXNtYVttb2RlbF0gYXMgYW55KS5kZWxldGUoe1xuICAgICAgd2hlcmU6IHsgaWQgfVxuICAgIH0pO1xuICAgIFxuICAgIHJldHVybiByZWNvcmQ7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcihgRXJyb3IgZGVsZXRpbmcgJHtTdHJpbmcobW9kZWwpfTpgLCBlcnJvcik7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbn1cblxuLyoqXG4gKiBHZW5lcmljIG1ldGhvZCB0byBjb3VudCByZWNvcmRzXG4gKiBAcGFyYW0gbW9kZWwgVGhlIFByaXNtYSBtb2RlbCBuYW1lXG4gKiBAcGFyYW0gd2hlcmUgVGhlIGZpbHRlciBjcml0ZXJpYVxuICogQHJldHVybnMgVGhlIGNvdW50IG9mIG1hdGNoaW5nIHJlY29yZHNcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNvdW50UmVjb3JkczxUIGV4dGVuZHMga2V5b2YgdHlwZW9mIHByaXNtYT4oXG4gIG1vZGVsOiBULFxuICB3aGVyZTogYW55ID0ge31cbik6IFByb21pc2U8bnVtYmVyPiB7XG4gIHRyeSB7XG4gICAgY29uc3QgY291bnQgPSBhd2FpdCAocHJpc21hW21vZGVsXSBhcyBhbnkpLmNvdW50KHtcbiAgICAgIHdoZXJlXG4gICAgfSk7XG4gICAgXG4gICAgcmV0dXJuIGNvdW50O1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoYEVycm9yIGNvdW50aW5nICR7U3RyaW5nKG1vZGVsKX0gcmVjb3JkczpgLCBlcnJvcik7XG4gICAgcmV0dXJuIDA7XG4gIH1cbn1cblxuLyoqXG4gKiBFeGVjdXRlIGEgdHJhbnNhY3Rpb24gd2l0aCBtdWx0aXBsZSBvcGVyYXRpb25zXG4gKiBAcGFyYW0gZm4gRnVuY3Rpb24gY29udGFpbmluZyB0aGUgdHJhbnNhY3Rpb24gb3BlcmF0aW9uc1xuICogQHJldHVybnMgUmVzdWx0IG9mIHRoZSB0cmFuc2FjdGlvblxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZXhlY3V0ZVRyYW5zYWN0aW9uPFQ+KFxuICBmbjogKHByaXNtYTogUHJpc21hLlRyYW5zYWN0aW9uQ2xpZW50KSA9PiBQcm9taXNlPFQ+XG4pOiBQcm9taXNlPFQgfCBudWxsPiB7XG4gIHRyeSB7XG4gICAgcmV0dXJuIGF3YWl0IHByaXNtYS4kdHJhbnNhY3Rpb24oZm4pO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ1RyYW5zYWN0aW9uIGVycm9yOicsIGVycm9yKTtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxufVxuIl0sIm5hbWVzIjpbInByaXNtYSIsImZpbmRCeUlkIiwibW9kZWwiLCJpZCIsIm1hdGNoIiwiY29uc29sZSIsImVycm9yIiwicmVjb3JkIiwiZmluZFVuaXF1ZSIsIndoZXJlIiwiU3RyaW5nIiwiZmluZE1hbnkiLCJvcHRpb25zIiwicmVjb3JkcyIsImZpbmRPbmUiLCJmaW5kRmlyc3QiLCJjcmVhdGVSZWNvcmQiLCJkYXRhIiwiY3JlYXRlIiwidXBkYXRlUmVjb3JkIiwidXBkYXRlIiwiZGVsZXRlUmVjb3JkIiwiZGVsZXRlIiwiY291bnRSZWNvcmRzIiwiY291bnQiLCJleGVjdXRlVHJhbnNhY3Rpb24iLCJmbiIsIiR0cmFuc2FjdGlvbiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/db/services/db-service.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/db/services/index.ts":
/*!**************************************!*\
  !*** ./src/lib/db/services/index.ts ***!
  \**************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   countRecords: () => (/* reexport safe */ _db_service__WEBPACK_IMPORTED_MODULE_0__.countRecords),\n/* harmony export */   createCourse: () => (/* reexport safe */ _course_service__WEBPACK_IMPORTED_MODULE_2__.createCourse),\n/* harmony export */   createLesson: () => (/* reexport safe */ _lesson_service__WEBPACK_IMPORTED_MODULE_3__.createLesson),\n/* harmony export */   createRecord: () => (/* reexport safe */ _db_service__WEBPACK_IMPORTED_MODULE_0__.createRecord),\n/* harmony export */   createUser: () => (/* reexport safe */ _user_service__WEBPACK_IMPORTED_MODULE_1__.createUser),\n/* harmony export */   deleteCourse: () => (/* reexport safe */ _course_service__WEBPACK_IMPORTED_MODULE_2__.deleteCourse),\n/* harmony export */   deleteLesson: () => (/* reexport safe */ _lesson_service__WEBPACK_IMPORTED_MODULE_3__.deleteLesson),\n/* harmony export */   deleteRecord: () => (/* reexport safe */ _db_service__WEBPACK_IMPORTED_MODULE_0__.deleteRecord),\n/* harmony export */   deleteUser: () => (/* reexport safe */ _user_service__WEBPACK_IMPORTED_MODULE_1__.deleteUser),\n/* harmony export */   enrollStudent: () => (/* reexport safe */ _course_service__WEBPACK_IMPORTED_MODULE_2__.enrollStudent),\n/* harmony export */   executeTransaction: () => (/* reexport safe */ _db_service__WEBPACK_IMPORTED_MODULE_0__.executeTransaction),\n/* harmony export */   findById: () => (/* reexport safe */ _db_service__WEBPACK_IMPORTED_MODULE_0__.findById),\n/* harmony export */   findCourseById: () => (/* reexport safe */ _course_service__WEBPACK_IMPORTED_MODULE_2__.findCourseById),\n/* harmony export */   findLessonById: () => (/* reexport safe */ _lesson_service__WEBPACK_IMPORTED_MODULE_3__.findLessonById),\n/* harmony export */   findMany: () => (/* reexport safe */ _db_service__WEBPACK_IMPORTED_MODULE_0__.findMany),\n/* harmony export */   findOne: () => (/* reexport safe */ _db_service__WEBPACK_IMPORTED_MODULE_0__.findOne),\n/* harmony export */   findUserByEmail: () => (/* reexport safe */ _user_service__WEBPACK_IMPORTED_MODULE_1__.findUserByEmail),\n/* harmony export */   findUserById: () => (/* reexport safe */ _user_service__WEBPACK_IMPORTED_MODULE_1__.findUserById),\n/* harmony export */   getCourses: () => (/* reexport safe */ _course_service__WEBPACK_IMPORTED_MODULE_2__.getCourses),\n/* harmony export */   getEnrolledCourses: () => (/* reexport safe */ _course_service__WEBPACK_IMPORTED_MODULE_2__.getEnrolledCourses),\n/* harmony export */   getLessonsForCourse: () => (/* reexport safe */ _lesson_service__WEBPACK_IMPORTED_MODULE_3__.getLessonsForCourse),\n/* harmony export */   getUsers: () => (/* reexport safe */ _user_service__WEBPACK_IMPORTED_MODULE_1__.getUsers),\n/* harmony export */   reorderLessons: () => (/* reexport safe */ _lesson_service__WEBPACK_IMPORTED_MODULE_3__.reorderLessons),\n/* harmony export */   unenrollStudent: () => (/* reexport safe */ _course_service__WEBPACK_IMPORTED_MODULE_2__.unenrollStudent),\n/* harmony export */   updateCourse: () => (/* reexport safe */ _course_service__WEBPACK_IMPORTED_MODULE_2__.updateCourse),\n/* harmony export */   updateLesson: () => (/* reexport safe */ _lesson_service__WEBPACK_IMPORTED_MODULE_3__.updateLesson),\n/* harmony export */   updateRecord: () => (/* reexport safe */ _db_service__WEBPACK_IMPORTED_MODULE_0__.updateRecord),\n/* harmony export */   updateUser: () => (/* reexport safe */ _user_service__WEBPACK_IMPORTED_MODULE_1__.updateUser),\n/* harmony export */   updateUserLoginInfo: () => (/* reexport safe */ _user_service__WEBPACK_IMPORTED_MODULE_1__.updateUserLoginInfo),\n/* harmony export */   updateUserRole: () => (/* reexport safe */ _user_service__WEBPACK_IMPORTED_MODULE_1__.updateUserRole),\n/* harmony export */   verifyUserCredentials: () => (/* reexport safe */ _user_service__WEBPACK_IMPORTED_MODULE_1__.verifyUserCredentials)\n/* harmony export */ });\n/* harmony import */ var _db_service__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./db-service */ \"(rsc)/./src/lib/db/services/db-service.ts\");\n/* harmony import */ var _user_service__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./user-service */ \"(rsc)/./src/lib/db/services/user-service.ts\");\n/* harmony import */ var _course_service__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./course-service */ \"(rsc)/./src/lib/db/services/course-service.ts\");\n/* harmony import */ var _lesson_service__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./lesson-service */ \"(rsc)/./src/lib/db/services/lesson-service.ts\");\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @prisma/client */ \"@prisma/client\");\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_prisma_client__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony reexport (unknown) */ var __WEBPACK_REEXPORT_OBJECT__ = {};\n/* harmony reexport (unknown) */ for(const __WEBPACK_IMPORT_KEY__ in _prisma_client__WEBPACK_IMPORTED_MODULE_4__) if([\"default\",\"countRecords\",\"createRecord\",\"deleteRecord\",\"executeTransaction\",\"findById\",\"findMany\",\"findOne\",\"updateRecord\",\"createUser\",\"deleteUser\",\"findUserByEmail\",\"findUserById\",\"getUsers\",\"updateUser\",\"updateUserLoginInfo\",\"updateUserRole\",\"verifyUserCredentials\",\"createCourse\",\"deleteCourse\",\"enrollStudent\",\"findCourseById\",\"getCourses\",\"getEnrolledCourses\",\"unenrollStudent\",\"updateCourse\",\"createLesson\",\"deleteLesson\",\"findLessonById\",\"getLessonsForCourse\",\"reorderLessons\",\"updateLesson\"].indexOf(__WEBPACK_IMPORT_KEY__) < 0) __WEBPACK_REEXPORT_OBJECT__[__WEBPACK_IMPORT_KEY__] = () => _prisma_client__WEBPACK_IMPORTED_MODULE_4__[__WEBPACK_IMPORT_KEY__]\n/* harmony reexport (unknown) */ __webpack_require__.d(__webpack_exports__, __WEBPACK_REEXPORT_OBJECT__);\n// Export all database services for easy importing\n\n\n\n\n// Export the types from Prisma for convenience\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL2RiL3NlcnZpY2VzL2luZGV4LnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQSxrREFBa0Q7QUFDckI7QUFDRTtBQUNFO0FBQ0E7QUFFakMsK0NBQStDO0FBQ2hCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vY2hvaWNlLWUtbGVhcm5pbmcvLi9zcmMvbGliL2RiL3NlcnZpY2VzL2luZGV4LnRzPzNkZWIiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gRXhwb3J0IGFsbCBkYXRhYmFzZSBzZXJ2aWNlcyBmb3IgZWFzeSBpbXBvcnRpbmdcbmV4cG9ydCAqIGZyb20gJy4vZGItc2VydmljZSc7XG5leHBvcnQgKiBmcm9tICcuL3VzZXItc2VydmljZSc7XG5leHBvcnQgKiBmcm9tICcuL2NvdXJzZS1zZXJ2aWNlJztcbmV4cG9ydCAqIGZyb20gJy4vbGVzc29uLXNlcnZpY2UnO1xuXG4vLyBFeHBvcnQgdGhlIHR5cGVzIGZyb20gUHJpc21hIGZvciBjb252ZW5pZW5jZVxuZXhwb3J0ICogZnJvbSAnQHByaXNtYS9jbGllbnQnO1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/db/services/index.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/db/services/lesson-service.ts":
/*!***********************************************!*\
  !*** ./src/lib/db/services/lesson-service.ts ***!
  \***********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createLesson: () => (/* binding */ createLesson),\n/* harmony export */   deleteLesson: () => (/* binding */ deleteLesson),\n/* harmony export */   findLessonById: () => (/* binding */ findLessonById),\n/* harmony export */   getLessonsForCourse: () => (/* binding */ getLessonsForCourse),\n/* harmony export */   reorderLessons: () => (/* binding */ reorderLessons),\n/* harmony export */   updateLesson: () => (/* binding */ updateLesson)\n/* harmony export */ });\n/* harmony import */ var private_next_rsc_action_proxy__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! private-next-rsc-action-proxy */ \"(rsc)/./node_modules/next/dist/build/webpack/loaders/next-flight-loader/action-proxy.js\");\n/* harmony import */ var private_next_rsc_action_encryption__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! private-next-rsc-action-encryption */ \"(rsc)/./node_modules/next/dist/server/app-render/action-encryption.js\");\n/* harmony import */ var private_next_rsc_action_encryption__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(private_next_rsc_action_encryption__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _lib_db__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/lib/db */ \"(rsc)/./src/lib/db.ts\");\n/* harmony import */ var private_next_rsc_action_validate__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! private-next-rsc-action-validate */ \"(rsc)/./node_modules/next/dist/build/webpack/loaders/next-flight-loader/action-validate.js\");\n/* __next_internal_action_entry_do_not_use__ {\"1496de900cb7d67993cc7de9afdd5840644ed6a8\":\"findLessonById\",\"7f68ecff25cb5b15592eb33d832fd78ea1bd57d0\":\"reorderLessons\",\"9a7955aaf41dc7e4bc47efd8c78804bed2df2ade\":\"getLessonsForCourse\",\"d8e006a211ca26f5ec769206772f7c4348a73960\":\"createLesson\",\"e182c8a4479eb23905c0c58a77ab7bcd567fce9b\":\"updateLesson\",\"ea42f38b71b48164afed3430306824f4f8780d09\":\"deleteLesson\"} */ \n\n\n/**\n * Find a lesson by ID\n * @param id Lesson ID\n * @param includeCourse Include related course data\n * @returns Lesson object or null if not found\n */ async function findLessonById(id, includeCourse = false) {\n    try {\n        if (!id.match(/^[0-9a-fA-F]{24}$/)) {\n            return null;\n        }\n        return await _lib_db__WEBPACK_IMPORTED_MODULE_2__[\"default\"].lesson.findUnique({\n            where: {\n                id\n            },\n            include: includeCourse ? {\n                course: true\n            } : undefined\n        });\n    } catch (error) {\n        console.error(\"Error finding lesson by ID:\", error);\n        return null;\n    }\n}\n/**\n * Get lessons for a course\n * @param courseId Course ID\n * @returns Array of lessons\n */ async function getLessonsForCourse(courseId) {\n    try {\n        return await _lib_db__WEBPACK_IMPORTED_MODULE_2__[\"default\"].lesson.findMany({\n            where: {\n                courseId\n            },\n            orderBy: {\n                order: \"asc\"\n            }\n        });\n    } catch (error) {\n        console.error(\"Error getting lessons for course:\", error);\n        return [];\n    }\n}\n/**\n * Create a new lesson\n * @param data Lesson data\n * @returns Created lesson or null if creation failed\n */ async function createLesson(data) {\n    try {\n        // If order is not provided, get the highest order and add 1\n        if (!data.order) {\n            const highestOrderLesson = await _lib_db__WEBPACK_IMPORTED_MODULE_2__[\"default\"].lesson.findFirst({\n                where: {\n                    courseId: data.course.connect?.id\n                },\n                orderBy: {\n                    order: \"desc\"\n                }\n            });\n            data.order = highestOrderLesson ? highestOrderLesson.order + 1 : 1;\n        }\n        return await _lib_db__WEBPACK_IMPORTED_MODULE_2__[\"default\"].lesson.create({\n            data\n        });\n    } catch (error) {\n        console.error(\"Error creating lesson:\", error);\n        return null;\n    }\n}\n/**\n * Update lesson data\n * @param id Lesson ID\n * @param data Lesson data to update\n * @returns Updated lesson or null if update failed\n */ async function updateLesson(id, data) {\n    try {\n        return await _lib_db__WEBPACK_IMPORTED_MODULE_2__[\"default\"].lesson.update({\n            where: {\n                id\n            },\n            data\n        });\n    } catch (error) {\n        console.error(\"Error updating lesson:\", error);\n        return null;\n    }\n}\n/**\n * Delete a lesson\n * @param id Lesson ID\n * @returns Deleted lesson or null if deletion failed\n */ async function deleteLesson(id) {\n    try {\n        // Get the lesson to be deleted\n        const lessonToDelete = await _lib_db__WEBPACK_IMPORTED_MODULE_2__[\"default\"].lesson.findUnique({\n            where: {\n                id\n            }\n        });\n        if (!lessonToDelete) {\n            return null;\n        }\n        // Delete the lesson\n        const deletedLesson = await _lib_db__WEBPACK_IMPORTED_MODULE_2__[\"default\"].lesson.delete({\n            where: {\n                id\n            }\n        });\n        // Re-order the remaining lessons\n        await _lib_db__WEBPACK_IMPORTED_MODULE_2__[\"default\"].lesson.updateMany({\n            where: {\n                courseId: lessonToDelete.courseId,\n                order: {\n                    gt: lessonToDelete.order\n                }\n            },\n            data: {\n                order: {\n                    decrement: 1\n                }\n            }\n        });\n        return deletedLesson;\n    } catch (error) {\n        console.error(\"Error deleting lesson:\", error);\n        return null;\n    }\n}\n/**\n * Reorder lessons for a course\n * @param courseId Course ID\n * @param lessonIds Array of lesson IDs in the desired order\n * @returns Success flag\n */ async function reorderLessons(courseId, lessonIds) {\n    try {\n        // Verify all lessons exist and belong to the course\n        const lessons = await _lib_db__WEBPACK_IMPORTED_MODULE_2__[\"default\"].lesson.findMany({\n            where: {\n                courseId,\n                id: {\n                    in: lessonIds\n                }\n            }\n        });\n        if (lessons.length !== lessonIds.length) {\n            console.error(\"Not all lessons exist or belong to the course\");\n            return false;\n        }\n        // Update the order of each lesson\n        await _lib_db__WEBPACK_IMPORTED_MODULE_2__[\"default\"].$transaction(lessonIds.map((lessonId, index)=>_lib_db__WEBPACK_IMPORTED_MODULE_2__[\"default\"].lesson.update({\n                where: {\n                    id: lessonId\n                },\n                data: {\n                    order: index + 1\n                }\n            })));\n        return true;\n    } catch (error) {\n        console.error(\"Error reordering lessons:\", error);\n        return false;\n    }\n}\n\n(0,private_next_rsc_action_validate__WEBPACK_IMPORTED_MODULE_3__.ensureServerEntryExports)([\n    findLessonById,\n    getLessonsForCourse,\n    createLesson,\n    updateLesson,\n    deleteLesson,\n    reorderLessons\n]);\n(0,private_next_rsc_action_proxy__WEBPACK_IMPORTED_MODULE_0__.createActionProxy)(\"1496de900cb7d67993cc7de9afdd5840644ed6a8\", findLessonById);\n(0,private_next_rsc_action_proxy__WEBPACK_IMPORTED_MODULE_0__.createActionProxy)(\"9a7955aaf41dc7e4bc47efd8c78804bed2df2ade\", getLessonsForCourse);\n(0,private_next_rsc_action_proxy__WEBPACK_IMPORTED_MODULE_0__.createActionProxy)(\"d8e006a211ca26f5ec769206772f7c4348a73960\", createLesson);\n(0,private_next_rsc_action_proxy__WEBPACK_IMPORTED_MODULE_0__.createActionProxy)(\"e182c8a4479eb23905c0c58a77ab7bcd567fce9b\", updateLesson);\n(0,private_next_rsc_action_proxy__WEBPACK_IMPORTED_MODULE_0__.createActionProxy)(\"ea42f38b71b48164afed3430306824f4f8780d09\", deleteLesson);\n(0,private_next_rsc_action_proxy__WEBPACK_IMPORTED_MODULE_0__.createActionProxy)(\"7f68ecff25cb5b15592eb33d832fd78ea1bd57d0\", reorderLessons);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL2RiL3NlcnZpY2VzL2xlc3Nvbi1zZXJ2aWNlLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7QUFFOEI7QUFHOUI7Ozs7O0NBS0MsR0FDTSxlQUFlQyxlQUNwQkMsRUFBVSxFQUNWQyxnQkFBeUIsS0FBSztJQUU5QixJQUFJO1FBQ0YsSUFBSSxDQUFDRCxHQUFHRSxLQUFLLENBQUMsc0JBQXNCO1lBQ2xDLE9BQU87UUFDVDtRQUVBLE9BQU8sTUFBTUosc0RBQWEsQ0FBQ00sVUFBVSxDQUFDO1lBQ3BDQyxPQUFPO2dCQUFFTDtZQUFHO1lBQ1pNLFNBQVNMLGdCQUFnQjtnQkFDdkJNLFFBQVE7WUFDVixJQUFJQztRQUNOO0lBQ0YsRUFBRSxPQUFPQyxPQUFPO1FBQ2RDLFFBQVFELEtBQUssQ0FBQywrQkFBK0JBO1FBQzdDLE9BQU87SUFDVDtBQUNGO0FBRUE7Ozs7Q0FJQyxHQUNNLGVBQWVFLG9CQUFvQkMsUUFBZ0I7SUFDeEQsSUFBSTtRQUNGLE9BQU8sTUFBTWQsc0RBQWEsQ0FBQ2UsUUFBUSxDQUFDO1lBQ2xDUixPQUFPO2dCQUFFTztZQUFTO1lBQ2xCRSxTQUFTO2dCQUFFQyxPQUFPO1lBQU07UUFDMUI7SUFDRixFQUFFLE9BQU9OLE9BQU87UUFDZEMsUUFBUUQsS0FBSyxDQUFDLHFDQUFxQ0E7UUFDbkQsT0FBTyxFQUFFO0lBQ1g7QUFDRjtBQUVBOzs7O0NBSUMsR0FDTSxlQUFlTyxhQUFhQyxJQUE4QjtJQUMvRCxJQUFJO1FBQ0YsNERBQTREO1FBQzVELElBQUksQ0FBQ0EsS0FBS0YsS0FBSyxFQUFFO1lBQ2YsTUFBTUcscUJBQXFCLE1BQU1wQixzREFBYSxDQUFDcUIsU0FBUyxDQUFDO2dCQUN2RGQsT0FBTztvQkFBRU8sVUFBVUssS0FBS1YsTUFBTSxDQUFDYSxPQUFPLEVBQUVwQjtnQkFBYTtnQkFDckRjLFNBQVM7b0JBQUVDLE9BQU87Z0JBQU87WUFDM0I7WUFFQUUsS0FBS0YsS0FBSyxHQUFHRyxxQkFBcUJBLG1CQUFtQkgsS0FBSyxHQUFHLElBQUk7UUFDbkU7UUFFQSxPQUFPLE1BQU1qQixzREFBYSxDQUFDdUIsTUFBTSxDQUFDO1lBQ2hDSjtRQUNGO0lBQ0YsRUFBRSxPQUFPUixPQUFPO1FBQ2RDLFFBQVFELEtBQUssQ0FBQywwQkFBMEJBO1FBQ3hDLE9BQU87SUFDVDtBQUNGO0FBRUE7Ozs7O0NBS0MsR0FDTSxlQUFlYSxhQUNwQnRCLEVBQVUsRUFDVmlCLElBQThCO0lBRTlCLElBQUk7UUFDRixPQUFPLE1BQU1uQixzREFBYSxDQUFDeUIsTUFBTSxDQUFDO1lBQ2hDbEIsT0FBTztnQkFBRUw7WUFBRztZQUNaaUI7UUFDRjtJQUNGLEVBQUUsT0FBT1IsT0FBTztRQUNkQyxRQUFRRCxLQUFLLENBQUMsMEJBQTBCQTtRQUN4QyxPQUFPO0lBQ1Q7QUFDRjtBQUVBOzs7O0NBSUMsR0FDTSxlQUFlZSxhQUFheEIsRUFBVTtJQUMzQyxJQUFJO1FBQ0YsK0JBQStCO1FBQy9CLE1BQU15QixpQkFBaUIsTUFBTTNCLHNEQUFhLENBQUNNLFVBQVUsQ0FBQztZQUNwREMsT0FBTztnQkFBRUw7WUFBRztRQUNkO1FBRUEsSUFBSSxDQUFDeUIsZ0JBQWdCO1lBQ25CLE9BQU87UUFDVDtRQUVBLG9CQUFvQjtRQUNwQixNQUFNQyxnQkFBZ0IsTUFBTTVCLHNEQUFhLENBQUM2QixNQUFNLENBQUM7WUFDL0N0QixPQUFPO2dCQUFFTDtZQUFHO1FBQ2Q7UUFFQSxpQ0FBaUM7UUFDakMsTUFBTUYsc0RBQWEsQ0FBQzhCLFVBQVUsQ0FBQztZQUM3QnZCLE9BQU87Z0JBQ0xPLFVBQVVhLGVBQWViLFFBQVE7Z0JBQ2pDRyxPQUFPO29CQUNMYyxJQUFJSixlQUFlVixLQUFLO2dCQUMxQjtZQUNGO1lBQ0FFLE1BQU07Z0JBQ0pGLE9BQU87b0JBQ0xlLFdBQVc7Z0JBQ2I7WUFDRjtRQUNGO1FBRUEsT0FBT0o7SUFDVCxFQUFFLE9BQU9qQixPQUFPO1FBQ2RDLFFBQVFELEtBQUssQ0FBQywwQkFBMEJBO1FBQ3hDLE9BQU87SUFDVDtBQUNGO0FBRUE7Ozs7O0NBS0MsR0FDTSxlQUFlc0IsZUFDcEJuQixRQUFnQixFQUNoQm9CLFNBQW1CO0lBRW5CLElBQUk7UUFDRixvREFBb0Q7UUFDcEQsTUFBTUMsVUFBVSxNQUFNbkMsc0RBQWEsQ0FBQ2UsUUFBUSxDQUFDO1lBQzNDUixPQUFPO2dCQUNMTztnQkFDQVosSUFBSTtvQkFDRmtDLElBQUlGO2dCQUNOO1lBQ0Y7UUFDRjtRQUVBLElBQUlDLFFBQVFFLE1BQU0sS0FBS0gsVUFBVUcsTUFBTSxFQUFFO1lBQ3ZDekIsUUFBUUQsS0FBSyxDQUFDO1lBQ2QsT0FBTztRQUNUO1FBRUEsa0NBQWtDO1FBQ2xDLE1BQU1YLDREQUFtQixDQUN2QmtDLFVBQVVLLEdBQUcsQ0FBQyxDQUFDQyxVQUFVQyxRQUN2QnpDLHNEQUFhLENBQUN5QixNQUFNLENBQUM7Z0JBQ25CbEIsT0FBTztvQkFBRUwsSUFBSXNDO2dCQUFTO2dCQUN0QnJCLE1BQU07b0JBQUVGLE9BQU93QixRQUFRO2dCQUFFO1lBQzNCO1FBSUosT0FBTztJQUNULEVBQUUsT0FBTzlCLE9BQU87UUFDZEMsUUFBUUQsS0FBSyxDQUFDLDZCQUE2QkE7UUFDM0MsT0FBTztJQUNUO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9jaG9pY2UtZS1sZWFybmluZy8uL3NyYy9saWIvZGIvc2VydmljZXMvbGVzc29uLXNlcnZpY2UudHM/ODJlMCJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzZXJ2ZXJcIjtcblxuaW1wb3J0IHByaXNtYSBmcm9tICdAL2xpYi9kYic7XG5pbXBvcnQgeyBMZXNzb24sIFByaXNtYSB9IGZyb20gJ0BwcmlzbWEvY2xpZW50JztcblxuLyoqXG4gKiBGaW5kIGEgbGVzc29uIGJ5IElEXG4gKiBAcGFyYW0gaWQgTGVzc29uIElEXG4gKiBAcGFyYW0gaW5jbHVkZUNvdXJzZSBJbmNsdWRlIHJlbGF0ZWQgY291cnNlIGRhdGFcbiAqIEByZXR1cm5zIExlc3NvbiBvYmplY3Qgb3IgbnVsbCBpZiBub3QgZm91bmRcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGZpbmRMZXNzb25CeUlkKFxuICBpZDogc3RyaW5nLFxuICBpbmNsdWRlQ291cnNlOiBib29sZWFuID0gZmFsc2Vcbik6IFByb21pc2U8TGVzc29uIHwgbnVsbD4ge1xuICB0cnkge1xuICAgIGlmICghaWQubWF0Y2goL15bMC05YS1mQS1GXXsyNH0kLykpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICBcbiAgICByZXR1cm4gYXdhaXQgcHJpc21hLmxlc3Nvbi5maW5kVW5pcXVlKHtcbiAgICAgIHdoZXJlOiB7IGlkIH0sXG4gICAgICBpbmNsdWRlOiBpbmNsdWRlQ291cnNlID8ge1xuICAgICAgICBjb3Vyc2U6IHRydWVcbiAgICAgIH0gOiB1bmRlZmluZWRcbiAgICB9KTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBmaW5kaW5nIGxlc3NvbiBieSBJRDonLCBlcnJvcik7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbn1cblxuLyoqXG4gKiBHZXQgbGVzc29ucyBmb3IgYSBjb3Vyc2VcbiAqIEBwYXJhbSBjb3Vyc2VJZCBDb3Vyc2UgSURcbiAqIEByZXR1cm5zIEFycmF5IG9mIGxlc3NvbnNcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldExlc3NvbnNGb3JDb3Vyc2UoY291cnNlSWQ6IHN0cmluZyk6IFByb21pc2U8TGVzc29uW10+IHtcbiAgdHJ5IHtcbiAgICByZXR1cm4gYXdhaXQgcHJpc21hLmxlc3Nvbi5maW5kTWFueSh7XG4gICAgICB3aGVyZTogeyBjb3Vyc2VJZCB9LFxuICAgICAgb3JkZXJCeTogeyBvcmRlcjogJ2FzYycgfVxuICAgIH0pO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGdldHRpbmcgbGVzc29ucyBmb3IgY291cnNlOicsIGVycm9yKTtcbiAgICByZXR1cm4gW107XG4gIH1cbn1cblxuLyoqXG4gKiBDcmVhdGUgYSBuZXcgbGVzc29uXG4gKiBAcGFyYW0gZGF0YSBMZXNzb24gZGF0YVxuICogQHJldHVybnMgQ3JlYXRlZCBsZXNzb24gb3IgbnVsbCBpZiBjcmVhdGlvbiBmYWlsZWRcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNyZWF0ZUxlc3NvbihkYXRhOiBQcmlzbWEuTGVzc29uQ3JlYXRlSW5wdXQpOiBQcm9taXNlPExlc3NvbiB8IG51bGw+IHtcbiAgdHJ5IHtcbiAgICAvLyBJZiBvcmRlciBpcyBub3QgcHJvdmlkZWQsIGdldCB0aGUgaGlnaGVzdCBvcmRlciBhbmQgYWRkIDFcbiAgICBpZiAoIWRhdGEub3JkZXIpIHtcbiAgICAgIGNvbnN0IGhpZ2hlc3RPcmRlckxlc3NvbiA9IGF3YWl0IHByaXNtYS5sZXNzb24uZmluZEZpcnN0KHtcbiAgICAgICAgd2hlcmU6IHsgY291cnNlSWQ6IGRhdGEuY291cnNlLmNvbm5lY3Q/LmlkIGFzIHN0cmluZyB9LFxuICAgICAgICBvcmRlckJ5OiB7IG9yZGVyOiAnZGVzYycgfVxuICAgICAgfSk7XG4gICAgICBcbiAgICAgIGRhdGEub3JkZXIgPSBoaWdoZXN0T3JkZXJMZXNzb24gPyBoaWdoZXN0T3JkZXJMZXNzb24ub3JkZXIgKyAxIDogMTtcbiAgICB9XG4gICAgXG4gICAgcmV0dXJuIGF3YWl0IHByaXNtYS5sZXNzb24uY3JlYXRlKHtcbiAgICAgIGRhdGFcbiAgICB9KTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBjcmVhdGluZyBsZXNzb246JywgZXJyb3IpO1xuICAgIHJldHVybiBudWxsO1xuICB9XG59XG5cbi8qKlxuICogVXBkYXRlIGxlc3NvbiBkYXRhXG4gKiBAcGFyYW0gaWQgTGVzc29uIElEXG4gKiBAcGFyYW0gZGF0YSBMZXNzb24gZGF0YSB0byB1cGRhdGVcbiAqIEByZXR1cm5zIFVwZGF0ZWQgbGVzc29uIG9yIG51bGwgaWYgdXBkYXRlIGZhaWxlZFxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gdXBkYXRlTGVzc29uKFxuICBpZDogc3RyaW5nLFxuICBkYXRhOiBQcmlzbWEuTGVzc29uVXBkYXRlSW5wdXRcbik6IFByb21pc2U8TGVzc29uIHwgbnVsbD4ge1xuICB0cnkge1xuICAgIHJldHVybiBhd2FpdCBwcmlzbWEubGVzc29uLnVwZGF0ZSh7XG4gICAgICB3aGVyZTogeyBpZCB9LFxuICAgICAgZGF0YVxuICAgIH0pO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHVwZGF0aW5nIGxlc3NvbjonLCBlcnJvcik7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbn1cblxuLyoqXG4gKiBEZWxldGUgYSBsZXNzb25cbiAqIEBwYXJhbSBpZCBMZXNzb24gSURcbiAqIEByZXR1cm5zIERlbGV0ZWQgbGVzc29uIG9yIG51bGwgaWYgZGVsZXRpb24gZmFpbGVkXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBkZWxldGVMZXNzb24oaWQ6IHN0cmluZyk6IFByb21pc2U8TGVzc29uIHwgbnVsbD4ge1xuICB0cnkge1xuICAgIC8vIEdldCB0aGUgbGVzc29uIHRvIGJlIGRlbGV0ZWRcbiAgICBjb25zdCBsZXNzb25Ub0RlbGV0ZSA9IGF3YWl0IHByaXNtYS5sZXNzb24uZmluZFVuaXF1ZSh7XG4gICAgICB3aGVyZTogeyBpZCB9XG4gICAgfSk7XG4gICAgXG4gICAgaWYgKCFsZXNzb25Ub0RlbGV0ZSkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIFxuICAgIC8vIERlbGV0ZSB0aGUgbGVzc29uXG4gICAgY29uc3QgZGVsZXRlZExlc3NvbiA9IGF3YWl0IHByaXNtYS5sZXNzb24uZGVsZXRlKHtcbiAgICAgIHdoZXJlOiB7IGlkIH1cbiAgICB9KTtcbiAgICBcbiAgICAvLyBSZS1vcmRlciB0aGUgcmVtYWluaW5nIGxlc3NvbnNcbiAgICBhd2FpdCBwcmlzbWEubGVzc29uLnVwZGF0ZU1hbnkoe1xuICAgICAgd2hlcmU6IHtcbiAgICAgICAgY291cnNlSWQ6IGxlc3NvblRvRGVsZXRlLmNvdXJzZUlkLFxuICAgICAgICBvcmRlcjoge1xuICAgICAgICAgIGd0OiBsZXNzb25Ub0RlbGV0ZS5vcmRlclxuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgZGF0YToge1xuICAgICAgICBvcmRlcjoge1xuICAgICAgICAgIGRlY3JlbWVudDogMVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSk7XG4gICAgXG4gICAgcmV0dXJuIGRlbGV0ZWRMZXNzb247XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgZGVsZXRpbmcgbGVzc29uOicsIGVycm9yKTtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxufVxuXG4vKipcbiAqIFJlb3JkZXIgbGVzc29ucyBmb3IgYSBjb3Vyc2VcbiAqIEBwYXJhbSBjb3Vyc2VJZCBDb3Vyc2UgSURcbiAqIEBwYXJhbSBsZXNzb25JZHMgQXJyYXkgb2YgbGVzc29uIElEcyBpbiB0aGUgZGVzaXJlZCBvcmRlclxuICogQHJldHVybnMgU3VjY2VzcyBmbGFnXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiByZW9yZGVyTGVzc29ucyhcbiAgY291cnNlSWQ6IHN0cmluZyxcbiAgbGVzc29uSWRzOiBzdHJpbmdbXVxuKTogUHJvbWlzZTxib29sZWFuPiB7XG4gIHRyeSB7XG4gICAgLy8gVmVyaWZ5IGFsbCBsZXNzb25zIGV4aXN0IGFuZCBiZWxvbmcgdG8gdGhlIGNvdXJzZVxuICAgIGNvbnN0IGxlc3NvbnMgPSBhd2FpdCBwcmlzbWEubGVzc29uLmZpbmRNYW55KHtcbiAgICAgIHdoZXJlOiB7XG4gICAgICAgIGNvdXJzZUlkLFxuICAgICAgICBpZDoge1xuICAgICAgICAgIGluOiBsZXNzb25JZHNcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pO1xuICAgIFxuICAgIGlmIChsZXNzb25zLmxlbmd0aCAhPT0gbGVzc29uSWRzLmxlbmd0aCkge1xuICAgICAgY29uc29sZS5lcnJvcignTm90IGFsbCBsZXNzb25zIGV4aXN0IG9yIGJlbG9uZyB0byB0aGUgY291cnNlJyk7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIFxuICAgIC8vIFVwZGF0ZSB0aGUgb3JkZXIgb2YgZWFjaCBsZXNzb25cbiAgICBhd2FpdCBwcmlzbWEuJHRyYW5zYWN0aW9uKFxuICAgICAgbGVzc29uSWRzLm1hcCgobGVzc29uSWQsIGluZGV4KSA9PiBcbiAgICAgICAgcHJpc21hLmxlc3Nvbi51cGRhdGUoe1xuICAgICAgICAgIHdoZXJlOiB7IGlkOiBsZXNzb25JZCB9LFxuICAgICAgICAgIGRhdGE6IHsgb3JkZXI6IGluZGV4ICsgMSB9XG4gICAgICAgIH0pXG4gICAgICApXG4gICAgKTtcbiAgICBcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciByZW9yZGVyaW5nIGxlc3NvbnM6JywgZXJyb3IpO1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxufVxuIl0sIm5hbWVzIjpbInByaXNtYSIsImZpbmRMZXNzb25CeUlkIiwiaWQiLCJpbmNsdWRlQ291cnNlIiwibWF0Y2giLCJsZXNzb24iLCJmaW5kVW5pcXVlIiwid2hlcmUiLCJpbmNsdWRlIiwiY291cnNlIiwidW5kZWZpbmVkIiwiZXJyb3IiLCJjb25zb2xlIiwiZ2V0TGVzc29uc0ZvckNvdXJzZSIsImNvdXJzZUlkIiwiZmluZE1hbnkiLCJvcmRlckJ5Iiwib3JkZXIiLCJjcmVhdGVMZXNzb24iLCJkYXRhIiwiaGlnaGVzdE9yZGVyTGVzc29uIiwiZmluZEZpcnN0IiwiY29ubmVjdCIsImNyZWF0ZSIsInVwZGF0ZUxlc3NvbiIsInVwZGF0ZSIsImRlbGV0ZUxlc3NvbiIsImxlc3NvblRvRGVsZXRlIiwiZGVsZXRlZExlc3NvbiIsImRlbGV0ZSIsInVwZGF0ZU1hbnkiLCJndCIsImRlY3JlbWVudCIsInJlb3JkZXJMZXNzb25zIiwibGVzc29uSWRzIiwibGVzc29ucyIsImluIiwibGVuZ3RoIiwiJHRyYW5zYWN0aW9uIiwibWFwIiwibGVzc29uSWQiLCJpbmRleCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/db/services/lesson-service.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/db/services/user-service.ts":
/*!*********************************************!*\
  !*** ./src/lib/db/services/user-service.ts ***!
  \*********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createUser: () => (/* binding */ createUser),\n/* harmony export */   deleteUser: () => (/* binding */ deleteUser),\n/* harmony export */   findUserByEmail: () => (/* binding */ findUserByEmail),\n/* harmony export */   findUserById: () => (/* binding */ findUserById),\n/* harmony export */   getUsers: () => (/* binding */ getUsers),\n/* harmony export */   updateUser: () => (/* binding */ updateUser),\n/* harmony export */   updateUserLoginInfo: () => (/* binding */ updateUserLoginInfo),\n/* harmony export */   updateUserRole: () => (/* binding */ updateUserRole),\n/* harmony export */   verifyUserCredentials: () => (/* binding */ verifyUserCredentials)\n/* harmony export */ });\n/* harmony import */ var private_next_rsc_action_proxy__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! private-next-rsc-action-proxy */ \"(rsc)/./node_modules/next/dist/build/webpack/loaders/next-flight-loader/action-proxy.js\");\n/* harmony import */ var private_next_rsc_action_encryption__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! private-next-rsc-action-encryption */ \"(rsc)/./node_modules/next/dist/server/app-render/action-encryption.js\");\n/* harmony import */ var private_next_rsc_action_encryption__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(private_next_rsc_action_encryption__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _lib_db__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/lib/db */ \"(rsc)/./src/lib/db.ts\");\n/* harmony import */ var _lib_auth_utils_password_utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/lib/auth/utils/password-utils */ \"(rsc)/./src/lib/auth/utils/password-utils.ts\");\n/* harmony import */ var private_next_rsc_action_validate__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! private-next-rsc-action-validate */ \"(rsc)/./node_modules/next/dist/build/webpack/loaders/next-flight-loader/action-validate.js\");\n/* __next_internal_action_entry_do_not_use__ {\"1a1582b55cd91be6744a06e7e3fd7ceb2909bc9c\":\"updateUser\",\"723b2431e2c142224dc0dca194a97df55ea40acd\":\"createUser\",\"735aa612c19d693c8d5f7a491a0542553d43ab3d\":\"updateUserLoginInfo\",\"8ab13d08030a4222e06e3f5758a98bbc12367141\":\"getUsers\",\"922b99c5f1280253923ffe5863daa571da85e46f\":\"findUserByEmail\",\"bab8ca42c8fcb33ef1d634a3e25c0b1799325298\":\"verifyUserCredentials\",\"dfb0e89cc8e108c0d5772f399be47babbf180620\":\"updateUserRole\",\"f67b323e1c7690143a4725bfd8362c7db359975a\":\"findUserById\",\"f6a00057f2c982dc382072114ff03da222c669a7\":\"deleteUser\"} */ \n\n\n\n/**\n * Find a user by ID\n * @param id User ID\n * @returns User object or null if not found\n */ async function findUserById(id) {\n    try {\n        if (!id.match(/^[0-9a-fA-F]{24}$/)) {\n            return null;\n        }\n        return await _lib_db__WEBPACK_IMPORTED_MODULE_2__[\"default\"].user.findUnique({\n            where: {\n                id\n            }\n        });\n    } catch (error) {\n        console.error(\"Error finding user by ID:\", error);\n        return null;\n    }\n}\n/**\n * Find a user by email\n * @param email User email\n * @returns User object or null if not found\n */ async function findUserByEmail(email) {\n    try {\n        if (!email) return null;\n        return await _lib_db__WEBPACK_IMPORTED_MODULE_2__[\"default\"].user.findUnique({\n            where: {\n                email: email.toLowerCase()\n            }\n        });\n    } catch (error) {\n        console.error(\"Error finding user by email:\", error);\n        return null;\n    }\n}\n/**\n * Create a new user\n * @param userData User data with plaintext password\n * @returns Created user without password or null if creation failed\n */ async function createUser(userData) {\n    try {\n        // Hash the password\n        const hashedPassword = await (0,_lib_auth_utils_password_utils__WEBPACK_IMPORTED_MODULE_3__.hashPassword)(userData.password);\n        // Create the user\n        const user = await _lib_db__WEBPACK_IMPORTED_MODULE_2__[\"default\"].user.create({\n            data: {\n                name: userData.name,\n                email: userData.email.toLowerCase(),\n                password: hashedPassword,\n                role: userData.role || \"student\"\n            }\n        });\n        // Return user without password\n        const { password, ...userWithoutPassword } = user;\n        return userWithoutPassword;\n    } catch (error) {\n        console.error(\"Error creating user:\", error);\n        return null;\n    }\n}\n/**\n * Update user data\n * @param id User ID\n * @param data User data to update\n * @returns Updated user without password or null if update failed\n */ async function updateUser(id, data) {\n    try {\n        // If password is being updated, hash it first\n        if (typeof data.password === \"string\") {\n            data.password = await (0,_lib_auth_utils_password_utils__WEBPACK_IMPORTED_MODULE_3__.hashPassword)(data.password);\n        }\n        const user = await _lib_db__WEBPACK_IMPORTED_MODULE_2__[\"default\"].user.update({\n            where: {\n                id\n            },\n            data\n        });\n        // Return user without password\n        const { password, ...userWithoutPassword } = user;\n        return userWithoutPassword;\n    } catch (error) {\n        console.error(\"Error updating user:\", error);\n        return null;\n    }\n}\n/**\n * Update user role\n * @param id User ID\n * @param role New role\n * @returns Updated user without password or null if update failed\n */ async function updateUserRole(id, role) {\n    try {\n        const user = await _lib_db__WEBPACK_IMPORTED_MODULE_2__[\"default\"].user.update({\n            where: {\n                id\n            },\n            data: {\n                role\n            }\n        });\n        // Return user without password\n        const { password, ...userWithoutPassword } = user;\n        return userWithoutPassword;\n    } catch (error) {\n        console.error(\"Error updating user role:\", error);\n        return null;\n    }\n}\n/**\n * Verify user credentials\n * @param email User email\n * @param password User plaintext password\n * @returns User without password if credentials valid, null otherwise\n */ async function verifyUserCredentials(email, password) {\n    try {\n        // Find user by email\n        const user = await _lib_db__WEBPACK_IMPORTED_MODULE_2__[\"default\"].user.findUnique({\n            where: {\n                email: email.toLowerCase()\n            }\n        });\n        if (!user) return null;\n        // Verify password\n        const isPasswordValid = await (0,_lib_auth_utils_password_utils__WEBPACK_IMPORTED_MODULE_3__.comparePasswords)(password, user.password);\n        if (!isPasswordValid) return null;\n        // Return user without password\n        const { password: _, ...userWithoutPassword } = user;\n        return userWithoutPassword;\n    } catch (error) {\n        console.error(\"Error verifying credentials:\", error);\n        return null;\n    }\n}\n/**\n * Get users with pagination\n * @param page Page number (1-based)\n * @param pageSize Page size\n * @param whereClause Optional filter criteria\n * @returns Paginated users without passwords\n */ async function getUsers(page = 1, pageSize = 10, whereClause = {}) {\n    try {\n        // Ensure page and pageSize are valid\n        page = Math.max(1, page);\n        pageSize = Math.max(1, Math.min(100, pageSize));\n        // Get total count\n        const total = await _lib_db__WEBPACK_IMPORTED_MODULE_2__[\"default\"].user.count({\n            where: whereClause\n        });\n        // Calculate total pages\n        const pages = Math.ceil(total / pageSize);\n        // Get users for the requested page\n        const users = await _lib_db__WEBPACK_IMPORTED_MODULE_2__[\"default\"].user.findMany({\n            where: whereClause,\n            skip: (page - 1) * pageSize,\n            take: pageSize,\n            orderBy: {\n                createdAt: \"desc\"\n            }\n        });\n        // Remove passwords\n        const usersWithoutPasswords = users.map((user)=>{\n            const { password, ...rest } = user;\n            return rest;\n        });\n        return {\n            users: usersWithoutPasswords,\n            total,\n            pages\n        };\n    } catch (error) {\n        console.error(\"Error getting users:\", error);\n        return {\n            users: [],\n            total: 0,\n            pages: 0\n        };\n    }\n}\n/**\n * Update user's last login and login history\n * @param id User ID\n * @returns Success flag\n */ async function updateUserLoginInfo(id) {\n    try {\n        const now = new Date();\n        await _lib_db__WEBPACK_IMPORTED_MODULE_2__[\"default\"].user.update({\n            where: {\n                id\n            },\n            data: {\n                updatedAt: now\n            }\n        });\n        return true;\n    } catch (error) {\n        console.error(\"Error updating login info:\", error);\n        return false;\n    }\n}\n/**\n * Delete a user\n * @param id User ID\n * @returns Deleted user without password or null if deletion failed\n */ async function deleteUser(id) {\n    try {\n        const user = await _lib_db__WEBPACK_IMPORTED_MODULE_2__[\"default\"].user.delete({\n            where: {\n                id\n            }\n        });\n        // Return user without password\n        const { password, ...userWithoutPassword } = user;\n        return userWithoutPassword;\n    } catch (error) {\n        console.error(\"Error deleting user:\", error);\n        return null;\n    }\n}\n\n(0,private_next_rsc_action_validate__WEBPACK_IMPORTED_MODULE_4__.ensureServerEntryExports)([\n    findUserById,\n    findUserByEmail,\n    createUser,\n    updateUser,\n    updateUserRole,\n    verifyUserCredentials,\n    getUsers,\n    updateUserLoginInfo,\n    deleteUser\n]);\n(0,private_next_rsc_action_proxy__WEBPACK_IMPORTED_MODULE_0__.createActionProxy)(\"f67b323e1c7690143a4725bfd8362c7db359975a\", findUserById);\n(0,private_next_rsc_action_proxy__WEBPACK_IMPORTED_MODULE_0__.createActionProxy)(\"922b99c5f1280253923ffe5863daa571da85e46f\", findUserByEmail);\n(0,private_next_rsc_action_proxy__WEBPACK_IMPORTED_MODULE_0__.createActionProxy)(\"723b2431e2c142224dc0dca194a97df55ea40acd\", createUser);\n(0,private_next_rsc_action_proxy__WEBPACK_IMPORTED_MODULE_0__.createActionProxy)(\"1a1582b55cd91be6744a06e7e3fd7ceb2909bc9c\", updateUser);\n(0,private_next_rsc_action_proxy__WEBPACK_IMPORTED_MODULE_0__.createActionProxy)(\"dfb0e89cc8e108c0d5772f399be47babbf180620\", updateUserRole);\n(0,private_next_rsc_action_proxy__WEBPACK_IMPORTED_MODULE_0__.createActionProxy)(\"bab8ca42c8fcb33ef1d634a3e25c0b1799325298\", verifyUserCredentials);\n(0,private_next_rsc_action_proxy__WEBPACK_IMPORTED_MODULE_0__.createActionProxy)(\"8ab13d08030a4222e06e3f5758a98bbc12367141\", getUsers);\n(0,private_next_rsc_action_proxy__WEBPACK_IMPORTED_MODULE_0__.createActionProxy)(\"735aa612c19d693c8d5f7a491a0542553d43ab3d\", updateUserLoginInfo);\n(0,private_next_rsc_action_proxy__WEBPACK_IMPORTED_MODULE_0__.createActionProxy)(\"f6a00057f2c982dc382072114ff03da222c669a7\", deleteUser);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL2RiL3NlcnZpY2VzL3VzZXItc2VydmljZS50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUU4QjtBQUVtRDtBQUdqRjs7OztDQUlDLEdBQ00sZUFBZUcsYUFBYUMsRUFBVTtJQUMzQyxJQUFJO1FBQ0YsSUFBSSxDQUFDQSxHQUFHQyxLQUFLLENBQUMsc0JBQXNCO1lBQ2xDLE9BQU87UUFDVDtRQUVBLE9BQU8sTUFBTUwsb0RBQVcsQ0FBQ08sVUFBVSxDQUFDO1lBQ2xDQyxPQUFPO2dCQUFFSjtZQUFHO1FBQ2Q7SUFDRixFQUFFLE9BQU9LLE9BQU87UUFDZEMsUUFBUUQsS0FBSyxDQUFDLDZCQUE2QkE7UUFDM0MsT0FBTztJQUNUO0FBQ0Y7QUFFQTs7OztDQUlDLEdBQ00sZUFBZUUsZ0JBQWdCQyxLQUFhO0lBQ2pELElBQUk7UUFDRixJQUFJLENBQUNBLE9BQU8sT0FBTztRQUVuQixPQUFPLE1BQU1aLG9EQUFXLENBQUNPLFVBQVUsQ0FBQztZQUNsQ0MsT0FBTztnQkFBRUksT0FBT0EsTUFBTUMsV0FBVztZQUFHO1FBQ3RDO0lBQ0YsRUFBRSxPQUFPSixPQUFPO1FBQ2RDLFFBQVFELEtBQUssQ0FBQyxnQ0FBZ0NBO1FBQzlDLE9BQU87SUFDVDtBQUNGO0FBRUE7Ozs7Q0FJQyxHQUNNLGVBQWVLLFdBQVdDLFFBQTJCO0lBQzFELElBQUk7UUFDRixvQkFBb0I7UUFDcEIsTUFBTUMsaUJBQWlCLE1BQU1mLDRFQUFZQSxDQUFDYyxTQUFTRSxRQUFRO1FBRTNELGtCQUFrQjtRQUNsQixNQUFNWCxPQUFPLE1BQU1OLG9EQUFXLENBQUNrQixNQUFNLENBQUM7WUFDcENDLE1BQU07Z0JBQ0pDLE1BQU1MLFNBQVNLLElBQUk7Z0JBQ25CUixPQUFPRyxTQUFTSCxLQUFLLENBQUNDLFdBQVc7Z0JBQ2pDSSxVQUFVRDtnQkFDVkssTUFBTU4sU0FBU00sSUFBSSxJQUFJO1lBQ3pCO1FBQ0Y7UUFFQSwrQkFBK0I7UUFDL0IsTUFBTSxF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QUFBO1lBQ3RDLE1BQU0sRUFBRVcsUUFBUSxFQUFFLEdBQUcrQixNQUFNLEdBQUcxQztZQUM5QixPQUFPMEM7UUFDVDtRQUVBLE9BQU87WUFDTFIsT0FBT007WUFDUFY7WUFDQUU7UUFDRjtJQUNGLEVBQUUsT0FBTzdCLE9BQU87UUFDZEMsUUFBUUQsS0FBSyxDQUFDLHdCQUF3QkE7UUFDdEMsT0FBTztZQUNMK0IsT0FBTyxFQUFFO1lBQ1RKLE9BQU87WUFDUEUsT0FBTztRQUNUO0lBQ0Y7QUFDRjtBQUVBOzs7O0NBSUMsR0FDTSxlQUFlVyxvQkFBb0I3QyxFQUFVO0lBQ2xELElBQUk7UUFDRixNQUFNOEMsTUFBTSxJQUFJQztRQUVoQixNQUFNbkQsb0RBQVcsQ0FBQ3dCLE1BQU0sQ0FBQztZQUN2QmhCLE9BQU87Z0JBQUVKO1lBQUc7WUFDWmUsTUFBTTtnQkFDSmlDLFdBQVdGO1lBR2I7UUFDRjtRQUVBLE9BQU87SUFDVCxFQUFFLE9BQU96QyxPQUFPO1FBQ2RDLFFBQVFELEtBQUssQ0FBQyw4QkFBOEJBO1FBQzVDLE9BQU87SUFDVDtBQUNGO0FBRUE7Ozs7Q0FJQyxHQUNNLGVBQWU0QyxXQUFXakQsRUFBVTtJQUN6QyxJQUFJO1FBQ0YsTUFBTUUsT0FBTyxNQUFNTixvREFBVyxDQUFDc0QsTUFBTSxDQUFDO1lBQ3BDOUMsT0FBTztnQkFBRUo7WUFBRztRQUNkO1FBRUEsK0JBQStCO1FBQy9CLE1BQU0sRUFBRWEsUUFBUSxFQUFFLEdBQUdLLHFCQUFxQixHQUFHaEI7UUFDN0MsT0FBT2dCO0lBQ1QsRUFBRSxPQUFPYixPQUFPO1FBQ2RDLFFBQVFELEtBQUssQ0FBQyx3QkFBd0JBO1FBQ3RDLE9BQU87SUFDVDtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vY2hvaWNlLWUtbGVhcm5pbmcvLi9zcmMvbGliL2RiL3NlcnZpY2VzL3VzZXItc2VydmljZS50cz8wMmQ4Il0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHNlcnZlclwiO1xuXG5pbXBvcnQgcHJpc21hIGZyb20gJ0AvbGliL2RiJztcbmltcG9ydCB7IFVzZXIsIFByaXNtYSB9IGZyb20gJ0BwcmlzbWEvY2xpZW50JztcbmltcG9ydCB7IGhhc2hQYXNzd29yZCwgY29tcGFyZVBhc3N3b3JkcyB9IGZyb20gJ0AvbGliL2F1dGgvdXRpbHMvcGFzc3dvcmQtdXRpbHMnO1xuaW1wb3J0IHsgQ3JlYXRlVXNlclJlcXVlc3QgfSBmcm9tICdAL3R5cGVzL3VzZXInO1xuXG4vKipcbiAqIEZpbmQgYSB1c2VyIGJ5IElEXG4gKiBAcGFyYW0gaWQgVXNlciBJRFxuICogQHJldHVybnMgVXNlciBvYmplY3Qgb3IgbnVsbCBpZiBub3QgZm91bmRcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGZpbmRVc2VyQnlJZChpZDogc3RyaW5nKTogUHJvbWlzZTxVc2VyIHwgbnVsbD4ge1xuICB0cnkge1xuICAgIGlmICghaWQubWF0Y2goL15bMC05YS1mQS1GXXsyNH0kLykpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICBcbiAgICByZXR1cm4gYXdhaXQgcHJpc21hLnVzZXIuZmluZFVuaXF1ZSh7XG4gICAgICB3aGVyZTogeyBpZCB9XG4gICAgfSk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgZmluZGluZyB1c2VyIGJ5IElEOicsIGVycm9yKTtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxufVxuXG4vKipcbiAqIEZpbmQgYSB1c2VyIGJ5IGVtYWlsXG4gKiBAcGFyYW0gZW1haWwgVXNlciBlbWFpbFxuICogQHJldHVybnMgVXNlciBvYmplY3Qgb3IgbnVsbCBpZiBub3QgZm91bmRcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGZpbmRVc2VyQnlFbWFpbChlbWFpbDogc3RyaW5nKTogUHJvbWlzZTxVc2VyIHwgbnVsbD4ge1xuICB0cnkge1xuICAgIGlmICghZW1haWwpIHJldHVybiBudWxsO1xuICAgIFxuICAgIHJldHVybiBhd2FpdCBwcmlzbWEudXNlci5maW5kVW5pcXVlKHtcbiAgICAgIHdoZXJlOiB7IGVtYWlsOiBlbWFpbC50b0xvd2VyQ2FzZSgpIH1cbiAgICB9KTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBmaW5kaW5nIHVzZXIgYnkgZW1haWw6JywgZXJyb3IpO1xuICAgIHJldHVybiBudWxsO1xuICB9XG59XG5cbi8qKlxuICogQ3JlYXRlIGEgbmV3IHVzZXJcbiAqIEBwYXJhbSB1c2VyRGF0YSBVc2VyIGRhdGEgd2l0aCBwbGFpbnRleHQgcGFzc3dvcmRcbiAqIEByZXR1cm5zIENyZWF0ZWQgdXNlciB3aXRob3V0IHBhc3N3b3JkIG9yIG51bGwgaWYgY3JlYXRpb24gZmFpbGVkXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjcmVhdGVVc2VyKHVzZXJEYXRhOiBDcmVhdGVVc2VyUmVxdWVzdCk6IFByb21pc2U8T21pdDxVc2VyLCAncGFzc3dvcmQnPiB8IG51bGw+IHtcbiAgdHJ5IHtcbiAgICAvLyBIYXNoIHRoZSBwYXNzd29yZFxuICAgIGNvbnN0IGhhc2hlZFBhc3N3b3JkID0gYXdhaXQgaGFzaFBhc3N3b3JkKHVzZXJEYXRhLnBhc3N3b3JkKTtcbiAgICBcbiAgICAvLyBDcmVhdGUgdGhlIHVzZXJcbiAgICBjb25zdCB1c2VyID0gYXdhaXQgcHJpc21hLnVzZXIuY3JlYXRlKHtcbiAgICAgIGRhdGE6IHtcbiAgICAgICAgbmFtZTogdXNlckRhdGEubmFtZSxcbiAgICAgICAgZW1haWw6IHVzZXJEYXRhLmVtYWlsLnRvTG93ZXJDYXNlKCksXG4gICAgICAgIHBhc3N3b3JkOiBoYXNoZWRQYXNzd29yZCxcbiAgICAgICAgcm9sZTogdXNlckRhdGEucm9sZSB8fCAnc3R1ZGVudCcsXG4gICAgICB9XG4gICAgfSk7XG4gICAgXG4gICAgLy8gUmV0dXJuIHVzZXIgd2l0aG91dCBwYXNzd29yZFxuICAgIGNvbnN0IHsgcGFzc3dvcmQsIC4uLnVzZXJXaXRob3V0UGFzc3dvcmQgfSA9IHVzZXI7XG4gICAgcmV0dXJuIHVzZXJXaXRob3V0UGFzc3dvcmQ7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgY3JlYXRpbmcgdXNlcjonLCBlcnJvcik7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbn1cblxuLyoqXG4gKiBVcGRhdGUgdXNlciBkYXRhXG4gKiBAcGFyYW0gaWQgVXNlciBJRFxuICogQHBhcmFtIGRhdGEgVXNlciBkYXRhIHRvIHVwZGF0ZVxuICogQHJldHVybnMgVXBkYXRlZCB1c2VyIHdpdGhvdXQgcGFzc3dvcmQgb3IgbnVsbCBpZiB1cGRhdGUgZmFpbGVkXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiB1cGRhdGVVc2VyKFxuICBpZDogc3RyaW5nLCBcbiAgZGF0YTogUHJpc21hLlVzZXJVcGRhdGVJbnB1dFxuKTogUHJvbWlzZTxPbWl0PFVzZXIsICdwYXNzd29yZCc+IHwgbnVsbD4ge1xuICB0cnkge1xuICAgIC8vIElmIHBhc3N3b3JkIGlzIGJlaW5nIHVwZGF0ZWQsIGhhc2ggaXQgZmlyc3RcbiAgICBpZiAodHlwZW9mIGRhdGEucGFzc3dvcmQgPT09ICdzdHJpbmcnKSB7XG4gICAgICBkYXRhLnBhc3N3b3JkID0gYXdhaXQgaGFzaFBhc3N3b3JkKGRhdGEucGFzc3dvcmQpO1xuICAgIH1cbiAgICBcbiAgICBjb25zdCB1c2VyID0gYXdhaXQgcHJpc21hLnVzZXIudXBkYXRlKHtcbiAgICAgIHdoZXJlOiB7IGlkIH0sXG4gICAgICBkYXRhXG4gICAgfSk7XG4gICAgXG4gICAgLy8gUmV0dXJuIHVzZXIgd2l0aG91dCBwYXNzd29yZFxuICAgIGNvbnN0IHsgcGFzc3dvcmQsIC4uLnVzZXJXaXRob3V0UGFzc3dvcmQgfSA9IHVzZXI7XG4gICAgcmV0dXJuIHVzZXJXaXRob3V0UGFzc3dvcmQ7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgdXBkYXRpbmcgdXNlcjonLCBlcnJvcik7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbn1cblxuLyoqXG4gKiBVcGRhdGUgdXNlciByb2xlXG4gKiBAcGFyYW0gaWQgVXNlciBJRFxuICogQHBhcmFtIHJvbGUgTmV3IHJvbGVcbiAqIEByZXR1cm5zIFVwZGF0ZWQgdXNlciB3aXRob3V0IHBhc3N3b3JkIG9yIG51bGwgaWYgdXBkYXRlIGZhaWxlZFxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gdXBkYXRlVXNlclJvbGUoXG4gIGlkOiBzdHJpbmcsIFxuICByb2xlOiAnc3R1ZGVudCcgfCAnYWRtaW4nXG4pOiBQcm9taXNlPE9taXQ8VXNlciwgJ3Bhc3N3b3JkJz4gfCBudWxsPiB7XG4gIHRyeSB7XG4gICAgY29uc3QgdXNlciA9IGF3YWl0IHByaXNtYS51c2VyLnVwZGF0ZSh7XG4gICAgICB3aGVyZTogeyBpZCB9LFxuICAgICAgZGF0YTogeyByb2xlIH1cbiAgICB9KTtcbiAgICBcbiAgICAvLyBSZXR1cm4gdXNlciB3aXRob3V0IHBhc3N3b3JkXG4gICAgY29uc3QgeyBwYXNzd29yZCwgLi4udXNlcldpdGhvdXRQYXNzd29yZCB9ID0gdXNlcjtcbiAgICByZXR1cm4gdXNlcldpdGhvdXRQYXNzd29yZDtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciB1cGRhdGluZyB1c2VyIHJvbGU6JywgZXJyb3IpO1xuICAgIHJldHVybiBudWxsO1xuICB9XG59XG5cbi8qKlxuICogVmVyaWZ5IHVzZXIgY3JlZGVudGlhbHNcbiAqIEBwYXJhbSBlbWFpbCBVc2VyIGVtYWlsXG4gKiBAcGFyYW0gcGFzc3dvcmQgVXNlciBwbGFpbnRleHQgcGFzc3dvcmRcbiAqIEByZXR1cm5zIFVzZXIgd2l0aG91dCBwYXNzd29yZCBpZiBjcmVkZW50aWFscyB2YWxpZCwgbnVsbCBvdGhlcndpc2VcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHZlcmlmeVVzZXJDcmVkZW50aWFscyhcbiAgZW1haWw6IHN0cmluZywgXG4gIHBhc3N3b3JkOiBzdHJpbmdcbik6IFByb21pc2U8T21pdDxVc2VyLCAncGFzc3dvcmQnPiB8IG51bGw+IHtcbiAgdHJ5IHtcbiAgICAvLyBGaW5kIHVzZXIgYnkgZW1haWxcbiAgICBjb25zdCB1c2VyID0gYXdhaXQgcHJpc21hLnVzZXIuZmluZFVuaXF1ZSh7XG4gICAgICB3aGVyZTogeyBlbWFpbDogZW1haWwudG9Mb3dlckNhc2UoKSB9XG4gICAgfSk7XG4gICAgXG4gICAgaWYgKCF1c2VyKSByZXR1cm4gbnVsbDtcbiAgICBcbiAgICAvLyBWZXJpZnkgcGFzc3dvcmRcbiAgICBjb25zdCBpc1Bhc3N3b3JkVmFsaWQgPSBhd2FpdCBjb21wYXJlUGFzc3dvcmRzKHBhc3N3b3JkLCB1c2VyLnBhc3N3b3JkKTtcbiAgICBpZiAoIWlzUGFzc3dvcmRWYWxpZCkgcmV0dXJuIG51bGw7XG4gICAgXG4gICAgLy8gUmV0dXJuIHVzZXIgd2l0aG91dCBwYXNzd29yZFxuICAgIGNvbnN0IHsgcGFzc3dvcmQ6IF8sIC4uLnVzZXJXaXRob3V0UGFzc3dvcmQgfSA9IHVzZXI7XG4gICAgcmV0dXJuIHVzZXJXaXRob3V0UGFzc3dvcmQ7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgdmVyaWZ5aW5nIGNyZWRlbnRpYWxzOicsIGVycm9yKTtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxufVxuXG4vKipcbiAqIEdldCB1c2VycyB3aXRoIHBhZ2luYXRpb25cbiAqIEBwYXJhbSBwYWdlIFBhZ2UgbnVtYmVyICgxLWJhc2VkKVxuICogQHBhcmFtIHBhZ2VTaXplIFBhZ2Ugc2l6ZVxuICogQHBhcmFtIHdoZXJlQ2xhdXNlIE9wdGlvbmFsIGZpbHRlciBjcml0ZXJpYVxuICogQHJldHVybnMgUGFnaW5hdGVkIHVzZXJzIHdpdGhvdXQgcGFzc3dvcmRzXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRVc2VycyhcbiAgcGFnZTogbnVtYmVyID0gMSwgXG4gIHBhZ2VTaXplOiBudW1iZXIgPSAxMCxcbiAgd2hlcmVDbGF1c2U6IFByaXNtYS5Vc2VyV2hlcmVJbnB1dCA9IHt9XG4pOiBQcm9taXNlPHtcbiAgdXNlcnM6IE9taXQ8VXNlciwgJ3Bhc3N3b3JkJz5bXTtcbiAgdG90YWw6IG51bWJlcjtcbiAgcGFnZXM6IG51bWJlcjtcbn0+IHtcbiAgdHJ5IHtcbiAgICAvLyBFbnN1cmUgcGFnZSBhbmQgcGFnZVNpemUgYXJlIHZhbGlkXG4gICAgcGFnZSA9IE1hdGgubWF4KDEsIHBhZ2UpO1xuICAgIHBhZ2VTaXplID0gTWF0aC5tYXgoMSwgTWF0aC5taW4oMTAwLCBwYWdlU2l6ZSkpO1xuICAgIFxuICAgIC8vIEdldCB0b3RhbCBjb3VudFxuICAgIGNvbnN0IHRvdGFsID0gYXdhaXQgcHJpc21hLnVzZXIuY291bnQoe1xuICAgICAgd2hlcmU6IHdoZXJlQ2xhdXNlXG4gICAgfSk7XG4gICAgXG4gICAgLy8gQ2FsY3VsYXRlIHRvdGFsIHBhZ2VzXG4gICAgY29uc3QgcGFnZXMgPSBNYXRoLmNlaWwodG90YWwgLyBwYWdlU2l6ZSk7XG4gICAgXG4gICAgLy8gR2V0IHVzZXJzIGZvciB0aGUgcmVxdWVzdGVkIHBhZ2VcbiAgICBjb25zdCB1c2VycyA9IGF3YWl0IHByaXNtYS51c2VyLmZpbmRNYW55KHtcbiAgICAgIHdoZXJlOiB3aGVyZUNsYXVzZSxcbiAgICAgIHNraXA6IChwYWdlIC0gMSkgKiBwYWdlU2l6ZSxcbiAgICAgIHRha2U6IHBhZ2VTaXplLFxuICAgICAgb3JkZXJCeTogeyBjcmVhdGVkQXQ6ICdkZXNjJyB9XG4gICAgfSk7XG4gICAgXG4gICAgLy8gUmVtb3ZlIHBhc3N3b3Jkc1xuICAgIGNvbnN0IHVzZXJzV2l0aG91dFBhc3N3b3JkcyA9IHVzZXJzLm1hcCh1c2VyID0+IHtcbiAgICAgIGNvbnN0IHsgcGFzc3dvcmQsIC4uLnJlc3QgfSA9IHVzZXI7XG4gICAgICByZXR1cm4gcmVzdDtcbiAgICB9KTtcbiAgICBcbiAgICByZXR1cm4ge1xuICAgICAgdXNlcnM6IHVzZXJzV2l0aG91dFBhc3N3b3JkcyxcbiAgICAgIHRvdGFsLFxuICAgICAgcGFnZXNcbiAgICB9O1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGdldHRpbmcgdXNlcnM6JywgZXJyb3IpO1xuICAgIHJldHVybiB7XG4gICAgICB1c2VyczogW10sXG4gICAgICB0b3RhbDogMCxcbiAgICAgIHBhZ2VzOiAwXG4gICAgfTtcbiAgfVxufVxuXG4vKipcbiAqIFVwZGF0ZSB1c2VyJ3MgbGFzdCBsb2dpbiBhbmQgbG9naW4gaGlzdG9yeVxuICogQHBhcmFtIGlkIFVzZXIgSURcbiAqIEByZXR1cm5zIFN1Y2Nlc3MgZmxhZ1xuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gdXBkYXRlVXNlckxvZ2luSW5mbyhpZDogc3RyaW5nKTogUHJvbWlzZTxib29sZWFuPiB7XG4gIHRyeSB7XG4gICAgY29uc3Qgbm93ID0gbmV3IERhdGUoKTtcbiAgICBcbiAgICBhd2FpdCBwcmlzbWEudXNlci51cGRhdGUoe1xuICAgICAgd2hlcmU6IHsgaWQgfSxcbiAgICAgIGRhdGE6IHtcbiAgICAgICAgdXBkYXRlZEF0OiBub3dcbiAgICAgICAgLy8gTm90ZTogVGhlIGxvZ2luSGlzdG9yeSBmaWVsZCBpcyBub3QgcGFydCBvZiB0aGUgUHJpc21hIHNjaGVtYVxuICAgICAgICAvLyBXZSB3b3VsZCBuZWVkIHRvIGFkZCBpdCB0byB0aGUgc2NoZW1hIGlmIG5lZWRlZFxuICAgICAgfVxuICAgIH0pO1xuICAgIFxuICAgIHJldHVybiB0cnVlO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHVwZGF0aW5nIGxvZ2luIGluZm86JywgZXJyb3IpO1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxufVxuXG4vKipcbiAqIERlbGV0ZSBhIHVzZXJcbiAqIEBwYXJhbSBpZCBVc2VyIElEXG4gKiBAcmV0dXJucyBEZWxldGVkIHVzZXIgd2l0aG91dCBwYXNzd29yZCBvciBudWxsIGlmIGRlbGV0aW9uIGZhaWxlZFxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZGVsZXRlVXNlcihpZDogc3RyaW5nKTogUHJvbWlzZTxPbWl0PFVzZXIsICdwYXNzd29yZCc+IHwgbnVsbD4ge1xuICB0cnkge1xuICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBwcmlzbWEudXNlci5kZWxldGUoe1xuICAgICAgd2hlcmU6IHsgaWQgfVxuICAgIH0pO1xuICAgIFxuICAgIC8vIFJldHVybiB1c2VyIHdpdGhvdXQgcGFzc3dvcmRcbiAgICBjb25zdCB7IHBhc3N3b3JkLCAuLi51c2VyV2l0aG91dFBhc3N3b3JkIH0gPSB1c2VyO1xuICAgIHJldHVybiB1c2VyV2l0aG91dFBhc3N3b3JkO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGRlbGV0aW5nIHVzZXI6JywgZXJyb3IpO1xuICAgIHJldHVybiBudWxsO1xuICB9XG59XG4iXSwibmFtZXMiOlsicHJpc21hIiwiaGFzaFBhc3N3b3JkIiwiY29tcGFyZVBhc3N3b3JkcyIsImZpbmRVc2VyQnlJZCIsImlkIiwibWF0Y2giLCJ1c2VyIiwiZmluZFVuaXF1ZSIsIndoZXJlIiwiZXJyb3IiLCJjb25zb2xlIiwiZmluZFVzZXJCeUVtYWlsIiwiZW1haWwiLCJ0b0xvd2VyQ2FzZSIsImNyZWF0ZVVzZXIiLCJ1c2VyRGF0YSIsImhhc2hlZFBhc3N3b3JkIiwicGFzc3dvcmQiLCJjcmVhdGUiLCJkYXRhIiwibmFtZSIsInJvbGUiLCJ1c2VyV2l0aG91dFBhc3N3b3JkIiwidXBkYXRlVXNlciIsInVwZGF0ZSIsInVwZGF0ZVVzZXJSb2xlIiwidmVyaWZ5VXNlckNyZWRlbnRpYWxzIiwiaXNQYXNzd29yZFZhbGlkIiwiXyIsImdldFVzZXJzIiwicGFnZSIsInBhZ2VTaXplIiwid2hlcmVDbGF1c2UiLCJNYXRoIiwibWF4IiwibWluIiwidG90YWwiLCJjb3VudCIsInBhZ2VzIiwiY2VpbCIsInVzZXJzIiwiZmluZE1hbnkiLCJza2lwIiwidGFrZSIsIm9yZGVyQnkiLCJjcmVhdGVkQXQiLCJ1c2Vyc1dpdGhvdXRQYXNzd29yZHMiLCJtYXAiLCJyZXN0IiwidXBkYXRlVXNlckxvZ2luSW5mbyIsIm5vdyIsIkRhdGUiLCJ1cGRhdGVkQXQiLCJkZWxldGVVc2VyIiwiZGVsZXRlIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/db/services/user-service.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/next-auth","vendor-chunks/@babel","vendor-chunks/bcryptjs","vendor-chunks/openid-client","vendor-chunks/oauth","vendor-chunks/object-hash","vendor-chunks/preact","vendor-chunks/preact-render-to-string","vendor-chunks/yallist","vendor-chunks/lru-cache","vendor-chunks/cookie","vendor-chunks/oidc-token-hash","vendor-chunks/@panva","vendor-chunks/uuid","vendor-chunks/zod"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fadmin%2Fcourses%2Froute&page=%2Fapi%2Fadmin%2Fcourses%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fadmin%2Fcourses%2Froute.ts&appDir=%2FUsers%2Fjulianlok%2FDocuments%2Fchoice-e-learning%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fjulianlok%2FDocuments%2Fchoice-e-learning&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();