"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/enrolledCourses/route";
exports.ids = ["app/api/enrolledCourses/route"];
exports.modules = {

/***/ "@prisma/client":
/*!*********************************!*\
  !*** external "@prisma/client" ***!
  \*********************************/
/***/ ((module) => {

module.exports = require("@prisma/client");

/***/ }),

/***/ "../../client/components/action-async-storage.external":
/*!*******************************************************************************!*\
  !*** external "next/dist/client/components/action-async-storage.external.js" ***!
  \*******************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/client/components/action-async-storage.external.js");

/***/ }),

/***/ "../../client/components/request-async-storage.external":
/*!********************************************************************************!*\
  !*** external "next/dist/client/components/request-async-storage.external.js" ***!
  \********************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/client/components/request-async-storage.external.js");

/***/ }),

/***/ "../../client/components/static-generation-async-storage.external":
/*!******************************************************************************************!*\
  !*** external "next/dist/client/components/static-generation-async-storage.external.js" ***!
  \******************************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/client/components/static-generation-async-storage.external.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "assert":
/*!*************************!*\
  !*** external "assert" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("assert");

/***/ }),

/***/ "buffer":
/*!*************************!*\
  !*** external "buffer" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("buffer");

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("crypto");

/***/ }),

/***/ "events":
/*!*************************!*\
  !*** external "events" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("events");

/***/ }),

/***/ "http":
/*!***********************!*\
  !*** external "http" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("http");

/***/ }),

/***/ "https":
/*!************************!*\
  !*** external "https" ***!
  \************************/
/***/ ((module) => {

module.exports = require("https");

/***/ }),

/***/ "querystring":
/*!******************************!*\
  !*** external "querystring" ***!
  \******************************/
/***/ ((module) => {

module.exports = require("querystring");

/***/ }),

/***/ "url":
/*!**********************!*\
  !*** external "url" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("url");

/***/ }),

/***/ "util":
/*!***********************!*\
  !*** external "util" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("util");

/***/ }),

/***/ "zlib":
/*!***********************!*\
  !*** external "zlib" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("zlib");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2FenrolledCourses%2Froute&page=%2Fapi%2FenrolledCourses%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2FenrolledCourses%2Froute.ts&appDir=%2FUsers%2Fjulianlok%2FDocuments%2Fchoice-e-learning%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fjulianlok%2FDocuments%2Fchoice-e-learning&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!***************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2FenrolledCourses%2Froute&page=%2Fapi%2FenrolledCourses%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2FenrolledCourses%2Froute.ts&appDir=%2FUsers%2Fjulianlok%2FDocuments%2Fchoice-e-learning%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fjulianlok%2FDocuments%2Fchoice-e-learning&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \***************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   headerHooks: () => (/* binding */ headerHooks),\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage),\n/* harmony export */   staticGenerationBailout: () => (/* binding */ staticGenerationBailout)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _Users_julianlok_Documents_choice_e_learning_src_app_api_enrolledCourses_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./src/app/api/enrolledCourses/route.ts */ \"(rsc)/./src/app/api/enrolledCourses/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/enrolledCourses/route\",\n        pathname: \"/api/enrolledCourses\",\n        filename: \"route\",\n        bundlePath: \"app/api/enrolledCourses/route\"\n    },\n    resolvedPagePath: \"/Users/julianlok/Documents/choice-e-learning/src/app/api/enrolledCourses/route.ts\",\n    nextConfigOutput,\n    userland: _Users_julianlok_Documents_choice_e_learning_src_app_api_enrolledCourses_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks, headerHooks, staticGenerationBailout } = routeModule;\nconst originalPathname = \"/api/enrolledCourses/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZlbnJvbGxlZENvdXJzZXMlMkZyb3V0ZSZwYWdlPSUyRmFwaSUyRmVucm9sbGVkQ291cnNlcyUyRnJvdXRlJmFwcFBhdGhzPSZwYWdlUGF0aD1wcml2YXRlLW5leHQtYXBwLWRpciUyRmFwaSUyRmVucm9sbGVkQ291cnNlcyUyRnJvdXRlLnRzJmFwcERpcj0lMkZVc2VycyUyRmp1bGlhbmxvayUyRkRvY3VtZW50cyUyRmNob2ljZS1lLWxlYXJuaW5nJTJGc3JjJTJGYXBwJnBhZ2VFeHRlbnNpb25zPXRzeCZwYWdlRXh0ZW5zaW9ucz10cyZwYWdlRXh0ZW5zaW9ucz1qc3gmcGFnZUV4dGVuc2lvbnM9anMmcm9vdERpcj0lMkZVc2VycyUyRmp1bGlhbmxvayUyRkRvY3VtZW50cyUyRmNob2ljZS1lLWxlYXJuaW5nJmlzRGV2PXRydWUmdHNjb25maWdQYXRoPXRzY29uZmlnLmpzb24mYmFzZVBhdGg9JmFzc2V0UHJlZml4PSZuZXh0Q29uZmlnT3V0cHV0PSZwcmVmZXJyZWRSZWdpb249Jm1pZGRsZXdhcmVDb25maWc9ZTMwJTNEISIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7OztBQUFzRztBQUN2QztBQUNjO0FBQ2lDO0FBQzlHO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixnSEFBbUI7QUFDM0M7QUFDQSxjQUFjLHlFQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxZQUFZO0FBQ1osQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBLFFBQVEsdUdBQXVHO0FBQy9HO0FBQ0E7QUFDQSxXQUFXLDRFQUFXO0FBQ3RCO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDNko7O0FBRTdKIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vY2hvaWNlLWUtbGVhcm5pbmcvP2FjNmMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQXBwUm91dGVSb3V0ZU1vZHVsZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1tb2R1bGVzL2FwcC1yb3V0ZS9tb2R1bGUuY29tcGlsZWRcIjtcbmltcG9ydCB7IFJvdXRlS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1raW5kXCI7XG5pbXBvcnQgeyBwYXRjaEZldGNoIGFzIF9wYXRjaEZldGNoIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvbGliL3BhdGNoLWZldGNoXCI7XG5pbXBvcnQgKiBhcyB1c2VybGFuZCBmcm9tIFwiL1VzZXJzL2p1bGlhbmxvay9Eb2N1bWVudHMvY2hvaWNlLWUtbGVhcm5pbmcvc3JjL2FwcC9hcGkvZW5yb2xsZWRDb3Vyc2VzL3JvdXRlLnRzXCI7XG4vLyBXZSBpbmplY3QgdGhlIG5leHRDb25maWdPdXRwdXQgaGVyZSBzbyB0aGF0IHdlIGNhbiB1c2UgdGhlbSBpbiB0aGUgcm91dGVcbi8vIG1vZHVsZS5cbmNvbnN0IG5leHRDb25maWdPdXRwdXQgPSBcIlwiXG5jb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBBcHBSb3V0ZVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5BUFBfUk9VVEUsXG4gICAgICAgIHBhZ2U6IFwiL2FwaS9lbnJvbGxlZENvdXJzZXMvcm91dGVcIixcbiAgICAgICAgcGF0aG5hbWU6IFwiL2FwaS9lbnJvbGxlZENvdXJzZXNcIixcbiAgICAgICAgZmlsZW5hbWU6IFwicm91dGVcIixcbiAgICAgICAgYnVuZGxlUGF0aDogXCJhcHAvYXBpL2Vucm9sbGVkQ291cnNlcy9yb3V0ZVwiXG4gICAgfSxcbiAgICByZXNvbHZlZFBhZ2VQYXRoOiBcIi9Vc2Vycy9qdWxpYW5sb2svRG9jdW1lbnRzL2Nob2ljZS1lLWxlYXJuaW5nL3NyYy9hcHAvYXBpL2Vucm9sbGVkQ291cnNlcy9yb3V0ZS50c1wiLFxuICAgIG5leHRDb25maWdPdXRwdXQsXG4gICAgdXNlcmxhbmRcbn0pO1xuLy8gUHVsbCBvdXQgdGhlIGV4cG9ydHMgdGhhdCB3ZSBuZWVkIHRvIGV4cG9zZSBmcm9tIHRoZSBtb2R1bGUuIFRoaXMgc2hvdWxkXG4vLyBiZSBlbGltaW5hdGVkIHdoZW4gd2UndmUgbW92ZWQgdGhlIG90aGVyIHJvdXRlcyB0byB0aGUgbmV3IGZvcm1hdC4gVGhlc2Vcbi8vIGFyZSB1c2VkIHRvIGhvb2sgaW50byB0aGUgcm91dGUuXG5jb25zdCB7IHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzLCBoZWFkZXJIb29rcywgc3RhdGljR2VuZXJhdGlvbkJhaWxvdXQgfSA9IHJvdXRlTW9kdWxlO1xuY29uc3Qgb3JpZ2luYWxQYXRobmFtZSA9IFwiL2FwaS9lbnJvbGxlZENvdXJzZXMvcm91dGVcIjtcbmZ1bmN0aW9uIHBhdGNoRmV0Y2goKSB7XG4gICAgcmV0dXJuIF9wYXRjaEZldGNoKHtcbiAgICAgICAgc2VydmVySG9va3MsXG4gICAgICAgIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2VcbiAgICB9KTtcbn1cbmV4cG9ydCB7IHJvdXRlTW9kdWxlLCByZXF1ZXN0QXN5bmNTdG9yYWdlLCBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcywgaGVhZGVySG9va3MsIHN0YXRpY0dlbmVyYXRpb25CYWlsb3V0LCBvcmlnaW5hbFBhdGhuYW1lLCBwYXRjaEZldGNoLCAgfTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YXBwLXJvdXRlLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2FenrolledCourses%2Froute&page=%2Fapi%2FenrolledCourses%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2FenrolledCourses%2Froute.ts&appDir=%2FUsers%2Fjulianlok%2FDocuments%2Fchoice-e-learning%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fjulianlok%2FDocuments%2Fchoice-e-learning&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./src/app/api/enrolledCourses/route.ts":
/*!**********************************************!*\
  !*** ./src/app/api/enrolledCourses/route.ts ***!
  \**********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GET: () => (/* binding */ GET),\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/web/exports/next-response */ \"(rsc)/./node_modules/next/dist/server/web/exports/next-response.js\");\n/* harmony import */ var _lib_db__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/db */ \"(rsc)/./src/lib/db.ts\");\n/* harmony import */ var next_auth_next__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next-auth/next */ \"(rsc)/./node_modules/next-auth/next/index.js\");\n/* harmony import */ var _lib_auth_auth_options__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/lib/auth/auth-options */ \"(rsc)/./src/lib/auth/auth-options.ts\");\n/* harmony import */ var _services_achievements__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @/services/achievements */ \"(rsc)/./src/services/achievements.ts\");\n\n\n\n\n\nasync function GET(request) {\n    try {\n        // Get query parameters\n        const { searchParams } = new URL(request.url);\n        const userId = searchParams.get(\"userId\");\n        // Get the currently authenticated user for verification\n        const session = await (0,next_auth_next__WEBPACK_IMPORTED_MODULE_2__.getServerSession)(_lib_auth_auth_options__WEBPACK_IMPORTED_MODULE_3__.authOptions);\n        // Only allow users to fetch their own enrolled courses\n        if (!session?.user?.id || session.user.id !== userId && session.user.role !== \"admin\") {\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                success: false,\n                error: \"Unauthorized\"\n            }, {\n                status: 401\n            });\n        }\n        // Use Prisma to get enrollment data\n        // Get all courses the user is enrolled in\n        const user = await _lib_db__WEBPACK_IMPORTED_MODULE_1__[\"default\"].user.findUnique({\n            where: {\n                id: userId\n            },\n            include: {\n                enrolledIn: true\n            }\n        });\n        if (!user || !user.enrolledIn.length) {\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                success: true,\n                courses: []\n            });\n        }\n        // Get the course IDs from enrolled courses\n        const courseIds = user.enrolledIn.map((course)=>course.id);\n        // Get basic course data for all enrolled courses using their IDs\n        const courses = await _lib_db__WEBPACK_IMPORTED_MODULE_1__[\"default\"].course.findMany({\n            where: {\n                id: {\n                    in: courseIds\n                }\n            },\n            include: {\n                lessons: true\n            }\n        });\n        // Get progress data for each course\n        const userProgress = await _lib_db__WEBPACK_IMPORTED_MODULE_1__[\"default\"].userProgress.findMany({\n            where: {\n                userId: userId,\n                courseId: {\n                    in: courseIds\n                }\n            }\n        });\n        // Calculate aggregated progress data\n        const progressData = courseIds.map((courseId)=>{\n            const courseProgress = userProgress.filter((p)=>p.courseId === courseId);\n            const completedLessons = courseProgress.filter((p)=>p.completed).length;\n            const totalTimeSpent = courseProgress.reduce((sum, p)=>sum + (p.timeSpent || 0), 0);\n            return {\n                _id: courseId,\n                completedLessons,\n                totalTimeSpent\n            };\n        });\n        // Create a map of progress data by courseId\n        const progressMap = progressData.reduce((map, item)=>{\n            map[item._id] = {\n                completedLessons: item.completedLessons,\n                totalTimeSpent: item.totalTimeSpent\n            };\n            return map;\n        }, {});\n        // Format the response data\n        const enrolledCourses = courses.map((course)=>{\n            const courseId = course.id;\n            // Get total lessons for the course\n            const totalLessons = course.lessons.length;\n            // Get progress data or default values\n            const progress = progressMap[courseId] || {\n                completedLessons: 0,\n                totalTimeSpent: 0\n            };\n            // Calculate progress percentage\n            const progressPercentage = totalLessons > 0 ? Math.round(progress.completedLessons / totalLessons * 100) : 0;\n            return {\n                id: courseId,\n                title: course.title,\n                progress: progressPercentage,\n                imageUrl: course.imageUrl || \"/images/course-placeholder.jpg\",\n                totalLessons,\n                completedLessons: progress.completedLessons\n            };\n        });\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n            success: true,\n            courses: enrolledCourses\n        });\n    } catch (error) {\n        console.error(\"Error fetching enrolled courses:\", error);\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n            success: false,\n            error: \"Failed to fetch enrolled courses\"\n        }, {\n            status: 500\n        });\n    }\n}\nasync function POST(request) {\n    try {\n        // Get the currently authenticated user\n        const session = await (0,next_auth_next__WEBPACK_IMPORTED_MODULE_2__.getServerSession)(_lib_auth_auth_options__WEBPACK_IMPORTED_MODULE_3__.authOptions);\n        if (!session?.user?.id) {\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                success: false,\n                error: \"Unauthorized\"\n            }, {\n                status: 401\n            });\n        }\n        const userId = session.user.id;\n        // Parse request body\n        const data = await request.json();\n        // Validate required fields\n        if (!data.courseId) {\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                success: false,\n                error: \"Course ID is required\"\n            }, {\n                status: 400\n            });\n        }\n        const { courseId } = data;\n        // Check if user is already enrolled in the course\n        const user = await _lib_db__WEBPACK_IMPORTED_MODULE_1__[\"default\"].user.findUnique({\n            where: {\n                id: userId\n            },\n            include: {\n                enrolledIn: {\n                    where: {\n                        id: courseId\n                    }\n                }\n            }\n        });\n        const existingEnrollment = user?.enrolledIn.length > 0;\n        if (existingEnrollment) {\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                success: false,\n                error: \"Already enrolled in this course\"\n            }, {\n                status: 409\n            });\n        }\n        // Get the course to make sure it exists\n        const course = await _lib_db__WEBPACK_IMPORTED_MODULE_1__[\"default\"].course.findUnique({\n            where: {\n                id: courseId\n            }\n        });\n        if (!course) {\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                success: false,\n                error: \"Course not found\"\n            }, {\n                status: 404\n            });\n        }\n        // Create the enrollment by connecting user and course\n        const now = new Date();\n        const result = await _lib_db__WEBPACK_IMPORTED_MODULE_1__[\"default\"].course.update({\n            where: {\n                id: courseId\n            },\n            data: {\n                students: {\n                    connect: {\n                        id: userId\n                    }\n                }\n            }\n        });\n        // Also create an enrollment record\n        await _lib_db__WEBPACK_IMPORTED_MODULE_1__[\"default\"].enrollment.create({\n            data: {\n                userId,\n                courseId,\n                enrolledAt: now,\n                status: \"active\",\n                progress: 0,\n                completedLessons: 0\n            }\n        });\n        // Check and award achievements (like \"Course Starter\")\n        await (0,_services_achievements__WEBPACK_IMPORTED_MODULE_4__.checkAndAwardAchievements)(userId);\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n            success: true,\n            message: \"Successfully enrolled in course\",\n            enrollmentId: `${userId}_${courseId}`\n        });\n    } catch (error) {\n        console.error(\"Error enrolling in course:\", error);\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n            success: false,\n            error: \"Failed to enroll in course\"\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvYXBwL2FwaS9lbnJvbGxlZENvdXJzZXMvcm91dGUudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztBQUF3RDtBQUMxQjtBQUNvQjtBQUNJO0FBR2M7QUFFN0QsZUFBZUssSUFBSUMsT0FBb0I7SUFDNUMsSUFBSTtRQUNGLHVCQUF1QjtRQUN2QixNQUFNLEVBQUVDLFlBQVksRUFBRSxHQUFHLElBQUlDLElBQUlGLFFBQVFHLEdBQUc7UUFDNUMsTUFBTUMsU0FBU0gsYUFBYUksR0FBRyxDQUFDO1FBRWhDLHdEQUF3RDtRQUN4RCxNQUFNQyxVQUFVLE1BQU1WLGdFQUFnQkEsQ0FBQ0MsK0RBQVdBO1FBRWxELHVEQUF1RDtRQUN2RCxJQUFJLENBQUNTLFNBQVNDLE1BQU1DLE1BQU9GLFFBQVFDLElBQUksQ0FBQ0MsRUFBRSxLQUFLSixVQUFVRSxRQUFRQyxJQUFJLENBQUNFLElBQUksS0FBSyxTQUFVO1lBQ3ZGLE9BQU9mLGtGQUFZQSxDQUFDZ0IsSUFBSSxDQUFDO2dCQUN2QkMsU0FBUztnQkFDVEMsT0FBTztZQUNULEdBQUc7Z0JBQUVDLFFBQVE7WUFBSTtRQUNuQjtRQUVBLG9DQUFvQztRQUVwQywwQ0FBMEM7UUFDMUMsTUFBTU4sT0FBTyxNQUFNWixvREFBVyxDQUFDbUIsVUFBVSxDQUFDO1lBQ3hDQyxPQUFPO2dCQUFFUCxJQUFJSjtZQUFPO1lBQ3BCWSxTQUFTO2dCQUNQQyxZQUFZO1lBQ2Q7UUFDRjtRQUVBLElBQUksQ0FBQ1YsUUFBUSxDQUFDQSxLQUFLVSxVQUFVLENBQUNDLE1BQU0sRUFBRTtZQUNwQyxPQUFPeEIsa0ZBQVlBLENBQUNnQixJQUFJLENBQUM7Z0JBQ3ZCQyxTQUFTO2dCQUNUUSxTQUFTLEVBQUU7WUFDYjtRQUNGO1FBRUEsMkNBQTJDO1FBQzNDLE1BQU1DLFlBQVliLEtBQUtVLFVBQVUsQ0FBQ0ksR0FBRyxDQUFDQyxDQUFBQSxTQUFVQSxPQUFPZCxFQUFFO1FBRXpELGlFQUFpRTtRQUNqRSxNQUFNVyxVQUFVLE1BQU14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QXVCO2dCQUNBa0MsWUFBWVI7Z0JBQ1p4QyxRQUFRO2dCQUNSOEIsVUFBVTtnQkFDVlgsa0JBQWtCO1lBQ3BCO1FBQ0Y7UUFFQSx1REFBdUQ7UUFDdkQsTUFBTWxDLGlGQUF5QkEsQ0FBQ007UUFFaEMsT0FBT1Ysa0ZBQVlBLENBQUNnQixJQUFJLENBQUM7WUFDdkJDLFNBQVM7WUFDVG1ELFNBQVM7WUFDVEMsY0FBYyxDQUFDLEVBQUUzRCxPQUFPLENBQUMsRUFBRXVCLFNBQVMsQ0FBQztRQUN2QztJQUVGLEVBQUUsT0FBT2YsT0FBTztRQUNkcUMsUUFBUXJDLEtBQUssQ0FBQyw4QkFBOEJBO1FBQzVDLE9BQU9sQixrRkFBWUEsQ0FBQ2dCLElBQUksQ0FBQztZQUN2QkMsU0FBUztZQUNUQyxPQUFPO1FBQ1QsR0FBRztZQUFFQyxRQUFRO1FBQUk7SUFDbkI7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL2Nob2ljZS1lLWxlYXJuaW5nLy4vc3JjL2FwcC9hcGkvZW5yb2xsZWRDb3Vyc2VzL3JvdXRlLnRzPzczMjkiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTmV4dFJlcXVlc3QsIE5leHRSZXNwb25zZSB9IGZyb20gJ25leHQvc2VydmVyJztcbmltcG9ydCBwcmlzbWEgZnJvbSAnQC9saWIvZGInO1xuaW1wb3J0IHsgZ2V0U2VydmVyU2Vzc2lvbiB9IGZyb20gJ25leHQtYXV0aC9uZXh0JztcbmltcG9ydCB7IGF1dGhPcHRpb25zIH0gZnJvbSAnQC9saWIvYXV0aC9hdXRoLW9wdGlvbnMnO1xuaW1wb3J0IHsgRW5yb2xsZWRDb3Vyc2UgfSBmcm9tICdAL3R5cGVzL2NvdXJzZSc7XG5cbmltcG9ydCB7IGNoZWNrQW5kQXdhcmRBY2hpZXZlbWVudHMgfSBmcm9tICdAL3NlcnZpY2VzL2FjaGlldmVtZW50cyc7XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBHRVQocmVxdWVzdDogTmV4dFJlcXVlc3QpIHtcbiAgdHJ5IHtcbiAgICAvLyBHZXQgcXVlcnkgcGFyYW1ldGVyc1xuICAgIGNvbnN0IHsgc2VhcmNoUGFyYW1zIH0gPSBuZXcgVVJMKHJlcXVlc3QudXJsKTtcbiAgICBjb25zdCB1c2VySWQgPSBzZWFyY2hQYXJhbXMuZ2V0KCd1c2VySWQnKTtcbiAgICBcbiAgICAvLyBHZXQgdGhlIGN1cnJlbnRseSBhdXRoZW50aWNhdGVkIHVzZXIgZm9yIHZlcmlmaWNhdGlvblxuICAgIGNvbnN0IHNlc3Npb24gPSBhd2FpdCBnZXRTZXJ2ZXJTZXNzaW9uKGF1dGhPcHRpb25zKTtcbiAgICBcbiAgICAvLyBPbmx5IGFsbG93IHVzZXJzIHRvIGZldGNoIHRoZWlyIG93biBlbnJvbGxlZCBjb3Vyc2VzXG4gICAgaWYgKCFzZXNzaW9uPy51c2VyPy5pZCB8fCAoc2Vzc2lvbi51c2VyLmlkICE9PSB1c2VySWQgJiYgc2Vzc2lvbi51c2VyLnJvbGUgIT09ICdhZG1pbicpKSB7XG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBcbiAgICAgICAgc3VjY2VzczogZmFsc2UsIFxuICAgICAgICBlcnJvcjogJ1VuYXV0aG9yaXplZCcgXG4gICAgICB9LCB7IHN0YXR1czogNDAxIH0pO1xuICAgIH1cblxuICAgIC8vIFVzZSBQcmlzbWEgdG8gZ2V0IGVucm9sbG1lbnQgZGF0YVxuICAgIFxuICAgIC8vIEdldCBhbGwgY291cnNlcyB0aGUgdXNlciBpcyBlbnJvbGxlZCBpblxuICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBwcmlzbWEudXNlci5maW5kVW5pcXVlKHtcbiAgICAgIHdoZXJlOiB7IGlkOiB1c2VySWQgfSxcbiAgICAgIGluY2x1ZGU6IHtcbiAgICAgICAgZW5yb2xsZWRJbjogdHJ1ZVxuICAgICAgfVxuICAgIH0pO1xuICAgIFxuICAgIGlmICghdXNlciB8fCAhdXNlci5lbnJvbGxlZEluLmxlbmd0aCkge1xuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgXG4gICAgICAgIHN1Y2Nlc3M6IHRydWUsIFxuICAgICAgICBjb3Vyc2VzOiBbXSBcbiAgICAgIH0pO1xuICAgIH1cbiAgICBcbiAgICAvLyBHZXQgdGhlIGNvdXJzZSBJRHMgZnJvbSBlbnJvbGxlZCBjb3Vyc2VzXG4gICAgY29uc3QgY291cnNlSWRzID0gdXNlci5lbnJvbGxlZEluLm1hcChjb3Vyc2UgPT4gY291cnNlLmlkKTtcbiAgICBcbiAgICAvLyBHZXQgYmFzaWMgY291cnNlIGRhdGEgZm9yIGFsbCBlbnJvbGxlZCBjb3Vyc2VzIHVzaW5nIHRoZWlyIElEc1xuICAgIGNvbnN0IGNvdXJzZXMgPSBhd2FpdCBwcmlzbWEuY291cnNlLmZpbmRNYW55KHtcbiAgICAgIHdoZXJlOiB7XG4gICAgICAgIGlkOiB7IGluOiBjb3Vyc2VJZHMgfVxuICAgICAgfSxcbiAgICAgIGluY2x1ZGU6IHtcbiAgICAgICAgbGVzc29uczogdHJ1ZVxuICAgICAgfVxuICAgIH0pO1xuICAgIFxuICAgIC8vIEdldCBwcm9ncmVzcyBkYXRhIGZvciBlYWNoIGNvdXJzZVxuICAgIGNvbnN0IHVzZXJQcm9ncmVzcyA9IGF3YWl0IHByaXNtYS51c2VyUHJvZ3Jlc3MuZmluZE1hbnkoe1xuICAgICAgd2hlcmU6IHtcbiAgICAgICAgdXNlcklkOiB1c2VySWQsXG4gICAgICAgIGNvdXJzZUlkOiB7IGluOiBjb3Vyc2VJZHMgfVxuICAgICAgfVxuICAgIH0pO1xuICAgIFxuICAgIC8vIENhbGN1bGF0ZSBhZ2dyZWdhdGVkIHByb2dyZXNzIGRhdGFcbiAgICBjb25zdCBwcm9ncmVzc0RhdGEgPSBjb3Vyc2VJZHMubWFwKGNvdXJzZUlkID0+IHtcbiAgICAgIGNvbnN0IGNvdXJzZVByb2dyZXNzID0gdXNlclByb2dyZXNzLmZpbHRlcihwID0+IHAuY291cnNlSWQgPT09IGNvdXJzZUlkKTtcbiAgICAgIGNvbnN0IGNvbXBsZXRlZExlc3NvbnMgPSBjb3Vyc2VQcm9ncmVzcy5maWx0ZXIocCA9PiBwLmNvbXBsZXRlZCkubGVuZ3RoO1xuICAgICAgY29uc3QgdG90YWxUaW1lU3BlbnQgPSBjb3Vyc2VQcm9ncmVzcy5yZWR1Y2UoKHN1bSwgcCkgPT4gc3VtICsgKHAudGltZVNwZW50IHx8IDApLCAwKTtcbiAgICAgIFxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgX2lkOiBjb3Vyc2VJZCxcbiAgICAgICAgY29tcGxldGVkTGVzc29ucyxcbiAgICAgICAgdG90YWxUaW1lU3BlbnRcbiAgICAgIH07XG4gICAgfSk7XG5cbiAgICAvLyBDcmVhdGUgYSBtYXAgb2YgcHJvZ3Jlc3MgZGF0YSBieSBjb3Vyc2VJZFxuICAgIGNvbnN0IHByb2dyZXNzTWFwID0gcHJvZ3Jlc3NEYXRhLnJlZHVjZSgobWFwLCBpdGVtKSA9PiB7XG4gICAgICBtYXBbaXRlbS5faWRdID0ge1xuICAgICAgICBjb21wbGV0ZWRMZXNzb25zOiBpdGVtLmNvbXBsZXRlZExlc3NvbnMsXG4gICAgICAgIHRvdGFsVGltZVNwZW50OiBpdGVtLnRvdGFsVGltZVNwZW50XG4gICAgICB9O1xuICAgICAgcmV0dXJuIG1hcDtcbiAgICB9LCB7fSBhcyBSZWNvcmQ8c3RyaW5nLCB7IGNvbXBsZXRlZExlc3NvbnM6IG51bWJlciwgdG90YWxUaW1lU3BlbnQ6IG51bWJlciB9Pik7XG4gICAgXG4gICAgLy8gRm9ybWF0IHRoZSByZXNwb25zZSBkYXRhXG4gICAgY29uc3QgZW5yb2xsZWRDb3Vyc2VzOiBFbnJvbGxlZENvdXJzZVtdID0gY291cnNlcy5tYXAoKGNvdXJzZSkgPT4ge1xuICAgICAgY29uc3QgY291cnNlSWQgPSBjb3Vyc2UuaWQ7XG4gICAgICBcbiAgICAgIC8vIEdldCB0b3RhbCBsZXNzb25zIGZvciB0aGUgY291cnNlXG4gICAgICBjb25zdCB0b3RhbExlc3NvbnMgPSBjb3Vyc2UubGVzc29ucy5sZW5ndGg7XG4gICAgICBcbiAgICAgIC8vIEdldCBwcm9ncmVzcyBkYXRhIG9yIGRlZmF1bHQgdmFsdWVzXG4gICAgICBjb25zdCBwcm9ncmVzcyA9IHByb2dyZXNzTWFwW2NvdXJzZUlkXSB8fCB7IGNvbXBsZXRlZExlc3NvbnM6IDAsIHRvdGFsVGltZVNwZW50OiAwIH07XG4gICAgICBcbiAgICAgIC8vIENhbGN1bGF0ZSBwcm9ncmVzcyBwZXJjZW50YWdlXG4gICAgICBjb25zdCBwcm9ncmVzc1BlcmNlbnRhZ2UgPSB0b3RhbExlc3NvbnMgPiAwIFxuICAgICAgICA/IE1hdGgucm91bmQoKHByb2dyZXNzLmNvbXBsZXRlZExlc3NvbnMgLyB0b3RhbExlc3NvbnMpICogMTAwKSBcbiAgICAgICAgOiAwO1xuICAgICAgXG4gICAgICByZXR1cm4ge1xuICAgICAgICBpZDogY291cnNlSWQsXG4gICAgICAgIHRpdGxlOiBjb3Vyc2UudGl0bGUsXG4gICAgICAgIHByb2dyZXNzOiBwcm9ncmVzc1BlcmNlbnRhZ2UsXG4gICAgICAgIGltYWdlVXJsOiBjb3Vyc2UuaW1hZ2VVcmwgfHwgJy9pbWFnZXMvY291cnNlLXBsYWNlaG9sZGVyLmpwZycsXG4gICAgICAgIHRvdGFsTGVzc29ucyxcbiAgICAgICAgY29tcGxldGVkTGVzc29uczogcHJvZ3Jlc3MuY29tcGxldGVkTGVzc29uc1xuICAgICAgfTtcbiAgICB9KTtcbiAgICBcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oe1xuICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgIGNvdXJzZXM6IGVucm9sbGVkQ291cnNlc1xuICAgIH0pO1xuICAgIFxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGZldGNoaW5nIGVucm9sbGVkIGNvdXJzZXM6JywgZXJyb3IpO1xuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IFxuICAgICAgc3VjY2VzczogZmFsc2UsIFxuICAgICAgZXJyb3I6ICdGYWlsZWQgdG8gZmV0Y2ggZW5yb2xsZWQgY291cnNlcycgXG4gICAgfSwgeyBzdGF0dXM6IDUwMCB9KTtcbiAgfVxufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gUE9TVChyZXF1ZXN0OiBOZXh0UmVxdWVzdCkge1xuICB0cnkge1xuICAgIC8vIEdldCB0aGUgY3VycmVudGx5IGF1dGhlbnRpY2F0ZWQgdXNlclxuICAgIGNvbnN0IHNlc3Npb24gPSBhd2FpdCBnZXRTZXJ2ZXJTZXNzaW9uKGF1dGhPcHRpb25zKTtcbiAgICBcbiAgICBpZiAoIXNlc3Npb24/LnVzZXI/LmlkKSB7XG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBcbiAgICAgICAgc3VjY2VzczogZmFsc2UsIFxuICAgICAgICBlcnJvcjogJ1VuYXV0aG9yaXplZCcgXG4gICAgICB9LCB7IHN0YXR1czogNDAxIH0pO1xuICAgIH1cbiAgICBcbiAgICBjb25zdCB1c2VySWQgPSBzZXNzaW9uLnVzZXIuaWQ7XG4gICAgXG4gICAgLy8gUGFyc2UgcmVxdWVzdCBib2R5XG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlcXVlc3QuanNvbigpO1xuICAgIFxuICAgIC8vIFZhbGlkYXRlIHJlcXVpcmVkIGZpZWxkc1xuICAgIGlmICghZGF0YS5jb3Vyc2VJZCkge1xuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgXG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLCBcbiAgICAgICAgZXJyb3I6ICdDb3Vyc2UgSUQgaXMgcmVxdWlyZWQnIFxuICAgICAgfSwgeyBzdGF0dXM6IDQwMCB9KTtcbiAgICB9XG4gICAgXG4gICAgY29uc3QgeyBjb3Vyc2VJZCB9ID0gZGF0YTtcbiAgICBcbiAgICAvLyBDaGVjayBpZiB1c2VyIGlzIGFscmVhZHkgZW5yb2xsZWQgaW4gdGhlIGNvdXJzZVxuICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBwcmlzbWEudXNlci5maW5kVW5pcXVlKHtcbiAgICAgIHdoZXJlOiB7IGlkOiB1c2VySWQgfSxcbiAgICAgIGluY2x1ZGU6IHtcbiAgICAgICAgZW5yb2xsZWRJbjoge1xuICAgICAgICAgIHdoZXJlOiB7IGlkOiBjb3Vyc2VJZCB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KTtcbiAgICBcbiAgICBjb25zdCBleGlzdGluZ0Vucm9sbG1lbnQgPSB1c2VyPy5lbnJvbGxlZEluLmxlbmd0aCA+IDA7XG4gICAgXG4gICAgaWYgKGV4aXN0aW5nRW5yb2xsbWVudCkge1xuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgXG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLCBcbiAgICAgICAgZXJyb3I6ICdBbHJlYWR5IGVucm9sbGVkIGluIHRoaXMgY291cnNlJyBcbiAgICAgIH0sIHsgc3RhdHVzOiA0MDkgfSk7XG4gICAgfVxuICAgIFxuICAgIC8vIEdldCB0aGUgY291cnNlIHRvIG1ha2Ugc3VyZSBpdCBleGlzdHNcbiAgICBjb25zdCBjb3Vyc2UgPSBhd2FpdCBwcmlzbWEuY291cnNlLmZpbmRVbmlxdWUoe1xuICAgICAgd2hlcmU6IHsgaWQ6IGNvdXJzZUlkIH1cbiAgICB9KTtcbiAgICBcbiAgICBpZiAoIWNvdXJzZSkge1xuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgXG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLCBcbiAgICAgICAgZXJyb3I6ICdDb3Vyc2Ugbm90IGZvdW5kJyBcbiAgICAgIH0sIHsgc3RhdHVzOiA0MDQgfSk7XG4gICAgfVxuICAgIFxuICAgIC8vIENyZWF0ZSB0aGUgZW5yb2xsbWVudCBieSBjb25uZWN0aW5nIHVzZXIgYW5kIGNvdXJzZVxuICAgIGNvbnN0IG5vdyA9IG5ldyBEYXRlKCk7XG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcHJpc21hLmNvdXJzZS51cGRhdGUoe1xuICAgICAgd2hlcmU6IHsgaWQ6IGNvdXJzZUlkIH0sXG4gICAgICBkYXRhOiB7XG4gICAgICAgIHN0dWRlbnRzOiB7XG4gICAgICAgICAgY29ubmVjdDogeyBpZDogdXNlcklkIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pO1xuICAgIFxuICAgIC8vIEFsc28gY3JlYXRlIGFuIGVucm9sbG1lbnQgcmVjb3JkXG4gICAgYXdhaXQgcHJpc21hLmVucm9sbG1lbnQuY3JlYXRlKHtcbiAgICAgIGRhdGE6IHtcbiAgICAgICAgdXNlcklkLFxuICAgICAgICBjb3Vyc2VJZCxcbiAgICAgICAgZW5yb2xsZWRBdDogbm93LFxuICAgICAgICBzdGF0dXM6ICdhY3RpdmUnLFxuICAgICAgICBwcm9ncmVzczogMCxcbiAgICAgICAgY29tcGxldGVkTGVzc29uczogMFxuICAgICAgfVxuICAgIH0pO1xuICAgIFxuICAgIC8vIENoZWNrIGFuZCBhd2FyZCBhY2hpZXZlbWVudHMgKGxpa2UgXCJDb3Vyc2UgU3RhcnRlclwiKVxuICAgIGF3YWl0IGNoZWNrQW5kQXdhcmRBY2hpZXZlbWVudHModXNlcklkKTtcbiAgICBcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBcbiAgICAgIHN1Y2Nlc3M6IHRydWUsIFxuICAgICAgbWVzc2FnZTogJ1N1Y2Nlc3NmdWxseSBlbnJvbGxlZCBpbiBjb3Vyc2UnLFxuICAgICAgZW5yb2xsbWVudElkOiBgJHt1c2VySWR9XyR7Y291cnNlSWR9YFxuICAgIH0pO1xuICAgIFxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGVucm9sbGluZyBpbiBjb3Vyc2U6JywgZXJyb3IpO1xuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IFxuICAgICAgc3VjY2VzczogZmFsc2UsIFxuICAgICAgZXJyb3I6ICdGYWlsZWQgdG8gZW5yb2xsIGluIGNvdXJzZScgXG4gICAgfSwgeyBzdGF0dXM6IDUwMCB9KTtcbiAgfVxufSAiXSwibmFtZXMiOlsiTmV4dFJlc3BvbnNlIiwicHJpc21hIiwiZ2V0U2VydmVyU2Vzc2lvbiIsImF1dGhPcHRpb25zIiwiY2hlY2tBbmRBd2FyZEFjaGlldmVtZW50cyIsIkdFVCIsInJlcXVlc3QiLCJzZWFyY2hQYXJhbXMiLCJVUkwiLCJ1cmwiLCJ1c2VySWQiLCJnZXQiLCJzZXNzaW9uIiwidXNlciIsImlkIiwicm9sZSIsImpzb24iLCJzdWNjZXNzIiwiZXJyb3IiLCJzdGF0dXMiLCJmaW5kVW5pcXVlIiwid2hlcmUiLCJpbmNsdWRlIiwiZW5yb2xsZWRJbiIsImxlbmd0aCIsImNvdXJzZXMiLCJjb3Vyc2VJZHMiLCJtYXAiLCJjb3Vyc2UiLCJmaW5kTWFueSIsImluIiwibGVzc29ucyIsInVzZXJQcm9ncmVzcyIsImNvdXJzZUlkIiwicHJvZ3Jlc3NEYXRhIiwiY291cnNlUHJvZ3Jlc3MiLCJmaWx0ZXIiLCJwIiwiY29tcGxldGVkTGVzc29ucyIsImNvbXBsZXRlZCIsInRvdGFsVGltZVNwZW50IiwicmVkdWNlIiwic3VtIiwidGltZVNwZW50IiwiX2lkIiwicHJvZ3Jlc3NNYXAiLCJpdGVtIiwiZW5yb2xsZWRDb3Vyc2VzIiwidG90YWxMZXNzb25zIiwicHJvZ3Jlc3MiLCJwcm9ncmVzc1BlcmNlbnRhZ2UiLCJNYXRoIiwicm91bmQiLCJ0aXRsZSIsImltYWdlVXJsIiwiY29uc29sZSIsIlBPU1QiLCJkYXRhIiwiZXhpc3RpbmdFbnJvbGxtZW50Iiwibm93IiwiRGF0ZSIsInJlc3VsdCIsInVwZGF0ZSIsInN0dWRlbnRzIiwiY29ubmVjdCIsImVucm9sbG1lbnQiLCJjcmVhdGUiLCJlbnJvbGxlZEF0IiwibWVzc2FnZSIsImVucm9sbG1lbnRJZCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/app/api/enrolledCourses/route.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/auth/auth-options.ts":
/*!**************************************!*\
  !*** ./src/lib/auth/auth-options.ts ***!
  \**************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   authOptions: () => (/* binding */ authOptions),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var next_auth_providers_credentials__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next-auth/providers/credentials */ \"(rsc)/./node_modules/next-auth/providers/credentials.js\");\n/* harmony import */ var next_auth_providers_google__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next-auth/providers/google */ \"(rsc)/./node_modules/next-auth/providers/google.js\");\n/* harmony import */ var next_auth_providers_github__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next-auth/providers/github */ \"(rsc)/./node_modules/next-auth/providers/github.js\");\n/* harmony import */ var next_auth_providers_facebook__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! next-auth/providers/facebook */ \"(rsc)/./node_modules/next-auth/providers/facebook.js\");\n/* harmony import */ var next_auth_providers_azure_ad__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! next-auth/providers/azure-ad */ \"(rsc)/./node_modules/next-auth/providers/azure-ad.js\");\n/* harmony import */ var _utils_password_utils__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./utils/password-utils */ \"(rsc)/./src/lib/auth/utils/password-utils.ts\");\n/* harmony import */ var _lib_db_services_user_service__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @/lib/db/services/user-service */ \"(rsc)/./src/lib/db/services/user-service.ts\");\n/* harmony import */ var _lib_db__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @/lib/db */ \"(rsc)/./src/lib/db.ts\");\n/* harmony import */ var _types_auth_roles__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @/types/auth/roles */ \"(rsc)/./src/types/auth/roles.ts\");\n\n\n\n\n\n\n\n\n\n// Check if environment variables are set\nfunction validateEnvVariables() {\n    const requiredVars = [\n        {\n            key: \"NEXTAUTH_SECRET\",\n            value: process.env.NEXTAUTH_SECRET\n        },\n        {\n            key: \"NEXTAUTH_URL\",\n            value: process.env.NEXTAUTH_URL\n        },\n        {\n            key: \"FACEBOOK_CLIENT_ID\",\n            value: process.env.FACEBOOK_CLIENT_ID\n        },\n        {\n            key: \"FACEBOOK_CLIENT_SECRET\",\n            value: process.env.FACEBOOK_CLIENT_SECRET\n        },\n        {\n            key: \"MICROSOFT_CLIENT_ID\",\n            value: process.env.MICROSOFT_CLIENT_ID\n        },\n        {\n            key: \"MICROSOFT_CLIENT_SECRET\",\n            value: process.env.MICROSOFT_CLIENT_SECRET\n        }\n    ];\n    const missingVars = requiredVars.filter((v)=>!v.value);\n    if (missingVars.length > 0) {\n        console.error(\"Missing required environment variables:\", missingVars.map((v)=>v.key));\n    } else {\n        ;\n    }\n    ;\n    ;\n    ;\n}\n// Validate environment variables on startup\nvalidateEnvVariables();\nconst authOptions = {\n    providers: [\n        (0,next_auth_providers_credentials__WEBPACK_IMPORTED_MODULE_0__[\"default\"])({\n            name: \"Credentials\",\n            credentials: {\n                email: {\n                    label: \"Email\",\n                    type: \"email\"\n                },\n                password: {\n                    label: \"Password\",\n                    type: \"password\"\n                }\n            },\n            async authorize (credentials) {\n                try {\n                    if (!credentials?.email || !credentials?.password) {\n                        console.error(\"Missing credentials\");\n                        throw new Error(\"Email and password are required\");\n                    }\n                    // Find the user by email (case insensitive)\n                    const user = await (0,_lib_db_services_user_service__WEBPACK_IMPORTED_MODULE_6__.findUserByEmail)(credentials.email);\n                    // If user doesn't exist\n                    if (!user) {\n                        console.error(\"User not found\");\n                        throw new Error(\"Invalid email or password\");\n                    }\n                    // Verify the password\n                    const isPasswordValid = await (0,_utils_password_utils__WEBPACK_IMPORTED_MODULE_5__.comparePasswords)(credentials.password, user.password);\n                    if (!isPasswordValid) {\n                        console.error(\"Password invalid\");\n                        throw new Error(\"Invalid email or password\");\n                    }\n                    ;\n                    // Return user object without password\n                    return {\n                        id: user.id,\n                        name: user.name,\n                        email: user.email,\n                        role: user.role\n                    };\n                } catch (error) {\n                    console.error(\"Authentication error:\", error);\n                    // Re-throw to be handled by NextAuth\n                    throw error;\n                }\n            }\n        }),\n        // Add Google Provider\n        (0,next_auth_providers_google__WEBPACK_IMPORTED_MODULE_1__[\"default\"])({\n            clientId: process.env.GOOGLE_CLIENT_ID || \"\",\n            clientSecret: process.env.GOOGLE_CLIENT_SECRET || \"\",\n            authorization: {\n                params: {\n                    prompt: \"consent\",\n                    access_type: \"offline\",\n                    response_type: \"code\"\n                }\n            }\n        }),\n        // Add GitHub Provider\n        (0,next_auth_providers_github__WEBPACK_IMPORTED_MODULE_2__[\"default\"])({\n            clientId: process.env.GITHUB_CLIENT_ID || \"\",\n            clientSecret: process.env.GITHUB_CLIENT_SECRET || \"\"\n        }),\n        // Add Facebook Provider\n        (0,next_auth_providers_facebook__WEBPACK_IMPORTED_MODULE_3__[\"default\"])({\n            clientId: process.env.FACEBOOK_CLIENT_ID || \"\",\n            clientSecret: process.env.FACEBOOK_CLIENT_SECRET || \"\",\n            version: \"12.0\",\n            authorization: {\n                params: {\n                    scope: \"email,public_profile\",\n                    display: \"popup\",\n                    auth_type: \"rerequest\"\n                }\n            },\n            userinfo: {\n                url: \"https://graph.facebook.com/me\",\n                params: {\n                    fields: \"id,name,email,picture\"\n                }\n            },\n            profile (profile) {\n                ;\n                return {\n                    id: profile.id,\n                    name: profile.name,\n                    email: profile.email || `${profile.id}@facebook.com`,\n                    image: profile.picture?.data?.url,\n                    role: _types_auth_roles__WEBPACK_IMPORTED_MODULE_8__.Role.student\n                };\n            },\n            checks: [\n                \"state\"\n            ]\n        }),\n        // Add Microsoft Provider (via Azure AD)\n        (0,next_auth_providers_azure_ad__WEBPACK_IMPORTED_MODULE_4__[\"default\"])({\n            clientId: process.env.MICROSOFT_CLIENT_ID || \"\",\n            clientSecret: process.env.MICROSOFT_CLIENT_SECRET || \"\",\n            tenantId: process.env.MICROSOFT_TENANT_ID || \"organizations\",\n            authorization: {\n                params: {\n                    scope: \"openid profile email User.Read\"\n                }\n            },\n            profile (profile) {\n                ;\n                return {\n                    id: profile.sub || profile.oid,\n                    name: profile.name || profile.preferred_username,\n                    email: profile.email || profile.preferred_username || `${profile.sub || profile.oid}@microsoft.com`,\n                    image: null,\n                    role: _types_auth_roles__WEBPACK_IMPORTED_MODULE_8__.Role.student\n                };\n            },\n            checks: [\n                \"pkce\",\n                \"state\"\n            ]\n        })\n    ],\n    callbacks: {\n        async signIn ({ user, account, profile, email }) {\n            try {\n                ;\n                // For OAuth providers\n                if (account && account.provider && account.provider !== \"credentials\") {\n                    ;\n                    // Special handling for Microsoft provider\n                    if (account.provider === \"azure-ad\") {\n                        ;\n                    }\n                    // Special handling for Facebook provider\n                    if (account.provider === \"facebook\") {\n                        ;\n                    }\n                    // Validate email presence\n                    let userEmail = user.email || profile?.email || email;\n                    if (!userEmail || typeof userEmail !== \"string\") {\n                        console.error(\"OAuth account missing email:\", {\n                            provider: account.provider,\n                            user,\n                            profile,\n                            email\n                        });\n                        // Instead of throwing an error, continue with a generated email\n                        if (account.provider === \"facebook\") {\n                            user.email = `${user.id}@facebook.com`;\n                            userEmail = user.email;\n                            ;\n                        } else if (account.provider === \"azure-ad\") {\n                            user.email = `${user.id}@microsoft.com`;\n                            userEmail = user.email;\n                            ;\n                        } else {\n                            throw new Error(\"Email is required for authentication\");\n                        }\n                    }\n                    // Ensure userEmail is a string for database operations\n                    const normalizedEmail = typeof userEmail === \"string\" ? userEmail.toLowerCase() : typeof user.email === \"string\" ? user.email.toLowerCase() : \"\";\n                    // Check if user already exists\n                    const existingUser = await (0,_lib_db_services_user_service__WEBPACK_IMPORTED_MODULE_6__.findUserByEmail)(normalizedEmail);\n                    if (existingUser) {\n                        ;\n                        try {\n                            // Update login history and OAuth info\n                            await _lib_db__WEBPACK_IMPORTED_MODULE_7__[\"default\"].user.update({\n                                where: {\n                                    id: existingUser.id\n                                },\n                                data: {\n                                    updatedAt: new Date(),\n                                    name: user.name || existingUser.name\n                                }\n                            });\n                        } catch (updateError) {\n                            console.error(\"Error updating user login history:\", updateError);\n                        // Continue with sign in even if update fails\n                        }\n                        // Set the user ID for the session\n                        user.id = existingUser.id;\n                        user.role = existingUser.role;\n                    } else {\n                        ;\n                        try {\n                            const newUser = await _lib_db__WEBPACK_IMPORTED_MODULE_7__[\"default\"].user.create({\n                                data: {\n                                    name: user.name || profile?.name || \"OAuth User\",\n                                    email: normalizedEmail,\n                                    password: \"\",\n                                    role: \"student\"\n                                }\n                            });\n                            ;\n                            user.id = newUser.id;\n                            user.role = newUser.role;\n                        } catch (createError) {\n                            console.error(\"Error creating new user:\", createError);\n                            throw new Error(\"Failed to create user account\");\n                        }\n                    }\n                } else if (account && account.provider === \"credentials\") {\n                    // For credentials login, update login history\n                    try {\n                        if (user.email) {\n                            const existingUser = await (0,_lib_db_services_user_service__WEBPACK_IMPORTED_MODULE_6__.findUserByEmail)(user.email);\n                            if (existingUser) {\n                                await (0,_lib_db_services_user_service__WEBPACK_IMPORTED_MODULE_6__.updateUserLoginInfo)(existingUser.id);\n                                // Check and award achievements for login if needed\n                                try {\n                                    // We need to dynamically import this to avoid circular dependencies\n                                    const { checkAndAwardAchievements } = await __webpack_require__.e(/*! import() */ \"_rsc_src_services_achievements_ts\").then(__webpack_require__.bind(__webpack_require__, /*! @/services/achievements */ \"(rsc)/./src/services/achievements.ts\"));\n                                    await checkAndAwardAchievements(existingUser.id);\n                                } catch (achievementError) {\n                                    console.error(\"Error checking achievements:\", achievementError);\n                                // Don't fail login if achievements check fails\n                                }\n                            }\n                        }\n                    } catch (error) {\n                        console.error(\"Error updating login history:\", error);\n                    // Don't prevent login if this fails\n                    }\n                }\n                return true;\n            } catch (error) {\n                console.error(\"Error in signIn callback:\", error);\n                return false;\n            }\n        },\n        async jwt ({ token, user, account }) {\n            if (user) {\n                token.id = user.id;\n                token.role = user.role || _types_auth_roles__WEBPACK_IMPORTED_MODULE_8__.Role.student;\n            }\n            return token;\n        },\n        async session ({ session, token }) {\n            if (session.user) {\n                session.user.id = token.id;\n                session.user.role = token.role;\n            }\n            return session;\n        },\n        async redirect ({ url, baseUrl }) {\n            ;\n            try {\n                // Handle redirect after sign in\n                if (url.startsWith(\"/\")) {\n                    // For relative URLs, prefix with base URL\n                    return `${baseUrl}${url}`;\n                } else if (new URL(url).origin === baseUrl) {\n                    // Allow redirects to same origin\n                    return url;\n                }\n                // Default to dashboard for all other cases\n                return `${baseUrl}/dashboard`;\n            } catch (error) {\n                console.error(\"Error in redirect callback:\", error);\n                return `${baseUrl}/dashboard`;\n            }\n        }\n    },\n    pages: {\n        signIn: \"/login\",\n        signOut: \"/\",\n        error: \"/login\",\n        verifyRequest: \"/login\",\n        newUser: \"/dashboard\"\n    },\n    session: {\n        strategy: \"jwt\",\n        maxAge: 30 * 24 * 60 * 60\n    },\n    secret: process.env.NEXTAUTH_SECRET,\n    debug: false,\n    logger: {\n        error: (code, metadata)=>{\n            if (code !== \"DEBUG_ENABLED\") {\n                console.error(`[NextAuth][Error][${code}]:`, metadata);\n            }\n        },\n        warn: (code)=>{\n            if (code !== \"DEBUG_ENABLED\") {\n                console.warn(`[NextAuth][Warning][${code}]`);\n            }\n        },\n        debug: ()=>{}\n    },\n    events: {\n        async signIn ({ user, account, isNewUser }) {\n            ;\n        }\n    }\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (authOptions);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUM1QmhGLFFBQVFDLEtBQUssQ0FBQyxDQUFDLGtCQUFrQixFQUFFK0UsS0FBSyxFQUFFLENBQUMsRUFBRUM7WUFDL0M7UUFDRjtRQUNBQyxNQUFNLENBQUNGO1lBQ0wsSUFBSUEsU0FBUyxpQkFBaUI7Z0JBQzVCaEYsUUFBUWtGLElBQUksQ0FBQyxDQUFDLG9CQUFvQixFQUFFRixLQUFLLENBQUMsQ0FBQztZQUM3QztRQUNGO1FBQ0FGLE9BQU8sS0FDUDtJQUNGO0lBQ0FLLFFBQVE7UUFDTixNQUFNcEMsUUFBTyxFQUFFbEMsSUFBSSxFQUFFbUMsT0FBTyxFQUFFb0MsU0FBUyxFQUFFOztRQUt6QztJQUNGO0FBQ0YsRUFBRTtBQUVGLGlFQUFlakYsV0FBV0EsRUFBQyIsInNvdXJjZXMiOlsid2VicGFjazovL2Nob2ljZS1lLWxlYXJuaW5nLy4vc3JjL2xpYi9hdXRoL2F1dGgtb3B0aW9ucy50cz84ZGMzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE5leHRBdXRoT3B0aW9ucyB9IGZyb20gJ25leHQtYXV0aCc7XG5pbXBvcnQgQ3JlZGVudGlhbHNQcm92aWRlciBmcm9tICduZXh0LWF1dGgvcHJvdmlkZXJzL2NyZWRlbnRpYWxzJztcbmltcG9ydCBHb29nbGVQcm92aWRlciBmcm9tICduZXh0LWF1dGgvcHJvdmlkZXJzL2dvb2dsZSc7XG5pbXBvcnQgR2l0SHViUHJvdmlkZXIgZnJvbSAnbmV4dC1hdXRoL3Byb3ZpZGVycy9naXRodWInO1xuaW1wb3J0IEZhY2Vib29rUHJvdmlkZXIgZnJvbSAnbmV4dC1hdXRoL3Byb3ZpZGVycy9mYWNlYm9vayc7XG5pbXBvcnQgTWljcm9zb2Z0UHJvdmlkZXIgZnJvbSAnbmV4dC1hdXRoL3Byb3ZpZGVycy9henVyZS1hZCc7XG5pbXBvcnQgeyBjb21wYXJlUGFzc3dvcmRzIH0gZnJvbSAnLi91dGlscy9wYXNzd29yZC11dGlscyc7XG5pbXBvcnQgeyBmaW5kVXNlckJ5RW1haWwsIHVwZGF0ZVVzZXJMb2dpbkluZm8gfSBmcm9tICdAL2xpYi9kYi9zZXJ2aWNlcy91c2VyLXNlcnZpY2UnO1xuaW1wb3J0IHByaXNtYSBmcm9tICdAL2xpYi9kYic7XG5pbXBvcnQgeyBSb2xlIH0gZnJvbSAnQC90eXBlcy9hdXRoL3JvbGVzJztcblxuLy8gQ2hlY2sgaWYgZW52aXJvbm1lbnQgdmFyaWFibGVzIGFyZSBzZXRcbmZ1bmN0aW9uIHZhbGlkYXRlRW52VmFyaWFibGVzKCkge1xuICBjb25zdCByZXF1aXJlZFZhcnMgPSBbXG4gICAgeyBrZXk6ICdORVhUQVVUSF9TRUNSRVQnLCB2YWx1ZTogcHJvY2Vzcy5lbnYuTkVYVEFVVEhfU0VDUkVUIH0sXG4gICAgeyBrZXk6ICdORVhUQVVUSF9VUkwnLCB2YWx1ZTogcHJvY2Vzcy5lbnYuTkVYVEFVVEhfVVJMIH0sXG4gICAgeyBrZXk6ICdGQUNFQk9PS19DTElFTlRfSUQnLCB2YWx1ZTogcHJvY2Vzcy5lbnYuRkFDRUJPT0tfQ0xJRU5UX0lEIH0sXG4gICAgeyBrZXk6ICdGQUNFQk9PS19DTElFTlRfU0VDUkVUJywgdmFsdWU6IHByb2Nlc3MuZW52LkZBQ0VCT09LX0NMSUVOVF9TRUNSRVQgfSxcbiAgICB7IGtleTogJ01JQ1JPU09GVF9DTElFTlRfSUQnLCB2YWx1ZTogcHJvY2Vzcy5lbnYuTUlDUk9TT0ZUX0NMSUVOVF9JRCB9LFxuICAgIHsga2V5OiAnTUlDUk9TT0ZUX0NMSUVOVF9TRUNSRVQnLCB2YWx1ZTogcHJvY2Vzcy5lbnYuTUlDUk9TT0ZUX0NMSUVOVF9TRUNSRVQgfSxcbiAgXTtcbiAgXG4gIGNvbnN0IG1pc3NpbmdWYXJzID0gcmVxdWlyZWRWYXJzLmZpbHRlcih2ID0+ICF2LnZhbHVlKTtcbiAgXG4gIGlmIChtaXNzaW5nVmFycy5sZW5ndGggPiAwKSB7XG4gICAgY29uc29sZS5lcnJvcignTWlzc2luZyByZXF1aXJlZCBlbnZpcm9ubWVudCB2YXJpYWJsZXM6JywgbWlzc2luZ1ZhcnMubWFwKHYgPT4gdi5rZXkpKTtcbiAgfSBlbHNlIHtcbiAgICBjb25zb2xlLmxvZygnQWxsIHJlcXVpcmVkIGVudmlyb25tZW50IHZhcmlhYmxlcyBhcmUgc2V0Jyk7XG4gIH1cbiAgXG4gIC8vIExvZyBwcm92aWRlciBkZXRhaWxzIGZvciBkZWJ1Z2dpbmdcbiAgY29uc29sZS5sb2coJ09BdXRoIFByb3ZpZGVyIERldGFpbHM6Jyk7XG4gIGNvbnNvbGUubG9nKCctIEZhY2Vib29rIENsaWVudCBJRDonLCBwcm9jZXNzLmVudi5GQUNFQk9PS19DTElFTlRfSUQ/LnN1YnN0cmluZygwLCA1KSArICcuLi4nKTtcbiAgY29uc29sZS5sb2coJy0gTWljcm9zb2Z0IENsaWVudCBJRDonLCBwcm9jZXNzLmVudi5NSUNST1NPRlRfQ0xJRU5UX0lEPy5zdWJzdHJpbmcoMCwgNSkgKyAnLi4uJyk7XG59XG5cbi8vIFZhbGlkYXRlIGVudmlyb25tZW50IHZhcmlhYmxlcyBvbiBzdGFydHVwXG52YWxpZGF0ZUVudlZhcmlhYmxlcygpO1xuXG4vLyBFeHRlbmQgdGhlIGJ1aWx0LWluIHNlc3Npb24gdHlwZXNcbmRlY2xhcmUgbW9kdWxlIFwibmV4dC1hdXRoXCIge1xuICBpbnRlcmZhY2UgVXNlciB7XG4gICAgaWQ6IHN0cmluZztcbiAgICByb2xlOiBSb2xlO1xuICB9XG4gIFxuICBpbnRlcmZhY2UgU2Vzc2lvbiB7XG4gICAgdXNlcjoge1xuICAgICAgaWQ6IHN0cmluZztcbiAgICAgIG5hbWU/OiBzdHJpbmcgfCBudWxsO1xuICAgICAgZW1haWw/OiBzdHJpbmcgfCBudWxsO1xuICAgICAgaW1hZ2U/OiBzdHJpbmcgfCBudWxsO1xuICAgICAgcm9sZTogUm9sZTtcbiAgICB9XG4gIH1cbn1cblxuZGVjbGFyZSBtb2R1bGUgXCJuZXh0LWF1dGgvand0XCIge1xuICBpbnRlcmZhY2UgSldUIHtcbiAgICBpZDogc3RyaW5nO1xuICAgIHJvbGU6IFJvbGU7XG4gIH1cbn1cblxuZXhwb3J0IGNvbnN0IGF1dGhPcHRpb25zOiBOZXh0QXV0aE9wdGlvbnMgPSB7XG4gIHByb3ZpZGVyczogW1xuICAgIENyZWRlbnRpYWxzUHJvdmlkZXIoe1xuICAgICAgbmFtZTogJ0NyZWRlbnRpYWxzJyxcbiAgICAgIGNyZWRlbnRpYWxzOiB7XG4gICAgICAgIGVtYWlsOiB7IGxhYmVsOiAnRW1haWwnLCB0eXBlOiAnZW1haWwnIH0sXG4gICAgICAgIHBhc3N3b3JkOiB7IGxhYmVsOiAnUGFzc3dvcmQnLCB0eXBlOiAncGFzc3dvcmQnIH0sXG4gICAgICB9LFxuICAgICAgYXN5bmMgYXV0aG9yaXplKGNyZWRlbnRpYWxzKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgaWYgKCFjcmVkZW50aWFscz8uZW1haWwgfHwgIWNyZWRlbnRpYWxzPy5wYXNzd29yZCkge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcignTWlzc2luZyBjcmVkZW50aWFscycpO1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdFbWFpbCBhbmQgcGFzc3dvcmQgYXJlIHJlcXVpcmVkJyk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgLy8gRmluZCB0aGUgdXNlciBieSBlbWFpbCAoY2FzZSBpbnNlbnNpdGl2ZSlcbiAgICAgICAgICBjb25zdCB1c2VyID0gYXdhaXQgZmluZFVzZXJCeUVtYWlsKGNyZWRlbnRpYWxzLmVtYWlsKTtcblxuICAgICAgICAgIC8vIElmIHVzZXIgZG9lc24ndCBleGlzdFxuICAgICAgICAgIGlmICghdXNlcikge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcignVXNlciBub3QgZm91bmQnKTtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignSW52YWxpZCBlbWFpbCBvciBwYXNzd29yZCcpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIC8vIFZlcmlmeSB0aGUgcGFzc3dvcmRcbiAgICAgICAgICBjb25zdCBpc1Bhc3N3b3JkVmFsaWQgPSBhd2FpdCBjb21wYXJlUGFzc3dvcmRzKGNyZWRlbnRpYWxzLnBhc3N3b3JkLCB1c2VyLnBhc3N3b3JkKTtcbiAgICAgICAgICBpZiAoIWlzUGFzc3dvcmRWYWxpZCkge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcignUGFzc3dvcmQgaW52YWxpZCcpO1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIGVtYWlsIG9yIHBhc3N3b3JkJyk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgY29uc29sZS5sb2coJ0F1dGhlbnRpY2F0aW9uIHN1Y2Nlc3NmdWwgZm9yOicsIGNyZWRlbnRpYWxzLmVtYWlsKTtcblxuICAgICAgICAgIC8vIFJldHVybiB1c2VyIG9iamVjdCB3aXRob3V0IHBhc3N3b3JkXG4gICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGlkOiB1c2VyLmlkLFxuICAgICAgICAgICAgbmFtZTogdXNlci5uYW1lLFxuICAgICAgICAgICAgZW1haWw6IHVzZXIuZW1haWwsXG4gICAgICAgICAgICByb2xlOiB1c2VyLnJvbGUgYXMgUm9sZVxuICAgICAgICAgIH07XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgY29uc29sZS5lcnJvcignQXV0aGVudGljYXRpb24gZXJyb3I6JywgZXJyb3IpO1xuICAgICAgICAgIC8vIFJlLXRocm93IHRvIGJlIGhhbmRsZWQgYnkgTmV4dEF1dGhcbiAgICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICB9KSxcbiAgICBcbiAgICAvLyBBZGQgR29vZ2xlIFByb3ZpZGVyXG4gICAgR29vZ2xlUHJvdmlkZXIoe1xuICAgICAgY2xpZW50SWQ6IHByb2Nlc3MuZW52LkdPT0dMRV9DTElFTlRfSUQgfHwgJycsXG4gICAgICBjbGllbnRTZWNyZXQ6IHByb2Nlc3MuZW52LkdPT0dMRV9DTElFTlRfU0VDUkVUIHx8ICcnLFxuICAgICAgYXV0aG9yaXphdGlvbjoge1xuICAgICAgICBwYXJhbXM6IHtcbiAgICAgICAgICBwcm9tcHQ6IFwiY29uc2VudFwiLFxuICAgICAgICAgIGFjY2Vzc190eXBlOiBcIm9mZmxpbmVcIixcbiAgICAgICAgICByZXNwb25zZV90eXBlOiBcImNvZGVcIlxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSksXG4gICAgXG4gICAgLy8gQWRkIEdpdEh1YiBQcm92aWRlclxuICAgIEdpdEh1YlByb3ZpZGVyKHtcbiAgICAgIGNsaWVudElkOiBwcm9jZXNzLmVudi5HSVRIVUJfQ0xJRU5UX0lEIHx8ICcnLFxuICAgICAgY2xpZW50U2VjcmV0OiBwcm9jZXNzLmVudi5HSVRIVUJfQ0xJRU5UX1NFQ1JFVCB8fCAnJyxcbiAgICB9KSxcbiAgICBcbiAgICAvLyBBZGQgRmFjZWJvb2sgUHJvdmlkZXJcbiAgICBGYWNlYm9va1Byb3ZpZGVyKHtcbiAgICAgIGNsaWVudElkOiBwcm9jZXNzLmVudi5GQUNFQk9PS19DTElFTlRfSUQgfHwgJycsXG4gICAgICBjbGllbnRTZWNyZXQ6IHByb2Nlc3MuZW52LkZBQ0VCT09LX0NMSUVOVF9TRUNSRVQgfHwgJycsXG4gICAgICB2ZXJzaW9uOiBcIjEyLjBcIiwgLy8gU2V0IGxhdGVzdCBBUEkgdmVyc2lvblxuICAgICAgYXV0aG9yaXphdGlvbjoge1xuICAgICAgICBwYXJhbXM6IHtcbiAgICAgICAgICBzY29wZTogXCJlbWFpbCxwdWJsaWNfcHJvZmlsZVwiLFxuICAgICAgICAgIGRpc3BsYXk6IFwicG9wdXBcIixcbiAgICAgICAgICBhdXRoX3R5cGU6IFwicmVyZXF1ZXN0XCJcbiAgICAgICAgfSxcbiAgICAgIH0sXG4gICAgICB1c2VyaW5mbzoge1xuICAgICAgICB1cmw6IFwiaHR0cHM6Ly9ncmFwaC5mYWNlYm9vay5jb20vbWVcIixcbiAgICAgICAgcGFyYW1zOiB7IFxuICAgICAgICAgIGZpZWxkczogXCJpZCxuYW1lLGVtYWlsLHBpY3R1cmVcIiBcbiAgICAgICAgfSxcbiAgICAgIH0sXG4gICAgICBwcm9maWxlKHByb2ZpbGUpIHtcbiAgICAgICAgY29uc29sZS5sb2coJ0ZhY2Vib29rIHByb2ZpbGUgZGF0YTonLCBwcm9maWxlKTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBpZDogcHJvZmlsZS5pZCxcbiAgICAgICAgICBuYW1lOiBwcm9maWxlLm5hbWUsXG4gICAgICAgICAgZW1haWw6IHByb2ZpbGUuZW1haWwgfHwgYCR7cHJvZmlsZS5pZH1AZmFjZWJvb2suY29tYCwgLy8gUHJvdmlkZSBmYWxsYmFjayBlbWFpbFxuICAgICAgICAgIGltYWdlOiBwcm9maWxlLnBpY3R1cmU/LmRhdGE/LnVybCxcbiAgICAgICAgICByb2xlOiBSb2xlLnN0dWRlbnQsXG4gICAgICAgIH07XG4gICAgICB9LFxuICAgICAgY2hlY2tzOiBbXCJzdGF0ZVwiXSxcbiAgICB9KSxcbiAgICBcbiAgICAvLyBBZGQgTWljcm9zb2Z0IFByb3ZpZGVyICh2aWEgQXp1cmUgQUQpXG4gICAgTWljcm9zb2Z0UHJvdmlkZXIoe1xuICAgICAgY2xpZW50SWQ6IHByb2Nlc3MuZW52Lk1JQ1JPU09GVF9DTElFTlRfSUQgfHwgJycsXG4gICAgICBjbGllbnRTZWNyZXQ6IHByb2Nlc3MuZW52Lk1JQ1JPU09GVF9DTElFTlRfU0VDUkVUIHx8ICcnLFxuICAgICAgdGVuYW50SWQ6IHByb2Nlc3MuZW52Lk1JQ1JPU09GVF9URU5BTlRfSUQgfHwgXCJvcmdhbml6YXRpb25zXCIsIC8vIENoYW5nZSBmcm9tIFwiY29tbW9uXCIgdG8gXCJvcmdhbml6YXRpb25zXCIgXG4gICAgICBhdXRob3JpemF0aW9uOiB7XG4gICAgICAgIHBhcmFtczoge1xuICAgICAgICAgIHNjb3BlOiBcIm9wZW5pZCBwcm9maWxlIGVtYWlsIFVzZXIuUmVhZFwiLFxuICAgICAgICB9LFxuICAgICAgfSxcbiAgICAgIHByb2ZpbGUocHJvZmlsZSkge1xuICAgICAgICBjb25zb2xlLmxvZygnTWljcm9zb2Z0IHByb2ZpbGUgZGF0YTonLCBwcm9maWxlKTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBpZDogcHJvZmlsZS5zdWIgfHwgcHJvZmlsZS5vaWQsXG4gICAgICAgICAgbmFtZTogcHJvZmlsZS5uYW1lIHx8IHByb2ZpbGUucHJlZmVycmVkX3VzZXJuYW1lLFxuICAgICAgICAgIGVtYWlsOiBwcm9maWxlLmVtYWlsIHx8IHByb2ZpbGUucHJlZmVycmVkX3VzZXJuYW1lIHx8IGAke3Byb2ZpbGUuc3ViIHx8IHByb2ZpbGUub2lkfUBtaWNyb3NvZnQuY29tYCwgLy8gUHJvdmlkZSBmYWxsYmFjayBlbWFpbFxuICAgICAgICAgIGltYWdlOiBudWxsLFxuICAgICAgICAgIHJvbGU6IFJvbGUuc3R1ZGVudCxcbiAgICAgICAgfTtcbiAgICAgIH0sXG4gICAgICBjaGVja3M6IFtcInBrY2VcIiwgXCJzdGF0ZVwiXSxcbiAgICB9KSxcbiAgXSxcbiAgY2FsbGJhY2tzOiB7XG4gICAgYXN5bmMgc2lnbkluKHsgdXNlciwgYWNjb3VudCwgcHJvZmlsZSwgZW1haWwgfSkge1xuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc29sZS5sb2coJ1NpZ25JbiBjYWxsYmFjayB0cmlnZ2VyZWQ6JywgeyBcbiAgICAgICAgICBwcm92aWRlcjogYWNjb3VudD8ucHJvdmlkZXIsXG4gICAgICAgICAgaGFzVXNlcjogISF1c2VyLFxuICAgICAgICAgIGhhc1Byb2ZpbGU6ICEhcHJvZmlsZVxuICAgICAgICB9KTtcbiAgICAgICAgXG4gICAgICAgIC8vIEZvciBPQXV0aCBwcm92aWRlcnNcbiAgICAgICAgaWYgKGFjY291bnQgJiYgYWNjb3VudC5wcm92aWRlciAmJiBhY2NvdW50LnByb3ZpZGVyICE9PSAnY3JlZGVudGlhbHMnKSB7XG4gICAgICAgICAgY29uc29sZS5sb2coYE9BdXRoIGxvZ2luIGF0dGVtcHQgd2l0aCAke2FjY291bnQucHJvdmlkZXJ9OmAsIHtcbiAgICAgICAgICAgIGFjY291bnRUeXBlOiBhY2NvdW50LnR5cGUsXG4gICAgICAgICAgICBhY2NvdW50SWQ6IGFjY291bnQucHJvdmlkZXJBY2NvdW50SWQsXG4gICAgICAgICAgICBoYXNUb2tlbnM6ICEhYWNjb3VudC5hY2Nlc3NfdG9rZW5cbiAgICAgICAgICB9KTtcbiAgICAgICAgICBcbiAgICAgICAgICAvLyBTcGVjaWFsIGhhbmRsaW5nIGZvciBNaWNyb3NvZnQgcHJvdmlkZXJcbiAgICAgICAgICBpZiAoYWNjb3VudC5wcm92aWRlciA9PT0gJ2F6dXJlLWFkJykge1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ01pY3Jvc29mdCBsb2dpbiBkZXRhaWxzOicsIHtcbiAgICAgICAgICAgICAgdG9rZW5UeXBlOiBhY2NvdW50LnRva2VuX3R5cGUsXG4gICAgICAgICAgICAgIHNjb3BlczogYWNjb3VudC5zY29wZSxcbiAgICAgICAgICAgICAgZXhwaXJlc0F0OiBhY2NvdW50LmV4cGlyZXNfYXRcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgICBcbiAgICAgICAgICAvLyBTcGVjaWFsIGhhbmRsaW5nIGZvciBGYWNlYm9vayBwcm92aWRlclxuICAgICAgICAgIGlmIChhY2NvdW50LnByb3ZpZGVyID09PSAnZmFjZWJvb2snKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnRmFjZWJvb2sgbG9naW4gZGV0YWlsczonLCB7XG4gICAgICAgICAgICAgIHRva2VuVHlwZTogYWNjb3VudC50b2tlbl90eXBlLFxuICAgICAgICAgICAgICBzY29wZXM6IGFjY291bnQuc2NvcGUsXG4gICAgICAgICAgICAgIGV4cGlyZXNBdDogYWNjb3VudC5leHBpcmVzX2F0XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XG4gICAgICAgICAgXG4gICAgICAgICAgLy8gVmFsaWRhdGUgZW1haWwgcHJlc2VuY2VcbiAgICAgICAgICBsZXQgdXNlckVtYWlsID0gdXNlci5lbWFpbCB8fCBwcm9maWxlPy5lbWFpbCB8fCBlbWFpbDtcbiAgICAgICAgICBpZiAoIXVzZXJFbWFpbCB8fCB0eXBlb2YgdXNlckVtYWlsICE9PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcignT0F1dGggYWNjb3VudCBtaXNzaW5nIGVtYWlsOicsIHsgXG4gICAgICAgICAgICAgIHByb3ZpZGVyOiBhY2NvdW50LnByb3ZpZGVyLCBcbiAgICAgICAgICAgICAgdXNlcixcbiAgICAgICAgICAgICAgcHJvZmlsZSxcbiAgICAgICAgICAgICAgZW1haWwgXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIC8vIEluc3RlYWQgb2YgdGhyb3dpbmcgYW4gZXJyb3IsIGNvbnRpbnVlIHdpdGggYSBnZW5lcmF0ZWQgZW1haWxcbiAgICAgICAgICAgIGlmIChhY2NvdW50LnByb3ZpZGVyID09PSAnZmFjZWJvb2snKSB7XG4gICAgICAgICAgICAgIHVzZXIuZW1haWwgPSBgJHt1c2VyLmlkfUBmYWNlYm9vay5jb21gO1xuICAgICAgICAgICAgICB1c2VyRW1haWwgPSB1c2VyLmVtYWlsO1xuICAgICAgICAgICAgICBjb25zb2xlLmxvZygnVXNpbmcgZ2VuZXJhdGVkIGVtYWlsIGZvciBGYWNlYm9vazonLCB1c2VyLmVtYWlsKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoYWNjb3VudC5wcm92aWRlciA9PT0gJ2F6dXJlLWFkJykge1xuICAgICAgICAgICAgICB1c2VyLmVtYWlsID0gYCR7dXNlci5pZH1AbWljcm9zb2Z0LmNvbWA7XG4gICAgICAgICAgICAgIHVzZXJFbWFpbCA9IHVzZXIuZW1haWw7XG4gICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdVc2luZyBnZW5lcmF0ZWQgZW1haWwgZm9yIE1pY3Jvc29mdDonLCB1c2VyLmVtYWlsKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignRW1haWwgaXMgcmVxdWlyZWQgZm9yIGF1dGhlbnRpY2F0aW9uJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIFxuICAgICAgICAgIC8vIEVuc3VyZSB1c2VyRW1haWwgaXMgYSBzdHJpbmcgZm9yIGRhdGFiYXNlIG9wZXJhdGlvbnNcbiAgICAgICAgICBjb25zdCBub3JtYWxpemVkRW1haWwgPSB0eXBlb2YgdXNlckVtYWlsID09PSAnc3RyaW5nJyA/IHVzZXJFbWFpbC50b0xvd2VyQ2FzZSgpIDogXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAodHlwZW9mIHVzZXIuZW1haWwgPT09ICdzdHJpbmcnID8gdXNlci5lbWFpbC50b0xvd2VyQ2FzZSgpIDogJycpO1xuICAgICAgICAgIFxuICAgICAgICAgIC8vIENoZWNrIGlmIHVzZXIgYWxyZWFkeSBleGlzdHNcbiAgICAgICAgICBjb25zdCBleGlzdGluZ1VzZXIgPSBhd2FpdCBmaW5kVXNlckJ5RW1haWwobm9ybWFsaXplZEVtYWlsKTtcbiAgICAgICAgICBcbiAgICAgICAgICBpZiAoZXhpc3RpbmdVc2VyKSB7XG4gICAgICAgICAgICAvLyBVc2VyIGV4aXN0cywgdXBkYXRlIHRoZWlyIE9BdXRoIGluZm8gYW5kIGxvZ2luIGhpc3RvcnlcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGBFeGlzdGluZyB1c2VyICR7bm9ybWFsaXplZEVtYWlsfSBzaWduZWQgaW4gdmlhICR7YWNjb3VudC5wcm92aWRlcn1gKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgLy8gVXBkYXRlIGxvZ2luIGhpc3RvcnkgYW5kIE9BdXRoIGluZm9cbiAgICAgICAgICAgICAgYXdhaXQgcHJpc21hLnVzZXIudXBkYXRlKHtcbiAgICAgICAgICAgICAgICB3aGVyZTogeyBpZDogZXhpc3RpbmdVc2VyLmlkIH0sXG4gICAgICAgICAgICAgICAgZGF0YTogeyBcbiAgICAgICAgICAgICAgICAgIHVwZGF0ZWRBdDogbmV3IERhdGUoKSxcbiAgICAgICAgICAgICAgICAgIG5hbWU6IHVzZXIubmFtZSB8fCBleGlzdGluZ1VzZXIubmFtZSxcbiAgICAgICAgICAgICAgICAgIC8vIE5vdGU6IEFkZCBtb3JlIGZpZWxkcyBhcyBuZWVkZWQgYmFzZWQgb24geW91ciBVc2VyIG1vZGVsXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0gY2F0Y2ggKHVwZGF0ZUVycm9yKSB7XG4gICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHVwZGF0aW5nIHVzZXIgbG9naW4gaGlzdG9yeTonLCB1cGRhdGVFcnJvcik7XG4gICAgICAgICAgICAgIC8vIENvbnRpbnVlIHdpdGggc2lnbiBpbiBldmVuIGlmIHVwZGF0ZSBmYWlsc1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBTZXQgdGhlIHVzZXIgSUQgZm9yIHRoZSBzZXNzaW9uXG4gICAgICAgICAgICB1c2VyLmlkID0gZXhpc3RpbmdVc2VyLmlkO1xuICAgICAgICAgICAgdXNlci5yb2xlID0gZXhpc3RpbmdVc2VyLnJvbGUgYXMgUm9sZTtcbiAgICAgICAgICAgIFxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyBDcmVhdGUgYSBuZXcgdXNlciBmcm9tIE9BdXRoIGRhdGFcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGBDcmVhdGluZyBuZXcgdXNlciBmcm9tICR7YWNjb3VudC5wcm92aWRlcn0gT0F1dGg6YCwgdXNlckVtYWlsKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgY29uc3QgbmV3VXNlciA9IGF3YWl0IHByaXNtYS51c2VyLmNyZWF0ZSh7XG4gICAgICAgICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgICAgICAgbmFtZTogdXNlci5uYW1lIHx8IHByb2ZpbGU/Lm5hbWUgfHwgJ09BdXRoIFVzZXInLFxuICAgICAgICAgICAgICAgICAgZW1haWw6IG5vcm1hbGl6ZWRFbWFpbCxcbiAgICAgICAgICAgICAgICAgIHBhc3N3b3JkOiAnJywgLy8gRW1wdHkgcGFzc3dvcmQgZm9yIE9BdXRoIHVzZXJzXG4gICAgICAgICAgICAgICAgICByb2xlOiAnc3R1ZGVudCcsXG4gICAgICAgICAgICAgICAgICAvLyBBZGQgb3RoZXIgZmllbGRzIGFzIG5lZWRlZFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgIFxuICAgICAgICAgICAgICBjb25zb2xlLmxvZygnQ3JlYXRlZCBuZXcgdXNlciBmcm9tIE9BdXRoOicsIG5ld1VzZXIuaWQpO1xuICAgICAgICAgICAgICB1c2VyLmlkID0gbmV3VXNlci5pZDtcbiAgICAgICAgICAgICAgdXNlci5yb2xlID0gbmV3VXNlci5yb2xlIGFzIFJvbGU7XG4gICAgICAgICAgICAgIFxuICAgICAgICAgICAgfSBjYXRjaCAoY3JlYXRlRXJyb3IpIHtcbiAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgY3JlYXRpbmcgbmV3IHVzZXI6JywgY3JlYXRlRXJyb3IpO1xuICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ZhaWxlZCB0byBjcmVhdGUgdXNlciBhY2NvdW50Jyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKGFjY291bnQgJiYgYWNjb3VudC5wcm92aWRlciA9PT0gJ2NyZWRlbnRpYWxzJykge1xuICAgICAgICAgIC8vIEZvciBjcmVkZW50aWFscyBsb2dpbiwgdXBkYXRlIGxvZ2luIGhpc3RvcnlcbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgaWYgKHVzZXIuZW1haWwpIHtcbiAgICAgICAgICAgICAgY29uc3QgZXhpc3RpbmdVc2VyID0gYXdhaXQgZmluZFVzZXJCeUVtYWlsKHVzZXIuZW1haWwpO1xuICAgICAgICAgICAgICBpZiAoZXhpc3RpbmdVc2VyKSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgdXBkYXRlVXNlckxvZ2luSW5mbyhleGlzdGluZ1VzZXIuaWQpO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIC8vIENoZWNrIGFuZCBhd2FyZCBhY2hpZXZlbWVudHMgZm9yIGxvZ2luIGlmIG5lZWRlZFxuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAvLyBXZSBuZWVkIHRvIGR5bmFtaWNhbGx5IGltcG9ydCB0aGlzIHRvIGF2b2lkIGNpcmN1bGFyIGRlcGVuZGVuY2llc1xuICAgICAgICAgICAgICAgICAgY29uc3QgeyBjaGVja0FuZEF3YXJkQWNoaWV2ZW1lbnRzIH0gPSBhd2FpdCBpbXBvcnQoJ0Avc2VydmljZXMvYWNoaWV2ZW1lbnRzJyk7XG4gICAgICAgICAgICAgICAgICBhd2FpdCBjaGVja0FuZEF3YXJkQWNoaWV2ZW1lbnRzKGV4aXN0aW5nVXNlci5pZCk7XG4gICAgICAgICAgICAgICAgfSBjYXRjaCAoYWNoaWV2ZW1lbnRFcnJvcikge1xuICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgY2hlY2tpbmcgYWNoaWV2ZW1lbnRzOicsIGFjaGlldmVtZW50RXJyb3IpO1xuICAgICAgICAgICAgICAgICAgLy8gRG9uJ3QgZmFpbCBsb2dpbiBpZiBhY2hpZXZlbWVudHMgY2hlY2sgZmFpbHNcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgdXBkYXRpbmcgbG9naW4gaGlzdG9yeTonLCBlcnJvcik7XG4gICAgICAgICAgICAvLyBEb24ndCBwcmV2ZW50IGxvZ2luIGlmIHRoaXMgZmFpbHNcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgaW4gc2lnbkluIGNhbGxiYWNrOicsIGVycm9yKTtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgIH0sXG4gICAgXG4gICAgYXN5bmMgand0KHsgdG9rZW4sIHVzZXIsIGFjY291bnQgfSkge1xuICAgICAgaWYgKHVzZXIpIHtcbiAgICAgICAgdG9rZW4uaWQgPSB1c2VyLmlkO1xuICAgICAgICB0b2tlbi5yb2xlID0gdXNlci5yb2xlIHx8IFJvbGUuc3R1ZGVudDtcbiAgICAgIH1cbiAgICAgIHJldHVybiB0b2tlbjtcbiAgICB9LFxuICAgIFxuICAgIGFzeW5jIHNlc3Npb24oeyBzZXNzaW9uLCB0b2tlbiB9KSB7XG4gICAgICBpZiAoc2Vzc2lvbi51c2VyKSB7XG4gICAgICAgIHNlc3Npb24udXNlci5pZCA9IHRva2VuLmlkO1xuICAgICAgICBzZXNzaW9uLnVzZXIucm9sZSA9IHRva2VuLnJvbGU7XG4gICAgICB9XG4gICAgICByZXR1cm4gc2Vzc2lvbjtcbiAgICB9LFxuICAgIFxuICAgIGFzeW5jIHJlZGlyZWN0KHsgdXJsLCBiYXNlVXJsIH0pIHtcbiAgICAgIGNvbnNvbGUubG9nKCdSZWRpcmVjdCBjYWxsYmFjayBjYWxsZWQgd2l0aDonLCB7IHVybCwgYmFzZVVybCB9KTtcbiAgICAgIFxuICAgICAgdHJ5IHtcbiAgICAgICAgLy8gSGFuZGxlIHJlZGlyZWN0IGFmdGVyIHNpZ24gaW5cbiAgICAgICAgaWYgKHVybC5zdGFydHNXaXRoKCcvJykpIHtcbiAgICAgICAgICAvLyBGb3IgcmVsYXRpdmUgVVJMcywgcHJlZml4IHdpdGggYmFzZSBVUkxcbiAgICAgICAgICByZXR1cm4gYCR7YmFzZVVybH0ke3VybH1gO1xuICAgICAgICB9IGVsc2UgaWYgKG5ldyBVUkwodXJsKS5vcmlnaW4gPT09IGJhc2VVcmwpIHtcbiAgICAgICAgICAvLyBBbGxvdyByZWRpcmVjdHMgdG8gc2FtZSBvcmlnaW5cbiAgICAgICAgICByZXR1cm4gdXJsO1xuICAgICAgICB9XG4gICAgICAgIC8vIERlZmF1bHQgdG8gZGFzaGJvYXJkIGZvciBhbGwgb3RoZXIgY2FzZXNcbiAgICAgICAgcmV0dXJuIGAke2Jhc2VVcmx9L2Rhc2hib2FyZGA7XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBpbiByZWRpcmVjdCBjYWxsYmFjazonLCBlcnJvcik7XG4gICAgICAgIHJldHVybiBgJHtiYXNlVXJsfS9kYXNoYm9hcmRgO1xuICAgICAgfVxuICAgIH0sXG4gIH0sXG4gIHBhZ2VzOiB7XG4gICAgc2lnbkluOiAnL2xvZ2luJyxcbiAgICBzaWduT3V0OiAnLycsXG4gICAgZXJyb3I6ICcvbG9naW4nLFxuICAgIHZlcmlmeVJlcXVlc3Q6ICcvbG9naW4nLFxuICAgIG5ld1VzZXI6ICcvZGFzaGJvYXJkJ1xuICB9LFxuICBzZXNzaW9uOiB7XG4gICAgc3RyYXRlZ3k6IFwiand0XCIsXG4gICAgbWF4QWdlOiAzMCAqIDI0ICogNjAgKiA2MCwgLy8gMzAgZGF5c1xuICB9LFxuICBzZWNyZXQ6IHByb2Nlc3MuZW52Lk5FWFRBVVRIX1NFQ1JFVCxcbiAgZGVidWc6IGZhbHNlLFxuICBsb2dnZXI6IHtcbiAgICBlcnJvcjogKGNvZGUsIG1ldGFkYXRhKSA9PiB7XG4gICAgICBpZiAoY29kZSAhPT0gJ0RFQlVHX0VOQUJMRUQnKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoYFtOZXh0QXV0aF1bRXJyb3JdWyR7Y29kZX1dOmAsIG1ldGFkYXRhKTtcbiAgICAgIH1cbiAgICB9LFxuICAgIHdhcm46IChjb2RlKSA9PiB7XG4gICAgICBpZiAoY29kZSAhPT0gJ0RFQlVHX0VOQUJMRUQnKSB7XG4gICAgICAgIGNvbnNvbGUud2FybihgW05leHRBdXRoXVtXYXJuaW5nXVske2NvZGV9XWApO1xuICAgICAgfVxuICAgIH0sXG4gICAgZGVidWc6ICgpID0+IHtcbiAgICB9LFxuICB9LFxuICBldmVudHM6IHtcbiAgICBhc3luYyBzaWduSW4oeyB1c2VyLCBhY2NvdW50LCBpc05ld1VzZXIgfSkge1xuICAgICAgY29uc29sZS5sb2coYFVzZXIgJHt1c2VyLmVtYWlsfSBzaWduZWQgaW4gdmlhICR7YWNjb3VudD8ucHJvdmlkZXJ9YCwge1xuICAgICAgICBpc05ld1VzZXIsXG4gICAgICAgIHVzZXJJZDogdXNlci5pZFxuICAgICAgfSk7XG4gICAgfVxuICB9LFxufTtcblxuZXhwb3J0IGRlZmF1bHQgYXV0aE9wdGlvbnM7Il0sIm5hbWVzIjpbIkNyZWRlbnRpYWxzUHJvdmlkZXIiLCJHb29nbGVQcm92aWRlciIsIkdpdEh1YlByb3ZpZGVyIiwiRmFjZWJvb2tQcm92aWRlciIsIk1pY3Jvc29mdFByb3ZpZGVyIiwiY29tcGFyZVBhc3N3b3JkcyIsImZpbmRVc2VyQnlFbWFpbCIsInVwZGF0ZVVzZXJMb2dpbkluZm8iLCJwcmlzbWEiLCJSb2xlIiwidmFsaWRhdGVFbnZWYXJpYWJsZXMiLCJyZXF1aXJlZFZhcnMiLCJrZXkiLCJ2YWx1ZSIsInByb2Nlc3MiLCJlbnYiLCJORVhUQVVUSF9TRUNSRVQiLCJORVhUQVVUSF9VUkwiLCJGQUNFQk9PS19DTElFTlRfSUQiLCJGQUNFQk9PS19DTElFTlRfU0VDUkVUIiwiTUlDUk9TT0ZUX0NMSUVOVF9JRCIsIk1JQ1JPU09GVF9DTElFTlRfU0VDUkVUIiwibWlzc2luZ1ZhcnMiLCJmaWx0ZXIiLCJ2IiwibGVuZ3RoIiwiY29uc29sZSIsImVycm9yIiwibWFwIiwiYXV0aE9wdGlvbnMiLCJwcm92aWRlcnMiLCJuYW1lIiwiY3JlZGVudGlhbHMiLCJlbWFpbCIsImxhYmVsIiwidHlwZSIsInBhc3N3b3JkIiwiYXV0aG9yaXplIiwiRXJyb3IiLCJ1c2VyIiwiaXNQYXNzd29yZFZhbGlkIiwiaWQiLCJyb2xlIiwiY2xpZW50SWQiLCJHT09HTEVfQ0xJRU5UX0lEIiwiY2xpZW50U2VjcmV0IiwiR09PR0xFX0NMSUVOVF9TRUNSRVQiLCJhdXRob3JpemF0aW9uIiwicGFyYW1zIiwicHJvbXB0IiwiYWNjZXNzX3R5cGUiLCJyZXNwb25zZV90eXBlIiwiR0lUSFVCX0NMSUVOVF9JRCIsIkdJVEhVQl9DTElFTlRfU0VDUkVUIiwidmVyc2lvbiIsInNjb3BlIiwiZGlzcGxheSIsImF1dGhfdHlwZSIsInVzZXJpbmZvIiwidXJsIiwiZmllbGRzIiwicHJvZmlsZSIsImltYWdlIiwicGljdHVyZSIsImRhdGEiLCJzdHVkZW50IiwiY2hlY2tzIiwidGVuYW50SWQiLCJNSUNST1NPRlRfVEVOQU5UX0lEIiwic3ViIiwib2lkIiwicHJlZmVycmVkX3VzZXJuYW1lIiwiY2FsbGJhY2tzIiwic2lnbkluIiwiYWNjb3VudCIsInByb3ZpZGVyIiwidXNlckVtYWlsIiwibm9ybWFsaXplZEVtYWlsIiwidG9Mb3dlckNhc2UiLCJleGlzdGluZ1VzZXIiLCJ1cGRhdGUiLCJ3aGVyZSIsInVwZGF0ZWRBdCIsIkRhdGUiLCJ1cGRhdGVFcnJvciIsIm5ld1VzZXIiLCJjcmVhdGUiLCJjcmVhdGVFcnJvciIsImNoZWNrQW5kQXdhcmRBY2hpZXZlbWVudHMiLCJhY2hpZXZlbWVudEVycm9yIiwiand0IiwidG9rZW4iLCJzZXNzaW9uIiwicmVkaXJlY3QiLCJiYXNlVXJsIiwic3RhcnRzV2l0aCIsIlVSTCIsIm9yaWdpbiIsInBhZ2VzIiwic2lnbk91dCIsInZlcmlmeVJlcXVlc3QiLCJzdHJhdGVneSIsIm1heEFnZSIsInNlY3JldCIsImRlYnVnIiwibG9nZ2VyIiwiY29kZSIsIm1ldGFkYXRhIiwid2FybiIsImV2ZW50cyIsImlzTmV3VXNlciJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/auth/auth-options.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/auth/utils/password-utils.ts":
/*!**********************************************!*\
  !*** ./src/lib/auth/utils/password-utils.ts ***!
  \**********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   comparePasswords: () => (/* binding */ comparePasswords),\n/* harmony export */   hashPassword: () => (/* binding */ hashPassword)\n/* harmony export */ });\n/* harmony import */ var bcryptjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! bcryptjs */ \"(rsc)/./node_modules/bcryptjs/index.js\");\n/**\n * Password utilities for authentication\n */ \n/**\n * Hash a password with bcrypt\n * @param password The plain text password to hash\n * @returns The hashed password\n * @throws Error if hashing fails\n */ async function hashPassword(password) {\n    try {\n        if (!password) {\n            throw new Error(\"Password is required\");\n        }\n        const salt = await bcryptjs__WEBPACK_IMPORTED_MODULE_0__[\"default\"].genSalt(10);\n        const hash = await bcryptjs__WEBPACK_IMPORTED_MODULE_0__[\"default\"].hash(password, salt);\n        return hash;\n    } catch (error) {\n        console.error(\"Error in hashPassword function:\", error);\n        throw new Error(`Failed to hash password: ${error.message}`);\n    }\n}\n/**\n * Compare a plain text password with a hashed password\n * @param password The plain text password\n * @param hashedPassword The hashed password\n * @returns True if the passwords match, false otherwise\n */ async function comparePasswords(password, hashedPassword) {\n    try {\n        return await bcryptjs__WEBPACK_IMPORTED_MODULE_0__[\"default\"].compare(password, hashedPassword);\n    } catch (error) {\n        console.error(\"Error comparing passwords:\", error);\n        return false;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL2F1dGgvdXRpbHMvcGFzc3dvcmQtdXRpbHMudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQUE7O0NBRUMsR0FDNkI7QUFFOUI7Ozs7O0NBS0MsR0FDTSxlQUFlQyxhQUFhQyxRQUFnQjtJQUNqRCxJQUFJO1FBQ0YsSUFBSSxDQUFDQSxVQUFVO1lBQ2IsTUFBTSxJQUFJQyxNQUFNO1FBQ2xCO1FBRUEsTUFBTUMsT0FBTyxNQUFNSix3REFBYyxDQUFDO1FBQ2xDLE1BQU1NLE9BQU8sTUFBTU4scURBQVcsQ0FBQ0UsVUFBVUU7UUFFekMsT0FBT0U7SUFDVCxFQUFFLE9BQU9DLE9BQU87UUFDZEMsUUFBUUQsS0FBSyxDQUFDLG1DQUFtQ0E7UUFDakQsTUFBTSxJQUFJSixNQUFNLENBQUMseUJBQXlCLEVBQUUsTUFBaUJNLE9BQU8sQ0FBQyxDQUFDO0lBQ3hFO0FBQ0Y7QUFFQTs7Ozs7Q0FLQyxHQUNNLGVBQWVDLGlCQUFpQlIsUUFBZ0IsRUFBRVMsY0FBc0I7SUFDN0UsSUFBSTtRQUNGLE9BQU8sTUFBTVgsd0RBQWMsQ0FBQ0UsVUFBVVM7SUFDeEMsRUFBRSxPQUFPSixPQUFPO1FBQ2RDLFFBQVFELEtBQUssQ0FBQyw4QkFBOEJBO1FBQzVDLE9BQU87SUFDVDtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vY2hvaWNlLWUtbGVhcm5pbmcvLi9zcmMvbGliL2F1dGgvdXRpbHMvcGFzc3dvcmQtdXRpbHMudHM/OTI5ZiJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIFBhc3N3b3JkIHV0aWxpdGllcyBmb3IgYXV0aGVudGljYXRpb25cbiAqL1xuaW1wb3J0IGJjcnlwdCBmcm9tICdiY3J5cHRqcyc7XG5cbi8qKlxuICogSGFzaCBhIHBhc3N3b3JkIHdpdGggYmNyeXB0XG4gKiBAcGFyYW0gcGFzc3dvcmQgVGhlIHBsYWluIHRleHQgcGFzc3dvcmQgdG8gaGFzaFxuICogQHJldHVybnMgVGhlIGhhc2hlZCBwYXNzd29yZFxuICogQHRocm93cyBFcnJvciBpZiBoYXNoaW5nIGZhaWxzXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBoYXNoUGFzc3dvcmQocGFzc3dvcmQ6IHN0cmluZyk6IFByb21pc2U8c3RyaW5nPiB7XG4gIHRyeSB7XG4gICAgaWYgKCFwYXNzd29yZCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdQYXNzd29yZCBpcyByZXF1aXJlZCcpO1xuICAgIH1cbiAgICBcbiAgICBjb25zdCBzYWx0ID0gYXdhaXQgYmNyeXB0LmdlblNhbHQoMTApO1xuICAgIGNvbnN0IGhhc2ggPSBhd2FpdCBiY3J5cHQuaGFzaChwYXNzd29yZCwgc2FsdCk7XG4gICAgXG4gICAgcmV0dXJuIGhhc2g7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgaW4gaGFzaFBhc3N3b3JkIGZ1bmN0aW9uOicsIGVycm9yKTtcbiAgICB0aHJvdyBuZXcgRXJyb3IoYEZhaWxlZCB0byBoYXNoIHBhc3N3b3JkOiAkeyhlcnJvciBhcyBFcnJvcikubWVzc2FnZX1gKTtcbiAgfVxufVxuXG4vKipcbiAqIENvbXBhcmUgYSBwbGFpbiB0ZXh0IHBhc3N3b3JkIHdpdGggYSBoYXNoZWQgcGFzc3dvcmRcbiAqIEBwYXJhbSBwYXNzd29yZCBUaGUgcGxhaW4gdGV4dCBwYXNzd29yZFxuICogQHBhcmFtIGhhc2hlZFBhc3N3b3JkIFRoZSBoYXNoZWQgcGFzc3dvcmRcbiAqIEByZXR1cm5zIFRydWUgaWYgdGhlIHBhc3N3b3JkcyBtYXRjaCwgZmFsc2Ugb3RoZXJ3aXNlXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjb21wYXJlUGFzc3dvcmRzKHBhc3N3b3JkOiBzdHJpbmcsIGhhc2hlZFBhc3N3b3JkOiBzdHJpbmcpOiBQcm9taXNlPGJvb2xlYW4+IHtcbiAgdHJ5IHtcbiAgICByZXR1cm4gYXdhaXQgYmNyeXB0LmNvbXBhcmUocGFzc3dvcmQsIGhhc2hlZFBhc3N3b3JkKTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBjb21wYXJpbmcgcGFzc3dvcmRzOicsIGVycm9yKTtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbn1cbiJdLCJuYW1lcyI6WyJiY3J5cHQiLCJoYXNoUGFzc3dvcmQiLCJwYXNzd29yZCIsIkVycm9yIiwic2FsdCIsImdlblNhbHQiLCJoYXNoIiwiZXJyb3IiLCJjb25zb2xlIiwibWVzc2FnZSIsImNvbXBhcmVQYXNzd29yZHMiLCJoYXNoZWRQYXNzd29yZCIsImNvbXBhcmUiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/auth/utils/password-utils.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/db.ts":
/*!***********************!*\
  !*** ./src/lib/db.ts ***!
  \***********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   prisma: () => (/* reexport safe */ _db_index__WEBPACK_IMPORTED_MODULE_0__[\"default\"])\n/* harmony export */ });\n/* harmony import */ var _db_index__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./db/index */ \"(rsc)/./src/lib/db/index.ts\");\n/* harmony import */ var _db_services__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./db/services */ \"(rsc)/./src/lib/db/services/index.ts\");\n/* harmony reexport (unknown) */ var __WEBPACK_REEXPORT_OBJECT__ = {};\n/* harmony reexport (unknown) */ for(const __WEBPACK_IMPORT_KEY__ in _db_services__WEBPACK_IMPORTED_MODULE_1__) if([\"default\",\"prisma\"].indexOf(__WEBPACK_IMPORT_KEY__) < 0) __WEBPACK_REEXPORT_OBJECT__[__WEBPACK_IMPORT_KEY__] = () => _db_services__WEBPACK_IMPORTED_MODULE_1__[__WEBPACK_IMPORT_KEY__]\n/* harmony reexport (unknown) */ __webpack_require__.d(__webpack_exports__, __WEBPACK_REEXPORT_OBJECT__);\n// Export the Prisma client from our central location\n\n// Re-export all database services\n\n// Export prisma client directly for convenience\n\n// Export prisma client as default\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (_db_index__WEBPACK_IMPORTED_MODULE_0__[\"default\"]);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL2RiLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7QUFBQSxxREFBcUQ7QUFDckI7QUFFaEMsa0NBQWtDO0FBQ0o7QUFFOUIsZ0RBQWdEO0FBQzlCO0FBRWxCLGtDQUFrQztBQUNsQyxpRUFBZUEsaURBQU1BLEVBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9jaG9pY2UtZS1sZWFybmluZy8uL3NyYy9saWIvZGIudHM/OWU0ZiJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBFeHBvcnQgdGhlIFByaXNtYSBjbGllbnQgZnJvbSBvdXIgY2VudHJhbCBsb2NhdGlvblxuaW1wb3J0IHByaXNtYSBmcm9tICcuL2RiL2luZGV4JztcblxuLy8gUmUtZXhwb3J0IGFsbCBkYXRhYmFzZSBzZXJ2aWNlc1xuZXhwb3J0ICogZnJvbSAnLi9kYi9zZXJ2aWNlcyc7XG5cbi8vIEV4cG9ydCBwcmlzbWEgY2xpZW50IGRpcmVjdGx5IGZvciBjb252ZW5pZW5jZVxuZXhwb3J0IHsgcHJpc21hIH07XG5cbi8vIEV4cG9ydCBwcmlzbWEgY2xpZW50IGFzIGRlZmF1bHRcbmV4cG9ydCBkZWZhdWx0IHByaXNtYTsiXSwibmFtZXMiOlsicHJpc21hIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/db.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/db/index.ts":
/*!*****************************!*\
  !*** ./src/lib/db/index.ts ***!
  \*****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   getModel: () => (/* reexport safe */ _prisma_helper__WEBPACK_IMPORTED_MODULE_1__.getModel),\n/* harmony export */   isPrismaAvailable: () => (/* reexport safe */ _prisma_helper__WEBPACK_IMPORTED_MODULE_1__.isPrismaAvailable),\n/* harmony export */   prisma: () => (/* reexport safe */ _prisma_client__WEBPACK_IMPORTED_MODULE_0__[\"default\"]),\n/* harmony export */   safeCreate: () => (/* reexport safe */ _prisma_helper__WEBPACK_IMPORTED_MODULE_1__.safeCreate),\n/* harmony export */   safeExec: () => (/* reexport safe */ _prisma_helper__WEBPACK_IMPORTED_MODULE_1__.safeExec),\n/* harmony export */   safeFindFirst: () => (/* reexport safe */ _prisma_helper__WEBPACK_IMPORTED_MODULE_1__.safeFindFirst),\n/* harmony export */   safeFindMany: () => (/* reexport safe */ _prisma_helper__WEBPACK_IMPORTED_MODULE_1__.safeFindMany),\n/* harmony export */   safeFindUnique: () => (/* reexport safe */ _prisma_helper__WEBPACK_IMPORTED_MODULE_1__.safeFindUnique)\n/* harmony export */ });\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./prisma-client */ \"(rsc)/./src/lib/db/prisma-client.ts\");\n/* harmony import */ var _prisma_helper__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./prisma-helper */ \"(rsc)/./src/lib/db/prisma-helper.ts\");\n// Re-export the prisma client from our more robust implementation\n\n// Re-export the prisma helper functions\n\n// Export both as named export and default export for flexibility\n\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (_prisma_client__WEBPACK_IMPORTED_MODULE_0__[\"default\"]);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL2RiL2luZGV4LnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7O0FBQUEsa0VBQWtFO0FBQzdCO0FBRXJDLHdDQUF3QztBQUNSO0FBRWhDLGlFQUFpRTtBQUMvQztBQUNsQixpRUFBZUEsc0RBQU1BLEVBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9jaG9pY2UtZS1sZWFybmluZy8uL3NyYy9saWIvZGIvaW5kZXgudHM/NThkOCJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBSZS1leHBvcnQgdGhlIHByaXNtYSBjbGllbnQgZnJvbSBvdXIgbW9yZSByb2J1c3QgaW1wbGVtZW50YXRpb25cbmltcG9ydCBwcmlzbWEgZnJvbSAnLi9wcmlzbWEtY2xpZW50JztcblxuLy8gUmUtZXhwb3J0IHRoZSBwcmlzbWEgaGVscGVyIGZ1bmN0aW9uc1xuZXhwb3J0ICogZnJvbSAnLi9wcmlzbWEtaGVscGVyJztcblxuLy8gRXhwb3J0IGJvdGggYXMgbmFtZWQgZXhwb3J0IGFuZCBkZWZhdWx0IGV4cG9ydCBmb3IgZmxleGliaWxpdHlcbmV4cG9ydCB7IHByaXNtYSB9O1xuZXhwb3J0IGRlZmF1bHQgcHJpc21hOyAiXSwibmFtZXMiOlsicHJpc21hIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/db/index.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/db/prisma-client.ts":
/*!*************************************!*\
  !*** ./src/lib/db/prisma-client.ts ***!
  \*************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @prisma/client */ \"@prisma/client\");\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_prisma_client__WEBPACK_IMPORTED_MODULE_0__);\n\n// Maximum number of retries for database operations\nconst MAX_RETRIES = 3;\nconst RETRY_DELAY_MS = 200;\n// Helper function to add delay\nconst delay = (ms)=>new Promise((resolve)=>setTimeout(resolve, ms));\n// Create a singleton Prisma Client instance\nfunction createPrismaClient() {\n    try {\n        const client = new _prisma_client__WEBPACK_IMPORTED_MODULE_0__.PrismaClient({\n            log:  true ? [\n                \"query\",\n                \"error\",\n                \"warn\"\n            ] : 0\n        });\n        // Add middleware for error handling and retry logic\n        client.$use(async (params, next)=>{\n            let retries = 0;\n            while(true){\n                try {\n                    return await next(params);\n                } catch (error) {\n                    // Log the error\n                    console.error(`Prisma Client Error in ${params.model}.${params.action}:`, error);\n                    // Check if we should retry\n                    if (retries < MAX_RETRIES && isPrismaRetryableError(error)) {\n                        retries++;\n                        ;\n                        // Add exponential backoff\n                        await delay(RETRY_DELAY_MS * Math.pow(2, retries - 1));\n                        continue;\n                    }\n                    // If we reach here, we've exceeded retries or error is not retryable\n                    throw error;\n                }\n            }\n        });\n        // Test connection and log success\n        client.$connect().then(()=>console.log(\"Database connection established successfully\")).catch((e)=>console.error(\"Failed to connect to database:\", e));\n        return client;\n    } catch (e) {\n        console.error(\"Error creating Prisma client:\", e);\n        throw e;\n    }\n}\n// Check if an error is retryable\nfunction isPrismaRetryableError(error) {\n    // Network errors\n    if (error.code === \"P1001\" || error.code === \"P1002\") return true;\n    // Connection errors\n    if (error.code === \"P1008\" || error.code === \"P1011\") return true;\n    // Timeout errors\n    if (error.code === \"P1009\") return true;\n    // MongoDB transient errors\n    if (error.message?.includes(\"MongoNetworkError\")) return true;\n    if (error.message?.includes(\"MongoServerSelectionError\")) return true;\n    return false;\n}\n// Ensure we only create the client once\nlet prismaInstance;\nif (false) {} else {\n    // Use global in development to avoid duplicates during hot reloading\n    if (!global.prisma) {\n        global.prisma = createPrismaClient();\n    }\n    prismaInstance = global.prisma;\n}\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (prismaInstance);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL2RiL3ByaXNtYS1jbGllbnQudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQThDO0FBRTlDLG9EQUFvRDtBQUNwRCxNQUFNQyxjQUFjO0FBQ3BCLE1BQU1DLGlCQUFpQjtBQU92QiwrQkFBK0I7QUFDL0IsTUFBTUMsUUFBUSxDQUFDQyxLQUFlLElBQUlDLFFBQVFDLENBQUFBLFVBQVdDLFdBQVdELFNBQVNGO0FBRXpFLDRDQUE0QztBQUM1QyxTQUFTSTtJQUNQLElBQUk7UUFDRixNQUFNQyxTQUFTLElBQUlULHdEQUFZQSxDQUFDO1lBQzlCVSxLQUFLQyxLQUF5QixHQUFnQjtnQkFBQztnQkFBUztnQkFBUzthQUFPLEdBQUcsQ0FBUztRQUN0RjtRQUVBLG9EQUFvRDtRQUNwREYsT0FBT0csSUFBSSxDQUFDLE9BQU9DLFFBQVFDO1lBQ3pCLElBQUlDLFVBQVU7WUFFZCxNQUFPLEtBQU07Z0JBQ1gsSUFBSTtvQkFDRixPQUFPLE1BQU1ELEtBQUtEO2dCQUNwQixFQUFFLE9BQU9HLE9BQVk7b0JBQ25CLGdCQUFnQjtvQkFDaEJDLFFBQVFELEtBQUssQ0FBQyxDQUFDLHVCQUF1QixFQUFFSCxPQUFPSyxLQUFLLENBQUMsQ0FBQyxFQUFFTCxPQUFPTSxNQUFNLENBQUMsQ0FBQyxDQUFDLEVBQUVIO29CQUUxRSwyQkFBMkI7b0JBQzNCLElBQUlELFVBQVVkLGVBQWVtQix1QkFBdUJKLFFBQVE7d0JBQzFERDs7d0JBR0EsMEJBQTBCO3dCQUMxQixNQUFNWixNQUFNRCxpQkFBaUJtQixLQUFLQyxHQUFHLENBQUMsR0FBR1AsVUFBVTt3QkFDbkQ7b0JBQ0Y7b0JBRUEscUVBQXFFO29CQUNyRSxNQUFNQztnQkFDUjtZQUNGO1FBQ0Y7UUFFQSxrQ0FBa0M7UUFDbENQLE9BQU9jLFFBQVEsR0FDWkMsSUFBSSxDQUFDLElBQU1QLFFBQVFQLEdBQUcsQ0FBQyxpREFDdkJlLEtBQUssQ0FBQyxDQUFDQyxJQUFNVCxRQUFRRCxLQUFLLENBQUMsa0NBQWtDVTtRQUVoRSxPQUFPakI7SUFDVCxFQUFFLE9BQU9pQixHQUFHO1FBQ1ZULFFBQVFELEtBQUssQ0FBQyxpQ0FBaUNVO1FBQy9DLE1BQU1BO0lBQ1I7QUFDRjtBQUVBLGlDQUFpQztBQUNqQyxTQUFTTix1QkFBdUJKLEtBQVU7SUFDeEMsaUJBQWlCO0lBQ2pCLElBQUlBLE1BQU1XLElBQUksS0FBSyxXQUFXWCxNQUFNVyxJQUFJLEtBQUssU0FBUyxPQUFPO0lBRTdELG9CQUFvQjtJQUNwQixJQUFJWCxNQUFNVyxJQUFJLEtBQUssV0FBV1gsTUFBTVcsSUFBSSxLQUFLLFNBQVMsT0FBTztJQUU3RCxpQkFBaUI7SUFDakIsSUFBSVgsTUFBTVcsSUFBSSxLQUFLLFNBQVMsT0FBTztJQUVuQywyQkFBMkI7SUFDM0IsSUFBSVgsTUFBTVksT0FBTyxFQUFFQyxTQUFTLHNCQUFzQixPQUFPO0lBQ3pELElBQUliLE1BQU1ZLE9BQU8sRUFBRUMsU0FBUyw4QkFBOEIsT0FBTztJQUVqRSxPQUFPO0FBQ1Q7QUFFQSx3Q0FBd0M7QUFDeEMsSUFBSUM7QUFFSixJQUFJbkIsS0FBeUIsRUFBYyxFQUUxQyxNQUFNO0lBQ0wscUVBQXFFO0lBQ3JFLElBQUksQ0FBQ29CLE9BQU9DLE1BQU0sRUFBRTtRQUNsQkQsT0FBT0MsTUFBTSxHQUFHeEI7SUFDbEI7SUFDQXNCLGlCQUFpQkMsT0FBT0MsTUFBTTtBQUNoQztBQUVBLGlFQUFlRixjQUFjQSxFQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vY2hvaWNlLWUtbGVhcm5pbmcvLi9zcmMvbGliL2RiL3ByaXNtYS1jbGllbnQudHM/MzhjYyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBQcmlzbWFDbGllbnQgfSBmcm9tICdAcHJpc21hL2NsaWVudCc7XG5cbi8vIE1heGltdW0gbnVtYmVyIG9mIHJldHJpZXMgZm9yIGRhdGFiYXNlIG9wZXJhdGlvbnNcbmNvbnN0IE1BWF9SRVRSSUVTID0gMztcbmNvbnN0IFJFVFJZX0RFTEFZX01TID0gMjAwO1xuXG4vLyBQcmV2ZW50IG11bHRpcGxlIGluc3RhbmNlcyBvZiBQcmlzbWEgQ2xpZW50IGluIGRldmVsb3BtZW50XG5kZWNsYXJlIGdsb2JhbCB7XG4gIHZhciBwcmlzbWE6IFByaXNtYUNsaWVudCB8IHVuZGVmaW5lZDtcbn1cblxuLy8gSGVscGVyIGZ1bmN0aW9uIHRvIGFkZCBkZWxheVxuY29uc3QgZGVsYXkgPSAobXM6IG51bWJlcikgPT4gbmV3IFByb21pc2UocmVzb2x2ZSA9PiBzZXRUaW1lb3V0KHJlc29sdmUsIG1zKSk7XG5cbi8vIENyZWF0ZSBhIHNpbmdsZXRvbiBQcmlzbWEgQ2xpZW50IGluc3RhbmNlXG5mdW5jdGlvbiBjcmVhdGVQcmlzbWFDbGllbnQoKTogUHJpc21hQ2xpZW50IHtcbiAgdHJ5IHtcbiAgICBjb25zdCBjbGllbnQgPSBuZXcgUHJpc21hQ2xpZW50KHtcbiAgICAgIGxvZzogcHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09ICdkZXZlbG9wbWVudCcgPyBbJ3F1ZXJ5JywgJ2Vycm9yJywgJ3dhcm4nXSA6IFsnZXJyb3InXSxcbiAgICB9KTtcbiAgICBcbiAgICAvLyBBZGQgbWlkZGxld2FyZSBmb3IgZXJyb3IgaGFuZGxpbmcgYW5kIHJldHJ5IGxvZ2ljXG4gICAgY2xpZW50LiR1c2UoYXN5bmMgKHBhcmFtcywgbmV4dCkgPT4ge1xuICAgICAgbGV0IHJldHJpZXMgPSAwO1xuICAgICAgXG4gICAgICB3aGlsZSAodHJ1ZSkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIHJldHVybiBhd2FpdCBuZXh0KHBhcmFtcyk7XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcbiAgICAgICAgICAvLyBMb2cgdGhlIGVycm9yXG4gICAgICAgICAgY29uc29sZS5lcnJvcihgUHJpc21hIENsaWVudCBFcnJvciBpbiAke3BhcmFtcy5tb2RlbH0uJHtwYXJhbXMuYWN0aW9ufTpgLCBlcnJvcik7XG4gICAgICAgICAgXG4gICAgICAgICAgLy8gQ2hlY2sgaWYgd2Ugc2hvdWxkIHJldHJ5XG4gICAgICAgICAgaWYgKHJldHJpZXMgPCBNQVhfUkVUUklFUyAmJiBpc1ByaXNtYVJldHJ5YWJsZUVycm9yKGVycm9yKSkge1xuICAgICAgICAgICAgcmV0cmllcysrO1xuICAgICAgICAgICAgY29uc29sZS5sb2coYFJldHJ5aW5nIG9wZXJhdGlvbiAoYXR0ZW1wdCAke3JldHJpZXN9LyR7TUFYX1JFVFJJRVN9KS4uLmApO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBBZGQgZXhwb25lbnRpYWwgYmFja29mZlxuICAgICAgICAgICAgYXdhaXQgZGVsYXkoUkVUUllfREVMQVlfTVMgKiBNYXRoLnBvdygyLCByZXRyaWVzIC0gMSkpO1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgfVxuICAgICAgICAgIFxuICAgICAgICAgIC8vIElmIHdlIHJlYWNoIGhlcmUsIHdlJ3ZlIGV4Y2VlZGVkIHJldHJpZXMgb3IgZXJyb3IgaXMgbm90IHJldHJ5YWJsZVxuICAgICAgICAgIHRocm93IGVycm9yO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSk7XG4gICAgXG4gICAgLy8gVGVzdCBjb25uZWN0aW9uIGFuZCBsb2cgc3VjY2Vzc1xuICAgIGNsaWVudC4kY29ubmVjdCgpXG4gICAgICAudGhlbigoKSA9PiBjb25zb2xlLmxvZygnRGF0YWJhc2UgY29ubmVjdGlvbiBlc3RhYmxpc2hlZCBzdWNjZXNzZnVsbHknKSlcbiAgICAgIC5jYXRjaCgoZSkgPT4gY29uc29sZS5lcnJvcignRmFpbGVkIHRvIGNvbm5lY3QgdG8gZGF0YWJhc2U6JywgZSkpO1xuICAgIFxuICAgIHJldHVybiBjbGllbnQ7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBjcmVhdGluZyBQcmlzbWEgY2xpZW50OicsIGUpO1xuICAgIHRocm93IGU7XG4gIH1cbn1cblxuLy8gQ2hlY2sgaWYgYW4gZXJyb3IgaXMgcmV0cnlhYmxlXG5mdW5jdGlvbiBpc1ByaXNtYVJldHJ5YWJsZUVycm9yKGVycm9yOiBhbnkpOiBib29sZWFuIHtcbiAgLy8gTmV0d29yayBlcnJvcnNcbiAgaWYgKGVycm9yLmNvZGUgPT09ICdQMTAwMScgfHwgZXJyb3IuY29kZSA9PT0gJ1AxMDAyJykgcmV0dXJuIHRydWU7XG4gIFxuICAvLyBDb25uZWN0aW9uIGVycm9yc1xuICBpZiAoZXJyb3IuY29kZSA9PT0gJ1AxMDA4JyB8fCBlcnJvci5jb2RlID09PSAnUDEwMTEnKSByZXR1cm4gdHJ1ZTtcbiAgXG4gIC8vIFRpbWVvdXQgZXJyb3JzXG4gIGlmIChlcnJvci5jb2RlID09PSAnUDEwMDknKSByZXR1cm4gdHJ1ZTtcbiAgXG4gIC8vIE1vbmdvREIgdHJhbnNpZW50IGVycm9yc1xuICBpZiAoZXJyb3IubWVzc2FnZT8uaW5jbHVkZXMoJ01vbmdvTmV0d29ya0Vycm9yJykpIHJldHVybiB0cnVlO1xuICBpZiAoZXJyb3IubWVzc2FnZT8uaW5jbHVkZXMoJ01vbmdvU2VydmVyU2VsZWN0aW9uRXJyb3InKSkgcmV0dXJuIHRydWU7XG4gIFxuICByZXR1cm4gZmFsc2U7XG59XG5cbi8vIEVuc3VyZSB3ZSBvbmx5IGNyZWF0ZSB0aGUgY2xpZW50IG9uY2VcbmxldCBwcmlzbWFJbnN0YW5jZTogUHJpc21hQ2xpZW50O1xuXG5pZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09ICdwcm9kdWN0aW9uJykge1xuICBwcmlzbWFJbnN0YW5jZSA9IGNyZWF0ZVByaXNtYUNsaWVudCgpO1xufSBlbHNlIHtcbiAgLy8gVXNlIGdsb2JhbCBpbiBkZXZlbG9wbWVudCB0byBhdm9pZCBkdXBsaWNhdGVzIGR1cmluZyBob3QgcmVsb2FkaW5nXG4gIGlmICghZ2xvYmFsLnByaXNtYSkge1xuICAgIGdsb2JhbC5wcmlzbWEgPSBjcmVhdGVQcmlzbWFDbGllbnQoKTtcbiAgfVxuICBwcmlzbWFJbnN0YW5jZSA9IGdsb2JhbC5wcmlzbWE7XG59XG5cbmV4cG9ydCBkZWZhdWx0IHByaXNtYUluc3RhbmNlO1xuIl0sIm5hbWVzIjpbIlByaXNtYUNsaWVudCIsIk1BWF9SRVRSSUVTIiwiUkVUUllfREVMQVlfTVMiLCJkZWxheSIsIm1zIiwiUHJvbWlzZSIsInJlc29sdmUiLCJzZXRUaW1lb3V0IiwiY3JlYXRlUHJpc21hQ2xpZW50IiwiY2xpZW50IiwibG9nIiwicHJvY2VzcyIsIiR1c2UiLCJwYXJhbXMiLCJuZXh0IiwicmV0cmllcyIsImVycm9yIiwiY29uc29sZSIsIm1vZGVsIiwiYWN0aW9uIiwiaXNQcmlzbWFSZXRyeWFibGVFcnJvciIsIk1hdGgiLCJwb3ciLCIkY29ubmVjdCIsInRoZW4iLCJjYXRjaCIsImUiLCJjb2RlIiwibWVzc2FnZSIsImluY2x1ZGVzIiwicHJpc21hSW5zdGFuY2UiLCJnbG9iYWwiLCJwcmlzbWEiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/db/prisma-client.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/db/prisma-helper.ts":
/*!*************************************!*\
  !*** ./src/lib/db/prisma-helper.ts ***!
  \*************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getModel: () => (/* binding */ getModel),\n/* harmony export */   isPrismaAvailable: () => (/* binding */ isPrismaAvailable),\n/* harmony export */   prisma: () => (/* reexport safe */ _prisma_client__WEBPACK_IMPORTED_MODULE_0__[\"default\"]),\n/* harmony export */   safeCreate: () => (/* binding */ safeCreate),\n/* harmony export */   safeExec: () => (/* binding */ safeExec),\n/* harmony export */   safeFindFirst: () => (/* binding */ safeFindFirst),\n/* harmony export */   safeFindMany: () => (/* binding */ safeFindMany),\n/* harmony export */   safeFindUnique: () => (/* binding */ safeFindUnique)\n/* harmony export */ });\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./prisma-client */ \"(rsc)/./src/lib/db/prisma-client.ts\");\n/**\n * Helper utilities for safe database operations\n * Provides wrappers around common Prisma operations with error handling\n */ \n/**\n * Safely execute a Prisma operation with proper error handling\n * @param operation Function that executes a Prisma operation\n * @param defaultValue Value to return on error (optional)\n * @param logPrefix Prefix for error logging (optional)\n * @returns Result of the operation or defaultValue if it fails\n */ async function safeExec(operation, defaultValue, logPrefix = \"Prisma operation\") {\n    try {\n        return await operation();\n    } catch (error) {\n        console.error(`${logPrefix} failed:`, error);\n        if (defaultValue !== undefined) {\n            return defaultValue;\n        }\n        throw error;\n    }\n}\n/**\n * Safely execute findMany with proper error handling\n * @param model Prisma model to query\n * @param args Prisma query arguments\n * @returns Array of results or empty array on error\n */ async function safeFindMany(model, args) {\n    if (!model || !model.findMany) {\n        console.error(\"Invalid Prisma model provided to safeFindMany\");\n        return [];\n    }\n    return safeExec(()=>model.findMany(args), [], `Prisma ${model.name || \"model\"}.findMany`);\n}\n/**\n * Safely execute findUnique with proper error handling\n * @param model Prisma model to query\n * @param args Prisma query arguments\n * @returns Result or null on error\n */ async function safeFindUnique(model, args) {\n    if (!model || !model.findUnique) {\n        console.error(\"Invalid Prisma model provided to safeFindUnique\");\n        return null;\n    }\n    return safeExec(()=>model.findUnique(args), null, `Prisma ${model.name || \"model\"}.findUnique`);\n}\n/**\n * Safely execute findFirst with proper error handling\n * @param model Prisma model to query\n * @param args Prisma query arguments\n * @returns Result or null on error\n */ async function safeFindFirst(model, args) {\n    if (!model || !model.findFirst) {\n        console.error(\"Invalid Prisma model provided to safeFindFirst\");\n        return null;\n    }\n    return safeExec(()=>model.findFirst(args), null, `Prisma ${model.name || \"model\"}.findFirst`);\n}\n/**\n * Safely execute create with proper error handling\n * @param model Prisma model to query\n * @param args Prisma query arguments\n * @returns Created object or null on error\n */ async function safeCreate(model, args) {\n    if (!model || !model.create) {\n        console.error(\"Invalid Prisma model provided to safeCreate\");\n        return null;\n    }\n    return safeExec(()=>model.create(args), null, `Prisma ${model.name || \"model\"}.create`);\n}\n/**\n * Safely check if prisma client is available\n * @returns True if prisma client is available\n */ function isPrismaAvailable() {\n    return !!_prisma_client__WEBPACK_IMPORTED_MODULE_0__[\"default\"];\n}\n/**\n * Get a safe reference to a Prisma model\n * @param modelName Name of the model to get\n * @returns Prisma model or null if not available\n */ function getModel(modelName) {\n    if (!_prisma_client__WEBPACK_IMPORTED_MODULE_0__[\"default\"]) {\n        console.error(\"Prisma client is not available\");\n        return null;\n    }\n    const model = _prisma_client__WEBPACK_IMPORTED_MODULE_0__[\"default\"][modelName];\n    if (!model) {\n        console.error(`Model ${modelName} not found in Prisma client`);\n        return null;\n    }\n    return model;\n}\n// Export prisma client for convenience\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL2RiL3ByaXNtYS1oZWxwZXIudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7O0FBQUE7OztDQUdDLEdBR29DO0FBRXJDOzs7Ozs7Q0FNQyxHQUNNLGVBQWVDLFNBQ3BCQyxTQUEyQixFQUMzQkMsWUFBZ0IsRUFDaEJDLFlBQVksa0JBQWtCO0lBRTlCLElBQUk7UUFDRixPQUFPLE1BQU1GO0lBQ2YsRUFBRSxPQUFPRyxPQUFPO1FBQ2RDLFFBQVFELEtBQUssQ0FBQyxDQUFDLEVBQUVELFVBQVUsUUFBUSxDQUFDLEVBQUVDO1FBRXRDLElBQUlGLGlCQUFpQkksV0FBVztZQUM5QixPQUFPSjtRQUNUO1FBQ0EsTUFBTUU7SUFDUjtBQUNGO0FBRUE7Ozs7O0NBS0MsR0FDTSxlQUFlRyxhQUNwQkMsS0FBVSxFQUNWQyxJQUFRO0lBRVIsSUFBSSxDQUFDRCxTQUFTLENBQUNBLE1BQU1FLFFBQVEsRUFBRTtRQUM3QkwsUUFBUUQsS0FBSyxDQUFDO1FBQ2QsT0FBTyxFQUFFO0lBQ1g7SUFFQSxPQUFPSixTQUNMLElBQU1RLE1BQU1FLFFBQVEsQ0FBQ0QsT0FDckIsRUFBRSxFQUNGLENBQUMsT0FBTyxFQUFFRCxNQUFNRyxJQUFJLElBQUksUUFBUSxTQUFTLENBQUM7QUFFOUM7QUFFQTs7Ozs7Q0FLQyxHQUNNLGVBQWVDLGVBQ3BCSixLQUFVLEVBQ1ZDLElBQU87SUFFUCxJQUFJLENBQUNELFNBQVMsQ0FBQ0EsTUFBTUssVUFBVSxFQUFFO1FBQy9CUixRQUFRRCxLQUFLLENBQUM7UUFDZCxPQUFPO0lBQ1Q7SUFFQSxPQUFPSixTQUNMLElBQU1RLE1BQU1LLFVBQVUsQ0FBQ0osT0FDdkIsTUFDQSxDQUFDLE9BQU8sRUFBRUQsTUFBTUcsSUFBSSxJQUFJLFFBQVEsV0FBVyxDQUFDO0FBRWhEO0FBRUE7Ozs7O0NBS0MsR0FDTSxlQUFlRyxjQUNwQk4sS0FBVSxFQUNWQyxJQUFPO0lBRVAsSUFBSSxDQUFDRCxTQUFTLENBQUNBLE1BQU1PLFNBQVMsRUFBRTtRQUM5QlYsUUFBUUQsS0FBSyxDQUFDO1FBQ2QsT0FBTztJQUNUO0lBRUEsT0FBT0osU0FDTCxJQUFNUSxNQUFNTyxTQUFTLENBQUNOLE9BQ3RCLE1BQ0EsQ0FBQyxPQUFPLEVBQUVELE1BQU1HLElBQUksSUFBSSxRQUFRLFVBQVUsQ0FBQztBQUUvQztBQUVBOzs7OztDQUtDLEdBQ00sZUFBZUssV0FDcEJSLEtBQVUsRUFDVkMsSUFBTztJQUVQLElBQUksQ0FBQ0QsU0FBUyxDQUFDQSxNQUFNUyxNQUFNLEVBQUU7UUFDM0JaLFFBQVFELEtBQUssQ0FBQztRQUNkLE9BQU87SUFDVDtJQUVBLE9BQU9KLFNBQ0wsSUFBTVEsTUFBTVMsTUFBTSxDQUFDUixPQUNuQixNQUNBLENBQUMsT0FBTyxFQUFFRCxNQUFNRyxJQUFJLElBQUksUUFBUSxPQUFPLENBQUM7QUFFNUM7QUFFQTs7O0NBR0MsR0FDTSxTQUFTTztJQUNkLE9BQU8sQ0FBQyxDQUFDbkIsc0RBQU1BO0FBQ2pCO0FBRUE7Ozs7Q0FJQyxHQUNNLFNBQVNvQixTQUFTQyxTQUE2QjtJQUNwRCxJQUFJLENBQUNyQixzREFBTUEsRUFBRTtRQUNYTSxRQUFRRCxLQUFLLENBQUM7UUFDZCxPQUFPO0lBQ1Q7SUFFQSxNQUFNSSxRQUFRVCxzREFBTSxDQUFDcUIsVUFBVTtJQUMvQixJQUFJLENBQUNaLE9BQU87UUFDVkgsUUFBUUQsS0FBSyxDQUFDLENBQUMsTUFBTSxFQUFFZ0IsVUFBVSwyQkFBMkIsQ0FBQztRQUM3RCxPQUFPO0lBQ1Q7SUFFQSxPQUFPWjtBQUNUO0FBRUEsdUNBQXVDO0FBQ3JCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vY2hvaWNlLWUtbGVhcm5pbmcvLi9zcmMvbGliL2RiL3ByaXNtYS1oZWxwZXIudHM/ZDJlYyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEhlbHBlciB1dGlsaXRpZXMgZm9yIHNhZmUgZGF0YWJhc2Ugb3BlcmF0aW9uc1xuICogUHJvdmlkZXMgd3JhcHBlcnMgYXJvdW5kIGNvbW1vbiBQcmlzbWEgb3BlcmF0aW9ucyB3aXRoIGVycm9yIGhhbmRsaW5nXG4gKi9cblxuaW1wb3J0IHsgUHJpc21hQ2xpZW50LCBQcmlzbWEgfSBmcm9tICdAcHJpc21hL2NsaWVudCc7XG5pbXBvcnQgcHJpc21hIGZyb20gJy4vcHJpc21hLWNsaWVudCc7XG5cbi8qKlxuICogU2FmZWx5IGV4ZWN1dGUgYSBQcmlzbWEgb3BlcmF0aW9uIHdpdGggcHJvcGVyIGVycm9yIGhhbmRsaW5nXG4gKiBAcGFyYW0gb3BlcmF0aW9uIEZ1bmN0aW9uIHRoYXQgZXhlY3V0ZXMgYSBQcmlzbWEgb3BlcmF0aW9uXG4gKiBAcGFyYW0gZGVmYXVsdFZhbHVlIFZhbHVlIHRvIHJldHVybiBvbiBlcnJvciAob3B0aW9uYWwpXG4gKiBAcGFyYW0gbG9nUHJlZml4IFByZWZpeCBmb3IgZXJyb3IgbG9nZ2luZyAob3B0aW9uYWwpXG4gKiBAcmV0dXJucyBSZXN1bHQgb2YgdGhlIG9wZXJhdGlvbiBvciBkZWZhdWx0VmFsdWUgaWYgaXQgZmFpbHNcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHNhZmVFeGVjPFQ+KFxuICBvcGVyYXRpb246ICgpID0+IFByb21pc2U8VD4sXG4gIGRlZmF1bHRWYWx1ZT86IFQsXG4gIGxvZ1ByZWZpeCA9ICdQcmlzbWEgb3BlcmF0aW9uJ1xuKTogUHJvbWlzZTxUPiB7XG4gIHRyeSB7XG4gICAgcmV0dXJuIGF3YWl0IG9wZXJhdGlvbigpO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoYCR7bG9nUHJlZml4fSBmYWlsZWQ6YCwgZXJyb3IpO1xuICAgIFxuICAgIGlmIChkZWZhdWx0VmFsdWUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgcmV0dXJuIGRlZmF1bHRWYWx1ZTtcbiAgICB9XG4gICAgdGhyb3cgZXJyb3I7XG4gIH1cbn1cblxuLyoqXG4gKiBTYWZlbHkgZXhlY3V0ZSBmaW5kTWFueSB3aXRoIHByb3BlciBlcnJvciBoYW5kbGluZ1xuICogQHBhcmFtIG1vZGVsIFByaXNtYSBtb2RlbCB0byBxdWVyeVxuICogQHBhcmFtIGFyZ3MgUHJpc21hIHF1ZXJ5IGFyZ3VtZW50c1xuICogQHJldHVybnMgQXJyYXkgb2YgcmVzdWx0cyBvciBlbXB0eSBhcnJheSBvbiBlcnJvclxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gc2FmZUZpbmRNYW55PFQsIEE+KFxuICBtb2RlbDogYW55LFxuICBhcmdzPzogQVxuKTogUHJvbWlzZTxUW10+IHtcbiAgaWYgKCFtb2RlbCB8fCAhbW9kZWwuZmluZE1hbnkpIHtcbiAgICBjb25zb2xlLmVycm9yKCdJbnZhbGlkIFByaXNtYSBtb2RlbCBwcm92aWRlZCB0byBzYWZlRmluZE1hbnknKTtcbiAgICByZXR1cm4gW107XG4gIH1cbiAgXG4gIHJldHVybiBzYWZlRXhlYzxUW10+KFxuICAgICgpID0+IG1vZGVsLmZpbmRNYW55KGFyZ3MpLFxuICAgIFtdLFxuICAgIGBQcmlzbWEgJHttb2RlbC5uYW1lIHx8ICdtb2RlbCd9LmZpbmRNYW55YFxuICApO1xufVxuXG4vKipcbiAqIFNhZmVseSBleGVjdXRlIGZpbmRVbmlxdWUgd2l0aCBwcm9wZXIgZXJyb3IgaGFuZGxpbmdcbiAqIEBwYXJhbSBtb2RlbCBQcmlzbWEgbW9kZWwgdG8gcXVlcnlcbiAqIEBwYXJhbSBhcmdzIFByaXNtYSBxdWVyeSBhcmd1bWVudHNcbiAqIEByZXR1cm5zIFJlc3VsdCBvciBudWxsIG9uIGVycm9yXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBzYWZlRmluZFVuaXF1ZTxULCBBPihcbiAgbW9kZWw6IGFueSxcbiAgYXJnczogQVxuKTogUHJvbWlzZTxUIHwgbnVsbD4ge1xuICBpZiAoIW1vZGVsIHx8ICFtb2RlbC5maW5kVW5pcXVlKSB7XG4gICAgY29uc29sZS5lcnJvcignSW52YWxpZCBQcmlzbWEgbW9kZWwgcHJvdmlkZWQgdG8gc2FmZUZpbmRVbmlxdWUnKTtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuICBcbiAgcmV0dXJuIHNhZmVFeGVjPFQgfCBudWxsPihcbiAgICAoKSA9PiBtb2RlbC5maW5kVW5pcXVlKGFyZ3MpLFxuICAgIG51bGwsXG4gICAgYFByaXNtYSAke21vZGVsLm5hbWUgfHwgJ21vZGVsJ30uZmluZFVuaXF1ZWBcbiAgKTtcbn1cblxuLyoqXG4gKiBTYWZlbHkgZXhlY3V0ZSBmaW5kRmlyc3Qgd2l0aCBwcm9wZXIgZXJyb3IgaGFuZGxpbmdcbiAqIEBwYXJhbSBtb2RlbCBQcmlzbWEgbW9kZWwgdG8gcXVlcnlcbiAqIEBwYXJhbSBhcmdzIFByaXNtYSBxdWVyeSBhcmd1bWVudHNcbiAqIEByZXR1cm5zIFJlc3VsdCBvciBudWxsIG9uIGVycm9yXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBzYWZlRmluZEZpcnN0PFQsIEE+KFxuICBtb2RlbDogYW55LFxuICBhcmdzOiBBXG4pOiBQcm9taXNlPFQgfCBudWxsPiB7XG4gIGlmICghbW9kZWwgfHwgIW1vZGVsLmZpbmRGaXJzdCkge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0ludmFsaWQgUHJpc21hIG1vZGVsIHByb3ZpZGVkIHRvIHNhZmVGaW5kRmlyc3QnKTtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuICBcbiAgcmV0dXJuIHNhZmVFeGVjPFQgfCBudWxsPihcbiAgICAoKSA9PiBtb2RlbC5maW5kRmlyc3QoYXJncyksXG4gICAgbnVsbCxcbiAgICBgUHJpc21hICR7bW9kZWwubmFtZSB8fCAnbW9kZWwnfS5maW5kRmlyc3RgXG4gICk7XG59XG5cbi8qKlxuICogU2FmZWx5IGV4ZWN1dGUgY3JlYXRlIHdpdGggcHJvcGVyIGVycm9yIGhhbmRsaW5nXG4gKiBAcGFyYW0gbW9kZWwgUHJpc21hIG1vZGVsIHRvIHF1ZXJ5XG4gKiBAcGFyYW0gYXJncyBQcmlzbWEgcXVlcnkgYXJndW1lbnRzXG4gKiBAcmV0dXJucyBDcmVhdGVkIG9iamVjdCBvciBudWxsIG9uIGVycm9yXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBzYWZlQ3JlYXRlPFQsIEE+KFxuICBtb2RlbDogYW55LFxuICBhcmdzOiBBXG4pOiBQcm9taXNlPFQgfCBudWxsPiB7XG4gIGlmICghbW9kZWwgfHwgIW1vZGVsLmNyZWF0ZSkge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0ludmFsaWQgUHJpc21hIG1vZGVsIHByb3ZpZGVkIHRvIHNhZmVDcmVhdGUnKTtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuICBcbiAgcmV0dXJuIHNhZmVFeGVjPFQgfCBudWxsPihcbiAgICAoKSA9PiBtb2RlbC5jcmVhdGUoYXJncyksXG4gICAgbnVsbCxcbiAgICBgUHJpc21hICR7bW9kZWwubmFtZSB8fCAnbW9kZWwnfS5jcmVhdGVgXG4gICk7XG59XG5cbi8qKlxuICogU2FmZWx5IGNoZWNrIGlmIHByaXNtYSBjbGllbnQgaXMgYXZhaWxhYmxlXG4gKiBAcmV0dXJucyBUcnVlIGlmIHByaXNtYSBjbGllbnQgaXMgYXZhaWxhYmxlXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc1ByaXNtYUF2YWlsYWJsZSgpOiBib29sZWFuIHtcbiAgcmV0dXJuICEhcHJpc21hO1xufVxuXG4vKipcbiAqIEdldCBhIHNhZmUgcmVmZXJlbmNlIHRvIGEgUHJpc21hIG1vZGVsXG4gKiBAcGFyYW0gbW9kZWxOYW1lIE5hbWUgb2YgdGhlIG1vZGVsIHRvIGdldFxuICogQHJldHVybnMgUHJpc21hIG1vZGVsIG9yIG51bGwgaWYgbm90IGF2YWlsYWJsZVxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0TW9kZWwobW9kZWxOYW1lOiBrZXlvZiBQcmlzbWFDbGllbnQpOiBhbnkge1xuICBpZiAoIXByaXNtYSkge1xuICAgIGNvbnNvbGUuZXJyb3IoJ1ByaXNtYSBjbGllbnQgaXMgbm90IGF2YWlsYWJsZScpO1xuICAgIHJldHVybiBudWxsO1xuICB9XG4gIFxuICBjb25zdCBtb2RlbCA9IHByaXNtYVttb2RlbE5hbWVdO1xuICBpZiAoIW1vZGVsKSB7XG4gICAgY29uc29sZS5lcnJvcihgTW9kZWwgJHttb2RlbE5hbWV9IG5vdCBmb3VuZCBpbiBQcmlzbWEgY2xpZW50YCk7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbiAgXG4gIHJldHVybiBtb2RlbDtcbn1cblxuLy8gRXhwb3J0IHByaXNtYSBjbGllbnQgZm9yIGNvbnZlbmllbmNlXG5leHBvcnQgeyBwcmlzbWEgfTtcbiJdLCJuYW1lcyI6WyJwcmlzbWEiLCJzYWZlRXhlYyIsIm9wZXJhdGlvbiIsImRlZmF1bHRWYWx1ZSIsImxvZ1ByZWZpeCIsImVycm9yIiwiY29uc29sZSIsInVuZGVmaW5lZCIsInNhZmVGaW5kTWFueSIsIm1vZGVsIiwiYXJncyIsImZpbmRNYW55IiwibmFtZSIsInNhZmVGaW5kVW5pcXVlIiwiZmluZFVuaXF1ZSIsInNhZmVGaW5kRmlyc3QiLCJmaW5kRmlyc3QiLCJzYWZlQ3JlYXRlIiwiY3JlYXRlIiwiaXNQcmlzbWFBdmFpbGFibGUiLCJnZXRNb2RlbCIsIm1vZGVsTmFtZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/db/prisma-helper.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/db/services/course-service.ts":
/*!***********************************************!*\
  !*** ./src/lib/db/services/course-service.ts ***!
  \***********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createCourse: () => (/* binding */ createCourse),\n/* harmony export */   deleteCourse: () => (/* binding */ deleteCourse),\n/* harmony export */   enrollStudent: () => (/* binding */ enrollStudent),\n/* harmony export */   findCourseById: () => (/* binding */ findCourseById),\n/* harmony export */   getCourses: () => (/* binding */ getCourses),\n/* harmony export */   getEnrolledCourses: () => (/* binding */ getEnrolledCourses),\n/* harmony export */   unenrollStudent: () => (/* binding */ unenrollStudent),\n/* harmony export */   updateCourse: () => (/* binding */ updateCourse)\n/* harmony export */ });\n/* harmony import */ var private_next_rsc_action_proxy__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! private-next-rsc-action-proxy */ \"(rsc)/./node_modules/next/dist/build/webpack/loaders/next-flight-loader/action-proxy.js\");\n/* harmony import */ var private_next_rsc_action_encryption__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! private-next-rsc-action-encryption */ \"(rsc)/./node_modules/next/dist/server/app-render/action-encryption.js\");\n/* harmony import */ var private_next_rsc_action_encryption__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(private_next_rsc_action_encryption__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _lib_db__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/lib/db */ \"(rsc)/./src/lib/db.ts\");\n/* harmony import */ var private_next_rsc_action_validate__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! private-next-rsc-action-validate */ \"(rsc)/./node_modules/next/dist/build/webpack/loaders/next-flight-loader/action-validate.js\");\n/* __next_internal_action_entry_do_not_use__ {\"2de26b7ad05b48affebb49e0e0a3f6eb1114b478\":\"unenrollStudent\",\"4e7daa72cfb6c88893e3c83fbf9014eb870cafa4\":\"getCourses\",\"4ef4c52e0874114f33e26877d04b34e92ed23804\":\"deleteCourse\",\"6f245e7b94574f23206e987d9ccac8601b008053\":\"findCourseById\",\"b561f155418cf1d4e9029465319d804497fc7de4\":\"enrollStudent\",\"d608042238ad3a8c4e490d67ddd489ce7ceb27a7\":\"createCourse\",\"da72108311d07880d3ed3b28a123df1aaf05c834\":\"getEnrolledCourses\",\"db7bbfbfa326ccf6a29257eb67f1756e8b1de031\":\"updateCourse\"} */ \n\n\n/**\n * Find a course by ID\n * @param id Course ID\n * @param includeRelations Include related data like lessons, students, reviews\n * @returns Course object or null if not found\n */ async function findCourseById(id, includeRelations = false) {\n    try {\n        if (!id.match(/^[0-9a-fA-F]{24}$/)) {\n            return null;\n        }\n        return await _lib_db__WEBPACK_IMPORTED_MODULE_2__[\"default\"].course.findUnique({\n            where: {\n                id\n            },\n            include: includeRelations ? {\n                lessons: {\n                    orderBy: {\n                        order: \"asc\"\n                    }\n                },\n                students: true,\n                reviews: {\n                    include: {\n                        user: {\n                            select: {\n                                id: true,\n                                name: true,\n                                email: true\n                            }\n                        }\n                    }\n                }\n            } : undefined\n        });\n    } catch (error) {\n        console.error(\"Error finding course by ID:\", error);\n        return null;\n    }\n}\n/**\n * Get all courses with pagination and optional filtering\n * @param page Page number (1-based)\n * @param pageSize Page size\n * @param filters Optional filter criteria\n * @returns Paginated courses\n */ async function getCourses(page = 1, pageSize = 10, filters = {}) {\n    try {\n        // Ensure page and pageSize are valid\n        page = Math.max(1, page);\n        pageSize = Math.max(1, Math.min(100, pageSize));\n        // Get total count\n        const total = await _lib_db__WEBPACK_IMPORTED_MODULE_2__[\"default\"].course.count({\n            where: filters\n        });\n        // Calculate total pages\n        const pages = Math.ceil(total / pageSize);\n        // Get courses for the requested page\n        const courses = await _lib_db__WEBPACK_IMPORTED_MODULE_2__[\"default\"].course.findMany({\n            where: filters,\n            skip: (page - 1) * pageSize,\n            take: pageSize,\n            orderBy: {\n                createdAt: \"desc\"\n            },\n            include: {\n                lessons: {\n                    select: {\n                        id: true,\n                        title: true,\n                        order: true\n                    },\n                    orderBy: {\n                        order: \"asc\"\n                    }\n                },\n                reviews: {\n                    select: {\n                        rating: true\n                    }\n                },\n                _count: {\n                    select: {\n                        students: true,\n                        lessons: true,\n                        reviews: true\n                    }\n                }\n            }\n        });\n        return {\n            courses,\n            total,\n            pages\n        };\n    } catch (error) {\n        console.error(\"Error getting courses:\", error);\n        return {\n            courses: [],\n            total: 0,\n            pages: 0\n        };\n    }\n}\n/**\n * Create a new course\n * @param data Course data\n * @returns Created course or null if creation failed\n */ async function createCourse(data) {\n    try {\n        return await _lib_db__WEBPACK_IMPORTED_MODULE_2__[\"default\"].course.create({\n            data,\n            include: {\n                lessons: true\n            }\n        });\n    } catch (error) {\n        console.error(\"Error creating course:\", error);\n        return null;\n    }\n}\n/**\n * Update course data\n * @param id Course ID\n * @param data Course data to update\n * @returns Updated course or null if update failed\n */ async function updateCourse(id, data) {\n    try {\n        return await _lib_db__WEBPACK_IMPORTED_MODULE_2__[\"default\"].course.update({\n            where: {\n                id\n            },\n            data,\n            include: {\n                lessons: {\n                    orderBy: {\n                        order: \"asc\"\n                    }\n                }\n            }\n        });\n    } catch (error) {\n        console.error(\"Error updating course:\", error);\n        return null;\n    }\n}\n/**\n * Delete a course\n * @param id Course ID\n * @returns Deleted course or null if deletion failed\n */ async function deleteCourse(id) {\n    try {\n        return await _lib_db__WEBPACK_IMPORTED_MODULE_2__[\"default\"].course.delete({\n            where: {\n                id\n            },\n            include: {\n                lessons: true\n            }\n        });\n    } catch (error) {\n        console.error(\"Error deleting course:\", error);\n        return null;\n    }\n}\n/**\n * Enroll a student in a course\n * @param courseId Course ID\n * @param userId User ID\n * @returns Updated course or null if enrollment failed\n */ async function enrollStudent(courseId, userId) {\n    try {\n        return await _lib_db__WEBPACK_IMPORTED_MODULE_2__[\"default\"].course.update({\n            where: {\n                id: courseId\n            },\n            data: {\n                students: {\n                    connect: {\n                        id: userId\n                    }\n                }\n            }\n        });\n    } catch (error) {\n        console.error(\"Error enrolling student:\", error);\n        return null;\n    }\n}\n/**\n * Unenroll a student from a course\n * @param courseId Course ID\n * @param userId User ID\n * @returns Updated course or null if unenrollment failed\n */ async function unenrollStudent(courseId, userId) {\n    try {\n        return await _lib_db__WEBPACK_IMPORTED_MODULE_2__[\"default\"].course.update({\n            where: {\n                id: courseId\n            },\n            data: {\n                students: {\n                    disconnect: {\n                        id: userId\n                    }\n                }\n            }\n        });\n    } catch (error) {\n        console.error(\"Error unenrolling student:\", error);\n        return null;\n    }\n}\n/**\n * Get courses a user is enrolled in\n * @param userId User ID\n * @param page Page number (1-based)\n * @param pageSize Page size\n * @returns Paginated courses the user is enrolled in\n */ async function getEnrolledCourses(userId, page = 1, pageSize = 10) {\n    try {\n        // Ensure page and pageSize are valid\n        page = Math.max(1, page);\n        pageSize = Math.max(1, Math.min(100, pageSize));\n        // Get total count\n        const total = await _lib_db__WEBPACK_IMPORTED_MODULE_2__[\"default\"].course.count({\n            where: {\n                students: {\n                    some: {\n                        id: userId\n                    }\n                }\n            }\n        });\n        // Calculate total pages\n        const pages = Math.ceil(total / pageSize);\n        // Get courses for the requested page\n        const courses = await _lib_db__WEBPACK_IMPORTED_MODULE_2__[\"default\"].course.findMany({\n            where: {\n                students: {\n                    some: {\n                        id: userId\n                    }\n                }\n            },\n            skip: (page - 1) * pageSize,\n            take: pageSize,\n            orderBy: {\n                createdAt: \"desc\"\n            },\n            include: {\n                lessons: {\n                    select: {\n                        id: true,\n                        title: true,\n                        order: true\n                    },\n                    orderBy: {\n                        order: \"asc\"\n                    }\n                },\n                reviews: {\n                    where: {\n                        userId\n                    },\n                    select: {\n                        id: true,\n                        rating: true,\n                        comment: true\n                    }\n                }\n            }\n        });\n        return {\n            courses,\n            total,\n            pages\n        };\n    } catch (error) {\n        console.error(\"Error getting enrolled courses:\", error);\n        return {\n            courses: [],\n            total: 0,\n            pages: 0\n        };\n    }\n}\n\n(0,private_next_rsc_action_validate__WEBPACK_IMPORTED_MODULE_3__.ensureServerEntryExports)([\n    findCourseById,\n    getCourses,\n    createCourse,\n    updateCourse,\n    deleteCourse,\n    enrollStudent,\n    unenrollStudent,\n    getEnrolledCourses\n]);\n(0,private_next_rsc_action_proxy__WEBPACK_IMPORTED_MODULE_0__.createActionProxy)(\"6f245e7b94574f23206e987d9ccac8601b008053\", findCourseById);\n(0,private_next_rsc_action_proxy__WEBPACK_IMPORTED_MODULE_0__.createActionProxy)(\"4e7daa72cfb6c88893e3c83fbf9014eb870cafa4\", getCourses);\n(0,private_next_rsc_action_proxy__WEBPACK_IMPORTED_MODULE_0__.createActionProxy)(\"d608042238ad3a8c4e490d67ddd489ce7ceb27a7\", createCourse);\n(0,private_next_rsc_action_proxy__WEBPACK_IMPORTED_MODULE_0__.createActionProxy)(\"db7bbfbfa326ccf6a29257eb67f1756e8b1de031\", updateCourse);\n(0,private_next_rsc_action_proxy__WEBPACK_IMPORTED_MODULE_0__.createActionProxy)(\"4ef4c52e0874114f33e26877d04b34e92ed23804\", deleteCourse);\n(0,private_next_rsc_action_proxy__WEBPACK_IMPORTED_MODULE_0__.createActionProxy)(\"b561f155418cf1d4e9029465319d804497fc7de4\", enrollStudent);\n(0,private_next_rsc_action_proxy__WEBPACK_IMPORTED_MODULE_0__.createActionProxy)(\"2de26b7ad05b48affebb49e0e0a3f6eb1114b478\", unenrollStudent);\n(0,private_next_rsc_action_proxy__WEBPACK_IMPORTED_MODULE_0__.createActionProxy)(\"da72108311d07880d3ed3b28a123df1aaf05c834\", getEnrolledCourses);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL2RiL3NlcnZpY2VzL2NvdXJzZS1zZXJ2aWNlLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUU4QjtBQUc5Qjs7Ozs7Q0FLQyxHQUNNLGVBQWVDLGVBQ3BCQyxFQUFVLEVBQ1ZDLG1CQUE0QixLQUFLO0lBRWpDLElBQUk7UUFDRixJQUFJLENBQUNELEdBQUdFLEtBQUssQ0FBQyxzQkFBc0I7WUFDbEMsT0FBTztRQUNUO1FBRUEsT0FBTyxNQUFNSixzREFBYSxDQUFDTSxVQUFVLENBQUM7WUFDcENDLE9BQU87Z0JBQUVMO1lBQUc7WUFDWk0sU0FBU0wsbUJBQW1CO2dCQUMxQk0sU0FBUztvQkFBRUMsU0FBUzt3QkFBRUMsT0FBTztvQkFBTTtnQkFBRTtnQkFDckNDLFVBQVU7Z0JBQ1ZDLFNBQVM7b0JBQ1BMLFNBQVM7d0JBQ1BNLE1BQU07NEJBQ0pDLFFBQVE7Z0NBQ05iLElBQUk7Z0NBQ0pjLE1BQU07Z0NBQ05DLE9BQU87NEJBQ1Q7d0JBQ0Y7b0JBQ0Y7Z0JBQ0Y7WUFDRixJQUFJQztRQUNOO0lBQ0YsRUFBRSxPQUFPQyxPQUFPO1FBQ2RDLFFBQVFELEtBQUssQ0FBQywrQkFBK0JBO1FBQzdDLE9BQU87SUFDVDtBQUNGO0FBRUE7Ozs7OztDQU1DLEdBQ00sZUFBZUUsV0FDcEJDLE9BQWUsQ0FBQyxFQUNoQkMsV0FBbUIsRUFBRSxFQUNyQkMsVUFBbUMsQ0FBQyxDQUFDO0lBTXJDLElBQUk7UUFDRixxQ0FBcUM7UUFDckNGLE9BQU9HLEtBQUtDLEdBQUcsQ0FBQyxHQUFHSjtRQUNuQkMsV0FBV0UsS0FBS0MsR0FBRyxDQUFDLEdBQUdELEtBQUtFLEdBQUcsQ0FBQyxLQUFLSjtRQUVyQyxrQkFBa0I7UUFDbEIsTUFBTUssUUFBUSxNQUFNNUIsc0RBQWEsQ0FBQzZCLEtBQUssQ0FBQztZQUN0Q3RCLE9BQU9pQjtRQUNUO1FBRUEsd0JBQXdCO1FBQ3hCLE1BQU1NLFFBQVFMLEtBQUtNLElBQUksQ0FBQ0gsUUFBUUw7UUFF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TztZQUNMYSxTQUFTLEVBQUU7WUFDWEosT0FBTztZQUNQRSxPQUFPO1FBQ1Q7SUFDRjtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vY2hvaWNlLWUtbGVhcm5pbmcvLi9zcmMvbGliL2RiL3NlcnZpY2VzL2NvdXJzZS1zZXJ2aWNlLnRzPzJlYzEiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc2VydmVyXCI7XG5cbmltcG9ydCBwcmlzbWEgZnJvbSAnQC9saWIvZGInO1xuaW1wb3J0IHsgQ291cnNlLCBQcmlzbWEgfSBmcm9tICdAcHJpc21hL2NsaWVudCc7XG5cbi8qKlxuICogRmluZCBhIGNvdXJzZSBieSBJRFxuICogQHBhcmFtIGlkIENvdXJzZSBJRFxuICogQHBhcmFtIGluY2x1ZGVSZWxhdGlvbnMgSW5jbHVkZSByZWxhdGVkIGRhdGEgbGlrZSBsZXNzb25zLCBzdHVkZW50cywgcmV2aWV3c1xuICogQHJldHVybnMgQ291cnNlIG9iamVjdCBvciBudWxsIGlmIG5vdCBmb3VuZFxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZmluZENvdXJzZUJ5SWQoXG4gIGlkOiBzdHJpbmcsIFxuICBpbmNsdWRlUmVsYXRpb25zOiBib29sZWFuID0gZmFsc2Vcbik6IFByb21pc2U8Q291cnNlIHwgbnVsbD4ge1xuICB0cnkge1xuICAgIGlmICghaWQubWF0Y2goL15bMC05YS1mQS1GXXsyNH0kLykpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICBcbiAgICByZXR1cm4gYXdhaXQgcHJpc21hLmNvdXJzZS5maW5kVW5pcXVlKHtcbiAgICAgIHdoZXJlOiB7IGlkIH0sXG4gICAgICBpbmNsdWRlOiBpbmNsdWRlUmVsYXRpb25zID8ge1xuICAgICAgICBsZXNzb25zOiB7IG9yZGVyQnk6IHsgb3JkZXI6ICdhc2MnIH0gfSxcbiAgICAgICAgc3R1ZGVudHM6IHRydWUsXG4gICAgICAgIHJldmlld3M6IHtcbiAgICAgICAgICBpbmNsdWRlOiB7XG4gICAgICAgICAgICB1c2VyOiB7XG4gICAgICAgICAgICAgIHNlbGVjdDoge1xuICAgICAgICAgICAgICAgIGlkOiB0cnVlLFxuICAgICAgICAgICAgICAgIG5hbWU6IHRydWUsXG4gICAgICAgICAgICAgICAgZW1haWw6IHRydWVcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSA6IHVuZGVmaW5lZFxuICAgIH0pO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGZpbmRpbmcgY291cnNlIGJ5IElEOicsIGVycm9yKTtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxufVxuXG4vKipcbiAqIEdldCBhbGwgY291cnNlcyB3aXRoIHBhZ2luYXRpb24gYW5kIG9wdGlvbmFsIGZpbHRlcmluZ1xuICogQHBhcmFtIHBhZ2UgUGFnZSBudW1iZXIgKDEtYmFzZWQpXG4gKiBAcGFyYW0gcGFnZVNpemUgUGFnZSBzaXplXG4gKiBAcGFyYW0gZmlsdGVycyBPcHRpb25hbCBmaWx0ZXIgY3JpdGVyaWFcbiAqIEByZXR1cm5zIFBhZ2luYXRlZCBjb3Vyc2VzXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRDb3Vyc2VzKFxuICBwYWdlOiBudW1iZXIgPSAxLFxuICBwYWdlU2l6ZTogbnVtYmVyID0gMTAsXG4gIGZpbHRlcnM6IFByaXNtYS5Db3Vyc2VXaGVyZUlucHV0ID0ge31cbik6IFByb21pc2U8e1xuICBjb3Vyc2VzOiBDb3Vyc2VbXTtcbiAgdG90YWw6IG51bWJlcjtcbiAgcGFnZXM6IG51bWJlcjtcbn0+IHtcbiAgdHJ5IHtcbiAgICAvLyBFbnN1cmUgcGFnZSBhbmQgcGFnZVNpemUgYXJlIHZhbGlkXG4gICAgcGFnZSA9IE1hdGgubWF4KDEsIHBhZ2UpO1xuICAgIHBhZ2VTaXplID0gTWF0aC5tYXgoMSwgTWF0aC5taW4oMTAwLCBwYWdlU2l6ZSkpO1xuICAgIFxuICAgIC8vIEdldCB0b3RhbCBjb3VudFxuICAgIGNvbnN0IHRvdGFsID0gYXdhaXQgcHJpc21hLmNvdXJzZS5jb3VudCh7XG4gICAgICB3aGVyZTogZmlsdGVyc1xuICAgIH0pO1xuICAgIFxuICAgIC8vIENhbGN1bGF0ZSB0b3RhbCBwYWdlc1xuICAgIGNvbnN0IHBhZ2VzID0gTWF0aC5jZWlsKHRvdGFsIC8gcGFnZVNpemUpO1xuICAgIFxuICAgIC8vIEdldCBjb3Vyc2VzIGZvciB0aGUgcmVxdWVzdGVkIHBhZ2VcbiAgICBjb25zdCBjb3Vyc2VzID0gYXdhaXQgcHJpc21hLmNvdXJzZS5maW5kTWFueSh7XG4gICAgICB3aGVyZTogZmlsdGVycyxcbiAgICAgIHNraXA6IChwYWdlIC0gMSkgKiBwYWdlU2l6ZSxcbiAgICAgIHRha2U6IHBhZ2VTaXplLFxuICAgICAgb3JkZXJCeTogeyBjcmVhdGVkQXQ6ICdkZXNjJyB9LFxuICAgICAgaW5jbHVkZToge1xuICAgICAgICBsZXNzb25zOiB7XG4gICAgICAgICAgc2VsZWN0OiB7XG4gICAgICAgICAgICBpZDogdHJ1ZSxcbiAgICAgICAgICAgIHRpdGxlOiB0cnVlLFxuICAgICAgICAgICAgb3JkZXI6IHRydWVcbiAgICAgICAgICB9LFxuICAgICAgICAgIG9yZGVyQnk6IHtcbiAgICAgICAgICAgIG9yZGVyOiAnYXNjJ1xuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgcmV2aWV3czoge1xuICAgICAgICAgIHNlbGVjdDoge1xuICAgICAgICAgICAgcmF0aW5nOiB0cnVlXG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBfY291bnQ6IHtcbiAgICAgICAgICBzZWxlY3Q6IHtcbiAgICAgICAgICAgIHN0dWRlbnRzOiB0cnVlLFxuICAgICAgICAgICAgbGVzc29uczogdHJ1ZSxcbiAgICAgICAgICAgIHJldmlld3M6IHRydWVcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KTtcbiAgICBcbiAgICByZXR1cm4ge1xuICAgICAgY291cnNlcyxcbiAgICAgIHRvdGFsLFxuICAgICAgcGFnZXNcbiAgICB9O1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGdldHRpbmcgY291cnNlczonLCBlcnJvcik7XG4gICAgcmV0dXJuIHtcbiAgICAgIGNvdXJzZXM6IFtdLFxuICAgICAgdG90YWw6IDAsXG4gICAgICBwYWdlczogMFxuICAgIH07XG4gIH1cbn1cblxuLyoqXG4gKiBDcmVhdGUgYSBuZXcgY291cnNlXG4gKiBAcGFyYW0gZGF0YSBDb3Vyc2UgZGF0YVxuICogQHJldHVybnMgQ3JlYXRlZCBjb3Vyc2Ugb3IgbnVsbCBpZiBjcmVhdGlvbiBmYWlsZWRcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNyZWF0ZUNvdXJzZShkYXRhOiBQcmlzbWEuQ291cnNlQ3JlYXRlSW5wdXQpOiBQcm9taXNlPENvdXJzZSB8IG51bGw+IHtcbiAgdHJ5IHtcbiAgICByZXR1cm4gYXdhaXQgcHJpc21hLmNvdXJzZS5jcmVhdGUoe1xuICAgICAgZGF0YSxcbiAgICAgIGluY2x1ZGU6IHtcbiAgICAgICAgbGVzc29uczogdHJ1ZVxuICAgICAgfVxuICAgIH0pO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGNyZWF0aW5nIGNvdXJzZTonLCBlcnJvcik7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbn1cblxuLyoqXG4gKiBVcGRhdGUgY291cnNlIGRhdGFcbiAqIEBwYXJhbSBpZCBDb3Vyc2UgSURcbiAqIEBwYXJhbSBkYXRhIENvdXJzZSBkYXRhIHRvIHVwZGF0ZVxuICogQHJldHVybnMgVXBkYXRlZCBjb3Vyc2Ugb3IgbnVsbCBpZiB1cGRhdGUgZmFpbGVkXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiB1cGRhdGVDb3Vyc2UoXG4gIGlkOiBzdHJpbmcsXG4gIGRhdGE6IFByaXNtYS5Db3Vyc2VVcGRhdGVJbnB1dFxuKTogUHJvbWlzZTxDb3Vyc2UgfCBudWxsPiB7XG4gIHRyeSB7XG4gICAgcmV0dXJuIGF3YWl0IHByaXNtYS5jb3Vyc2UudXBkYXRlKHtcbiAgICAgIHdoZXJlOiB7IGlkIH0sXG4gICAgICBkYXRhLFxuICAgICAgaW5jbHVkZToge1xuICAgICAgICBsZXNzb25zOiB7XG4gICAgICAgICAgb3JkZXJCeToge1xuICAgICAgICAgICAgb3JkZXI6ICdhc2MnXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgdXBkYXRpbmcgY291cnNlOicsIGVycm9yKTtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxufVxuXG4vKipcbiAqIERlbGV0ZSBhIGNvdXJzZVxuICogQHBhcmFtIGlkIENvdXJzZSBJRFxuICogQHJldHVybnMgRGVsZXRlZCBjb3Vyc2Ugb3IgbnVsbCBpZiBkZWxldGlvbiBmYWlsZWRcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGRlbGV0ZUNvdXJzZShpZDogc3RyaW5nKTogUHJvbWlzZTxDb3Vyc2UgfCBudWxsPiB7XG4gIHRyeSB7XG4gICAgcmV0dXJuIGF3YWl0IHByaXNtYS5jb3Vyc2UuZGVsZXRlKHtcbiAgICAgIHdoZXJlOiB7IGlkIH0sXG4gICAgICBpbmNsdWRlOiB7XG4gICAgICAgIGxlc3NvbnM6IHRydWVcbiAgICAgIH1cbiAgICB9KTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBkZWxldGluZyBjb3Vyc2U6JywgZXJyb3IpO1xuICAgIHJldHVybiBudWxsO1xuICB9XG59XG5cbi8qKlxuICogRW5yb2xsIGEgc3R1ZGVudCBpbiBhIGNvdXJzZVxuICogQHBhcmFtIGNvdXJzZUlkIENvdXJzZSBJRFxuICogQHBhcmFtIHVzZXJJZCBVc2VyIElEXG4gKiBAcmV0dXJucyBVcGRhdGVkIGNvdXJzZSBvciBudWxsIGlmIGVucm9sbG1lbnQgZmFpbGVkXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBlbnJvbGxTdHVkZW50KFxuICBjb3Vyc2VJZDogc3RyaW5nLFxuICB1c2VySWQ6IHN0cmluZ1xuKTogUHJvbWlzZTxDb3Vyc2UgfCBudWxsPiB7XG4gIHRyeSB7XG4gICAgcmV0dXJuIGF3YWl0IHByaXNtYS5jb3Vyc2UudXBkYXRlKHtcbiAgICAgIHdoZXJlOiB7IGlkOiBjb3Vyc2VJZCB9LFxuICAgICAgZGF0YToge1xuICAgICAgICBzdHVkZW50czoge1xuICAgICAgICAgIGNvbm5lY3Q6IHsgaWQ6IHVzZXJJZCB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBlbnJvbGxpbmcgc3R1ZGVudDonLCBlcnJvcik7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbn1cblxuLyoqXG4gKiBVbmVucm9sbCBhIHN0dWRlbnQgZnJvbSBhIGNvdXJzZVxuICogQHBhcmFtIGNvdXJzZUlkIENvdXJzZSBJRFxuICogQHBhcmFtIHVzZXJJZCBVc2VyIElEXG4gKiBAcmV0dXJucyBVcGRhdGVkIGNvdXJzZSBvciBudWxsIGlmIHVuZW5yb2xsbWVudCBmYWlsZWRcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHVuZW5yb2xsU3R1ZGVudChcbiAgY291cnNlSWQ6IHN0cmluZyxcbiAgdXNlcklkOiBzdHJpbmdcbik6IFByb21pc2U8Q291cnNlIHwgbnVsbD4ge1xuICB0cnkge1xuICAgIHJldHVybiBhd2FpdCBwcmlzbWEuY291cnNlLnVwZGF0ZSh7XG4gICAgICB3aGVyZTogeyBpZDogY291cnNlSWQgfSxcbiAgICAgIGRhdGE6IHtcbiAgICAgICAgc3R1ZGVudHM6IHtcbiAgICAgICAgICBkaXNjb25uZWN0OiB7IGlkOiB1c2VySWQgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgdW5lbnJvbGxpbmcgc3R1ZGVudDonLCBlcnJvcik7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbn1cblxuLyoqXG4gKiBHZXQgY291cnNlcyBhIHVzZXIgaXMgZW5yb2xsZWQgaW5cbiAqIEBwYXJhbSB1c2VySWQgVXNlciBJRFxuICogQHBhcmFtIHBhZ2UgUGFnZSBudW1iZXIgKDEtYmFzZWQpXG4gKiBAcGFyYW0gcGFnZVNpemUgUGFnZSBzaXplXG4gKiBAcmV0dXJucyBQYWdpbmF0ZWQgY291cnNlcyB0aGUgdXNlciBpcyBlbnJvbGxlZCBpblxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0RW5yb2xsZWRDb3Vyc2VzKFxuICB1c2VySWQ6IHN0cmluZyxcbiAgcGFnZTogbnVtYmVyID0gMSxcbiAgcGFnZVNpemU6IG51bWJlciA9IDEwXG4pOiBQcm9taXNlPHtcbiAgY291cnNlczogQ291cnNlW107XG4gIHRvdGFsOiBudW1iZXI7XG4gIHBhZ2VzOiBudW1iZXI7XG59PiB7XG4gIHRyeSB7XG4gICAgLy8gRW5zdXJlIHBhZ2UgYW5kIHBhZ2VTaXplIGFyZSB2YWxpZFxuICAgIHBhZ2UgPSBNYXRoLm1heCgxLCBwYWdlKTtcbiAgICBwYWdlU2l6ZSA9IE1hdGgubWF4KDEsIE1hdGgubWluKDEwMCwgcGFnZVNpemUpKTtcbiAgICBcbiAgICAvLyBHZXQgdG90YWwgY291bnRcbiAgICBjb25zdCB0b3RhbCA9IGF3YWl0IHByaXNtYS5jb3Vyc2UuY291bnQoe1xuICAgICAgd2hlcmU6IHtcbiAgICAgICAgc3R1ZGVudHM6IHtcbiAgICAgICAgICBzb21lOiB7XG4gICAgICAgICAgICBpZDogdXNlcklkXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSk7XG4gICAgXG4gICAgLy8gQ2FsY3VsYXRlIHRvdGFsIHBhZ2VzXG4gICAgY29uc3QgcGFnZXMgPSBNYXRoLmNlaWwodG90YWwgLyBwYWdlU2l6ZSk7XG4gICAgXG4gICAgLy8gR2V0IGNvdXJzZXMgZm9yIHRoZSByZXF1ZXN0ZWQgcGFnZVxuICAgIGNvbnN0IGNvdXJzZXMgPSBhd2FpdCBwcmlzbWEuY291cnNlLmZpbmRNYW55KHtcbiAgICAgIHdoZXJlOiB7XG4gICAgICAgIHN0dWRlbnRzOiB7XG4gICAgICAgICAgc29tZToge1xuICAgICAgICAgICAgaWQ6IHVzZXJJZFxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIHNraXA6IChwYWdlIC0gMSkgKiBwYWdlU2l6ZSxcbiAgICAgIHRha2U6IHBhZ2VTaXplLFxuICAgICAgb3JkZXJCeTogeyBjcmVhdGVkQXQ6ICdkZXNjJyB9LFxuICAgICAgaW5jbHVkZToge1xuICAgICAgICBsZXNzb25zOiB7XG4gICAgICAgICAgc2VsZWN0OiB7XG4gICAgICAgICAgICBpZDogdHJ1ZSxcbiAgICAgICAgICAgIHRpdGxlOiB0cnVlLFxuICAgICAgICAgICAgb3JkZXI6IHRydWVcbiAgICAgICAgICB9LFxuICAgICAgICAgIG9yZGVyQnk6IHtcbiAgICAgICAgICAgIG9yZGVyOiAnYXNjJ1xuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgcmV2aWV3czoge1xuICAgICAgICAgIHdoZXJlOiB7XG4gICAgICAgICAgICB1c2VySWRcbiAgICAgICAgICB9LFxuICAgICAgICAgIHNlbGVjdDoge1xuICAgICAgICAgICAgaWQ6IHRydWUsXG4gICAgICAgICAgICByYXRpbmc6IHRydWUsXG4gICAgICAgICAgICBjb21tZW50OiB0cnVlXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSk7XG4gICAgXG4gICAgcmV0dXJuIHtcbiAgICAgIGNvdXJzZXMsXG4gICAgICB0b3RhbCxcbiAgICAgIHBhZ2VzXG4gICAgfTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBnZXR0aW5nIGVucm9sbGVkIGNvdXJzZXM6JywgZXJyb3IpO1xuICAgIHJldHVybiB7XG4gICAgICBjb3Vyc2VzOiBbXSxcbiAgICAgIHRvdGFsOiAwLFxuICAgICAgcGFnZXM6IDBcbiAgICB9O1xuICB9XG59XG4iXSwibmFtZXMiOlsicHJpc21hIiwiZmluZENvdXJzZUJ5SWQiLCJpZCIsImluY2x1ZGVSZWxhdGlvbnMiLCJtYXRjaCIsImNvdXJzZSIsImZpbmRVbmlxdWUiLCJ3aGVyZSIsImluY2x1ZGUiLCJsZXNzb25zIiwib3JkZXJCeSIsIm9yZGVyIiwic3R1ZGVudHMiLCJyZXZpZXdzIiwidXNlciIsInNlbGVjdCIsIm5hbWUiLCJlbWFpbCIsInVuZGVmaW5lZCIsImVycm9yIiwiY29uc29sZSIsImdldENvdXJzZXMiLCJwYWdlIiwicGFnZVNpemUiLCJmaWx0ZXJzIiwiTWF0aCIsIm1heCIsIm1pbiIsInRvdGFsIiwiY291bnQiLCJwYWdlcyIsImNlaWwiLCJjb3Vyc2VzIiwiZmluZE1hbnkiLCJza2lwIiwidGFrZSIsImNyZWF0ZWRBdCIsInRpdGxlIiwicmF0aW5nIiwiX2NvdW50IiwiY3JlYXRlQ291cnNlIiwiZGF0YSIsImNyZWF0ZSIsInVwZGF0ZUNvdXJzZSIsInVwZGF0ZSIsImRlbGV0ZUNvdXJzZSIsImRlbGV0ZSIsImVucm9sbFN0dWRlbnQiLCJjb3Vyc2VJZCIsInVzZXJJZCIsImNvbm5lY3QiLCJ1bmVucm9sbFN0dWRlbnQiLCJkaXNjb25uZWN0IiwiZ2V0RW5yb2xsZWRDb3Vyc2VzIiwic29tZSIsImNvbW1lbnQiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/db/services/course-service.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/db/services/db-service.ts":
/*!*******************************************!*\
  !*** ./src/lib/db/services/db-service.ts ***!
  \*******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   countRecords: () => (/* binding */ countRecords),\n/* harmony export */   createRecord: () => (/* binding */ createRecord),\n/* harmony export */   deleteRecord: () => (/* binding */ deleteRecord),\n/* harmony export */   executeTransaction: () => (/* binding */ executeTransaction),\n/* harmony export */   findById: () => (/* binding */ findById),\n/* harmony export */   findMany: () => (/* binding */ findMany),\n/* harmony export */   findOne: () => (/* binding */ findOne),\n/* harmony export */   updateRecord: () => (/* binding */ updateRecord)\n/* harmony export */ });\n/* harmony import */ var private_next_rsc_action_proxy__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! private-next-rsc-action-proxy */ \"(rsc)/./node_modules/next/dist/build/webpack/loaders/next-flight-loader/action-proxy.js\");\n/* harmony import */ var private_next_rsc_action_encryption__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! private-next-rsc-action-encryption */ \"(rsc)/./node_modules/next/dist/server/app-render/action-encryption.js\");\n/* harmony import */ var private_next_rsc_action_encryption__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(private_next_rsc_action_encryption__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _lib_db__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/lib/db */ \"(rsc)/./src/lib/db.ts\");\n/* harmony import */ var private_next_rsc_action_validate__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! private-next-rsc-action-validate */ \"(rsc)/./node_modules/next/dist/build/webpack/loaders/next-flight-loader/action-validate.js\");\n/* __next_internal_action_entry_do_not_use__ {\"13842d7780def5fd0a955c31a26e8e88e5be7fa0\":\"findMany\",\"1f4eab26907992a919fd0922e9cb5343e263aba4\":\"findOne\",\"53f54708a9f1340d28892ca49fa83cc1952b73f7\":\"executeTransaction\",\"679948099b136910b13260790db7f04fb1f58067\":\"deleteRecord\",\"78322f6c063687ec2005e0d47591c8293655c4cd\":\"findById\",\"ad9eb87420b24992938ac51dc9efc65ac01bf424\":\"countRecords\",\"e4bcb396ff6a6c3dbe8c44b45e58329daec99301\":\"updateRecord\",\"f0f7abe6842c4b9a6cb3cb216f8606c16b745c71\":\"createRecord\"} */ \n\n\n/**\n * Generic method to find a record by ID\n * @param model The Prisma model name\n * @param id The record ID\n * @returns The record or null if not found\n */ async function findById(model, id) {\n    try {\n        // Validate ID format for MongoDB\n        if (!id.match(/^[0-9a-fA-F]{24}$/)) {\n            console.error(`Invalid ID format: ${id}`);\n            return null;\n        }\n        const record = await _lib_db__WEBPACK_IMPORTED_MODULE_2__[\"default\"][model].findUnique({\n            where: {\n                id\n            }\n        });\n        return record;\n    } catch (error) {\n        console.error(`Error finding ${String(model)} by ID:`, error);\n        return null;\n    }\n}\n/**\n * Generic method to find records by a filter\n * @param model The Prisma model name\n * @param where The filter criteria\n * @param options Additional options like include, orderBy, etc.\n * @returns Array of matching records\n */ async function findMany(model, where = {}, options = {}) {\n    try {\n        const records = await _lib_db__WEBPACK_IMPORTED_MODULE_2__[\"default\"][model].findMany({\n            where,\n            ...options\n        });\n        return records;\n    } catch (error) {\n        console.error(`Error finding ${String(model)} records:`, error);\n        return [];\n    }\n}\n/**\n * Generic method to find a single record by filter\n * @param model The Prisma model name\n * @param where The filter criteria\n * @param options Additional options like include\n * @returns The record or null if not found\n */ async function findOne(model, where, options = {}) {\n    try {\n        const record = await _lib_db__WEBPACK_IMPORTED_MODULE_2__[\"default\"][model].findFirst({\n            where,\n            ...options\n        });\n        return record;\n    } catch (error) {\n        console.error(`Error finding ${String(model)} record:`, error);\n        return null;\n    }\n}\n/**\n * Generic method to create a record\n * @param model The Prisma model name\n * @param data The record data\n * @returns The created record or null if creation failed\n */ async function createRecord(model, data) {\n    try {\n        const record = await _lib_db__WEBPACK_IMPORTED_MODULE_2__[\"default\"][model].create({\n            data\n        });\n        return record;\n    } catch (error) {\n        console.error(`Error creating ${String(model)}:`, error);\n        return null;\n    }\n}\n/**\n * Generic method to update a record\n * @param model The Prisma model name\n * @param id The record ID\n * @param data The update data\n * @returns The updated record or null if update failed\n */ async function updateRecord(model, id, data) {\n    try {\n        // Validate ID format for MongoDB\n        if (!id.match(/^[0-9a-fA-F]{24}$/)) {\n            console.error(`Invalid ID format: ${id}`);\n            return null;\n        }\n        const record = await _lib_db__WEBPACK_IMPORTED_MODULE_2__[\"default\"][model].update({\n            where: {\n                id\n            },\n            data\n        });\n        return record;\n    } catch (error) {\n        console.error(`Error updating ${String(model)}:`, error);\n        return null;\n    }\n}\n/**\n * Generic method to delete a record\n * @param model The Prisma model name\n * @param id The record ID\n * @returns The deleted record or null if deletion failed\n */ async function deleteRecord(model, id) {\n    try {\n        // Validate ID format for MongoDB\n        if (!id.match(/^[0-9a-fA-F]{24}$/)) {\n            console.error(`Invalid ID format: ${id}`);\n            return null;\n        }\n        const record = await _lib_db__WEBPACK_IMPORTED_MODULE_2__[\"default\"][model].delete({\n            where: {\n                id\n            }\n        });\n        return record;\n    } catch (error) {\n        console.error(`Error deleting ${String(model)}:`, error);\n        return null;\n    }\n}\n/**\n * Generic method to count records\n * @param model The Prisma model name\n * @param where The filter criteria\n * @returns The count of matching records\n */ async function countRecords(model, where = {}) {\n    try {\n        const count = await _lib_db__WEBPACK_IMPORTED_MODULE_2__[\"default\"][model].count({\n            where\n        });\n        return count;\n    } catch (error) {\n        console.error(`Error counting ${String(model)} records:`, error);\n        return 0;\n    }\n}\n/**\n * Execute a transaction with multiple operations\n * @param fn Function containing the transaction operations\n * @returns Result of the transaction\n */ async function executeTransaction(fn) {\n    try {\n        return await _lib_db__WEBPACK_IMPORTED_MODULE_2__[\"default\"].$transaction(fn);\n    } catch (error) {\n        console.error(\"Transaction error:\", error);\n        return null;\n    }\n}\n\n(0,private_next_rsc_action_validate__WEBPACK_IMPORTED_MODULE_3__.ensureServerEntryExports)([\n    findById,\n    findMany,\n    findOne,\n    createRecord,\n    updateRecord,\n    deleteRecord,\n    countRecords,\n    executeTransaction\n]);\n(0,private_next_rsc_action_proxy__WEBPACK_IMPORTED_MODULE_0__.createActionProxy)(\"78322f6c063687ec2005e0d47591c8293655c4cd\", findById);\n(0,private_next_rsc_action_proxy__WEBPACK_IMPORTED_MODULE_0__.createActionProxy)(\"13842d7780def5fd0a955c31a26e8e88e5be7fa0\", findMany);\n(0,private_next_rsc_action_proxy__WEBPACK_IMPORTED_MODULE_0__.createActionProxy)(\"1f4eab26907992a919fd0922e9cb5343e263aba4\", findOne);\n(0,private_next_rsc_action_proxy__WEBPACK_IMPORTED_MODULE_0__.createActionProxy)(\"f0f7abe6842c4b9a6cb3cb216f8606c16b745c71\", createRecord);\n(0,private_next_rsc_action_proxy__WEBPACK_IMPORTED_MODULE_0__.createActionProxy)(\"e4bcb396ff6a6c3dbe8c44b45e58329daec99301\", updateRecord);\n(0,private_next_rsc_action_proxy__WEBPACK_IMPORTED_MODULE_0__.createActionProxy)(\"679948099b136910b13260790db7f04fb1f58067\", deleteRecord);\n(0,private_next_rsc_action_proxy__WEBPACK_IMPORTED_MODULE_0__.createActionProxy)(\"ad9eb87420b24992938ac51dc9efc65ac01bf424\", countRecords);\n(0,private_next_rsc_action_proxy__WEBPACK_IMPORTED_MODULE_0__.createActionProxy)(\"53f54708a9f1340d28892ca49fa83cc1952b73f7\", executeTransaction);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL2RiL3NlcnZpY2VzL2RiLXNlcnZpY2UudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBRThCO0FBRzlCOzs7OztDQUtDLEdBQ00sZUFBZUMsU0FDcEJDLEtBQVEsRUFDUkMsRUFBVTtJQUVWLElBQUk7UUFDRixpQ0FBaUM7UUFDakMsSUFBSSxDQUFDQSxHQUFHQyxLQUFLLENBQUMsc0JBQXNCO1lBQ2xDQyxRQUFRQyxLQUFLLENBQUMsQ0FBQyxtQkFBbUIsRUFBRUgsR0FBRyxDQUFDO1lBQ3hDLE9BQU87UUFDVDtRQUVBLE1BQU1JLFNBQVMsTUFBTSwrQ0FBTyxDQUFDTCxNQUFNLENBQVNNLFVBQVUsQ0FBQztZQUNyREMsT0FBTztnQkFBRU47WUFBRztRQUNkO1FBRUEsT0FBT0k7SUFDVCxFQUFFLE9BQU9ELE9BQU87UUFDZEQsUUFBUUMsS0FBSyxDQUFDLENBQUMsY0FBYyxFQUFFSSxPQUFPUixPQUFPLE9BQU8sQ0FBQyxFQUFFSTtRQUN2RCxPQUFPO0lBQ1Q7QUFDRjtBQUVBOzs7Ozs7Q0FNQyxHQUNNLGVBQWVLLFNBQ3BCVCxLQUFRLEVBQ1JPLFFBQWEsQ0FBQyxDQUFDLEVBQ2ZHLFVBQWUsQ0FBQyxDQUFDO0lBRWpCLElBQUk7UUFDRixNQUFNQyxVQUFVLE1BQU0sK0NBQU8sQ0FBQ1gsTUFBTSxDQUFTUyxRQUFRLENBQUM7WUFDcERGO1lBQ0EsR0FBR0csT0FBTztRQUNaO1FBRUEsT0FBT0M7SUFDVCxFQUFFLE9BQU9QLE9BQU87UUFDZEQsUUFBUUMsS0FBSyxDQUFDLENBQUMsY0FBYyxFQUFFSSxPQUFPUixPQUFPLFNBQVMsQ0FBQyxFQUFFSTtRQUN6RCxPQUFPLEVBQUU7SUFDWDtBQUNGO0FBRUE7Ozs7OztDQU1DLEdBQ00sZUFBZVEsUUFDcEJaLEtBQVEsRUFDUk8sS0FBVSxFQUNWRyxVQUFlLENBQUMsQ0FBQztJQUVqQixJQUFJO1FBQ0YsTUFBTUwsU0FBUyxNQUFNLCtDQUFPLENBQUNMLE1BQU0sQ0FBU2EsU0FBUyxDQUFDO1lBQ3BETjtZQUNBLEdBQUdHLE9BQU87UUFDWjtRQUVBLE9BQU9MO0lBQ1QsRUFBRSxPQUFPRCxPQUFPO1FBQ2RELFFBQVFDLEtBQUssQ0FBQyxDQUFDLGNBQWMsRUFBRUksT0FBT1IsT0FBTyxRQUFRLENBQUMsRUFBRUk7UUFDeEQsT0FBTztJQUNUO0FBQ0Y7QUFFQTs7Ozs7Q0FLQyxHQUNNLGVBQWVVLGFBQ3BCZCxLQUFRLEVBQ1JlLElBQVM7SUFFVCxJQUFJO1FBQ0YsTUFBTVYsU0FBUyxNQUFNLCtDQUFPLENBQUNMLE1BQU0sQ0FBU2dCLE1BQU0sQ0FBQztZQUNqREQ7UUFDRjtRQUVBLE9BQU9WO0lBQ1QsRUFBRSxPQUFPRCxPQUFPO1FBQ2RELFFBQVFDLEtBQUssQ0FBQyxDQUFDLGVBQWUsRUFBRUksT0FBT1IsT0FBTyxDQUFDLENBQUMsRUFBRUk7UUFDbEQsT0FBTztJQUNUO0FBQ0Y7QUFFQTs7Ozs7O0NBTUMsR0FDTSxlQUFlYSxhQUNwQmpCLEtBQVEsRUFDUkMsRUFBVSxFQUNWYyxJQUFTO0lBRVQsSUFBSTtRQUNGLGlDQUFpQztRQUNqQyxJQUFJLENBQUNkLEdBQUdDLEtBQUssQ0FBQyxzQkFBc0I7WUFDbENDLFFBQVFDLEtBQUssQ0FBQyxDQUFDLG1CQUFtQixFQUFFSCxHQUFHLENBQUM7WUFDeEMsT0FBTztRQUNUO1FBRUEsTUFBTUksU0FBUyxNQUFNLCtDQUFPLENBQUNMLE1BQU0sQ0FBU2tCLE1BQU0sQ0FBQztZQUNqRFgsT0FBTztnQkFBRU47WUFBRztZQUNaYztRQUNGO1FBRUEsT0FBT1Y7SUFDVCxFQUFFLE9BQU9ELE9BQU87UUFDZEQsUUFBUUMsS0FBSyxDQUFDLENBQUMsZUFBZSxFQUFFSSxPQUFPUixPQUFPLENBQUMsQ0FBQyxFQUFFSTtRQUNsRCxPQUFPO0lBQ1Q7QUFDRjtBQUVBOzs7OztDQUtDLEdBQ00sZUFBZWUsYUFDcEJuQixLQUFRLEVBQ1JDLEVBQVU7SUFFVixJQUFJO1FBQ0YsaUNBQWlDO1FBQ2pDLElBQUksQ0FBQ0EsR0FBR0MsS0FBSyxDQUFDLHNCQUFzQjtZQUNsQ0MsUUFBUUMsS0FBSyxDQUFDLENBQUMsbUJBQW1CLEVBQUVILEdBQUcsQ0FBQztZQUN4QyxPQUFPO1FBQ1Q7UUFFQSxNQUFNSSxTQUFTLE1BQU0sK0NBQU8sQ0FBQ0wsTUFBTSxDQUFTb0IsTUFBTSxDQUFDO1lBQ2pEYixPQUFPO2dCQUFFTjtZQUFHO1FBQ2Q7UUFFQSxPQUFPSTtJQUNULEVBQUUsT0FBT0QsT0FBTztRQUNkRCxRQUFRQyxLQUFLLENBQUMsQ0FBQyxlQUFlLEVBQUVJLE9BQU9SLE9BQU8sQ0FBQyxDQUFDLEVBQUVJO1FBQ2xELE9BQU87SUFDVDtBQUNGO0FBRUE7Ozs7O0NBS0MsR0FDTSxlQUFlaUIsYUFDcEJyQixLQUFRLEVBQ1JPLFFBQWEsQ0FBQyxDQUFDO0lBRWYsSUFBSTtRQUNGLE1BQU1lLFFBQVEsTUFBTSwrQ0FBTyxDQUFDdEIsTUFBTSxDQUFTc0IsS0FBSyxDQUFDO1lBQy9DZjtRQUNGO1FBRUEsT0FBT2U7SUFDVCxFQUFFLE9BQU9sQixPQUFPO1FBQ2RELFFBQVFDLEtBQUssQ0FBQyxDQUFDLGVBQWUsRUFBRUksT0FBT1IsT0FBTyxTQUFTLENBQUMsRUFBRUk7UUFDMUQsT0FBTztJQUNUO0FBQ0Y7QUFFQTs7OztDQUlDLEdBQ00sZUFBZW1CLG1CQUNwQkMsRUFBb0Q7SUFFcEQsSUFBSTtRQUNGLE9BQU8sTUFBTTFCLDREQUFtQixDQUFDMEI7SUFDbkMsRUFBRSxPQUFPcEIsT0FBTztRQUNkRCxRQUFRQyxLQUFLLENBQUMsc0JBQXNCQTtRQUNwQyxPQUFPO0lBQ1Q7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL2Nob2ljZS1lLWxlYXJuaW5nLy4vc3JjL2xpYi9kYi9zZXJ2aWNlcy9kYi1zZXJ2aWNlLnRzPzRiYWIiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc2VydmVyXCI7XG5cbmltcG9ydCBwcmlzbWEgZnJvbSAnQC9saWIvZGInO1xuaW1wb3J0IHsgUHJpc21hIH0gZnJvbSAnQHByaXNtYS9jbGllbnQnO1xuXG4vKipcbiAqIEdlbmVyaWMgbWV0aG9kIHRvIGZpbmQgYSByZWNvcmQgYnkgSURcbiAqIEBwYXJhbSBtb2RlbCBUaGUgUHJpc21hIG1vZGVsIG5hbWVcbiAqIEBwYXJhbSBpZCBUaGUgcmVjb3JkIElEXG4gKiBAcmV0dXJucyBUaGUgcmVjb3JkIG9yIG51bGwgaWYgbm90IGZvdW5kXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBmaW5kQnlJZDxUIGV4dGVuZHMga2V5b2YgdHlwZW9mIHByaXNtYT4oXG4gIG1vZGVsOiBULCBcbiAgaWQ6IHN0cmluZ1xuKTogUHJvbWlzZTxhbnkgfCBudWxsPiB7XG4gIHRyeSB7XG4gICAgLy8gVmFsaWRhdGUgSUQgZm9ybWF0IGZvciBNb25nb0RCXG4gICAgaWYgKCFpZC5tYXRjaCgvXlswLTlhLWZBLUZdezI0fSQvKSkge1xuICAgICAgY29uc29sZS5lcnJvcihgSW52YWxpZCBJRCBmb3JtYXQ6ICR7aWR9YCk7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgXG4gICAgY29uc3QgcmVjb3JkID0gYXdhaXQgKHByaXNtYVttb2RlbF0gYXMgYW55KS5maW5kVW5pcXVlKHtcbiAgICAgIHdoZXJlOiB7IGlkIH1cbiAgICB9KTtcbiAgICBcbiAgICByZXR1cm4gcmVjb3JkO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoYEVycm9yIGZpbmRpbmcgJHtTdHJpbmcobW9kZWwpfSBieSBJRDpgLCBlcnJvcik7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbn1cblxuLyoqXG4gKiBHZW5lcmljIG1ldGhvZCB0byBmaW5kIHJlY29yZHMgYnkgYSBmaWx0ZXJcbiAqIEBwYXJhbSBtb2RlbCBUaGUgUHJpc21hIG1vZGVsIG5hbWVcbiAqIEBwYXJhbSB3aGVyZSBUaGUgZmlsdGVyIGNyaXRlcmlhXG4gKiBAcGFyYW0gb3B0aW9ucyBBZGRpdGlvbmFsIG9wdGlvbnMgbGlrZSBpbmNsdWRlLCBvcmRlckJ5LCBldGMuXG4gKiBAcmV0dXJucyBBcnJheSBvZiBtYXRjaGluZyByZWNvcmRzXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBmaW5kTWFueTxUIGV4dGVuZHMga2V5b2YgdHlwZW9mIHByaXNtYT4oXG4gIG1vZGVsOiBULFxuICB3aGVyZTogYW55ID0ge30sXG4gIG9wdGlvbnM6IGFueSA9IHt9XG4pOiBQcm9taXNlPGFueVtdPiB7XG4gIHRyeSB7XG4gICAgY29uc3QgcmVjb3JkcyA9IGF3YWl0IChwcmlzbWFbbW9kZWxdIGFzIGFueSkuZmluZE1hbnkoe1xuICAgICAgd2hlcmUsXG4gICAgICAuLi5vcHRpb25zXG4gICAgfSk7XG4gICAgXG4gICAgcmV0dXJuIHJlY29yZHM7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcihgRXJyb3IgZmluZGluZyAke1N0cmluZyhtb2RlbCl9IHJlY29yZHM6YCwgZXJyb3IpO1xuICAgIHJldHVybiBbXTtcbiAgfVxufVxuXG4vKipcbiAqIEdlbmVyaWMgbWV0aG9kIHRvIGZpbmQgYSBzaW5nbGUgcmVjb3JkIGJ5IGZpbHRlclxuICogQHBhcmFtIG1vZGVsIFRoZSBQcmlzbWEgbW9kZWwgbmFtZVxuICogQHBhcmFtIHdoZXJlIFRoZSBmaWx0ZXIgY3JpdGVyaWFcbiAqIEBwYXJhbSBvcHRpb25zIEFkZGl0aW9uYWwgb3B0aW9ucyBsaWtlIGluY2x1ZGVcbiAqIEByZXR1cm5zIFRoZSByZWNvcmQgb3IgbnVsbCBpZiBub3QgZm91bmRcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGZpbmRPbmU8VCBleHRlbmRzIGtleW9mIHR5cGVvZiBwcmlzbWE+KFxuICBtb2RlbDogVCxcbiAgd2hlcmU6IGFueSxcbiAgb3B0aW9uczogYW55ID0ge31cbik6IFByb21pc2U8YW55IHwgbnVsbD4ge1xuICB0cnkge1xuICAgIGNvbnN0IHJlY29yZCA9IGF3YWl0IChwcmlzbWFbbW9kZWxdIGFzIGFueSkuZmluZEZpcnN0KHtcbiAgICAgIHdoZXJlLFxuICAgICAgLi4ub3B0aW9uc1xuICAgIH0pO1xuICAgIFxuICAgIHJldHVybiByZWNvcmQ7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcihgRXJyb3IgZmluZGluZyAke1N0cmluZyhtb2RlbCl9IHJlY29yZDpgLCBlcnJvcik7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbn1cblxuLyoqXG4gKiBHZW5lcmljIG1ldGhvZCB0byBjcmVhdGUgYSByZWNvcmRcbiAqIEBwYXJhbSBtb2RlbCBUaGUgUHJpc21hIG1vZGVsIG5hbWVcbiAqIEBwYXJhbSBkYXRhIFRoZSByZWNvcmQgZGF0YVxuICogQHJldHVybnMgVGhlIGNyZWF0ZWQgcmVjb3JkIG9yIG51bGwgaWYgY3JlYXRpb24gZmFpbGVkXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjcmVhdGVSZWNvcmQ8VCBleHRlbmRzIGtleW9mIHR5cGVvZiBwcmlzbWE+KFxuICBtb2RlbDogVCxcbiAgZGF0YTogYW55XG4pOiBQcm9taXNlPGFueSB8IG51bGw+IHtcbiAgdHJ5IHtcbiAgICBjb25zdCByZWNvcmQgPSBhd2FpdCAocHJpc21hW21vZGVsXSBhcyBhbnkpLmNyZWF0ZSh7XG4gICAgICBkYXRhXG4gICAgfSk7XG4gICAgXG4gICAgcmV0dXJuIHJlY29yZDtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKGBFcnJvciBjcmVhdGluZyAke1N0cmluZyhtb2RlbCl9OmAsIGVycm9yKTtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxufVxuXG4vKipcbiAqIEdlbmVyaWMgbWV0aG9kIHRvIHVwZGF0ZSBhIHJlY29yZFxuICogQHBhcmFtIG1vZGVsIFRoZSBQcmlzbWEgbW9kZWwgbmFtZVxuICogQHBhcmFtIGlkIFRoZSByZWNvcmQgSURcbiAqIEBwYXJhbSBkYXRhIFRoZSB1cGRhdGUgZGF0YVxuICogQHJldHVybnMgVGhlIHVwZGF0ZWQgcmVjb3JkIG9yIG51bGwgaWYgdXBkYXRlIGZhaWxlZFxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gdXBkYXRlUmVjb3JkPFQgZXh0ZW5kcyBrZXlvZiB0eXBlb2YgcHJpc21hPihcbiAgbW9kZWw6IFQsXG4gIGlkOiBzdHJpbmcsXG4gIGRhdGE6IGFueVxuKTogUHJvbWlzZTxhbnkgfCBudWxsPiB7XG4gIHRyeSB7XG4gICAgLy8gVmFsaWRhdGUgSUQgZm9ybWF0IGZvciBNb25nb0RCXG4gICAgaWYgKCFpZC5tYXRjaCgvXlswLTlhLWZBLUZdezI0fSQvKSkge1xuICAgICAgY29uc29sZS5lcnJvcihgSW52YWxpZCBJRCBmb3JtYXQ6ICR7aWR9YCk7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgXG4gICAgY29uc3QgcmVjb3JkID0gYXdhaXQgKHByaXNtYVttb2RlbF0gYXMgYW55KS51cGRhdGUoe1xuICAgICAgd2hlcmU6IHsgaWQgfSxcbiAgICAgIGRhdGFcbiAgICB9KTtcbiAgICBcbiAgICByZXR1cm4gcmVjb3JkO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoYEVycm9yIHVwZGF0aW5nICR7U3RyaW5nKG1vZGVsKX06YCwgZXJyb3IpO1xuICAgIHJldHVybiBudWxsO1xuICB9XG59XG5cbi8qKlxuICogR2VuZXJpYyBtZXRob2QgdG8gZGVsZXRlIGEgcmVjb3JkXG4gKiBAcGFyYW0gbW9kZWwgVGhlIFByaXNtYSBtb2RlbCBuYW1lXG4gKiBAcGFyYW0gaWQgVGhlIHJlY29yZCBJRFxuICogQHJldHVybnMgVGhlIGRlbGV0ZWQgcmVjb3JkIG9yIG51bGwgaWYgZGVsZXRpb24gZmFpbGVkXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBkZWxldGVSZWNvcmQ8VCBleHRlbmRzIGtleW9mIHR5cGVvZiBwcmlzbWE+KFxuICBtb2RlbDogVCxcbiAgaWQ6IHN0cmluZ1xuKTogUHJvbWlzZTxhbnkgfCBudWxsPiB7XG4gIHRyeSB7XG4gICAgLy8gVmFsaWRhdGUgSUQgZm9ybWF0IGZvciBNb25nb0RCXG4gICAgaWYgKCFpZC5tYXRjaCgvXlswLTlhLWZBLUZdezI0fSQvKSkge1xuICAgICAgY29uc29sZS5lcnJvcihgSW52YWxpZCBJRCBmb3JtYXQ6ICR7aWR9YCk7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgXG4gICAgY29uc3QgcmVjb3JkID0gYXdhaXQgKHByaXNtYVttb2RlbF0gYXMgYW55KS5kZWxldGUoe1xuICAgICAgd2hlcmU6IHsgaWQgfVxuICAgIH0pO1xuICAgIFxuICAgIHJldHVybiByZWNvcmQ7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcihgRXJyb3IgZGVsZXRpbmcgJHtTdHJpbmcobW9kZWwpfTpgLCBlcnJvcik7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbn1cblxuLyoqXG4gKiBHZW5lcmljIG1ldGhvZCB0byBjb3VudCByZWNvcmRzXG4gKiBAcGFyYW0gbW9kZWwgVGhlIFByaXNtYSBtb2RlbCBuYW1lXG4gKiBAcGFyYW0gd2hlcmUgVGhlIGZpbHRlciBjcml0ZXJpYVxuICogQHJldHVybnMgVGhlIGNvdW50IG9mIG1hdGNoaW5nIHJlY29yZHNcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNvdW50UmVjb3JkczxUIGV4dGVuZHMga2V5b2YgdHlwZW9mIHByaXNtYT4oXG4gIG1vZGVsOiBULFxuICB3aGVyZTogYW55ID0ge31cbik6IFByb21pc2U8bnVtYmVyPiB7XG4gIHRyeSB7XG4gICAgY29uc3QgY291bnQgPSBhd2FpdCAocHJpc21hW21vZGVsXSBhcyBhbnkpLmNvdW50KHtcbiAgICAgIHdoZXJlXG4gICAgfSk7XG4gICAgXG4gICAgcmV0dXJuIGNvdW50O1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoYEVycm9yIGNvdW50aW5nICR7U3RyaW5nKG1vZGVsKX0gcmVjb3JkczpgLCBlcnJvcik7XG4gICAgcmV0dXJuIDA7XG4gIH1cbn1cblxuLyoqXG4gKiBFeGVjdXRlIGEgdHJhbnNhY3Rpb24gd2l0aCBtdWx0aXBsZSBvcGVyYXRpb25zXG4gKiBAcGFyYW0gZm4gRnVuY3Rpb24gY29udGFpbmluZyB0aGUgdHJhbnNhY3Rpb24gb3BlcmF0aW9uc1xuICogQHJldHVybnMgUmVzdWx0IG9mIHRoZSB0cmFuc2FjdGlvblxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZXhlY3V0ZVRyYW5zYWN0aW9uPFQ+KFxuICBmbjogKHByaXNtYTogUHJpc21hLlRyYW5zYWN0aW9uQ2xpZW50KSA9PiBQcm9taXNlPFQ+XG4pOiBQcm9taXNlPFQgfCBudWxsPiB7XG4gIHRyeSB7XG4gICAgcmV0dXJuIGF3YWl0IHByaXNtYS4kdHJhbnNhY3Rpb24oZm4pO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ1RyYW5zYWN0aW9uIGVycm9yOicsIGVycm9yKTtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxufVxuIl0sIm5hbWVzIjpbInByaXNtYSIsImZpbmRCeUlkIiwibW9kZWwiLCJpZCIsIm1hdGNoIiwiY29uc29sZSIsImVycm9yIiwicmVjb3JkIiwiZmluZFVuaXF1ZSIsIndoZXJlIiwiU3RyaW5nIiwiZmluZE1hbnkiLCJvcHRpb25zIiwicmVjb3JkcyIsImZpbmRPbmUiLCJmaW5kRmlyc3QiLCJjcmVhdGVSZWNvcmQiLCJkYXRhIiwiY3JlYXRlIiwidXBkYXRlUmVjb3JkIiwidXBkYXRlIiwiZGVsZXRlUmVjb3JkIiwiZGVsZXRlIiwiY291bnRSZWNvcmRzIiwiY291bnQiLCJleGVjdXRlVHJhbnNhY3Rpb24iLCJmbiIsIiR0cmFuc2FjdGlvbiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/db/services/db-service.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/db/services/index.ts":
/*!**************************************!*\
  !*** ./src/lib/db/services/index.ts ***!
  \**************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   countRecords: () => (/* reexport safe */ _db_service__WEBPACK_IMPORTED_MODULE_0__.countRecords),\n/* harmony export */   createCourse: () => (/* reexport safe */ _course_service__WEBPACK_IMPORTED_MODULE_2__.createCourse),\n/* harmony export */   createLesson: () => (/* reexport safe */ _lesson_service__WEBPACK_IMPORTED_MODULE_3__.createLesson),\n/* harmony export */   createRecord: () => (/* reexport safe */ _db_service__WEBPACK_IMPORTED_MODULE_0__.createRecord),\n/* harmony export */   createUser: () => (/* reexport safe */ _user_service__WEBPACK_IMPORTED_MODULE_1__.createUser),\n/* harmony export */   deleteCourse: () => (/* reexport safe */ _course_service__WEBPACK_IMPORTED_MODULE_2__.deleteCourse),\n/* harmony export */   deleteLesson: () => (/* reexport safe */ _lesson_service__WEBPACK_IMPORTED_MODULE_3__.deleteLesson),\n/* harmony export */   deleteRecord: () => (/* reexport safe */ _db_service__WEBPACK_IMPORTED_MODULE_0__.deleteRecord),\n/* harmony export */   deleteUser: () => (/* reexport safe */ _user_service__WEBPACK_IMPORTED_MODULE_1__.deleteUser),\n/* harmony export */   enrollStudent: () => (/* reexport safe */ _course_service__WEBPACK_IMPORTED_MODULE_2__.enrollStudent),\n/* harmony export */   executeTransaction: () => (/* reexport safe */ _db_service__WEBPACK_IMPORTED_MODULE_0__.executeTransaction),\n/* harmony export */   findById: () => (/* reexport safe */ _db_service__WEBPACK_IMPORTED_MODULE_0__.findById),\n/* harmony export */   findCourseById: () => (/* reexport safe */ _course_service__WEBPACK_IMPORTED_MODULE_2__.findCourseById),\n/* harmony export */   findLessonById: () => (/* reexport safe */ _lesson_service__WEBPACK_IMPORTED_MODULE_3__.findLessonById),\n/* harmony export */   findMany: () => (/* reexport safe */ _db_service__WEBPACK_IMPORTED_MODULE_0__.findMany),\n/* harmony export */   findOne: () => (/* reexport safe */ _db_service__WEBPACK_IMPORTED_MODULE_0__.findOne),\n/* harmony export */   findUserByEmail: () => (/* reexport safe */ _user_service__WEBPACK_IMPORTED_MODULE_1__.findUserByEmail),\n/* harmony export */   findUserById: () => (/* reexport safe */ _user_service__WEBPACK_IMPORTED_MODULE_1__.findUserById),\n/* harmony export */   getCourses: () => (/* reexport safe */ _course_service__WEBPACK_IMPORTED_MODULE_2__.getCourses),\n/* harmony export */   getEnrolledCourses: () => (/* reexport safe */ _course_service__WEBPACK_IMPORTED_MODULE_2__.getEnrolledCourses),\n/* harmony export */   getLessonsForCourse: () => (/* reexport safe */ _lesson_service__WEBPACK_IMPORTED_MODULE_3__.getLessonsForCourse),\n/* harmony export */   getUsers: () => (/* reexport safe */ _user_service__WEBPACK_IMPORTED_MODULE_1__.getUsers),\n/* harmony export */   reorderLessons: () => (/* reexport safe */ _lesson_service__WEBPACK_IMPORTED_MODULE_3__.reorderLessons),\n/* harmony export */   unenrollStudent: () => (/* reexport safe */ _course_service__WEBPACK_IMPORTED_MODULE_2__.unenrollStudent),\n/* harmony export */   updateCourse: () => (/* reexport safe */ _course_service__WEBPACK_IMPORTED_MODULE_2__.updateCourse),\n/* harmony export */   updateLesson: () => (/* reexport safe */ _lesson_service__WEBPACK_IMPORTED_MODULE_3__.updateLesson),\n/* harmony export */   updateRecord: () => (/* reexport safe */ _db_service__WEBPACK_IMPORTED_MODULE_0__.updateRecord),\n/* harmony export */   updateUser: () => (/* reexport safe */ _user_service__WEBPACK_IMPORTED_MODULE_1__.updateUser),\n/* harmony export */   updateUserLoginInfo: () => (/* reexport safe */ _user_service__WEBPACK_IMPORTED_MODULE_1__.updateUserLoginInfo),\n/* harmony export */   updateUserRole: () => (/* reexport safe */ _user_service__WEBPACK_IMPORTED_MODULE_1__.updateUserRole),\n/* harmony export */   verifyUserCredentials: () => (/* reexport safe */ _user_service__WEBPACK_IMPORTED_MODULE_1__.verifyUserCredentials)\n/* harmony export */ });\n/* harmony import */ var _db_service__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./db-service */ \"(rsc)/./src/lib/db/services/db-service.ts\");\n/* harmony import */ var _user_service__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./user-service */ \"(rsc)/./src/lib/db/services/user-service.ts\");\n/* harmony import */ var _course_service__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./course-service */ \"(rsc)/./src/lib/db/services/course-service.ts\");\n/* harmony import */ var _lesson_service__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./lesson-service */ \"(rsc)/./src/lib/db/services/lesson-service.ts\");\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @prisma/client */ \"@prisma/client\");\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_prisma_client__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony reexport (unknown) */ var __WEBPACK_REEXPORT_OBJECT__ = {};\n/* harmony reexport (unknown) */ for(const __WEBPACK_IMPORT_KEY__ in _prisma_client__WEBPACK_IMPORTED_MODULE_4__) if([\"default\",\"countRecords\",\"createRecord\",\"deleteRecord\",\"executeTransaction\",\"findById\",\"findMany\",\"findOne\",\"updateRecord\",\"createUser\",\"deleteUser\",\"findUserByEmail\",\"findUserById\",\"getUsers\",\"updateUser\",\"updateUserLoginInfo\",\"updateUserRole\",\"verifyUserCredentials\",\"createCourse\",\"deleteCourse\",\"enrollStudent\",\"findCourseById\",\"getCourses\",\"getEnrolledCourses\",\"unenrollStudent\",\"updateCourse\",\"createLesson\",\"deleteLesson\",\"findLessonById\",\"getLessonsForCourse\",\"reorderLessons\",\"updateLesson\"].indexOf(__WEBPACK_IMPORT_KEY__) < 0) __WEBPACK_REEXPORT_OBJECT__[__WEBPACK_IMPORT_KEY__] = () => _prisma_client__WEBPACK_IMPORTED_MODULE_4__[__WEBPACK_IMPORT_KEY__]\n/* harmony reexport (unknown) */ __webpack_require__.d(__webpack_exports__, __WEBPACK_REEXPORT_OBJECT__);\n// Export all database services for easy importing\n\n\n\n\n// Export the types from Prisma for convenience\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL2RiL3NlcnZpY2VzL2luZGV4LnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQSxrREFBa0Q7QUFDckI7QUFDRTtBQUNFO0FBQ0E7QUFFakMsK0NBQStDO0FBQ2hCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vY2hvaWNlLWUtbGVhcm5pbmcvLi9zcmMvbGliL2RiL3NlcnZpY2VzL2luZGV4LnRzPzNkZWIiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gRXhwb3J0IGFsbCBkYXRhYmFzZSBzZXJ2aWNlcyBmb3IgZWFzeSBpbXBvcnRpbmdcbmV4cG9ydCAqIGZyb20gJy4vZGItc2VydmljZSc7XG5leHBvcnQgKiBmcm9tICcuL3VzZXItc2VydmljZSc7XG5leHBvcnQgKiBmcm9tICcuL2NvdXJzZS1zZXJ2aWNlJztcbmV4cG9ydCAqIGZyb20gJy4vbGVzc29uLXNlcnZpY2UnO1xuXG4vLyBFeHBvcnQgdGhlIHR5cGVzIGZyb20gUHJpc21hIGZvciBjb252ZW5pZW5jZVxuZXhwb3J0ICogZnJvbSAnQHByaXNtYS9jbGllbnQnO1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/db/services/index.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/db/services/lesson-service.ts":
/*!***********************************************!*\
  !*** ./src/lib/db/services/lesson-service.ts ***!
  \***********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createLesson: () => (/* binding */ createLesson),\n/* harmony export */   deleteLesson: () => (/* binding */ deleteLesson),\n/* harmony export */   findLessonById: () => (/* binding */ findLessonById),\n/* harmony export */   getLessonsForCourse: () => (/* binding */ getLessonsForCourse),\n/* harmony export */   reorderLessons: () => (/* binding */ reorderLessons),\n/* harmony export */   updateLesson: () => (/* binding */ updateLesson)\n/* harmony export */ });\n/* harmony import */ var private_next_rsc_action_proxy__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! private-next-rsc-action-proxy */ \"(rsc)/./node_modules/next/dist/build/webpack/loaders/next-flight-loader/action-proxy.js\");\n/* harmony import */ var private_next_rsc_action_encryption__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! private-next-rsc-action-encryption */ \"(rsc)/./node_modules/next/dist/server/app-render/action-encryption.js\");\n/* harmony import */ var private_next_rsc_action_encryption__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(private_next_rsc_action_encryption__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _lib_db__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/lib/db */ \"(rsc)/./src/lib/db.ts\");\n/* harmony import */ var private_next_rsc_action_validate__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! private-next-rsc-action-validate */ \"(rsc)/./node_modules/next/dist/build/webpack/loaders/next-flight-loader/action-validate.js\");\n/* __next_internal_action_entry_do_not_use__ {\"1496de900cb7d67993cc7de9afdd5840644ed6a8\":\"findLessonById\",\"7f68ecff25cb5b15592eb33d832fd78ea1bd57d0\":\"reorderLessons\",\"9a7955aaf41dc7e4bc47efd8c78804bed2df2ade\":\"getLessonsForCourse\",\"d8e006a211ca26f5ec769206772f7c4348a73960\":\"createLesson\",\"e182c8a4479eb23905c0c58a77ab7bcd567fce9b\":\"updateLesson\",\"ea42f38b71b48164afed3430306824f4f8780d09\":\"deleteLesson\"} */ \n\n\n/**\n * Find a lesson by ID\n * @param id Lesson ID\n * @param includeCourse Include related course data\n * @returns Lesson object or null if not found\n */ async function findLessonById(id, includeCourse = false) {\n    try {\n        if (!id.match(/^[0-9a-fA-F]{24}$/)) {\n            return null;\n        }\n        return await _lib_db__WEBPACK_IMPORTED_MODULE_2__[\"default\"].lesson.findUnique({\n            where: {\n                id\n            },\n            include: includeCourse ? {\n                course: true\n            } : undefined\n        });\n    } catch (error) {\n        console.error(\"Error finding lesson by ID:\", error);\n        return null;\n    }\n}\n/**\n * Get lessons for a course\n * @param courseId Course ID\n * @returns Array of lessons\n */ async function getLessonsForCourse(courseId) {\n    try {\n        return await _lib_db__WEBPACK_IMPORTED_MODULE_2__[\"default\"].lesson.findMany({\n            where: {\n                courseId\n            },\n            orderBy: {\n                order: \"asc\"\n            }\n        });\n    } catch (error) {\n        console.error(\"Error getting lessons for course:\", error);\n        return [];\n    }\n}\n/**\n * Create a new lesson\n * @param data Lesson data\n * @returns Created lesson or null if creation failed\n */ async function createLesson(data) {\n    try {\n        // If order is not provided, get the highest order and add 1\n        if (!data.order) {\n            const highestOrderLesson = await _lib_db__WEBPACK_IMPORTED_MODULE_2__[\"default\"].lesson.findFirst({\n                where: {\n                    courseId: data.course.connect?.id\n                },\n                orderBy: {\n                    order: \"desc\"\n                }\n            });\n            data.order = highestOrderLesson ? highestOrderLesson.order + 1 : 1;\n        }\n        return await _lib_db__WEBPACK_IMPORTED_MODULE_2__[\"default\"].lesson.create({\n            data\n        });\n    } catch (error) {\n        console.error(\"Error creating lesson:\", error);\n        return null;\n    }\n}\n/**\n * Update lesson data\n * @param id Lesson ID\n * @param data Lesson data to update\n * @returns Updated lesson or null if update failed\n */ async function updateLesson(id, data) {\n    try {\n        return await _lib_db__WEBPACK_IMPORTED_MODULE_2__[\"default\"].lesson.update({\n            where: {\n                id\n            },\n            data\n        });\n    } catch (error) {\n        console.error(\"Error updating lesson:\", error);\n        return null;\n    }\n}\n/**\n * Delete a lesson\n * @param id Lesson ID\n * @returns Deleted lesson or null if deletion failed\n */ async function deleteLesson(id) {\n    try {\n        // Get the lesson to be deleted\n        const lessonToDelete = await _lib_db__WEBPACK_IMPORTED_MODULE_2__[\"default\"].lesson.findUnique({\n            where: {\n                id\n            }\n        });\n        if (!lessonToDelete) {\n            return null;\n        }\n        // Delete the lesson\n        const deletedLesson = await _lib_db__WEBPACK_IMPORTED_MODULE_2__[\"default\"].lesson.delete({\n            where: {\n                id\n            }\n        });\n        // Re-order the remaining lessons\n        await _lib_db__WEBPACK_IMPORTED_MODULE_2__[\"default\"].lesson.updateMany({\n            where: {\n                courseId: lessonToDelete.courseId,\n                order: {\n                    gt: lessonToDelete.order\n                }\n            },\n            data: {\n                order: {\n                    decrement: 1\n                }\n            }\n        });\n        return deletedLesson;\n    } catch (error) {\n        console.error(\"Error deleting lesson:\", error);\n        return null;\n    }\n}\n/**\n * Reorder lessons for a course\n * @param courseId Course ID\n * @param lessonIds Array of lesson IDs in the desired order\n * @returns Success flag\n */ async function reorderLessons(courseId, lessonIds) {\n    try {\n        // Verify all lessons exist and belong to the course\n        const lessons = await _lib_db__WEBPACK_IMPORTED_MODULE_2__[\"default\"].lesson.findMany({\n            where: {\n                courseId,\n                id: {\n                    in: lessonIds\n                }\n            }\n        });\n        if (lessons.length !== lessonIds.length) {\n            console.error(\"Not all lessons exist or belong to the course\");\n            return false;\n        }\n        // Update the order of each lesson\n        await _lib_db__WEBPACK_IMPORTED_MODULE_2__[\"default\"].$transaction(lessonIds.map((lessonId, index)=>_lib_db__WEBPACK_IMPORTED_MODULE_2__[\"default\"].lesson.update({\n                where: {\n                    id: lessonId\n                },\n                data: {\n                    order: index + 1\n                }\n            })));\n        return true;\n    } catch (error) {\n        console.error(\"Error reordering lessons:\", error);\n        return false;\n    }\n}\n\n(0,private_next_rsc_action_validate__WEBPACK_IMPORTED_MODULE_3__.ensureServerEntryExports)([\n    findLessonById,\n    getLessonsForCourse,\n    createLesson,\n    updateLesson,\n    deleteLesson,\n    reorderLessons\n]);\n(0,private_next_rsc_action_proxy__WEBPACK_IMPORTED_MODULE_0__.createActionProxy)(\"1496de900cb7d67993cc7de9afdd5840644ed6a8\", findLessonById);\n(0,private_next_rsc_action_proxy__WEBPACK_IMPORTED_MODULE_0__.createActionProxy)(\"9a7955aaf41dc7e4bc47efd8c78804bed2df2ade\", getLessonsForCourse);\n(0,private_next_rsc_action_proxy__WEBPACK_IMPORTED_MODULE_0__.createActionProxy)(\"d8e006a211ca26f5ec769206772f7c4348a73960\", createLesson);\n(0,private_next_rsc_action_proxy__WEBPACK_IMPORTED_MODULE_0__.createActionProxy)(\"e182c8a4479eb23905c0c58a77ab7bcd567fce9b\", updateLesson);\n(0,private_next_rsc_action_proxy__WEBPACK_IMPORTED_MODULE_0__.createActionProxy)(\"ea42f38b71b48164afed3430306824f4f8780d09\", deleteLesson);\n(0,private_next_rsc_action_proxy__WEBPACK_IMPORTED_MODULE_0__.createActionProxy)(\"7f68ecff25cb5b15592eb33d832fd78ea1bd57d0\", reorderLessons);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL2RiL3NlcnZpY2VzL2xlc3Nvbi1zZXJ2aWNlLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7QUFFOEI7QUFHOUI7Ozs7O0NBS0MsR0FDTSxlQUFlQyxlQUNwQkMsRUFBVSxFQUNWQyxnQkFBeUIsS0FBSztJQUU5QixJQUFJO1FBQ0YsSUFBSSxDQUFDRCxHQUFHRSxLQUFLLENBQUMsc0JBQXNCO1lBQ2xDLE9BQU87UUFDVDtRQUVBLE9BQU8sTUFBTUosc0RBQWEsQ0FBQ00sVUFBVSxDQUFDO1lBQ3BDQyxPQUFPO2dCQUFFTDtZQUFHO1lBQ1pNLFNBQVNMLGdCQUFnQjtnQkFDdkJNLFFBQVE7WUFDVixJQUFJQztRQUNOO0lBQ0YsRUFBRSxPQUFPQyxPQUFPO1FBQ2RDLFFBQVFELEtBQUssQ0FBQywrQkFBK0JBO1FBQzdDLE9BQU87SUFDVDtBQUNGO0FBRUE7Ozs7Q0FJQyxHQUNNLGVBQWVFLG9CQUFvQkMsUUFBZ0I7SUFDeEQsSUFBSTtRQUNGLE9BQU8sTUFBTWQsc0RBQWEsQ0FBQ2UsUUFBUSxDQUFDO1lBQ2xDUixPQUFPO2dCQUFFTztZQUFTO1lBQ2xCRSxTQUFTO2dCQUFFQyxPQUFPO1lBQU07UUFDMUI7SUFDRixFQUFFLE9BQU9OLE9BQU87UUFDZEMsUUFBUUQsS0FBSyxDQUFDLHFDQUFxQ0E7UUFDbkQsT0FBTyxFQUFFO0lBQ1g7QUFDRjtBQUVBOzs7O0NBSUMsR0FDTSxlQUFlTyxhQUFhQyxJQUE4QjtJQUMvRCxJQUFJO1FBQ0YsNERBQTREO1FBQzVELElBQUksQ0FBQ0EsS0FBS0YsS0FBSyxFQUFFO1lBQ2YsTUFBTUcscUJBQXFCLE1BQU1wQixzREFBYSxDQUFDcUIsU0FBUyxDQUFDO2dCQUN2RGQsT0FBTztvQkFBRU8sVUFBVUssS0FBS1YsTUFBTSxDQUFDYSxPQUFPLEVBQUVwQjtnQkFBYTtnQkFDckRjLFNBQVM7b0JBQUVDLE9BQU87Z0JBQU87WUFDM0I7WUFFQUUsS0FBS0YsS0FBSyxHQUFHRyxxQkFBcUJBLG1CQUFtQkgsS0FBSyxHQUFHLElBQUk7UUFDbkU7UUFFQSxPQUFPLE1BQU1qQixzREFBYSxDQUFDdUIsTUFBTSxDQUFDO1lBQ2hDSjtRQUNGO0lBQ0YsRUFBRSxPQUFPUixPQUFPO1FBQ2RDLFFBQVFELEtBQUssQ0FBQywwQkFBMEJBO1FBQ3hDLE9BQU87SUFDVDtBQUNGO0FBRUE7Ozs7O0NBS0MsR0FDTSxlQUFlYSxhQUNwQnRCLEVBQVUsRUFDVmlCLElBQThCO0lBRTlCLElBQUk7UUFDRixPQUFPLE1BQU1uQixzREFBYSxDQUFDeUIsTUFBTSxDQUFDO1lBQ2hDbEIsT0FBTztnQkFBRUw7WUFBRztZQUNaaUI7UUFDRjtJQUNGLEVBQUUsT0FBT1IsT0FBTztRQUNkQyxRQUFRRCxLQUFLLENBQUMsMEJBQTBCQTtRQUN4QyxPQUFPO0lBQ1Q7QUFDRjtBQUVBOzs7O0NBSUMsR0FDTSxlQUFlZSxhQUFheEIsRUFBVTtJQUMzQyxJQUFJO1FBQ0YsK0JBQStCO1FBQy9CLE1BQU15QixpQkFBaUIsTUFBTTNCLHNEQUFhLENBQUNNLFVBQVUsQ0FBQztZQUNwREMsT0FBTztnQkFBRUw7WUFBRztRQUNkO1FBRUEsSUFBSSxDQUFDeUIsZ0JBQWdCO1lBQ25CLE9BQU87UUFDVDtRQUVBLG9CQUFvQjtRQUNwQixNQUFNQyxnQkFBZ0IsTUFBTTVCLHNEQUFhLENBQUM2QixNQUFNLENBQUM7WUFDL0N0QixPQUFPO2dCQUFFTDtZQUFHO1FBQ2Q7UUFFQSxpQ0FBaUM7UUFDakMsTUFBTUYsc0RBQWEsQ0FBQzhCLFVBQVUsQ0FBQztZQUM3QnZCLE9BQU87Z0JBQ0xPLFVBQVVhLGVBQWViLFFBQVE7Z0JBQ2pDRyxPQUFPO29CQUNMYyxJQUFJSixlQUFlVixLQUFLO2dCQUMxQjtZQUNGO1lBQ0FFLE1BQU07Z0JBQ0pGLE9BQU87b0JBQ0xlLFdBQVc7Z0JBQ2I7WUFDRjtRQUNGO1FBRUEsT0FBT0o7SUFDVCxFQUFFLE9BQU9qQixPQUFPO1FBQ2RDLFFBQVFELEtBQUssQ0FBQywwQkFBMEJBO1FBQ3hDLE9BQU87SUFDVDtBQUNGO0FBRUE7Ozs7O0NBS0MsR0FDTSxlQUFlc0IsZUFDcEJuQixRQUFnQixFQUNoQm9CLFNBQW1CO0lBRW5CLElBQUk7UUFDRixvREFBb0Q7UUFDcEQsTUFBTUMsVUFBVSxNQUFNbkMsc0RBQWEsQ0FBQ2UsUUFBUSxDQUFDO1lBQzNDUixPQUFPO2dCQUNMTztnQkFDQVosSUFBSTtvQkFDRmtDLElBQUlGO2dCQUNOO1lBQ0Y7UUFDRjtRQUVBLElBQUlDLFFBQVFFLE1BQU0sS0FBS0gsVUFBVUcsTUFBTSxFQUFFO1lBQ3ZDekIsUUFBUUQsS0FBSyxDQUFDO1lBQ2QsT0FBTztRQUNUO1FBRUEsa0NBQWtDO1FBQ2xDLE1BQU1YLDREQUFtQixDQUN2QmtDLFVBQVVLLEdBQUcsQ0FBQyxDQUFDQyxVQUFVQyxRQUN2QnpDLHNEQUFhLENBQUN5QixNQUFNLENBQUM7Z0JBQ25CbEIsT0FBTztvQkFBRUwsSUFBSXNDO2dCQUFTO2dCQUN0QnJCLE1BQU07b0JBQUVGLE9BQU93QixRQUFRO2dCQUFFO1lBQzNCO1FBSUosT0FBTztJQUNULEVBQUUsT0FBTzlCLE9BQU87UUFDZEMsUUFBUUQsS0FBSyxDQUFDLDZCQUE2QkE7UUFDM0MsT0FBTztJQUNUO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9jaG9pY2UtZS1sZWFybmluZy8uL3NyYy9saWIvZGIvc2VydmljZXMvbGVzc29uLXNlcnZpY2UudHM/ODJlMCJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzZXJ2ZXJcIjtcblxuaW1wb3J0IHByaXNtYSBmcm9tICdAL2xpYi9kYic7XG5pbXBvcnQgeyBMZXNzb24sIFByaXNtYSB9IGZyb20gJ0BwcmlzbWEvY2xpZW50JztcblxuLyoqXG4gKiBGaW5kIGEgbGVzc29uIGJ5IElEXG4gKiBAcGFyYW0gaWQgTGVzc29uIElEXG4gKiBAcGFyYW0gaW5jbHVkZUNvdXJzZSBJbmNsdWRlIHJlbGF0ZWQgY291cnNlIGRhdGFcbiAqIEByZXR1cm5zIExlc3NvbiBvYmplY3Qgb3IgbnVsbCBpZiBub3QgZm91bmRcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGZpbmRMZXNzb25CeUlkKFxuICBpZDogc3RyaW5nLFxuICBpbmNsdWRlQ291cnNlOiBib29sZWFuID0gZmFsc2Vcbik6IFByb21pc2U8TGVzc29uIHwgbnVsbD4ge1xuICB0cnkge1xuICAgIGlmICghaWQubWF0Y2goL15bMC05YS1mQS1GXXsyNH0kLykpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICBcbiAgICByZXR1cm4gYXdhaXQgcHJpc21hLmxlc3Nvbi5maW5kVW5pcXVlKHtcbiAgICAgIHdoZXJlOiB7IGlkIH0sXG4gICAgICBpbmNsdWRlOiBpbmNsdWRlQ291cnNlID8ge1xuICAgICAgICBjb3Vyc2U6IHRydWVcbiAgICAgIH0gOiB1bmRlZmluZWRcbiAgICB9KTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBmaW5kaW5nIGxlc3NvbiBieSBJRDonLCBlcnJvcik7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbn1cblxuLyoqXG4gKiBHZXQgbGVzc29ucyBmb3IgYSBjb3Vyc2VcbiAqIEBwYXJhbSBjb3Vyc2VJZCBDb3Vyc2UgSURcbiAqIEByZXR1cm5zIEFycmF5IG9mIGxlc3NvbnNcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldExlc3NvbnNGb3JDb3Vyc2UoY291cnNlSWQ6IHN0cmluZyk6IFByb21pc2U8TGVzc29uW10+IHtcbiAgdHJ5IHtcbiAgICByZXR1cm4gYXdhaXQgcHJpc21hLmxlc3Nvbi5maW5kTWFueSh7XG4gICAgICB3aGVyZTogeyBjb3Vyc2VJZCB9LFxuICAgICAgb3JkZXJCeTogeyBvcmRlcjogJ2FzYycgfVxuICAgIH0pO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGdldHRpbmcgbGVzc29ucyBmb3IgY291cnNlOicsIGVycm9yKTtcbiAgICByZXR1cm4gW107XG4gIH1cbn1cblxuLyoqXG4gKiBDcmVhdGUgYSBuZXcgbGVzc29uXG4gKiBAcGFyYW0gZGF0YSBMZXNzb24gZGF0YVxuICogQHJldHVybnMgQ3JlYXRlZCBsZXNzb24gb3IgbnVsbCBpZiBjcmVhdGlvbiBmYWlsZWRcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNyZWF0ZUxlc3NvbihkYXRhOiBQcmlzbWEuTGVzc29uQ3JlYXRlSW5wdXQpOiBQcm9taXNlPExlc3NvbiB8IG51bGw+IHtcbiAgdHJ5IHtcbiAgICAvLyBJZiBvcmRlciBpcyBub3QgcHJvdmlkZWQsIGdldCB0aGUgaGlnaGVzdCBvcmRlciBhbmQgYWRkIDFcbiAgICBpZiAoIWRhdGEub3JkZXIpIHtcbiAgICAgIGNvbnN0IGhpZ2hlc3RPcmRlckxlc3NvbiA9IGF3YWl0IHByaXNtYS5sZXNzb24uZmluZEZpcnN0KHtcbiAgICAgICAgd2hlcmU6IHsgY291cnNlSWQ6IGRhdGEuY291cnNlLmNvbm5lY3Q/LmlkIGFzIHN0cmluZyB9LFxuICAgICAgICBvcmRlckJ5OiB7IG9yZGVyOiAnZGVzYycgfVxuICAgICAgfSk7XG4gICAgICBcbiAgICAgIGRhdGEub3JkZXIgPSBoaWdoZXN0T3JkZXJMZXNzb24gPyBoaWdoZXN0T3JkZXJMZXNzb24ub3JkZXIgKyAxIDogMTtcbiAgICB9XG4gICAgXG4gICAgcmV0dXJuIGF3YWl0IHByaXNtYS5sZXNzb24uY3JlYXRlKHtcbiAgICAgIGRhdGFcbiAgICB9KTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBjcmVhdGluZyBsZXNzb246JywgZXJyb3IpO1xuICAgIHJldHVybiBudWxsO1xuICB9XG59XG5cbi8qKlxuICogVXBkYXRlIGxlc3NvbiBkYXRhXG4gKiBAcGFyYW0gaWQgTGVzc29uIElEXG4gKiBAcGFyYW0gZGF0YSBMZXNzb24gZGF0YSB0byB1cGRhdGVcbiAqIEByZXR1cm5zIFVwZGF0ZWQgbGVzc29uIG9yIG51bGwgaWYgdXBkYXRlIGZhaWxlZFxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gdXBkYXRlTGVzc29uKFxuICBpZDogc3RyaW5nLFxuICBkYXRhOiBQcmlzbWEuTGVzc29uVXBkYXRlSW5wdXRcbik6IFByb21pc2U8TGVzc29uIHwgbnVsbD4ge1xuICB0cnkge1xuICAgIHJldHVybiBhd2FpdCBwcmlzbWEubGVzc29uLnVwZGF0ZSh7XG4gICAgICB3aGVyZTogeyBpZCB9LFxuICAgICAgZGF0YVxuICAgIH0pO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHVwZGF0aW5nIGxlc3NvbjonLCBlcnJvcik7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbn1cblxuLyoqXG4gKiBEZWxldGUgYSBsZXNzb25cbiAqIEBwYXJhbSBpZCBMZXNzb24gSURcbiAqIEByZXR1cm5zIERlbGV0ZWQgbGVzc29uIG9yIG51bGwgaWYgZGVsZXRpb24gZmFpbGVkXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBkZWxldGVMZXNzb24oaWQ6IHN0cmluZyk6IFByb21pc2U8TGVzc29uIHwgbnVsbD4ge1xuICB0cnkge1xuICAgIC8vIEdldCB0aGUgbGVzc29uIHRvIGJlIGRlbGV0ZWRcbiAgICBjb25zdCBsZXNzb25Ub0RlbGV0ZSA9IGF3YWl0IHByaXNtYS5sZXNzb24uZmluZFVuaXF1ZSh7XG4gICAgICB3aGVyZTogeyBpZCB9XG4gICAgfSk7XG4gICAgXG4gICAgaWYgKCFsZXNzb25Ub0RlbGV0ZSkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIFxuICAgIC8vIERlbGV0ZSB0aGUgbGVzc29uXG4gICAgY29uc3QgZGVsZXRlZExlc3NvbiA9IGF3YWl0IHByaXNtYS5sZXNzb24uZGVsZXRlKHtcbiAgICAgIHdoZXJlOiB7IGlkIH1cbiAgICB9KTtcbiAgICBcbiAgICAvLyBSZS1vcmRlciB0aGUgcmVtYWluaW5nIGxlc3NvbnNcbiAgICBhd2FpdCBwcmlzbWEubGVzc29uLnVwZGF0ZU1hbnkoe1xuICAgICAgd2hlcmU6IHtcbiAgICAgICAgY291cnNlSWQ6IGxlc3NvblRvRGVsZXRlLmNvdXJzZUlkLFxuICAgICAgICBvcmRlcjoge1xuICAgICAgICAgIGd0OiBsZXNzb25Ub0RlbGV0ZS5vcmRlclxuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgZGF0YToge1xuICAgICAgICBvcmRlcjoge1xuICAgICAgICAgIGRlY3JlbWVudDogMVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSk7XG4gICAgXG4gICAgcmV0dXJuIGRlbGV0ZWRMZXNzb247XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgZGVsZXRpbmcgbGVzc29uOicsIGVycm9yKTtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxufVxuXG4vKipcbiAqIFJlb3JkZXIgbGVzc29ucyBmb3IgYSBjb3Vyc2VcbiAqIEBwYXJhbSBjb3Vyc2VJZCBDb3Vyc2UgSURcbiAqIEBwYXJhbSBsZXNzb25JZHMgQXJyYXkgb2YgbGVzc29uIElEcyBpbiB0aGUgZGVzaXJlZCBvcmRlclxuICogQHJldHVybnMgU3VjY2VzcyBmbGFnXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiByZW9yZGVyTGVzc29ucyhcbiAgY291cnNlSWQ6IHN0cmluZyxcbiAgbGVzc29uSWRzOiBzdHJpbmdbXVxuKTogUHJvbWlzZTxib29sZWFuPiB7XG4gIHRyeSB7XG4gICAgLy8gVmVyaWZ5IGFsbCBsZXNzb25zIGV4aXN0IGFuZCBiZWxvbmcgdG8gdGhlIGNvdXJzZVxuICAgIGNvbnN0IGxlc3NvbnMgPSBhd2FpdCBwcmlzbWEubGVzc29uLmZpbmRNYW55KHtcbiAgICAgIHdoZXJlOiB7XG4gICAgICAgIGNvdXJzZUlkLFxuICAgICAgICBpZDoge1xuICAgICAgICAgIGluOiBsZXNzb25JZHNcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pO1xuICAgIFxuICAgIGlmIChsZXNzb25zLmxlbmd0aCAhPT0gbGVzc29uSWRzLmxlbmd0aCkge1xuICAgICAgY29uc29sZS5lcnJvcignTm90IGFsbCBsZXNzb25zIGV4aXN0IG9yIGJlbG9uZyB0byB0aGUgY291cnNlJyk7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIFxuICAgIC8vIFVwZGF0ZSB0aGUgb3JkZXIgb2YgZWFjaCBsZXNzb25cbiAgICBhd2FpdCBwcmlzbWEuJHRyYW5zYWN0aW9uKFxuICAgICAgbGVzc29uSWRzLm1hcCgobGVzc29uSWQsIGluZGV4KSA9PiBcbiAgICAgICAgcHJpc21hLmxlc3Nvbi51cGRhdGUoe1xuICAgICAgICAgIHdoZXJlOiB7IGlkOiBsZXNzb25JZCB9LFxuICAgICAgICAgIGRhdGE6IHsgb3JkZXI6IGluZGV4ICsgMSB9XG4gICAgICAgIH0pXG4gICAgICApXG4gICAgKTtcbiAgICBcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciByZW9yZGVyaW5nIGxlc3NvbnM6JywgZXJyb3IpO1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxufVxuIl0sIm5hbWVzIjpbInByaXNtYSIsImZpbmRMZXNzb25CeUlkIiwiaWQiLCJpbmNsdWRlQ291cnNlIiwibWF0Y2giLCJsZXNzb24iLCJmaW5kVW5pcXVlIiwid2hlcmUiLCJpbmNsdWRlIiwiY291cnNlIiwidW5kZWZpbmVkIiwiZXJyb3IiLCJjb25zb2xlIiwiZ2V0TGVzc29uc0ZvckNvdXJzZSIsImNvdXJzZUlkIiwiZmluZE1hbnkiLCJvcmRlckJ5Iiwib3JkZXIiLCJjcmVhdGVMZXNzb24iLCJkYXRhIiwiaGlnaGVzdE9yZGVyTGVzc29uIiwiZmluZEZpcnN0IiwiY29ubmVjdCIsImNyZWF0ZSIsInVwZGF0ZUxlc3NvbiIsInVwZGF0ZSIsImRlbGV0ZUxlc3NvbiIsImxlc3NvblRvRGVsZXRlIiwiZGVsZXRlZExlc3NvbiIsImRlbGV0ZSIsInVwZGF0ZU1hbnkiLCJndCIsImRlY3JlbWVudCIsInJlb3JkZXJMZXNzb25zIiwibGVzc29uSWRzIiwibGVzc29ucyIsImluIiwibGVuZ3RoIiwiJHRyYW5zYWN0aW9uIiwibWFwIiwibGVzc29uSWQiLCJpbmRleCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/db/services/lesson-service.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/db/services/user-service.ts":
/*!*********************************************!*\
  !*** ./src/lib/db/services/user-service.ts ***!
  \*********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createUser: () => (/* binding */ createUser),\n/* harmony export */   deleteUser: () => (/* binding */ deleteUser),\n/* harmony export */   findUserByEmail: () => (/* binding */ findUserByEmail),\n/* harmony export */   findUserById: () => (/* binding */ findUserById),\n/* harmony export */   getUsers: () => (/* binding */ getUsers),\n/* harmony export */   updateUser: () => (/* binding */ updateUser),\n/* harmony export */   updateUserLoginInfo: () => (/* binding */ updateUserLoginInfo),\n/* harmony export */   updateUserRole: () => (/* binding */ updateUserRole),\n/* harmony export */   verifyUserCredentials: () => (/* binding */ verifyUserCredentials)\n/* harmony export */ });\n/* harmony import */ var private_next_rsc_action_proxy__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! private-next-rsc-action-proxy */ \"(rsc)/./node_modules/next/dist/build/webpack/loaders/next-flight-loader/action-proxy.js\");\n/* harmony import */ var private_next_rsc_action_encryption__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! private-next-rsc-action-encryption */ \"(rsc)/./node_modules/next/dist/server/app-render/action-encryption.js\");\n/* harmony import */ var private_next_rsc_action_encryption__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(private_next_rsc_action_encryption__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _lib_db__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/lib/db */ \"(rsc)/./src/lib/db.ts\");\n/* harmony import */ var _lib_auth_utils_password_utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/lib/auth/utils/password-utils */ \"(rsc)/./src/lib/auth/utils/password-utils.ts\");\n/* harmony import */ var private_next_rsc_action_validate__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! private-next-rsc-action-validate */ \"(rsc)/./node_modules/next/dist/build/webpack/loaders/next-flight-loader/action-validate.js\");\n/* __next_internal_action_entry_do_not_use__ {\"1a1582b55cd91be6744a06e7e3fd7ceb2909bc9c\":\"updateUser\",\"723b2431e2c142224dc0dca194a97df55ea40acd\":\"createUser\",\"735aa612c19d693c8d5f7a491a0542553d43ab3d\":\"updateUserLoginInfo\",\"8ab13d08030a4222e06e3f5758a98bbc12367141\":\"getUsers\",\"922b99c5f1280253923ffe5863daa571da85e46f\":\"findUserByEmail\",\"bab8ca42c8fcb33ef1d634a3e25c0b1799325298\":\"verifyUserCredentials\",\"dfb0e89cc8e108c0d5772f399be47babbf180620\":\"updateUserRole\",\"f67b323e1c7690143a4725bfd8362c7db359975a\":\"findUserById\",\"f6a00057f2c982dc382072114ff03da222c669a7\":\"deleteUser\"} */ \n\n\n\n/**\n * Find a user by ID\n * @param id User ID\n * @returns User object or null if not found\n */ async function findUserById(id) {\n    try {\n        if (!id.match(/^[0-9a-fA-F]{24}$/)) {\n            return null;\n        }\n        return await _lib_db__WEBPACK_IMPORTED_MODULE_2__[\"default\"].user.findUnique({\n            where: {\n                id\n            }\n        });\n    } catch (error) {\n        console.error(\"Error finding user by ID:\", error);\n        return null;\n    }\n}\n/**\n * Find a user by email\n * @param email User email\n * @returns User object or null if not found\n */ async function findUserByEmail(email) {\n    try {\n        if (!email) return null;\n        return await _lib_db__WEBPACK_IMPORTED_MODULE_2__[\"default\"].user.findUnique({\n            where: {\n                email: email.toLowerCase()\n            }\n        });\n    } catch (error) {\n        console.error(\"Error finding user by email:\", error);\n        return null;\n    }\n}\n/**\n * Create a new user\n * @param userData User data with plaintext password\n * @returns Created user without password or null if creation failed\n */ async function createUser(userData) {\n    try {\n        // Hash the password\n        const hashedPassword = await (0,_lib_auth_utils_password_utils__WEBPACK_IMPORTED_MODULE_3__.hashPassword)(userData.password);\n        // Create the user\n        const user = await _lib_db__WEBPACK_IMPORTED_MODULE_2__[\"default\"].user.create({\n            data: {\n                name: userData.name,\n                email: userData.email.toLowerCase(),\n                password: hashedPassword,\n                role: userData.role || \"student\"\n            }\n        });\n        // Return user without password\n        const { password, ...userWithoutPassword } = user;\n        return userWithoutPassword;\n    } catch (error) {\n        console.error(\"Error creating user:\", error);\n        return null;\n    }\n}\n/**\n * Update user data\n * @param id User ID\n * @param data User data to update\n * @returns Updated user without password or null if update failed\n */ async function updateUser(id, data) {\n    try {\n        // If password is being updated, hash it first\n        if (typeof data.password === \"string\") {\n            data.password = await (0,_lib_auth_utils_password_utils__WEBPACK_IMPORTED_MODULE_3__.hashPassword)(data.password);\n        }\n        const user = await _lib_db__WEBPACK_IMPORTED_MODULE_2__[\"default\"].user.update({\n            where: {\n                id\n            },\n            data\n        });\n        // Return user without password\n        const { password, ...userWithoutPassword } = user;\n        return userWithoutPassword;\n    } catch (error) {\n        console.error(\"Error updating user:\", error);\n        return null;\n    }\n}\n/**\n * Update user role\n * @param id User ID\n * @param role New role\n * @returns Updated user without password or null if update failed\n */ async function updateUserRole(id, role) {\n    try {\n        const user = await _lib_db__WEBPACK_IMPORTED_MODULE_2__[\"default\"].user.update({\n            where: {\n                id\n            },\n            data: {\n                role\n            }\n        });\n        // Return user without password\n        const { password, ...userWithoutPassword } = user;\n        return userWithoutPassword;\n    } catch (error) {\n        console.error(\"Error updating user role:\", error);\n        return null;\n    }\n}\n/**\n * Verify user credentials\n * @param email User email\n * @param password User plaintext password\n * @returns User without password if credentials valid, null otherwise\n */ async function verifyUserCredentials(email, password) {\n    try {\n        // Find user by email\n        const user = await _lib_db__WEBPACK_IMPORTED_MODULE_2__[\"default\"].user.findUnique({\n            where: {\n                email: email.toLowerCase()\n            }\n        });\n        if (!user) return null;\n        // Verify password\n        const isPasswordValid = await (0,_lib_auth_utils_password_utils__WEBPACK_IMPORTED_MODULE_3__.comparePasswords)(password, user.password);\n        if (!isPasswordValid) return null;\n        // Return user without password\n        const { password: _, ...userWithoutPassword } = user;\n        return userWithoutPassword;\n    } catch (error) {\n        console.error(\"Error verifying credentials:\", error);\n        return null;\n    }\n}\n/**\n * Get users with pagination\n * @param page Page number (1-based)\n * @param pageSize Page size\n * @param whereClause Optional filter criteria\n * @returns Paginated users without passwords\n */ async function getUsers(page = 1, pageSize = 10, whereClause = {}) {\n    try {\n        // Ensure page and pageSize are valid\n        page = Math.max(1, page);\n        pageSize = Math.max(1, Math.min(100, pageSize));\n        // Get total count\n        const total = await _lib_db__WEBPACK_IMPORTED_MODULE_2__[\"default\"].user.count({\n            where: whereClause\n        });\n        // Calculate total pages\n        const pages = Math.ceil(total / pageSize);\n        // Get users for the requested page\n        const users = await _lib_db__WEBPACK_IMPORTED_MODULE_2__[\"default\"].user.findMany({\n            where: whereClause,\n            skip: (page - 1) * pageSize,\n            take: pageSize,\n            orderBy: {\n                createdAt: \"desc\"\n            }\n        });\n        // Remove passwords\n        const usersWithoutPasswords = users.map((user)=>{\n            const { password, ...rest } = user;\n            return rest;\n        });\n        return {\n            users: usersWithoutPasswords,\n            total,\n            pages\n        };\n    } catch (error) {\n        console.error(\"Error getting users:\", error);\n        return {\n            users: [],\n            total: 0,\n            pages: 0\n        };\n    }\n}\n/**\n * Update user's last login and login history\n * @param id User ID\n * @returns Success flag\n */ async function updateUserLoginInfo(id) {\n    try {\n        const now = new Date();\n        await _lib_db__WEBPACK_IMPORTED_MODULE_2__[\"default\"].user.update({\n            where: {\n                id\n            },\n            data: {\n                updatedAt: now\n            }\n        });\n        return true;\n    } catch (error) {\n        console.error(\"Error updating login info:\", error);\n        return false;\n    }\n}\n/**\n * Delete a user\n * @param id User ID\n * @returns Deleted user without password or null if deletion failed\n */ async function deleteUser(id) {\n    try {\n        const user = await _lib_db__WEBPACK_IMPORTED_MODULE_2__[\"default\"].user.delete({\n            where: {\n                id\n            }\n        });\n        // Return user without password\n        const { password, ...userWithoutPassword } = user;\n        return userWithoutPassword;\n    } catch (error) {\n        console.error(\"Error deleting user:\", error);\n        return null;\n    }\n}\n\n(0,private_next_rsc_action_validate__WEBPACK_IMPORTED_MODULE_4__.ensureServerEntryExports)([\n    findUserById,\n    findUserByEmail,\n    createUser,\n    updateUser,\n    updateUserRole,\n    verifyUserCredentials,\n    getUsers,\n    updateUserLoginInfo,\n    deleteUser\n]);\n(0,private_next_rsc_action_proxy__WEBPACK_IMPORTED_MODULE_0__.createActionProxy)(\"f67b323e1c7690143a4725bfd8362c7db359975a\", findUserById);\n(0,private_next_rsc_action_proxy__WEBPACK_IMPORTED_MODULE_0__.createActionProxy)(\"922b99c5f1280253923ffe5863daa571da85e46f\", findUserByEmail);\n(0,private_next_rsc_action_proxy__WEBPACK_IMPORTED_MODULE_0__.createActionProxy)(\"723b2431e2c142224dc0dca194a97df55ea40acd\", createUser);\n(0,private_next_rsc_action_proxy__WEBPACK_IMPORTED_MODULE_0__.createActionProxy)(\"1a1582b55cd91be6744a06e7e3fd7ceb2909bc9c\", updateUser);\n(0,private_next_rsc_action_proxy__WEBPACK_IMPORTED_MODULE_0__.createActionProxy)(\"dfb0e89cc8e108c0d5772f399be47babbf180620\", updateUserRole);\n(0,private_next_rsc_action_proxy__WEBPACK_IMPORTED_MODULE_0__.createActionProxy)(\"bab8ca42c8fcb33ef1d634a3e25c0b1799325298\", verifyUserCredentials);\n(0,private_next_rsc_action_proxy__WEBPACK_IMPORTED_MODULE_0__.createActionProxy)(\"8ab13d08030a4222e06e3f5758a98bbc12367141\", getUsers);\n(0,private_next_rsc_action_proxy__WEBPACK_IMPORTED_MODULE_0__.createActionProxy)(\"735aa612c19d693c8d5f7a491a0542553d43ab3d\", updateUserLoginInfo);\n(0,private_next_rsc_action_proxy__WEBPACK_IMPORTED_MODULE_0__.createActionProxy)(\"f6a00057f2c982dc382072114ff03da222c669a7\", deleteUser);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL2RiL3NlcnZpY2VzL3VzZXItc2VydmljZS50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUU4QjtBQUVtRDtBQUdqRjs7OztDQUlDLEdBQ00sZUFBZUcsYUFBYUMsRUFBVTtJQUMzQyxJQUFJO1FBQ0YsSUFBSSxDQUFDQSxHQUFHQyxLQUFLLENBQUMsc0JBQXNCO1lBQ2xDLE9BQU87UUFDVDtRQUVBLE9BQU8sTUFBTUwsb0RBQVcsQ0FBQ08sVUFBVSxDQUFDO1lBQ2xDQyxPQUFPO2dCQUFFSjtZQUFHO1FBQ2Q7SUFDRixFQUFFLE9BQU9LLE9BQU87UUFDZEMsUUFBUUQsS0FBSyxDQUFDLDZCQUE2QkE7UUFDM0MsT0FBTztJQUNUO0FBQ0Y7QUFFQTs7OztDQUlDLEdBQ00sZUFBZUUsZ0JBQWdCQyxLQUFhO0lBQ2pELElBQUk7UUFDRixJQUFJLENBQUNBLE9BQU8sT0FBTztRQUVuQixPQUFPLE1BQU1aLG9EQUFXLENBQUNPLFVBQVUsQ0FBQztZQUNsQ0MsT0FBTztnQkFBRUksT0FBT0EsTUFBTUMsV0FBVztZQUFHO1FBQ3RDO0lBQ0YsRUFBRSxPQUFPSixPQUFPO1FBQ2RDLFFBQVFELEtBQUssQ0FBQyxnQ0FBZ0NBO1FBQzlDLE9BQU87SUFDVDtBQUNGO0FBRUE7Ozs7Q0FJQyxHQUNNLGVBQWVLLFdBQVdDLFFBQTJCO0lBQzFELElBQUk7UUFDRixvQkFBb0I7UUFDcEIsTUFBTUMsaUJBQWlCLE1BQU1mLDRFQUFZQSxDQUFDYyxTQUFTRSxRQUFRO1FBRTNELGtCQUFrQjtRQUNsQixNQUFNWCxPQUFPLE1BQU1OLG9EQUFXLENBQUNrQixNQUFNLENBQUM7WUFDcENDLE1BQU07Z0JBQ0pDLE1BQU1MLFNBQVNLLElBQUk7Z0JBQ25CUixPQUFPRyxTQUFTSCxLQUFLLENBQUNDLFdBQVc7Z0JBQ2pDSSxVQUFVRDtnQkFDVkssTUFBTU4sU0FBU00sSUFBSSxJQUFJO1lBQ3pCO1FBQ0Y7UUFFQSwrQkFBK0I7UUFDL0IsTUFBTSxF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QUFBO1lBQ3RDLE1BQU0sRUFBRVcsUUFBUSxFQUFFLEdBQUcrQixNQUFNLEdBQUcxQztZQUM5QixPQUFPMEM7UUFDVDtRQUVBLE9BQU87WUFDTFIsT0FBT007WUFDUFY7WUFDQUU7UUFDRjtJQUNGLEVBQUUsT0FBTzdCLE9BQU87UUFDZEMsUUFBUUQsS0FBSyxDQUFDLHdCQUF3QkE7UUFDdEMsT0FBTztZQUNMK0IsT0FBTyxFQUFFO1lBQ1RKLE9BQU87WUFDUEUsT0FBTztRQUNUO0lBQ0Y7QUFDRjtBQUVBOzs7O0NBSUMsR0FDTSxlQUFlVyxvQkFBb0I3QyxFQUFVO0lBQ2xELElBQUk7UUFDRixNQUFNOEMsTUFBTSxJQUFJQztRQUVoQixNQUFNbkQsb0RBQVcsQ0FBQ3dCLE1BQU0sQ0FBQztZQUN2QmhCLE9BQU87Z0JBQUVKO1lBQUc7WUFDWmUsTUFBTTtnQkFDSmlDLFdBQVdGO1lBR2I7UUFDRjtRQUVBLE9BQU87SUFDVCxFQUFFLE9BQU96QyxPQUFPO1FBQ2RDLFFBQVFELEtBQUssQ0FBQyw4QkFBOEJBO1FBQzVDLE9BQU87SUFDVDtBQUNGO0FBRUE7Ozs7Q0FJQyxHQUNNLGVBQWU0QyxXQUFXakQsRUFBVTtJQUN6QyxJQUFJO1FBQ0YsTUFBTUUsT0FBTyxNQUFNTixvREFBVyxDQUFDc0QsTUFBTSxDQUFDO1lBQ3BDOUMsT0FBTztnQkFBRUo7WUFBRztRQUNkO1FBRUEsK0JBQStCO1FBQy9CLE1BQU0sRUFBRWEsUUFBUSxFQUFFLEdBQUdLLHFCQUFxQixHQUFHaEI7UUFDN0MsT0FBT2dCO0lBQ1QsRUFBRSxPQUFPYixPQUFPO1FBQ2RDLFFBQVFELEtBQUssQ0FBQyx3QkFBd0JBO1FBQ3RDLE9BQU87SUFDVDtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vY2hvaWNlLWUtbGVhcm5pbmcvLi9zcmMvbGliL2RiL3NlcnZpY2VzL3VzZXItc2VydmljZS50cz8wMmQ4Il0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHNlcnZlclwiO1xuXG5pbXBvcnQgcHJpc21hIGZyb20gJ0AvbGliL2RiJztcbmltcG9ydCB7IFVzZXIsIFByaXNtYSB9IGZyb20gJ0BwcmlzbWEvY2xpZW50JztcbmltcG9ydCB7IGhhc2hQYXNzd29yZCwgY29tcGFyZVBhc3N3b3JkcyB9IGZyb20gJ0AvbGliL2F1dGgvdXRpbHMvcGFzc3dvcmQtdXRpbHMnO1xuaW1wb3J0IHsgQ3JlYXRlVXNlclJlcXVlc3QgfSBmcm9tICdAL3R5cGVzL3VzZXInO1xuXG4vKipcbiAqIEZpbmQgYSB1c2VyIGJ5IElEXG4gKiBAcGFyYW0gaWQgVXNlciBJRFxuICogQHJldHVybnMgVXNlciBvYmplY3Qgb3IgbnVsbCBpZiBub3QgZm91bmRcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGZpbmRVc2VyQnlJZChpZDogc3RyaW5nKTogUHJvbWlzZTxVc2VyIHwgbnVsbD4ge1xuICB0cnkge1xuICAgIGlmICghaWQubWF0Y2goL15bMC05YS1mQS1GXXsyNH0kLykpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICBcbiAgICByZXR1cm4gYXdhaXQgcHJpc21hLnVzZXIuZmluZFVuaXF1ZSh7XG4gICAgICB3aGVyZTogeyBpZCB9XG4gICAgfSk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgZmluZGluZyB1c2VyIGJ5IElEOicsIGVycm9yKTtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxufVxuXG4vKipcbiAqIEZpbmQgYSB1c2VyIGJ5IGVtYWlsXG4gKiBAcGFyYW0gZW1haWwgVXNlciBlbWFpbFxuICogQHJldHVybnMgVXNlciBvYmplY3Qgb3IgbnVsbCBpZiBub3QgZm91bmRcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGZpbmRVc2VyQnlFbWFpbChlbWFpbDogc3RyaW5nKTogUHJvbWlzZTxVc2VyIHwgbnVsbD4ge1xuICB0cnkge1xuICAgIGlmICghZW1haWwpIHJldHVybiBudWxsO1xuICAgIFxuICAgIHJldHVybiBhd2FpdCBwcmlzbWEudXNlci5maW5kVW5pcXVlKHtcbiAgICAgIHdoZXJlOiB7IGVtYWlsOiBlbWFpbC50b0xvd2VyQ2FzZSgpIH1cbiAgICB9KTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBmaW5kaW5nIHVzZXIgYnkgZW1haWw6JywgZXJyb3IpO1xuICAgIHJldHVybiBudWxsO1xuICB9XG59XG5cbi8qKlxuICogQ3JlYXRlIGEgbmV3IHVzZXJcbiAqIEBwYXJhbSB1c2VyRGF0YSBVc2VyIGRhdGEgd2l0aCBwbGFpbnRleHQgcGFzc3dvcmRcbiAqIEByZXR1cm5zIENyZWF0ZWQgdXNlciB3aXRob3V0IHBhc3N3b3JkIG9yIG51bGwgaWYgY3JlYXRpb24gZmFpbGVkXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjcmVhdGVVc2VyKHVzZXJEYXRhOiBDcmVhdGVVc2VyUmVxdWVzdCk6IFByb21pc2U8T21pdDxVc2VyLCAncGFzc3dvcmQnPiB8IG51bGw+IHtcbiAgdHJ5IHtcbiAgICAvLyBIYXNoIHRoZSBwYXNzd29yZFxuICAgIGNvbnN0IGhhc2hlZFBhc3N3b3JkID0gYXdhaXQgaGFzaFBhc3N3b3JkKHVzZXJEYXRhLnBhc3N3b3JkKTtcbiAgICBcbiAgICAvLyBDcmVhdGUgdGhlIHVzZXJcbiAgICBjb25zdCB1c2VyID0gYXdhaXQgcHJpc21hLnVzZXIuY3JlYXRlKHtcbiAgICAgIGRhdGE6IHtcbiAgICAgICAgbmFtZTogdXNlckRhdGEubmFtZSxcbiAgICAgICAgZW1haWw6IHVzZXJEYXRhLmVtYWlsLnRvTG93ZXJDYXNlKCksXG4gICAgICAgIHBhc3N3b3JkOiBoYXNoZWRQYXNzd29yZCxcbiAgICAgICAgcm9sZTogdXNlckRhdGEucm9sZSB8fCAnc3R1ZGVudCcsXG4gICAgICB9XG4gICAgfSk7XG4gICAgXG4gICAgLy8gUmV0dXJuIHVzZXIgd2l0aG91dCBwYXNzd29yZFxuICAgIGNvbnN0IHsgcGFzc3dvcmQsIC4uLnVzZXJXaXRob3V0UGFzc3dvcmQgfSA9IHVzZXI7XG4gICAgcmV0dXJuIHVzZXJXaXRob3V0UGFzc3dvcmQ7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgY3JlYXRpbmcgdXNlcjonLCBlcnJvcik7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbn1cblxuLyoqXG4gKiBVcGRhdGUgdXNlciBkYXRhXG4gKiBAcGFyYW0gaWQgVXNlciBJRFxuICogQHBhcmFtIGRhdGEgVXNlciBkYXRhIHRvIHVwZGF0ZVxuICogQHJldHVybnMgVXBkYXRlZCB1c2VyIHdpdGhvdXQgcGFzc3dvcmQgb3IgbnVsbCBpZiB1cGRhdGUgZmFpbGVkXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiB1cGRhdGVVc2VyKFxuICBpZDogc3RyaW5nLCBcbiAgZGF0YTogUHJpc21hLlVzZXJVcGRhdGVJbnB1dFxuKTogUHJvbWlzZTxPbWl0PFVzZXIsICdwYXNzd29yZCc+IHwgbnVsbD4ge1xuICB0cnkge1xuICAgIC8vIElmIHBhc3N3b3JkIGlzIGJlaW5nIHVwZGF0ZWQsIGhhc2ggaXQgZmlyc3RcbiAgICBpZiAodHlwZW9mIGRhdGEucGFzc3dvcmQgPT09ICdzdHJpbmcnKSB7XG4gICAgICBkYXRhLnBhc3N3b3JkID0gYXdhaXQgaGFzaFBhc3N3b3JkKGRhdGEucGFzc3dvcmQpO1xuICAgIH1cbiAgICBcbiAgICBjb25zdCB1c2VyID0gYXdhaXQgcHJpc21hLnVzZXIudXBkYXRlKHtcbiAgICAgIHdoZXJlOiB7IGlkIH0sXG4gICAgICBkYXRhXG4gICAgfSk7XG4gICAgXG4gICAgLy8gUmV0dXJuIHVzZXIgd2l0aG91dCBwYXNzd29yZFxuICAgIGNvbnN0IHsgcGFzc3dvcmQsIC4uLnVzZXJXaXRob3V0UGFzc3dvcmQgfSA9IHVzZXI7XG4gICAgcmV0dXJuIHVzZXJXaXRob3V0UGFzc3dvcmQ7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgdXBkYXRpbmcgdXNlcjonLCBlcnJvcik7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbn1cblxuLyoqXG4gKiBVcGRhdGUgdXNlciByb2xlXG4gKiBAcGFyYW0gaWQgVXNlciBJRFxuICogQHBhcmFtIHJvbGUgTmV3IHJvbGVcbiAqIEByZXR1cm5zIFVwZGF0ZWQgdXNlciB3aXRob3V0IHBhc3N3b3JkIG9yIG51bGwgaWYgdXBkYXRlIGZhaWxlZFxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gdXBkYXRlVXNlclJvbGUoXG4gIGlkOiBzdHJpbmcsIFxuICByb2xlOiAnc3R1ZGVudCcgfCAnYWRtaW4nXG4pOiBQcm9taXNlPE9taXQ8VXNlciwgJ3Bhc3N3b3JkJz4gfCBudWxsPiB7XG4gIHRyeSB7XG4gICAgY29uc3QgdXNlciA9IGF3YWl0IHByaXNtYS51c2VyLnVwZGF0ZSh7XG4gICAgICB3aGVyZTogeyBpZCB9LFxuICAgICAgZGF0YTogeyByb2xlIH1cbiAgICB9KTtcbiAgICBcbiAgICAvLyBSZXR1cm4gdXNlciB3aXRob3V0IHBhc3N3b3JkXG4gICAgY29uc3QgeyBwYXNzd29yZCwgLi4udXNlcldpdGhvdXRQYXNzd29yZCB9ID0gdXNlcjtcbiAgICByZXR1cm4gdXNlcldpdGhvdXRQYXNzd29yZDtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciB1cGRhdGluZyB1c2VyIHJvbGU6JywgZXJyb3IpO1xuICAgIHJldHVybiBudWxsO1xuICB9XG59XG5cbi8qKlxuICogVmVyaWZ5IHVzZXIgY3JlZGVudGlhbHNcbiAqIEBwYXJhbSBlbWFpbCBVc2VyIGVtYWlsXG4gKiBAcGFyYW0gcGFzc3dvcmQgVXNlciBwbGFpbnRleHQgcGFzc3dvcmRcbiAqIEByZXR1cm5zIFVzZXIgd2l0aG91dCBwYXNzd29yZCBpZiBjcmVkZW50aWFscyB2YWxpZCwgbnVsbCBvdGhlcndpc2VcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHZlcmlmeVVzZXJDcmVkZW50aWFscyhcbiAgZW1haWw6IHN0cmluZywgXG4gIHBhc3N3b3JkOiBzdHJpbmdcbik6IFByb21pc2U8T21pdDxVc2VyLCAncGFzc3dvcmQnPiB8IG51bGw+IHtcbiAgdHJ5IHtcbiAgICAvLyBGaW5kIHVzZXIgYnkgZW1haWxcbiAgICBjb25zdCB1c2VyID0gYXdhaXQgcHJpc21hLnVzZXIuZmluZFVuaXF1ZSh7XG4gICAgICB3aGVyZTogeyBlbWFpbDogZW1haWwudG9Mb3dlckNhc2UoKSB9XG4gICAgfSk7XG4gICAgXG4gICAgaWYgKCF1c2VyKSByZXR1cm4gbnVsbDtcbiAgICBcbiAgICAvLyBWZXJpZnkgcGFzc3dvcmRcbiAgICBjb25zdCBpc1Bhc3N3b3JkVmFsaWQgPSBhd2FpdCBjb21wYXJlUGFzc3dvcmRzKHBhc3N3b3JkLCB1c2VyLnBhc3N3b3JkKTtcbiAgICBpZiAoIWlzUGFzc3dvcmRWYWxpZCkgcmV0dXJuIG51bGw7XG4gICAgXG4gICAgLy8gUmV0dXJuIHVzZXIgd2l0aG91dCBwYXNzd29yZFxuICAgIGNvbnN0IHsgcGFzc3dvcmQ6IF8sIC4uLnVzZXJXaXRob3V0UGFzc3dvcmQgfSA9IHVzZXI7XG4gICAgcmV0dXJuIHVzZXJXaXRob3V0UGFzc3dvcmQ7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgdmVyaWZ5aW5nIGNyZWRlbnRpYWxzOicsIGVycm9yKTtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxufVxuXG4vKipcbiAqIEdldCB1c2VycyB3aXRoIHBhZ2luYXRpb25cbiAqIEBwYXJhbSBwYWdlIFBhZ2UgbnVtYmVyICgxLWJhc2VkKVxuICogQHBhcmFtIHBhZ2VTaXplIFBhZ2Ugc2l6ZVxuICogQHBhcmFtIHdoZXJlQ2xhdXNlIE9wdGlvbmFsIGZpbHRlciBjcml0ZXJpYVxuICogQHJldHVybnMgUGFnaW5hdGVkIHVzZXJzIHdpdGhvdXQgcGFzc3dvcmRzXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRVc2VycyhcbiAgcGFnZTogbnVtYmVyID0gMSwgXG4gIHBhZ2VTaXplOiBudW1iZXIgPSAxMCxcbiAgd2hlcmVDbGF1c2U6IFByaXNtYS5Vc2VyV2hlcmVJbnB1dCA9IHt9XG4pOiBQcm9taXNlPHtcbiAgdXNlcnM6IE9taXQ8VXNlciwgJ3Bhc3N3b3JkJz5bXTtcbiAgdG90YWw6IG51bWJlcjtcbiAgcGFnZXM6IG51bWJlcjtcbn0+IHtcbiAgdHJ5IHtcbiAgICAvLyBFbnN1cmUgcGFnZSBhbmQgcGFnZVNpemUgYXJlIHZhbGlkXG4gICAgcGFnZSA9IE1hdGgubWF4KDEsIHBhZ2UpO1xuICAgIHBhZ2VTaXplID0gTWF0aC5tYXgoMSwgTWF0aC5taW4oMTAwLCBwYWdlU2l6ZSkpO1xuICAgIFxuICAgIC8vIEdldCB0b3RhbCBjb3VudFxuICAgIGNvbnN0IHRvdGFsID0gYXdhaXQgcHJpc21hLnVzZXIuY291bnQoe1xuICAgICAgd2hlcmU6IHdoZXJlQ2xhdXNlXG4gICAgfSk7XG4gICAgXG4gICAgLy8gQ2FsY3VsYXRlIHRvdGFsIHBhZ2VzXG4gICAgY29uc3QgcGFnZXMgPSBNYXRoLmNlaWwodG90YWwgLyBwYWdlU2l6ZSk7XG4gICAgXG4gICAgLy8gR2V0IHVzZXJzIGZvciB0aGUgcmVxdWVzdGVkIHBhZ2VcbiAgICBjb25zdCB1c2VycyA9IGF3YWl0IHByaXNtYS51c2VyLmZpbmRNYW55KHtcbiAgICAgIHdoZXJlOiB3aGVyZUNsYXVzZSxcbiAgICAgIHNraXA6IChwYWdlIC0gMSkgKiBwYWdlU2l6ZSxcbiAgICAgIHRha2U6IHBhZ2VTaXplLFxuICAgICAgb3JkZXJCeTogeyBjcmVhdGVkQXQ6ICdkZXNjJyB9XG4gICAgfSk7XG4gICAgXG4gICAgLy8gUmVtb3ZlIHBhc3N3b3Jkc1xuICAgIGNvbnN0IHVzZXJzV2l0aG91dFBhc3N3b3JkcyA9IHVzZXJzLm1hcCh1c2VyID0+IHtcbiAgICAgIGNvbnN0IHsgcGFzc3dvcmQsIC4uLnJlc3QgfSA9IHVzZXI7XG4gICAgICByZXR1cm4gcmVzdDtcbiAgICB9KTtcbiAgICBcbiAgICByZXR1cm4ge1xuICAgICAgdXNlcnM6IHVzZXJzV2l0aG91dFBhc3N3b3JkcyxcbiAgICAgIHRvdGFsLFxuICAgICAgcGFnZXNcbiAgICB9O1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGdldHRpbmcgdXNlcnM6JywgZXJyb3IpO1xuICAgIHJldHVybiB7XG4gICAgICB1c2VyczogW10sXG4gICAgICB0b3RhbDogMCxcbiAgICAgIHBhZ2VzOiAwXG4gICAgfTtcbiAgfVxufVxuXG4vKipcbiAqIFVwZGF0ZSB1c2VyJ3MgbGFzdCBsb2dpbiBhbmQgbG9naW4gaGlzdG9yeVxuICogQHBhcmFtIGlkIFVzZXIgSURcbiAqIEByZXR1cm5zIFN1Y2Nlc3MgZmxhZ1xuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gdXBkYXRlVXNlckxvZ2luSW5mbyhpZDogc3RyaW5nKTogUHJvbWlzZTxib29sZWFuPiB7XG4gIHRyeSB7XG4gICAgY29uc3Qgbm93ID0gbmV3IERhdGUoKTtcbiAgICBcbiAgICBhd2FpdCBwcmlzbWEudXNlci51cGRhdGUoe1xuICAgICAgd2hlcmU6IHsgaWQgfSxcbiAgICAgIGRhdGE6IHtcbiAgICAgICAgdXBkYXRlZEF0OiBub3dcbiAgICAgICAgLy8gTm90ZTogVGhlIGxvZ2luSGlzdG9yeSBmaWVsZCBpcyBub3QgcGFydCBvZiB0aGUgUHJpc21hIHNjaGVtYVxuICAgICAgICAvLyBXZSB3b3VsZCBuZWVkIHRvIGFkZCBpdCB0byB0aGUgc2NoZW1hIGlmIG5lZWRlZFxuICAgICAgfVxuICAgIH0pO1xuICAgIFxuICAgIHJldHVybiB0cnVlO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHVwZGF0aW5nIGxvZ2luIGluZm86JywgZXJyb3IpO1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxufVxuXG4vKipcbiAqIERlbGV0ZSBhIHVzZXJcbiAqIEBwYXJhbSBpZCBVc2VyIElEXG4gKiBAcmV0dXJucyBEZWxldGVkIHVzZXIgd2l0aG91dCBwYXNzd29yZCBvciBudWxsIGlmIGRlbGV0aW9uIGZhaWxlZFxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZGVsZXRlVXNlcihpZDogc3RyaW5nKTogUHJvbWlzZTxPbWl0PFVzZXIsICdwYXNzd29yZCc+IHwgbnVsbD4ge1xuICB0cnkge1xuICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBwcmlzbWEudXNlci5kZWxldGUoe1xuICAgICAgd2hlcmU6IHsgaWQgfVxuICAgIH0pO1xuICAgIFxuICAgIC8vIFJldHVybiB1c2VyIHdpdGhvdXQgcGFzc3dvcmRcbiAgICBjb25zdCB7IHBhc3N3b3JkLCAuLi51c2VyV2l0aG91dFBhc3N3b3JkIH0gPSB1c2VyO1xuICAgIHJldHVybiB1c2VyV2l0aG91dFBhc3N3b3JkO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGRlbGV0aW5nIHVzZXI6JywgZXJyb3IpO1xuICAgIHJldHVybiBudWxsO1xuICB9XG59XG4iXSwibmFtZXMiOlsicHJpc21hIiwiaGFzaFBhc3N3b3JkIiwiY29tcGFyZVBhc3N3b3JkcyIsImZpbmRVc2VyQnlJZCIsImlkIiwibWF0Y2giLCJ1c2VyIiwiZmluZFVuaXF1ZSIsIndoZXJlIiwiZXJyb3IiLCJjb25zb2xlIiwiZmluZFVzZXJCeUVtYWlsIiwiZW1haWwiLCJ0b0xvd2VyQ2FzZSIsImNyZWF0ZVVzZXIiLCJ1c2VyRGF0YSIsImhhc2hlZFBhc3N3b3JkIiwicGFzc3dvcmQiLCJjcmVhdGUiLCJkYXRhIiwibmFtZSIsInJvbGUiLCJ1c2VyV2l0aG91dFBhc3N3b3JkIiwidXBkYXRlVXNlciIsInVwZGF0ZSIsInVwZGF0ZVVzZXJSb2xlIiwidmVyaWZ5VXNlckNyZWRlbnRpYWxzIiwiaXNQYXNzd29yZFZhbGlkIiwiXyIsImdldFVzZXJzIiwicGFnZSIsInBhZ2VTaXplIiwid2hlcmVDbGF1c2UiLCJNYXRoIiwibWF4IiwibWluIiwidG90YWwiLCJjb3VudCIsInBhZ2VzIiwiY2VpbCIsInVzZXJzIiwiZmluZE1hbnkiLCJza2lwIiwidGFrZSIsIm9yZGVyQnkiLCJjcmVhdGVkQXQiLCJ1c2Vyc1dpdGhvdXRQYXNzd29yZHMiLCJtYXAiLCJyZXN0IiwidXBkYXRlVXNlckxvZ2luSW5mbyIsIm5vdyIsIkRhdGUiLCJ1cGRhdGVkQXQiLCJkZWxldGVVc2VyIiwiZGVsZXRlIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/db/services/user-service.ts\n");

/***/ }),

/***/ "(rsc)/./src/services/achievements.ts":
/*!**************************************!*\
  !*** ./src/services/achievements.ts ***!
  \**************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   checkAndAwardAchievements: () => (/* binding */ checkAndAwardAchievements),\n/* harmony export */   createAchievement: () => (/* binding */ createAchievement),\n/* harmony export */   getUserAchievements: () => (/* binding */ getUserAchievements)\n/* harmony export */ });\n/* harmony import */ var private_next_rsc_action_proxy__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! private-next-rsc-action-proxy */ \"(rsc)/./node_modules/next/dist/build/webpack/loaders/next-flight-loader/action-proxy.js\");\n/* harmony import */ var private_next_rsc_action_encryption__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! private-next-rsc-action-encryption */ \"(rsc)/./node_modules/next/dist/server/app-render/action-encryption.js\");\n/* harmony import */ var private_next_rsc_action_encryption__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(private_next_rsc_action_encryption__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _lib_db__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/lib/db */ \"(rsc)/./src/lib/db.ts\");\n/* harmony import */ var _lib_db_prisma_helper__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/lib/db/prisma-helper */ \"(rsc)/./src/lib/db/prisma-helper.ts\");\n/* harmony import */ var _types_achievement__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @/types/achievement */ \"(rsc)/./src/types/achievement/index.ts\");\n/* harmony import */ var private_next_rsc_action_validate__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! private-next-rsc-action-validate */ \"(rsc)/./node_modules/next/dist/build/webpack/loaders/next-flight-loader/action-validate.js\");\n/* __next_internal_action_entry_do_not_use__ {\"346d3948bb54496414ac11ffe007a95bcc0ada67\":\"getUserAchievements\",\"bc267e40bccb015e6b0a6920c9226658810c2a22\":\"checkAndAwardAchievements\",\"d19bb8b7980f79348c3a6a62c6c3b436873341b7\":\"createAchievement\"} */ \n\n\n\n\n/**\n * Get all achievements for a user\n */ async function getUserAchievements(userId) {\n    try {\n        if (!userId) {\n            console.warn(\"getUserAchievements called with empty userId\");\n            return [];\n        }\n        // Use safeFindMany instead of direct prisma call\n        const achievements = await (0,_lib_db_prisma_helper__WEBPACK_IMPORTED_MODULE_3__.safeFindMany)(_lib_db__WEBPACK_IMPORTED_MODULE_2__[\"default\"].achievement, {\n            where: {\n                userId\n            }\n        });\n        if (!achievements || !Array.isArray(achievements)) {\n            console.warn(\"No achievements found or invalid response format\");\n            return [];\n        }\n        return achievements.map((achievement)=>({\n                id: achievement.id,\n                userId: achievement.userId,\n                title: achievement.title,\n                description: achievement.description,\n                icon: achievement.icon,\n                earnedAt: achievement.earnedAt,\n                type: achievement.type\n            }));\n    } catch (error) {\n        console.error(\"Error fetching user achievements:\", error);\n        return [];\n    }\n}\n/**\n * Create a new achievement for a user\n */ async function createAchievement(userId, type, title, description, icon) {\n    try {\n        if (!userId || !type) {\n            console.warn(\"createAchievement called with missing parameters\");\n            return null;\n        }\n        // Check if user already has this achievement using safeFindFirst\n        const existingAchievement = await (0,_lib_db_prisma_helper__WEBPACK_IMPORTED_MODULE_3__.safeFindFirst)(_lib_db__WEBPACK_IMPORTED_MODULE_2__[\"default\"].achievement, {\n            where: {\n                userId,\n                type\n            }\n        });\n        if (existingAchievement) {\n            // User already has this achievement, return it\n            return {\n                id: existingAchievement.id,\n                userId: existingAchievement.userId,\n                title: existingAchievement.title,\n                description: existingAchievement.description,\n                icon: existingAchievement.icon,\n                earnedAt: existingAchievement.earnedAt,\n                type: existingAchievement.type\n            };\n        }\n        // Create new achievement using safeCreate\n        const now = new Date();\n        const achievement = await (0,_lib_db_prisma_helper__WEBPACK_IMPORTED_MODULE_3__.safeCreate)(_lib_db__WEBPACK_IMPORTED_MODULE_2__[\"default\"].achievement, {\n            data: {\n                userId,\n                type,\n                title,\n                description,\n                icon,\n                earnedAt: now\n            }\n        });\n        return {\n            id: achievement.id,\n            userId,\n            title,\n            description,\n            icon,\n            earnedAt: now,\n            type\n        };\n    } catch (error) {\n        console.error(\"Error creating achievement:\", error);\n        return null;\n    }\n}\n/**\n * Check and award achievements for a user\n */ async function checkAndAwardAchievements(userId) {\n    try {\n        // Use safeFindUnique instead of direct prisma call\n        const user = await (0,_lib_db_prisma_helper__WEBPACK_IMPORTED_MODULE_3__.safeFindUnique)(_lib_db__WEBPACK_IMPORTED_MODULE_2__[\"default\"].user, {\n            where: {\n                id: userId\n            },\n            include: {\n                enrolledIn: true\n            }\n        });\n        if (!user) {\n            return [];\n        }\n        const newAchievements = [];\n        // First login achievement\n        const firstLoginAchievement = await createAchievement(userId, _types_achievement__WEBPACK_IMPORTED_MODULE_4__.AchievementType.FIRST_LOGIN, \"First Login\", \"You logged into the platform for the first time.\", \"login\");\n        if (firstLoginAchievement) {\n            newAchievements.push(firstLoginAchievement);\n        }\n        // Check for course started achievement\n        if (user.enrolledIn && user.enrolledIn.length > 0) {\n            const courseStartedAchievement = await createAchievement(userId, _types_achievement__WEBPACK_IMPORTED_MODULE_4__.AchievementType.COURSE_STARTED, \"Course Starter\", \"You enrolled in your first course.\", \"course\");\n            if (courseStartedAchievement) {\n                newAchievements.push(courseStartedAchievement);\n            }\n        }\n        // Check for course completion achievement\n        const userProgress = await (0,_lib_db_prisma_helper__WEBPACK_IMPORTED_MODULE_3__.safeFindMany)(_lib_db__WEBPACK_IMPORTED_MODULE_2__[\"default\"].userProgress, {\n            where: {\n                userId\n            }\n        });\n        if (userProgress.length > 0) {\n            // Get all courses enrolled in\n            const enrolledCourseIds = user.enrolledIds || [];\n            // Get all lessons for these courses using safeFindMany\n            const lessons = await (0,_lib_db_prisma_helper__WEBPACK_IMPORTED_MODULE_3__.safeFindMany)(_lib_db__WEBPACK_IMPORTED_MODULE_2__[\"default\"].lesson, {\n                where: {\n                    courseId: {\n                        in: enrolledCourseIds\n                    }\n                }\n            });\n            // Group lessons by courseId\n            const courseLessons = {};\n            if (lessons && Array.isArray(lessons)) {\n                for (const lesson of lessons){\n                    if (!courseLessons[lesson.courseId]) {\n                        courseLessons[lesson.courseId] = 0;\n                    }\n                    courseLessons[lesson.courseId]++;\n                }\n            }\n            // Count completed lessons per course\n            const courseProgress = {};\n            if (userProgress && Array.isArray(userProgress)) {\n                for (const progress of userProgress){\n                    if (progress.completed) {\n                        if (!courseProgress[progress.courseId]) {\n                            courseProgress[progress.courseId] = 0;\n                        }\n                        courseProgress[progress.courseId]++;\n                    }\n                }\n            }\n            // Check if any course is completed\n            for (const [courseId, completedCount] of Object.entries(courseProgress)){\n                const totalLessons = courseLessons[courseId] || 0;\n                if (totalLessons > 0 && completedCount >= totalLessons) {\n                    const courseCompletedAchievement = await createAchievement(userId, _types_achievement__WEBPACK_IMPORTED_MODULE_4__.AchievementType.COURSE_COMPLETED, \"Course Completer\", \"You completed your first course.\", \"certificate\");\n                    if (courseCompletedAchievement) {\n                        newAchievements.push(courseCompletedAchievement);\n                    }\n                    break; // Only need one course completed for the achievement\n                }\n            }\n            // Quick Learner achievement - X lessons in Y days\n            const completedLessons = userProgress && Array.isArray(userProgress) ? userProgress.filter((p)=>p.completed) : [];\n            const completedLessonCount = completedLessons.length;\n            if (completedLessonCount >= 10) {\n                const completedDates = completedLessons.filter((p)=>p.completedAt).map((p)=>p.completedAt).sort((a, b)=>a.getTime() - b.getTime());\n                if (completedDates.length > 0) {\n                    const firstCompletionDate = completedDates[0];\n                    const daysSinceFirstCompletion = Math.floor((Date.now() - firstCompletionDate.getTime()) / (1000 * 60 * 60 * 24));\n                    if (daysSinceFirstCompletion <= 7) {\n                        const quickLearnerAchievement = await createAchievement(userId, _types_achievement__WEBPACK_IMPORTED_MODULE_4__.AchievementType.QUICK_LEARNER, \"Quick Learner\", \"You completed 10 lessons within a week.\", \"speed\");\n                        if (quickLearnerAchievement) {\n                            newAchievements.push(quickLearnerAchievement);\n                        }\n                    }\n                }\n            }\n        }\n        // Note: For streak achievement, we'd need to modify the User model to include loginHistory\n        // This is currently not in the Prisma schema, so it's omitted from the refactored version\n        return newAchievements;\n    } catch (error) {\n        console.error(\"Error checking and awarding achievements:\", error);\n        return [];\n    }\n}\n\n(0,private_next_rsc_action_validate__WEBPACK_IMPORTED_MODULE_5__.ensureServerEntryExports)([\n    getUserAchievements,\n    createAchievement,\n    checkAndAwardAchievements\n]);\n(0,private_next_rsc_action_proxy__WEBPACK_IMPORTED_MODULE_0__.createActionProxy)(\"346d3948bb54496414ac11ffe007a95bcc0ada67\", getUserAchievements);\n(0,private_next_rsc_action_proxy__WEBPACK_IMPORTED_MODULE_0__.createActionProxy)(\"d19bb8b7980f79348c3a6a62c6c3b436873341b7\", createAchievement);\n(0,private_next_rsc_action_proxy__WEBPACK_IMPORTED_MODULE_0__.createActionProxy)(\"bc267e40bccb015e6b0a6920c9226658810c2a22\", checkAndAwardAchievements);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvc2VydmljZXMvYWNoaWV2ZW1lbnRzLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7OztBQUU4QjtBQUNtRTtBQUNEO0FBRWhHOztDQUVDLEdBQ00sZUFBZU0sb0JBQW9CQyxNQUFjO0lBQ3RELElBQUk7UUFDRixJQUFJLENBQUNBLFFBQVE7WUFDWEMsUUFBUUMsSUFBSSxDQUFDO1lBQ2IsT0FBTyxFQUFFO1FBQ1g7UUFFQSxpREFBaUQ7UUFDakQsTUFBTUMsZUFBZSxNQUFNVCxtRUFBWUEsQ0FBQ0QsMkRBQWtCLEVBQUU7WUFDMURZLE9BQU87Z0JBQUVMO1lBQU87UUFDbEI7UUFFQSxJQUFJLENBQUNHLGdCQUFnQixDQUFDRyxNQUFNQyxPQUFPLENBQUNKLGVBQWU7WUFDakRGLFFBQVFDLElBQUksQ0FBQztZQUNiLE9BQU8sRUFBRTtRQUNYO1FBRUEsT0FBT0MsYUFBYUssR0FBRyxDQUFDSixDQUFBQSxjQUFnQjtnQkFDdENLLElBQUlMLFlBQVlLLEVBQUU7Z0JBQ2xCVCxRQUFRSSxZQUFZSixNQUFNO2dCQUMxQlUsT0FBT04sWUFBWU0sS0FBSztnQkFDeEJDLGFBQWFQLFlBQVlPLFdBQVc7Z0JBQ3BDQyxNQUFNUixZQUFZUSxJQUFJO2dCQUN0QkMsVUFBVVQsWUFBWVMsUUFBUTtnQkFDOUJDLE1BQU1WLFlBQVlVLElBQUk7WUFDeEI7SUFDRixFQUFFLE9BQU9DLE9BQU87UUFDZGQsUUFBUWMsS0FBSyxDQUFDLHFDQUFxQ0E7UUFDbkQsT0FBTyxFQUFFO0lBQ1g7QUFDRjtBQUVBOztDQUVDLEdBQ00sZUFBZUMsa0JBQ3BCaEIsTUFBYyxFQUNkYyxJQUFxQixFQUNyQkosS0FBYSxFQUNiQyxXQUFtQixFQUNuQkMsSUFBWTtJQUVaLElBQUk7UUFDRixJQUFJLENBQUNaLFVBQVUsQ0FBQ2MsTUFBTTtZQUNwQmIsUUFBUUMsSUFBSSxDQUFDO1lBQ2IsT0FBTztRQUNUO1FBRUEsaUVBQWlFO1FBQ2pFLE1BQU1lLHNCQUFzQixNQUFNdEIsb0VBQWFBLENBQUNGLDJEQUFrQixFQUFFO1lBQ2xFWSxPQUFPO2dCQUNMTDtnQkFDQWM7WUFDRjtRQUNGO1FBRUEsSUFBSUcscUJBQXFCO1lBQ3ZCLCtDQUErQztZQUMvQyxPQUFPO2dCQUNMUixJQUFJUSxvQkFBb0JSLEVBQUU7Z0JBQzFCVCxRQUFRaUIsb0JBQW9CakIsTUFBTTtnQkFDbENVLE9BQU9PLG9CQUFvQlAsS0FBSztnQkFDaENDLGFBQWFNLG9CQUFvQk4sV0FBVztnQkFDNUNDLE1BQU1LLG9CQUFvQkwsSUFBSTtnQkFDOUJDLFVBQVVJLG9CQUFvQkosUUFBUTtnQkFDdENDLE1BQU1HLG9CQUFvQkgsSUFBSTtZQUNoQztRQUNGO1FBRUEsMENBQTBDO1FBQzFDLE1BQU1JLE1BQU0sSUFBSUM7UUFDaEIsTUFBTWYsY0FBYyxNQUFNUCxpRUFBVUEsQ0FBQ0osMkRBQWtCLEVBQUU7WUFDdkQyQixNQUFNO2dCQUNKcEI7Z0JBQ0FjO2dCQUNBSjtnQkFDQUM7Z0JBQ0FDO2dCQUNBQyxVQUFVSztZQUNaO1FBQ0Y7UUFFQSxPQUFPO1lBQ0xULElBQUlMLFlBQVlLLEVBQUU7WUFDbEJUO1lBQ0FVO1lBQ0FDO1lBQ0FDO1lBQ0FDLFVBQVVLO1lBQ1ZKO1FBQ0Y7SUFDRixFQUFFLE9BQU9DLE9BQU87UUFDZGQsUUFBUWMsS0FBSyxDQUFDLCtCQUErQkE7UUFDN0MsT0FBTztJQUNUO0FBQ0Y7QUFFQTs7Q0FFQyxHQUNNLGVBQWVNLDBCQUEwQnJCLE1BQWM7SUFDNUQsSUFBSTtRQUNGLG1EQUFtRDtRQUNuRCxNQUFNc0IsT0FBTyxNQUFNMUIscUVBQWNBLENBQUNILG9EQUFXLEVBQUU7WUFDN0NZLE9BQU87Z0JBQUVJLElBQUlUO1lBQU87WUFDcEJ1QixTQUFTO2dCQUNQQyxZQUFZO1lBQ2Q7UUFDRjtRQUVBLElBQUksQ0FBQ0YsTUFBTTtZQUNULE9BQU8sRUFBRTtRQUNYO1FBRUEsTUFBTUcsa0JBQXFDLEVBQUU7UUFFN0MsMEJBQTBCO1FBQzFCLE1BQU1DLHdCQUF3QixNQUFNVixrQkFDbENoQixRQUNBRiwrREFBZUEsQ0FBQzZCLFdBQVcsRUFDM0IsZUFDQSxvREFDQTtRQUdGLElBQUlELHVCQUF1QjtZQUN6QkQsZ0JBQWdCRyxJQUFJLENBQUNGO1FBQ3ZCO1FBRUEsdUNBQXVDO1FBQ3ZDLElBQUlKLEtBQUtFLFVBQVUsSUFBSUYsS0FBS0UsVUFBVSxDQUFDSyxNQUFNLEdBQUcsR0FBRztZQUNqRCxNQUFNQywyQkFBMkIsTUFBTWQsa0JBQ3JDaEIsUUFDQUYsK0RBQWVBLENBQUNpQyxjQUFjLEVBQzlCLGtCQUNBLHNDQUNBO1lBR0YsSUFBSUQsMEJBQTBCO2dCQUM1QkwsZ0JBQWdCRyxJQUFJLENBQUNFO1lBQ3ZCO1FBQ0Y7UUFFQSwwQ0FBMEM7UUFDMUMsTUFBTUUsZUFBZSxNQUFNdEMsbUVBQVlBLENBQUNELDREQUFtQixFQUFFO1lBQzNEWSxPQUFPO2dCQUFFTDtZQUFPO1FBQ2xCO1FBRUEsSUFBSWdDLGFBQWFILE1BQU0sR0FBRyxHQUFHO1lBQzNCLDhCQUE4QjtZQUM5QixNQUFNSSxvQkFBb0JYLEtBQUtZLFdBQVcsSUFBSSxFQUFFO1lBRWhELHVEQUF1RDtZQUN2RCxNQUFNQyxVQUFVLE1BQU16QyxtRUFBWUEsQ0FBQ0Qsc0RBQWEsRUFBRTtnQkFDaERZLE9BQU87b0JBQ0xnQyxVQUFVO3dCQUNSQyxJQUFJTDtvQkFDTjtnQkFDRjtZQUNGO1lBRUEsNEJBQTRCO1lBQzVCLE1BQU1NLGdCQUF3QyxDQUFDO1lBQy9DLElBQUlKLFdBQVc3QixNQUFNQyxPQUFPLENBQUM0QixVQUFVO2dCQUNyQyxLQUFLLE1BQU1DLFVBQVVELFFBQVM7b0JBQzVCLElBQUksQ0FBQ0ksYUFBYSxDQUFDSCxPQUFPQyxRQUFRLENBQUMsRUFBRTt3QkFDbkNFLGFBQWEsQ0FBQ0gsT0FBT0MsUUFBUSxDQUFDLEdBQUc7b0JBQ25DO29CQUNBRSxhQUFhLENBQUNILE9BQU9DLFFBQVEsQ0FBQztnQkFDaEM7WUFDRjtZQUVBLHFDQUFxQztZQUNyQyxNQUFNRyxpQkFBeUMsQ0FBQztZQUNoRCxJQUFJUixnQkFBZ0IxQixNQUFNQyxPQUFPLENBQUN5QixlQUFlO2dCQUMvQyxLQUFLLE1BQU1TLFlBQVlULGFBQWM7b0JBQ25DLElBQUlTLFNBQVNDLFNBQVMsRUFBRTt3QkFDdEIsSUFBSSxDQUFDRixjQUFjLENBQUNDLFNBQVNKLFFBQVEsQ0FBQyxFQUFFOzRCQUN0Q0csY0FBYyxDQUFDQyxTQUFTSixRQUFRLENBQUMsR0FBRzt3QkFDdEM7d0JBQ0FHLGNBQWMsQ0FBQ0MsU0FBU0osUUFBUSxDQUFDO29CQUNuQztnQkFDRjtZQUNGO1lBRUEsbUNBQW1DO1lBQ25DLEtBQUssTUFBTSxDQUFDQSxVQUFVTSxlQUFlLElBQUlDLE9BQU9DLE9BQU8sQ0FBQ0wsZ0JBQWlCO2dCQUN2RSxNQUFNTSxlQUFlUCxhQUFhLENBQUNGLFNBQVMsSUFBSTtnQkFFaEQsSUFBSVMsZUFBZSxLQUFLSCxrQkFBa0JHLGNBQWM7b0JBQ3RELE1BQU1DLDZCQUE2QixNQUFNL0Isa0JBQ3ZDaEIsUUFDQUYsK0RBQWVBLENBQUNrRCxnQkFBZ0IsRUFDaEMsb0JBQ0Esb0NBQ0E7b0JBR0YsSUFBSUQsNEJBQTRCO3dCQUM5QnRCLGdCQUFnQkcsSUFBSSxDQUFDbUI7b0JBQ3ZCO29CQUVBLE9BQU8scURBQXFEO2dCQUM5RDtZQUNGO1lBRUEsa0RBQWtEO1lBQ2xELE1BQU1FLG1CQUFtQmpCLGdCQUFnQjFCLE1BQU1DLE9BQU8sQ0FBQ3lCLGdCQUFnQkEsYUFBYWtCLE1BQU0sQ0FBQ0MsQ0FBQUEsSUFBS0EsRUFBRVQsU0FBUyxJQUFJLEVBQUU7WUFDakgsTUFBTVUsdUJBQXVCSCxpQkFBaUJwQixNQUFNO1lBRXBELElBQUl1Qix3QkFBd0IsSUFBSTtnQkFDOUIsTUFBTUMsaUJBQWlCSixpQkFDcEJDLE1BQU0sQ0FBQ0MsQ0FBQUEsSUFBS0EsRUFBRUcsV0FBVyxFQUN6QjlDLEdBQUcsQ0FBQzJDLENBQUFBLElBQUtBLEVBQUVHLFdBQVcsRUFDdEJDLElBQUksQ0FBQyxDQUFDQyxHQUFHQyxJQUFNRCxFQUFFRSxPQUFPLEtBQUtELEVBQUVDLE9BQU87Z0JBRXpDLElBQUlMLGVBQWV4QixNQUFNLEdBQUcsR0FBRztvQkFDN0IsTUFBTThCLHNCQUFzQk4sY0FBYyxDQUFDLEVBQUU7b0JBQzdDLE1BQU1PLDJCQUEyQkMsS0FBS0MsS0FBSyxDQUN6QyxDQUFDM0MsS0FBS0QsR0FBRyxLQUFLeUMsb0JBQW9CRCxPQUFPLEVBQUMsSUFBTSxRQUFPLEtBQUssS0FBSyxFQUFDO29CQUdwRSxJQUFJRSw0QkFBNEIsR0FBRzt3QkFDakMsTUFBTUcsMEJBQTBCLE1BQU0vQyxrQkFDcENoQixRQUNBRiwrREFBZUEsQ0FBQ2tFLGFBQWEsRUFDN0IsaUJBQ0EsMkNBQ0E7d0JBR0YsSUFBSUQseUJBQXlCOzRCQUMzQnRDLGdCQUFnQkcsSUFBSSxDQUFDbUM7d0JBQ3ZCO29CQUNGO2dCQUNGO1lBQ0Y7UUFDRjtRQUVBLDJGQUEyRjtRQUMzRiwwRkFBMEY7UUFFMUYsT0FBT3RDO0lBQ1QsRUFBRSxPQUFPVixPQUFPO1FBQ2RkLFFBQVFjLEtBQUssQ0FBQyw2Q0FBNkNBO1FBQzNELE9BQU8sRUFBRTtJQUNYO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9jaG9pY2UtZS1sZWFybmluZy8uL3NyYy9zZXJ2aWNlcy9hY2hpZXZlbWVudHMudHM/YjNmNCJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzZXJ2ZXJcIjtcblxuaW1wb3J0IHByaXNtYSBmcm9tICdAL2xpYi9kYic7XG5pbXBvcnQgeyBzYWZlRmluZE1hbnksIHNhZmVGaW5kRmlyc3QsIHNhZmVGaW5kVW5pcXVlLCBzYWZlQ3JlYXRlIH0gZnJvbSAnQC9saWIvZGIvcHJpc21hLWhlbHBlcic7XG5pbXBvcnQgeyBVc2VyQWNoaWV2ZW1lbnQsIEFjaGlldmVtZW50VHlwZSwgQ3JlYXRlQWNoaWV2ZW1lbnRQYXJhbXMgfSBmcm9tICdAL3R5cGVzL2FjaGlldmVtZW50JztcblxuLyoqXG4gKiBHZXQgYWxsIGFjaGlldmVtZW50cyBmb3IgYSB1c2VyXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRVc2VyQWNoaWV2ZW1lbnRzKHVzZXJJZDogc3RyaW5nKTogUHJvbWlzZTxVc2VyQWNoaWV2ZW1lbnRbXT4ge1xuICB0cnkge1xuICAgIGlmICghdXNlcklkKSB7XG4gICAgICBjb25zb2xlLndhcm4oJ2dldFVzZXJBY2hpZXZlbWVudHMgY2FsbGVkIHdpdGggZW1wdHkgdXNlcklkJyk7XG4gICAgICByZXR1cm4gW107XG4gICAgfVxuXG4gICAgLy8gVXNlIHNhZmVGaW5kTWFueSBpbnN0ZWFkIG9mIGRpcmVjdCBwcmlzbWEgY2FsbFxuICAgIGNvbnN0IGFjaGlldmVtZW50cyA9IGF3YWl0IHNhZmVGaW5kTWFueShwcmlzbWEuYWNoaWV2ZW1lbnQsIHtcbiAgICAgIHdoZXJlOiB7IHVzZXJJZCB9XG4gICAgfSk7XG4gICAgXG4gICAgaWYgKCFhY2hpZXZlbWVudHMgfHwgIUFycmF5LmlzQXJyYXkoYWNoaWV2ZW1lbnRzKSkge1xuICAgICAgY29uc29sZS53YXJuKCdObyBhY2hpZXZlbWVudHMgZm91bmQgb3IgaW52YWxpZCByZXNwb25zZSBmb3JtYXQnKTtcbiAgICAgIHJldHVybiBbXTtcbiAgICB9XG4gICAgXG4gICAgcmV0dXJuIGFjaGlldmVtZW50cy5tYXAoYWNoaWV2ZW1lbnQgPT4gKHtcbiAgICAgIGlkOiBhY2hpZXZlbWVudC5pZCxcbiAgICAgIHVzZXJJZDogYWNoaWV2ZW1lbnQudXNlcklkLFxuICAgICAgdGl0bGU6IGFjaGlldmVtZW50LnRpdGxlLFxuICAgICAgZGVzY3JpcHRpb246IGFjaGlldmVtZW50LmRlc2NyaXB0aW9uLFxuICAgICAgaWNvbjogYWNoaWV2ZW1lbnQuaWNvbixcbiAgICAgIGVhcm5lZEF0OiBhY2hpZXZlbWVudC5lYXJuZWRBdCxcbiAgICAgIHR5cGU6IGFjaGlldmVtZW50LnR5cGUgYXMgQWNoaWV2ZW1lbnRUeXBlLFxuICAgIH0pKTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBmZXRjaGluZyB1c2VyIGFjaGlldmVtZW50czonLCBlcnJvcik7XG4gICAgcmV0dXJuIFtdO1xuICB9XG59XG5cbi8qKlxuICogQ3JlYXRlIGEgbmV3IGFjaGlldmVtZW50IGZvciBhIHVzZXJcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNyZWF0ZUFjaGlldmVtZW50KFxuICB1c2VySWQ6IHN0cmluZyxcbiAgdHlwZTogQWNoaWV2ZW1lbnRUeXBlLFxuICB0aXRsZTogc3RyaW5nLFxuICBkZXNjcmlwdGlvbjogc3RyaW5nLFxuICBpY29uOiBzdHJpbmdcbik6IFByb21pc2U8VXNlckFjaGlldmVtZW50IHwgbnVsbD4ge1xuICB0cnkge1xuICAgIGlmICghdXNlcklkIHx8ICF0eXBlKSB7XG4gICAgICBjb25zb2xlLndhcm4oJ2NyZWF0ZUFjaGlldmVtZW50IGNhbGxlZCB3aXRoIG1pc3NpbmcgcGFyYW1ldGVycycpO1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIFxuICAgIC8vIENoZWNrIGlmIHVzZXIgYWxyZWFkeSBoYXMgdGhpcyBhY2hpZXZlbWVudCB1c2luZyBzYWZlRmluZEZpcnN0XG4gICAgY29uc3QgZXhpc3RpbmdBY2hpZXZlbWVudCA9IGF3YWl0IHNhZmVGaW5kRmlyc3QocHJpc21hLmFjaGlldmVtZW50LCB7XG4gICAgICB3aGVyZToge1xuICAgICAgICB1c2VySWQsXG4gICAgICAgIHR5cGVcbiAgICAgIH1cbiAgICB9KTtcbiAgICBcbiAgICBpZiAoZXhpc3RpbmdBY2hpZXZlbWVudCkge1xuICAgICAgLy8gVXNlciBhbHJlYWR5IGhhcyB0aGlzIGFjaGlldmVtZW50LCByZXR1cm4gaXRcbiAgICAgIHJldHVybiB7XG4gICAgICAgIGlkOiBleGlzdGluZ0FjaGlldmVtZW50LmlkLFxuICAgICAgICB1c2VySWQ6IGV4aXN0aW5nQWNoaWV2ZW1lbnQudXNlcklkLFxuICAgICAgICB0aXRsZTogZXhpc3RpbmdBY2hpZXZlbWVudC50aXRsZSxcbiAgICAgICAgZGVzY3JpcHRpb246IGV4aXN0aW5nQWNoaWV2ZW1lbnQuZGVzY3JpcHRpb24sXG4gICAgICAgIGljb246IGV4aXN0aW5nQWNoaWV2ZW1lbnQuaWNvbixcbiAgICAgICAgZWFybmVkQXQ6IGV4aXN0aW5nQWNoaWV2ZW1lbnQuZWFybmVkQXQsXG4gICAgICAgIHR5cGU6IGV4aXN0aW5nQWNoaWV2ZW1lbnQudHlwZSBhcyBBY2hpZXZlbWVudFR5cGUsXG4gICAgICB9O1xuICAgIH1cbiAgICBcbiAgICAvLyBDcmVhdGUgbmV3IGFjaGlldmVtZW50IHVzaW5nIHNhZmVDcmVhdGVcbiAgICBjb25zdCBub3cgPSBuZXcgRGF0ZSgpO1xuICAgIGNvbnN0IGFjaGlldmVtZW50ID0gYXdhaXQgc2FmZUNyZWF0ZShwcmlzbWEuYWNoaWV2ZW1lbnQsIHtcbiAgICAgIGRhdGE6IHtcbiAgICAgICAgdXNlcklkLFxuICAgICAgICB0eXBlLFxuICAgICAgICB0aXRsZSxcbiAgICAgICAgZGVzY3JpcHRpb24sXG4gICAgICAgIGljb24sXG4gICAgICAgIGVhcm5lZEF0OiBub3dcbiAgICAgIH1cbiAgICB9KTtcbiAgICBcbiAgICByZXR1cm4ge1xuICAgICAgaWQ6IGFjaGlldmVtZW50LmlkLFxuICAgICAgdXNlcklkLFxuICAgICAgdGl0bGUsXG4gICAgICBkZXNjcmlwdGlvbixcbiAgICAgIGljb24sXG4gICAgICBlYXJuZWRBdDogbm93LFxuICAgICAgdHlwZSxcbiAgICB9O1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGNyZWF0aW5nIGFjaGlldmVtZW50OicsIGVycm9yKTtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxufVxuXG4vKipcbiAqIENoZWNrIGFuZCBhd2FyZCBhY2hpZXZlbWVudHMgZm9yIGEgdXNlclxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gY2hlY2tBbmRBd2FyZEFjaGlldmVtZW50cyh1c2VySWQ6IHN0cmluZyk6IFByb21pc2U8VXNlckFjaGlldmVtZW50W10+IHtcbiAgdHJ5IHtcbiAgICAvLyBVc2Ugc2FmZUZpbmRVbmlxdWUgaW5zdGVhZCBvZiBkaXJlY3QgcHJpc21hIGNhbGxcbiAgICBjb25zdCB1c2VyID0gYXdhaXQgc2FmZUZpbmRVbmlxdWUocHJpc21hLnVzZXIsIHtcbiAgICAgIHdoZXJlOiB7IGlkOiB1c2VySWQgfSxcbiAgICAgIGluY2x1ZGU6IHtcbiAgICAgICAgZW5yb2xsZWRJbjogdHJ1ZVxuICAgICAgfVxuICAgIH0pO1xuICAgIFxuICAgIGlmICghdXNlcikge1xuICAgICAgcmV0dXJuIFtdO1xuICAgIH1cbiAgICBcbiAgICBjb25zdCBuZXdBY2hpZXZlbWVudHM6IFVzZXJBY2hpZXZlbWVudFtdID0gW107XG4gICAgXG4gICAgLy8gRmlyc3QgbG9naW4gYWNoaWV2ZW1lbnRcbiAgICBjb25zdCBmaXJzdExvZ2luQWNoaWV2ZW1lbnQgPSBhd2FpdCBjcmVhdGVBY2hpZXZlbWVudChcbiAgICAgIHVzZXJJZCxcbiAgICAgIEFjaGlldmVtZW50VHlwZS5GSVJTVF9MT0dJTixcbiAgICAgICdGaXJzdCBMb2dpbicsXG4gICAgICAnWW91IGxvZ2dlZCBpbnRvIHRoZSBwbGF0Zm9ybSBmb3IgdGhlIGZpcnN0IHRpbWUuJyxcbiAgICAgICdsb2dpbidcbiAgICApO1xuICAgIFxuICAgIGlmIChmaXJzdExvZ2luQWNoaWV2ZW1lbnQpIHtcbiAgICAgIG5ld0FjaGlldmVtZW50cy5wdXNoKGZpcnN0TG9naW5BY2hpZXZlbWVudCk7XG4gICAgfVxuICAgIFxuICAgIC8vIENoZWNrIGZvciBjb3Vyc2Ugc3RhcnRlZCBhY2hpZXZlbWVudFxuICAgIGlmICh1c2VyLmVucm9sbGVkSW4gJiYgdXNlci5lbnJvbGxlZEluLmxlbmd0aCA+IDApIHtcbiAgICAgIGNvbnN0IGNvdXJzZVN0YXJ0ZWRBY2hpZXZlbWVudCA9IGF3YWl0IGNyZWF0ZUFjaGlldmVtZW50KFxuICAgICAgICB1c2VySWQsXG4gICAgICAgIEFjaGlldmVtZW50VHlwZS5DT1VSU0VfU1RBUlRFRCxcbiAgICAgICAgJ0NvdXJzZSBTdGFydGVyJyxcbiAgICAgICAgJ1lvdSBlbnJvbGxlZCBpbiB5b3VyIGZpcnN0IGNvdXJzZS4nLFxuICAgICAgICAnY291cnNlJ1xuICAgICAgKTtcbiAgICAgIFxuICAgICAgaWYgKGNvdXJzZVN0YXJ0ZWRBY2hpZXZlbWVudCkge1xuICAgICAgICBuZXdBY2hpZXZlbWVudHMucHVzaChjb3Vyc2VTdGFydGVkQWNoaWV2ZW1lbnQpO1xuICAgICAgfVxuICAgIH1cbiAgICBcbiAgICAvLyBDaGVjayBmb3IgY291cnNlIGNvbXBsZXRpb24gYWNoaWV2ZW1lbnRcbiAgICBjb25zdCB1c2VyUHJvZ3Jlc3MgPSBhd2FpdCBzYWZlRmluZE1hbnkocHJpc21hLnVzZXJQcm9ncmVzcywge1xuICAgICAgd2hlcmU6IHsgdXNlcklkIH1cbiAgICB9KTtcbiAgICBcbiAgICBpZiAodXNlclByb2dyZXNzLmxlbmd0aCA+IDApIHtcbiAgICAgIC8vIEdldCBhbGwgY291cnNlcyBlbnJvbGxlZCBpblxuICAgICAgY29uc3QgZW5yb2xsZWRDb3Vyc2VJZHMgPSB1c2VyLmVucm9sbGVkSWRzIHx8IFtdO1xuICAgICAgXG4gICAgICAvLyBHZXQgYWxsIGxlc3NvbnMgZm9yIHRoZXNlIGNvdXJzZXMgdXNpbmcgc2FmZUZpbmRNYW55XG4gICAgICBjb25zdCBsZXNzb25zID0gYXdhaXQgc2FmZUZpbmRNYW55KHByaXNtYS5sZXNzb24sIHtcbiAgICAgICAgd2hlcmU6IHtcbiAgICAgICAgICBjb3Vyc2VJZDoge1xuICAgICAgICAgICAgaW46IGVucm9sbGVkQ291cnNlSWRzXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIFxuICAgICAgLy8gR3JvdXAgbGVzc29ucyBieSBjb3Vyc2VJZFxuICAgICAgY29uc3QgY291cnNlTGVzc29uczogUmVjb3JkPHN0cmluZywgbnVtYmVyPiA9IHt9O1xuICAgICAgaWYgKGxlc3NvbnMgJiYgQXJyYXkuaXNBcnJheShsZXNzb25zKSkge1xuICAgICAgICBmb3IgKGNvbnN0IGxlc3NvbiBvZiBsZXNzb25zKSB7XG4gICAgICAgICAgaWYgKCFjb3Vyc2VMZXNzb25zW2xlc3Nvbi5jb3Vyc2VJZF0pIHtcbiAgICAgICAgICAgIGNvdXJzZUxlc3NvbnNbbGVzc29uLmNvdXJzZUlkXSA9IDA7XG4gICAgICAgICAgfVxuICAgICAgICAgIGNvdXJzZUxlc3NvbnNbbGVzc29uLmNvdXJzZUlkXSsrO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIENvdW50IGNvbXBsZXRlZCBsZXNzb25zIHBlciBjb3Vyc2VcbiAgICAgIGNvbnN0IGNvdXJzZVByb2dyZXNzOiBSZWNvcmQ8c3RyaW5nLCBudW1iZXI+ID0ge307XG4gICAgICBpZiAodXNlclByb2dyZXNzICYmIEFycmF5LmlzQXJyYXkodXNlclByb2dyZXNzKSkge1xuICAgICAgICBmb3IgKGNvbnN0IHByb2dyZXNzIG9mIHVzZXJQcm9ncmVzcykge1xuICAgICAgICAgIGlmIChwcm9ncmVzcy5jb21wbGV0ZWQpIHtcbiAgICAgICAgICAgIGlmICghY291cnNlUHJvZ3Jlc3NbcHJvZ3Jlc3MuY291cnNlSWRdKSB7XG4gICAgICAgICAgICAgIGNvdXJzZVByb2dyZXNzW3Byb2dyZXNzLmNvdXJzZUlkXSA9IDA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb3Vyc2VQcm9ncmVzc1twcm9ncmVzcy5jb3Vyc2VJZF0rKztcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIFxuICAgICAgLy8gQ2hlY2sgaWYgYW55IGNvdXJzZSBpcyBjb21wbGV0ZWRcbiAgICAgIGZvciAoY29uc3QgW2NvdXJzZUlkLCBjb21wbGV0ZWRDb3VudF0gb2YgT2JqZWN0LmVudHJpZXMoY291cnNlUHJvZ3Jlc3MpKSB7XG4gICAgICAgIGNvbnN0IHRvdGFsTGVzc29ucyA9IGNvdXJzZUxlc3NvbnNbY291cnNlSWRdIHx8IDA7XG4gICAgICAgIFxuICAgICAgICBpZiAodG90YWxMZXNzb25zID4gMCAmJiBjb21wbGV0ZWRDb3VudCA+PSB0b3RhbExlc3NvbnMpIHtcbiAgICAgICAgICBjb25zdCBjb3Vyc2VDb21wbGV0ZWRBY2hpZXZlbWVudCA9IGF3YWl0IGNyZWF0ZUFjaGlldmVtZW50KFxuICAgICAgICAgICAgdXNlcklkLFxuICAgICAgICAgICAgQWNoaWV2ZW1lbnRUeXBlLkNPVVJTRV9DT01QTEVURUQsXG4gICAgICAgICAgICAnQ291cnNlIENvbXBsZXRlcicsXG4gICAgICAgICAgICAnWW91IGNvbXBsZXRlZCB5b3VyIGZpcnN0IGNvdXJzZS4nLFxuICAgICAgICAgICAgJ2NlcnRpZmljYXRlJ1xuICAgICAgICAgICk7XG4gICAgICAgICAgXG4gICAgICAgICAgaWYgKGNvdXJzZUNvbXBsZXRlZEFjaGlldmVtZW50KSB7XG4gICAgICAgICAgICBuZXdBY2hpZXZlbWVudHMucHVzaChjb3Vyc2VDb21wbGV0ZWRBY2hpZXZlbWVudCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIFxuICAgICAgICAgIGJyZWFrOyAvLyBPbmx5IG5lZWQgb25lIGNvdXJzZSBjb21wbGV0ZWQgZm9yIHRoZSBhY2hpZXZlbWVudFxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIFF1aWNrIExlYXJuZXIgYWNoaWV2ZW1lbnQgLSBYIGxlc3NvbnMgaW4gWSBkYXlzXG4gICAgICBjb25zdCBjb21wbGV0ZWRMZXNzb25zID0gdXNlclByb2dyZXNzICYmIEFycmF5LmlzQXJyYXkodXNlclByb2dyZXNzKSA/IHVzZXJQcm9ncmVzcy5maWx0ZXIocCA9PiBwLmNvbXBsZXRlZCkgOiBbXTtcbiAgICAgIGNvbnN0IGNvbXBsZXRlZExlc3NvbkNvdW50ID0gY29tcGxldGVkTGVzc29ucy5sZW5ndGg7XG4gICAgICBcbiAgICAgIGlmIChjb21wbGV0ZWRMZXNzb25Db3VudCA+PSAxMCkge1xuICAgICAgICBjb25zdCBjb21wbGV0ZWREYXRlcyA9IGNvbXBsZXRlZExlc3NvbnNcbiAgICAgICAgICAuZmlsdGVyKHAgPT4gcC5jb21wbGV0ZWRBdClcbiAgICAgICAgICAubWFwKHAgPT4gcC5jb21wbGV0ZWRBdCEpXG4gICAgICAgICAgLnNvcnQoKGEsIGIpID0+IGEuZ2V0VGltZSgpIC0gYi5nZXRUaW1lKCkpO1xuICAgICAgICBcbiAgICAgICAgaWYgKGNvbXBsZXRlZERhdGVzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICBjb25zdCBmaXJzdENvbXBsZXRpb25EYXRlID0gY29tcGxldGVkRGF0ZXNbMF07XG4gICAgICAgICAgY29uc3QgZGF5c1NpbmNlRmlyc3RDb21wbGV0aW9uID0gTWF0aC5mbG9vcihcbiAgICAgICAgICAgIChEYXRlLm5vdygpIC0gZmlyc3RDb21wbGV0aW9uRGF0ZS5nZXRUaW1lKCkpIC8gKDEwMDAgKiA2MCAqIDYwICogMjQpXG4gICAgICAgICAgKTtcbiAgICAgICAgICBcbiAgICAgICAgICBpZiAoZGF5c1NpbmNlRmlyc3RDb21wbGV0aW9uIDw9IDcpIHtcbiAgICAgICAgICAgIGNvbnN0IHF1aWNrTGVhcm5lckFjaGlldmVtZW50ID0gYXdhaXQgY3JlYXRlQWNoaWV2ZW1lbnQoXG4gICAgICAgICAgICAgIHVzZXJJZCxcbiAgICAgICAgICAgICAgQWNoaWV2ZW1lbnRUeXBlLlFVSUNLX0xFQVJORVIsXG4gICAgICAgICAgICAgICdRdWljayBMZWFybmVyJyxcbiAgICAgICAgICAgICAgJ1lvdSBjb21wbGV0ZWQgMTAgbGVzc29ucyB3aXRoaW4gYSB3ZWVrLicsXG4gICAgICAgICAgICAgICdzcGVlZCdcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGlmIChxdWlja0xlYXJuZXJBY2hpZXZlbWVudCkge1xuICAgICAgICAgICAgICBuZXdBY2hpZXZlbWVudHMucHVzaChxdWlja0xlYXJuZXJBY2hpZXZlbWVudCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIFxuICAgIC8vIE5vdGU6IEZvciBzdHJlYWsgYWNoaWV2ZW1lbnQsIHdlJ2QgbmVlZCB0byBtb2RpZnkgdGhlIFVzZXIgbW9kZWwgdG8gaW5jbHVkZSBsb2dpbkhpc3RvcnlcbiAgICAvLyBUaGlzIGlzIGN1cnJlbnRseSBub3QgaW4gdGhlIFByaXNtYSBzY2hlbWEsIHNvIGl0J3Mgb21pdHRlZCBmcm9tIHRoZSByZWZhY3RvcmVkIHZlcnNpb25cbiAgICBcbiAgICByZXR1cm4gbmV3QWNoaWV2ZW1lbnRzO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGNoZWNraW5nIGFuZCBhd2FyZGluZyBhY2hpZXZlbWVudHM6JywgZXJyb3IpO1xuICAgIHJldHVybiBbXTtcbiAgfVxufSJdLCJuYW1lcyI6WyJwcmlzbWEiLCJzYWZlRmluZE1hbnkiLCJzYWZlRmluZEZpcnN0Iiwic2FmZUZpbmRVbmlxdWUiLCJzYWZlQ3JlYXRlIiwiQWNoaWV2ZW1lbnRUeXBlIiwiZ2V0VXNlckFjaGlldmVtZW50cyIsInVzZXJJZCIsImNvbnNvbGUiLCJ3YXJuIiwiYWNoaWV2ZW1lbnRzIiwiYWNoaWV2ZW1lbnQiLCJ3aGVyZSIsIkFycmF5IiwiaXNBcnJheSIsIm1hcCIsImlkIiwidGl0bGUiLCJkZXNjcmlwdGlvbiIsImljb24iLCJlYXJuZWRBdCIsInR5cGUiLCJlcnJvciIsImNyZWF0ZUFjaGlldmVtZW50IiwiZXhpc3RpbmdBY2hpZXZlbWVudCIsIm5vdyIsIkRhdGUiLCJkYXRhIiwiY2hlY2tBbmRBd2FyZEFjaGlldmVtZW50cyIsInVzZXIiLCJpbmNsdWRlIiwiZW5yb2xsZWRJbiIsIm5ld0FjaGlldmVtZW50cyIsImZpcnN0TG9naW5BY2hpZXZlbWVudCIsIkZJUlNUX0xPR0lOIiwicHVzaCIsImxlbmd0aCIsImNvdXJzZVN0YXJ0ZWRBY2hpZXZlbWVudCIsIkNPVVJTRV9TVEFSVEVEIiwidXNlclByb2dyZXNzIiwiZW5yb2xsZWRDb3Vyc2VJZHMiLCJlbnJvbGxlZElkcyIsImxlc3NvbnMiLCJsZXNzb24iLCJjb3Vyc2VJZCIsImluIiwiY291cnNlTGVzc29ucyIsImNvdXJzZVByb2dyZXNzIiwicHJvZ3Jlc3MiLCJjb21wbGV0ZWQiLCJjb21wbGV0ZWRDb3VudCIsIk9iamVjdCIsImVudHJpZXMiLCJ0b3RhbExlc3NvbnMiLCJjb3Vyc2VDb21wbGV0ZWRBY2hpZXZlbWVudCIsIkNPVVJTRV9DT01QTEVURUQiLCJjb21wbGV0ZWRMZXNzb25zIiwiZmlsdGVyIiwicCIsImNvbXBsZXRlZExlc3NvbkNvdW50IiwiY29tcGxldGVkRGF0ZXMiLCJjb21wbGV0ZWRBdCIsInNvcnQiLCJhIiwiYiIsImdldFRpbWUiLCJmaXJzdENvbXBsZXRpb25EYXRlIiwiZGF5c1NpbmNlRmlyc3RDb21wbGV0aW9uIiwiTWF0aCIsImZsb29yIiwicXVpY2tMZWFybmVyQWNoaWV2ZW1lbnQiLCJRVUlDS19MRUFSTkVSIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/services/achievements.ts\n");

/***/ }),

/***/ "(rsc)/./src/types/achievement/index.ts":
/*!****************************************!*\
  !*** ./src/types/achievement/index.ts ***!
  \****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AchievementType: () => (/* binding */ AchievementType)\n/* harmony export */ });\n/**\n * @file Achievement type definitions\n * @description Type definitions for user achievements\n */ /**\n * Achievement types enum\n * @enum {string}\n */ var AchievementType;\n(function(AchievementType) {\n    AchievementType[\"FIRST_LOGIN\"] = \"first_login\";\n    AchievementType[\"COURSE_STARTED\"] = \"course_started\";\n    AchievementType[\"COURSE_COMPLETED\"] = \"course_completed\";\n    AchievementType[\"LESSON_COMPLETED\"] = \"lesson_completed\";\n    AchievementType[\"STREAK\"] = \"streak\";\n    AchievementType[\"QUICK_LEARNER\"] = \"quick_learner\";\n})(AchievementType || (AchievementType = {}));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvdHlwZXMvYWNoaWV2ZW1lbnQvaW5kZXgudHMiLCJtYXBwaW5ncyI6Ijs7OztBQUFBOzs7Q0FHQyxHQUVEOzs7Q0FHQztVQUNXQTs7Ozs7OztHQUFBQSxvQkFBQUEiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9jaG9pY2UtZS1sZWFybmluZy8uL3NyYy90eXBlcy9hY2hpZXZlbWVudC9pbmRleC50cz8wNzI0Il0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQGZpbGUgQWNoaWV2ZW1lbnQgdHlwZSBkZWZpbml0aW9uc1xuICogQGRlc2NyaXB0aW9uIFR5cGUgZGVmaW5pdGlvbnMgZm9yIHVzZXIgYWNoaWV2ZW1lbnRzXG4gKi9cblxuLyoqXG4gKiBBY2hpZXZlbWVudCB0eXBlcyBlbnVtXG4gKiBAZW51bSB7c3RyaW5nfVxuICovXG5leHBvcnQgZW51bSBBY2hpZXZlbWVudFR5cGUge1xuICBGSVJTVF9MT0dJTiA9ICdmaXJzdF9sb2dpbicsXG4gIENPVVJTRV9TVEFSVEVEID0gJ2NvdXJzZV9zdGFydGVkJyxcbiAgQ09VUlNFX0NPTVBMRVRFRCA9ICdjb3Vyc2VfY29tcGxldGVkJyxcbiAgTEVTU09OX0NPTVBMRVRFRCA9ICdsZXNzb25fY29tcGxldGVkJyxcbiAgU1RSRUFLID0gJ3N0cmVhaycsXG4gIFFVSUNLX0xFQVJORVIgPSAncXVpY2tfbGVhcm5lcicsXG59XG5cbi8qKlxuICogVXNlciBhY2hpZXZlbWVudCBpbnRlcmZhY2VcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBVc2VyQWNoaWV2ZW1lbnQge1xuICBpZDogc3RyaW5nO1xuICB1c2VySWQ6IHN0cmluZztcbiAgdGl0bGU6IHN0cmluZztcbiAgZGVzY3JpcHRpb246IHN0cmluZztcbiAgaWNvbjogc3RyaW5nO1xuICBlYXJuZWRBdDogRGF0ZTtcbiAgdHlwZTogQWNoaWV2ZW1lbnRUeXBlO1xufVxuXG4vKipcbiAqIENyZWF0ZSBhY2hpZXZlbWVudCBwYXJhbWV0ZXJzXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgQ3JlYXRlQWNoaWV2ZW1lbnRQYXJhbXMge1xuICB1c2VySWQ6IHN0cmluZztcbiAgdHlwZTogQWNoaWV2ZW1lbnRUeXBlO1xuICB0aXRsZTogc3RyaW5nO1xuICBkZXNjcmlwdGlvbjogc3RyaW5nO1xuICBpY29uOiBzdHJpbmc7XG59XG4iXSwibmFtZXMiOlsiQWNoaWV2ZW1lbnRUeXBlIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/types/achievement/index.ts\n");

/***/ }),

/***/ "(rsc)/./src/types/auth/roles.ts":
/*!*********************************!*\
  !*** ./src/types/auth/roles.ts ***!
  \*********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Role: () => (/* binding */ Role)\n/* harmony export */ });\n/**\n * @file Role definitions for user authentication and authorization\n * @description Centralized definition of roles used throughout the application\n */ /**\n * User roles in the system\n * @enum {string}\n */ var Role;\n(function(Role) {\n    Role[\"student\"] = \"student\";\n    Role[\"instructor\"] = \"instructor\";\n    Role[\"admin\"] = \"admin\";\n})(Role || (Role = {}));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvdHlwZXMvYXV0aC9yb2xlcy50cyIsIm1hcHBpbmdzIjoiOzs7O0FBQUE7OztDQUdDLEdBRUQ7OztDQUdDO1VBQ1dBOzs7O0dBQUFBLFNBQUFBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vY2hvaWNlLWUtbGVhcm5pbmcvLi9zcmMvdHlwZXMvYXV0aC9yb2xlcy50cz9jZGMxIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQGZpbGUgUm9sZSBkZWZpbml0aW9ucyBmb3IgdXNlciBhdXRoZW50aWNhdGlvbiBhbmQgYXV0aG9yaXphdGlvblxuICogQGRlc2NyaXB0aW9uIENlbnRyYWxpemVkIGRlZmluaXRpb24gb2Ygcm9sZXMgdXNlZCB0aHJvdWdob3V0IHRoZSBhcHBsaWNhdGlvblxuICovXG5cbi8qKlxuICogVXNlciByb2xlcyBpbiB0aGUgc3lzdGVtXG4gKiBAZW51bSB7c3RyaW5nfVxuICovXG5leHBvcnQgZW51bSBSb2xlIHtcbiAgc3R1ZGVudCA9ICdzdHVkZW50JyxcbiAgaW5zdHJ1Y3RvciA9ICdpbnN0cnVjdG9yJyxcbiAgYWRtaW4gPSAnYWRtaW4nXG59XG4iXSwibmFtZXMiOlsiUm9sZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/types/auth/roles.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/next-auth","vendor-chunks/@babel","vendor-chunks/bcryptjs","vendor-chunks/openid-client","vendor-chunks/oauth","vendor-chunks/object-hash","vendor-chunks/preact","vendor-chunks/preact-render-to-string","vendor-chunks/yallist","vendor-chunks/lru-cache","vendor-chunks/cookie","vendor-chunks/oidc-token-hash","vendor-chunks/@panva"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2FenrolledCourses%2Froute&page=%2Fapi%2FenrolledCourses%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2FenrolledCourses%2Froute.ts&appDir=%2FUsers%2Fjulianlok%2FDocuments%2Fchoice-e-learning%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fjulianlok%2FDocuments%2Fchoice-e-learning&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();