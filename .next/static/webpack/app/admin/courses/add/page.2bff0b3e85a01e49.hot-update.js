"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("app/admin/courses/add/page",{

/***/ "(app-pages-browser)/./src/lib/auth/auth-options.ts":
/*!**************************************!*\
  !*** ./src/lib/auth/auth-options.ts ***!
  \**************************************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   authOptions: function() { return /* binding */ authOptions; }\n/* harmony export */ });\n/* harmony import */ var next_auth_providers_credentials__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next-auth/providers/credentials */ \"(app-pages-browser)/./node_modules/next-auth/providers/credentials.js\");\n/* harmony import */ var next_auth_providers_google__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next-auth/providers/google */ \"(app-pages-browser)/./node_modules/next-auth/providers/google.js\");\n/* harmony import */ var next_auth_providers_github__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next-auth/providers/github */ \"(app-pages-browser)/./node_modules/next-auth/providers/github.js\");\n/* harmony import */ var next_auth_providers_facebook__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! next-auth/providers/facebook */ \"(app-pages-browser)/./node_modules/next-auth/providers/facebook.js\");\n/* harmony import */ var next_auth_providers_azure_ad__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! next-auth/providers/azure-ad */ \"(app-pages-browser)/./node_modules/next-auth/providers/azure-ad.js\");\n/* harmony import */ var _utils_password_utils__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./utils/password-utils */ \"(app-pages-browser)/./src/lib/auth/utils/password-utils.ts\");\n/* harmony import */ var _lib_db_services_user_service__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @/lib/db/services/user-service */ \"(app-pages-browser)/./src/lib/db/services/user-service.ts\");\n/* harmony import */ var _lib_db__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @/lib/db */ \"(app-pages-browser)/./src/lib/db.ts\");\n/* harmony import */ var _types_auth_roles__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @/types/auth/roles */ \"(app-pages-browser)/./src/types/auth/roles.ts\");\n/* provided dependency */ var process = __webpack_require__(/*! process */ \"(app-pages-browser)/./node_modules/next/dist/build/polyfills/process.js\");\n\n\n\n\n\n\n\n\n\n// Check if environment variables are set\nfunction validateEnvVariables() {\n    const requiredVars = [\n        {\n            key: \"NEXTAUTH_SECRET\",\n            value: process.env.NEXTAUTH_SECRET\n        },\n        {\n            key: \"NEXTAUTH_URL\",\n            value: process.env.NEXTAUTH_URL\n        },\n        {\n            key: \"FACEBOOK_CLIENT_ID\",\n            value: process.env.FACEBOOK_CLIENT_ID\n        },\n        {\n            key: \"FACEBOOK_CLIENT_SECRET\",\n            value: process.env.FACEBOOK_CLIENT_SECRET\n        },\n        {\n            key: \"MICROSOFT_CLIENT_ID\",\n            value: process.env.MICROSOFT_CLIENT_ID\n        },\n        {\n            key: \"MICROSOFT_CLIENT_SECRET\",\n            value: process.env.MICROSOFT_CLIENT_SECRET\n        }\n    ];\n    const missingVars = requiredVars.filter((v)=>!v.value);\n    if (missingVars.length > 0) {\n        console.error(\"Missing required environment variables:\", missingVars.map((v)=>v.key));\n    } else {\n        ;\n    }\n    ;\n    ;\n    ;\n}\n// Validate environment variables on startup\nvalidateEnvVariables();\nconst authOptions = {\n    providers: [\n        (0,next_auth_providers_credentials__WEBPACK_IMPORTED_MODULE_0__[\"default\"])({\n            name: \"Credentials\",\n            credentials: {\n                email: {\n                    label: \"Email\",\n                    type: \"email\"\n                },\n                password: {\n                    label: \"Password\",\n                    type: \"password\"\n                }\n            },\n            async authorize (credentials) {\n                try {\n                    if (!(credentials === null || credentials === void 0 ? void 0 : credentials.email) || !(credentials === null || credentials === void 0 ? void 0 : credentials.password)) {\n                        console.error(\"Missing credentials\");\n                        throw new Error(\"Email and password are required\");\n                    }\n                    // Find the user by email (case insensitive)\n                    const user = await (0,_lib_db_services_user_service__WEBPACK_IMPORTED_MODULE_6__.findUserByEmail)(credentials.email);\n                    // If user doesn't exist\n                    if (!user) {\n                        console.error(\"User not found\");\n                        throw new Error(\"Invalid email or password\");\n                    }\n                    // Verify the password\n                    const isPasswordValid = await (0,_utils_password_utils__WEBPACK_IMPORTED_MODULE_5__.comparePasswords)(credentials.password, user.password);\n                    if (!isPasswordValid) {\n                        console.error(\"Password invalid\");\n                        throw new Error(\"Invalid email or password\");\n                    }\n                    ;\n                    // Return user object without password\n                    return {\n                        id: user.id,\n                        name: user.name,\n                        email: user.email,\n                        role: user.role\n                    };\n                } catch (error) {\n                    console.error(\"Authentication error:\", error);\n                    // Re-throw to be handled by NextAuth\n                    throw error;\n                }\n            }\n        }),\n        // Add Google Provider\n        (0,next_auth_providers_google__WEBPACK_IMPORTED_MODULE_1__[\"default\"])({\n            clientId: process.env.GOOGLE_CLIENT_ID || \"\",\n            clientSecret: process.env.GOOGLE_CLIENT_SECRET || \"\",\n            authorization: {\n                params: {\n                    prompt: \"consent\",\n                    access_type: \"offline\",\n                    response_type: \"code\"\n                }\n            }\n        }),\n        // Add GitHub Provider\n        (0,next_auth_providers_github__WEBPACK_IMPORTED_MODULE_2__[\"default\"])({\n            clientId: process.env.GITHUB_CLIENT_ID || \"\",\n            clientSecret: process.env.GITHUB_CLIENT_SECRET || \"\"\n        }),\n        // Add Facebook Provider\n        (0,next_auth_providers_facebook__WEBPACK_IMPORTED_MODULE_3__[\"default\"])({\n            clientId: process.env.FACEBOOK_CLIENT_ID || \"\",\n            clientSecret: process.env.FACEBOOK_CLIENT_SECRET || \"\",\n            version: \"12.0\",\n            authorization: {\n                params: {\n                    scope: \"email,public_profile\",\n                    display: \"popup\",\n                    auth_type: \"rerequest\"\n                }\n            },\n            userinfo: {\n                url: \"https://graph.facebook.com/me\",\n                params: {\n                    fields: \"id,name,email,picture\"\n                }\n            },\n            profile (profile) {\n                var _profile_picture_data, _profile_picture;\n                ;\n                return {\n                    id: profile.id,\n                    name: profile.name,\n                    email: profile.email || \"\".concat(profile.id, \"@facebook.com\"),\n                    image: (_profile_picture = profile.picture) === null || _profile_picture === void 0 ? void 0 : (_profile_picture_data = _profile_picture.data) === null || _profile_picture_data === void 0 ? void 0 : _profile_picture_data.url,\n                    role: _types_auth_roles__WEBPACK_IMPORTED_MODULE_8__.Role.student\n                };\n            },\n            checks: [\n                \"state\"\n            ]\n        }),\n        // Add Microsoft Provider (via Azure AD)\n        (0,next_auth_providers_azure_ad__WEBPACK_IMPORTED_MODULE_4__[\"default\"])({\n            clientId: process.env.MICROSOFT_CLIENT_ID || \"\",\n            clientSecret: process.env.MICROSOFT_CLIENT_SECRET || \"\",\n            tenantId: process.env.MICROSOFT_TENANT_ID || \"organizations\",\n            authorization: {\n                params: {\n                    scope: \"openid profile email User.Read\"\n                }\n            },\n            profile (profile) {\n                ;\n                return {\n                    id: profile.sub || profile.oid,\n                    name: profile.name || profile.preferred_username,\n                    email: profile.email || profile.preferred_username || \"\".concat(profile.sub || profile.oid, \"@microsoft.com\"),\n                    image: null,\n                    role: _types_auth_roles__WEBPACK_IMPORTED_MODULE_8__.Role.student\n                };\n            },\n            checks: [\n                \"pkce\",\n                \"state\"\n            ]\n        })\n    ],\n    callbacks: {\n        async signIn (param) {\n            let { user, account, profile, email } = param;\n            try {\n                ;\n                // For OAuth providers\n                if (account && account.provider && account.provider !== \"credentials\") {\n                    ;\n                    // Special handling for Microsoft provider\n                    if (account.provider === \"azure-ad\") {\n                        ;\n                    }\n                    // Special handling for Facebook provider\n                    if (account.provider === \"facebook\") {\n                        ;\n                    }\n                    // Validate email presence\n                    let userEmail = user.email || (profile === null || profile === void 0 ? void 0 : profile.email) || email;\n                    if (!userEmail || typeof userEmail !== \"string\") {\n                        console.error(\"OAuth account missing email:\", {\n                            provider: account.provider,\n                            user,\n                            profile,\n                            email\n                        });\n                        // Instead of throwing an error, continue with a generated email\n                        if (account.provider === \"facebook\") {\n                            user.email = \"\".concat(user.id, \"@facebook.com\");\n                            userEmail = user.email;\n                            ;\n                        } else if (account.provider === \"azure-ad\") {\n                            user.email = \"\".concat(user.id, \"@microsoft.com\");\n                            userEmail = user.email;\n                            ;\n                        } else {\n                            throw new Error(\"Email is required for authentication\");\n                        }\n                    }\n                    // Ensure userEmail is a string for database operations\n                    const normalizedEmail = typeof userEmail === \"string\" ? userEmail.toLowerCase() : typeof user.email === \"string\" ? user.email.toLowerCase() : \"\";\n                    // Check if user already exists\n                    const existingUser = await (0,_lib_db_services_user_service__WEBPACK_IMPORTED_MODULE_6__.findUserByEmail)(normalizedEmail);\n                    if (existingUser) {\n                        ;\n                        try {\n                            // Update login history and OAuth info\n                            await _lib_db__WEBPACK_IMPORTED_MODULE_7__[\"default\"].user.update({\n                                where: {\n                                    id: existingUser.id\n                                },\n                                data: {\n                                    updatedAt: new Date(),\n                                    name: user.name || existingUser.name\n                                }\n                            });\n                        } catch (updateError) {\n                            console.error(\"Error updating user login history:\", updateError);\n                        // Continue with sign in even if update fails\n                        }\n                        // Set the user ID for the session\n                        user.id = existingUser.id;\n                        user.role = existingUser.role;\n                    } else {\n                        ;\n                        try {\n                            const newUser = await _lib_db__WEBPACK_IMPORTED_MODULE_7__[\"default\"].user.create({\n                                data: {\n                                    name: user.name || (profile === null || profile === void 0 ? void 0 : profile.name) || \"OAuth User\",\n                                    email: normalizedEmail,\n                                    password: \"\",\n                                    role: \"student\"\n                                }\n                            });\n                            ;\n                            user.id = newUser.id;\n                            user.role = newUser.role;\n                        } catch (createError) {\n                            console.error(\"Error creating new user:\", createError);\n                            throw new Error(\"Failed to create user account\");\n                        }\n                    }\n                } else if (account && account.provider === \"credentials\") {\n                    // For credentials login, update login history\n                    try {\n                        if (user.email) {\n                            const existingUser = await (0,_lib_db_services_user_service__WEBPACK_IMPORTED_MODULE_6__.findUserByEmail)(user.email);\n                            if (existingUser) {\n                                await (0,_lib_db_services_user_service__WEBPACK_IMPORTED_MODULE_6__.updateUserLoginInfo)(existingUser.id);\n                                // Check and award achievements for login if needed\n                                try {\n                                    // We need to dynamically import this to avoid circular dependencies\n                                    const { checkAndAwardAchievements } = await __webpack_require__.e(/*! import() */ \"_app-pages-browser_src_services_achievements_ts\").then(__webpack_require__.bind(__webpack_require__, /*! @/services/achievements */ \"(app-pages-browser)/./src/services/achievements.ts\"));\n                                    await checkAndAwardAchievements(existingUser.id);\n                                } catch (achievementError) {\n                                    console.error(\"Error checking achievements:\", achievementError);\n                                // Don't fail login if achievements check fails\n                                }\n                            }\n                        }\n                    } catch (error) {\n                        console.error(\"Error updating login history:\", error);\n                    // Don't prevent login if this fails\n                    }\n                }\n                return true;\n            } catch (error) {\n                console.error(\"Error in signIn callback:\", error);\n                return false;\n            }\n        },\n        async jwt (param) {\n            let { token, user, account } = param;\n            if (user) {\n                token.id = user.id;\n                token.role = user.role || _types_auth_roles__WEBPACK_IMPORTED_MODULE_8__.Role.student;\n            }\n            return token;\n        },\n        async session (param) {\n            let { session, token } = param;\n            if (session.user) {\n                session.user.id = token.id;\n                session.user.role = token.role;\n            }\n            return session;\n        },\n        async redirect (param) {\n            let { url, baseUrl } = param;\n            ;\n            try {\n                // Handle redirect after sign in\n                if (url.startsWith(\"/\")) {\n                    // For relative URLs, prefix with base URL\n                    return \"\".concat(baseUrl).concat(url);\n                } else if (new URL(url).origin === baseUrl) {\n                    // Allow redirects to same origin\n                    return url;\n                }\n                // Default to dashboard for all other cases\n                return \"\".concat(baseUrl, \"/dashboard\");\n            } catch (error) {\n                console.error(\"Error in redirect callback:\", error);\n                return \"\".concat(baseUrl, \"/dashboard\");\n            }\n        }\n    },\n    pages: {\n        signIn: \"/login\",\n        signOut: \"/\",\n        error: \"/login\",\n        verifyRequest: \"/login\",\n        newUser: \"/dashboard\"\n    },\n    session: {\n        strategy: \"jwt\",\n        maxAge: 30 * 24 * 60 * 60\n    },\n    secret: process.env.NEXTAUTH_SECRET,\n    debug: false,\n    logger: {\n        error: (code, metadata)=>{\n            if (code !== \"DEBUG_ENABLED\") {\n                console.error(\"[NextAuth][Error][\".concat(code, \"]:\"), metadata);\n            }\n        },\n        warn: (code)=>{\n            if (code !== \"DEBUG_ENABLED\") {\n                console.warn(\"[NextAuth][Warning][\".concat(code, \"]\"));\n            }\n        },\n        debug: ()=>{}\n    },\n    events: {\n        async signIn (param) {\n            let { user, account, isNewUser } = param;\n            ;\n        }\n    }\n};\n/* harmony default export */ __webpack_exports__[\"default\"] = (authOptions);\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL3NyYy9saWIvYXV0aC9hdXRoLW9wdGlvbnMudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7QUFDa0U7QUFDVjtBQUNBO0FBQ0k7QUFDQztBQUNIO0FBQzRCO0FBQ3hEO0FBQ1k7QUFFMUMseUNBQXlDO0FBQ3pDLFNBQVNVO0lBQ1AsTUFBTUMsZUFBZTtRQUNuQjtZQUFFQyxLQUFLO1lBQW1CQyxPQUFPQyxPQUFPQSxDQUFDQyxHQUFHLENBQUNDLGVBQWU7UUFBQztRQUM3RDtZQUFFSixLQUFLO1lBQWdCQyxPQUFPQyxPQUFPQSxDQUFDQyxHQUFHLENBQUNFLFlBQVk7UUFBQztRQUN2RDtZQUFFTCxLQUFLO1lBQXNCQyxPQUFPQyxPQUFPQSxDQUFDQyxHQUFHLENBQUNHLGtCQUFrQjtRQUFDO1FBQ25FO1lBQUVOLEtBQUs7WUFBMEJDLE9BQU9DLE9BQU9BLENBQUNDLEdBQUcsQ0FBQ0ksc0JBQXNCO1FBQUM7UUFDM0U7WUFBRVAsS0FBSztZQUF1QkMsT0FBT0MsT0FBT0EsQ0FBQ0MsR0FBRyxDQUFDSyxtQkFBbUI7UUFBQztRQUNyRTtZQUFFUixLQUFLO1lBQTJCQyxPQUFPQyxPQUFPQSxDQUFDQyxHQUFHLENBQUNNLHVCQUF1QjtRQUFDO0tBQzlFO0lBRUQsTUFBTUMsY0FBY1gsYUFBYVksTUFBTSxDQUFDQyxDQUFBQSxJQUFLLENBQUNBLEVBQUVYLEtBQUs7SUFFckQsSUFBSVMsWUFBWUcsTUFBTSxHQUFHLEdBQUc7UUFDMUJDLFFBQVFDLEtBQUssQ0FBQywyQ0FBMkNMLFlBQVlNLEdBQUcsQ0FBQ0osQ0FBQUEsSUFBS0EsRUFBRVosR0FBRztJQUNyRixPQUFPOztJQUVQOzs7O0FBTUY7QUFFQSw0Q0FBNEM7QUFDNUNGO0FBMkJPLE1BQU1tQixjQUErQjtJQUMxQ0MsV0FBVztRQUNUOUIsMkVBQW1CQSxDQUFDO1lBQ2xCK0IsTUFBTTtZQUNOQyxhQUFhO2dCQUNYQyxPQUFPO29CQUFFQyxPQUFPO29CQUFTQyxNQUFN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RSxTQUFRO1lBQ3BCO1FBQ0Y7SUFDRjtJQUNBSSxPQUFPO1FBQ0x6QixRQUFRO1FBQ1IwQixTQUFTO1FBQ1R4RSxPQUFPO1FBQ1B5RSxlQUFlO1FBQ2ZmLFNBQVM7SUFDWDtJQUNBTyxTQUFTO1FBQ1BTLFVBQVU7UUFDVkMsUUFBUSxLQUFLLEtBQUssS0FBSztJQUN6QjtJQUNBQyxRQUFRekYsT0FBT0EsQ0FBQ0MsR0FBRyxDQUFDQyxlQUFlO0lBQ25Dd0YsT0FBTztJQUNQQyxRQUFRO1FBQ045RSxPQUFPLENBQUMrRSxNQUFNQztZQUNaLElBQUlELFNBQVMsaUJBQWlCO2dCQUM1QmhGLFFBQVFDLEtBQUssQ0FBQyxxQkFBMEIsT0FBTCtFLE1BQUssT0FBS0M7WUFDL0M7UUFDRjtRQUNBQyxNQUFNLENBQUNGO1lBQ0wsSUFBSUEsU0FBUyxpQkFBaUI7Z0JBQzVCaEYsUUFBUWtGLElBQUksQ0FBQyx1QkFBNEIsT0FBTEYsTUFBSztZQUMzQztRQUNGO1FBQ0FGLE9BQU8sS0FDUDtJQUNGO0lBQ0FLLFFBQVE7UUFDTixNQUFNcEMsUUFBTyxLQUE0QjtnQkFBNUIsRUFBRWxDLElBQUksRUFBRW1DLE9BQU8sRUFBRW9DLFNBQVMsRUFBRSxHQUE1Qjs7UUFLYjtJQUNGO0FBQ0YsRUFBRTtBQUVGLCtEQUFlakYsV0FBV0EsRUFBQyIsInNvdXJjZXMiOlsid2VicGFjazovL19OX0UvLi9zcmMvbGliL2F1dGgvYXV0aC1vcHRpb25zLnRzPzhkYzMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTmV4dEF1dGhPcHRpb25zIH0gZnJvbSAnbmV4dC1hdXRoJztcbmltcG9ydCBDcmVkZW50aWFsc1Byb3ZpZGVyIGZyb20gJ25leHQtYXV0aC9wcm92aWRlcnMvY3JlZGVudGlhbHMnO1xuaW1wb3J0IEdvb2dsZVByb3ZpZGVyIGZyb20gJ25leHQtYXV0aC9wcm92aWRlcnMvZ29vZ2xlJztcbmltcG9ydCBHaXRIdWJQcm92aWRlciBmcm9tICduZXh0LWF1dGgvcHJvdmlkZXJzL2dpdGh1Yic7XG5pbXBvcnQgRmFjZWJvb2tQcm92aWRlciBmcm9tICduZXh0LWF1dGgvcHJvdmlkZXJzL2ZhY2Vib29rJztcbmltcG9ydCBNaWNyb3NvZnRQcm92aWRlciBmcm9tICduZXh0LWF1dGgvcHJvdmlkZXJzL2F6dXJlLWFkJztcbmltcG9ydCB7IGNvbXBhcmVQYXNzd29yZHMgfSBmcm9tICcuL3V0aWxzL3Bhc3N3b3JkLXV0aWxzJztcbmltcG9ydCB7IGZpbmRVc2VyQnlFbWFpbCwgdXBkYXRlVXNlckxvZ2luSW5mbyB9IGZyb20gJ0AvbGliL2RiL3NlcnZpY2VzL3VzZXItc2VydmljZSc7XG5pbXBvcnQgcHJpc21hIGZyb20gJ0AvbGliL2RiJztcbmltcG9ydCB7IFJvbGUgfSBmcm9tICdAL3R5cGVzL2F1dGgvcm9sZXMnO1xuXG4vLyBDaGVjayBpZiBlbnZpcm9ubWVudCB2YXJpYWJsZXMgYXJlIHNldFxuZnVuY3Rpb24gdmFsaWRhdGVFbnZWYXJpYWJsZXMoKSB7XG4gIGNvbnN0IHJlcXVpcmVkVmFycyA9IFtcbiAgICB7IGtleTogJ05FWFRBVVRIX1NFQ1JFVCcsIHZhbHVlOiBwcm9jZXNzLmVudi5ORVhUQVVUSF9TRUNSRVQgfSxcbiAgICB7IGtleTogJ05FWFRBVVRIX1VSTCcsIHZhbHVlOiBwcm9jZXNzLmVudi5ORVhUQVVUSF9VUkwgfSxcbiAgICB7IGtleTogJ0ZBQ0VCT09LX0NMSUVOVF9JRCcsIHZhbHVlOiBwcm9jZXNzLmVudi5GQUNFQk9PS19DTElFTlRfSUQgfSxcbiAgICB7IGtleTogJ0ZBQ0VCT09LX0NMSUVOVF9TRUNSRVQnLCB2YWx1ZTogcHJvY2Vzcy5lbnYuRkFDRUJPT0tfQ0xJRU5UX1NFQ1JFVCB9LFxuICAgIHsga2V5OiAnTUlDUk9TT0ZUX0NMSUVOVF9JRCcsIHZhbHVlOiBwcm9jZXNzLmVudi5NSUNST1NPRlRfQ0xJRU5UX0lEIH0sXG4gICAgeyBrZXk6ICdNSUNST1NPRlRfQ0xJRU5UX1NFQ1JFVCcsIHZhbHVlOiBwcm9jZXNzLmVudi5NSUNST1NPRlRfQ0xJRU5UX1NFQ1JFVCB9LFxuICBdO1xuICBcbiAgY29uc3QgbWlzc2luZ1ZhcnMgPSByZXF1aXJlZFZhcnMuZmlsdGVyKHYgPT4gIXYudmFsdWUpO1xuICBcbiAgaWYgKG1pc3NpbmdWYXJzLmxlbmd0aCA+IDApIHtcbiAgICBjb25zb2xlLmVycm9yKCdNaXNzaW5nIHJlcXVpcmVkIGVudmlyb25tZW50IHZhcmlhYmxlczonLCBtaXNzaW5nVmFycy5tYXAodiA9PiB2LmtleSkpO1xuICB9IGVsc2Uge1xuICAgIGNvbnNvbGUubG9nKCdBbGwgcmVxdWlyZWQgZW52aXJvbm1lbnQgdmFyaWFibGVzIGFyZSBzZXQnKTtcbiAgfVxuICBcbiAgLy8gTG9nIHByb3ZpZGVyIGRldGFpbHMgZm9yIGRlYnVnZ2luZ1xuICBjb25zb2xlLmxvZygnT0F1dGggUHJvdmlkZXIgRGV0YWlsczonKTtcbiAgY29uc29sZS5sb2coJy0gRmFjZWJvb2sgQ2xpZW50IElEOicsIHByb2Nlc3MuZW52LkZBQ0VCT09LX0NMSUVOVF9JRD8uc3Vic3RyaW5nKDAsIDUpICsgJy4uLicpO1xuICBjb25zb2xlLmxvZygnLSBNaWNyb3NvZnQgQ2xpZW50IElEOicsIHByb2Nlc3MuZW52Lk1JQ1JPU09GVF9DTElFTlRfSUQ/LnN1YnN0cmluZygwLCA1KSArICcuLi4nKTtcbn1cblxuLy8gVmFsaWRhdGUgZW52aXJvbm1lbnQgdmFyaWFibGVzIG9uIHN0YXJ0dXBcbnZhbGlkYXRlRW52VmFyaWFibGVzKCk7XG5cbi8vIEV4dGVuZCB0aGUgYnVpbHQtaW4gc2Vzc2lvbiB0eXBlc1xuZGVjbGFyZSBtb2R1bGUgXCJuZXh0LWF1dGhcIiB7XG4gIGludGVyZmFjZSBVc2VyIHtcbiAgICBpZDogc3RyaW5nO1xuICAgIHJvbGU6IFJvbGU7XG4gIH1cbiAgXG4gIGludGVyZmFjZSBTZXNzaW9uIHtcbiAgICB1c2VyOiB7XG4gICAgICBpZDogc3RyaW5nO1xuICAgICAgbmFtZT86IHN0cmluZyB8IG51bGw7XG4gICAgICBlbWFpbD86IHN0cmluZyB8IG51bGw7XG4gICAgICBpbWFnZT86IHN0cmluZyB8IG51bGw7XG4gICAgICByb2xlOiBSb2xlO1xuICAgIH1cbiAgfVxufVxuXG5kZWNsYXJlIG1vZHVsZSBcIm5leHQtYXV0aC9qd3RcIiB7XG4gIGludGVyZmFjZSBKV1Qge1xuICAgIGlkOiBzdHJpbmc7XG4gICAgcm9sZTogUm9sZTtcbiAgfVxufVxuXG5leHBvcnQgY29uc3QgYXV0aE9wdGlvbnM6IE5leHRBdXRoT3B0aW9ucyA9IHtcbiAgcHJvdmlkZXJzOiBbXG4gICAgQ3JlZGVudGlhbHNQcm92aWRlcih7XG4gICAgICBuYW1lOiAnQ3JlZGVudGlhbHMnLFxuICAgICAgY3JlZGVudGlhbHM6IHtcbiAgICAgICAgZW1haWw6IHsgbGFiZWw6ICdFbWFpbCcsIHR5cGU6ICdlbWFpbCcgfSxcbiAgICAgICAgcGFzc3dvcmQ6IHsgbGFiZWw6ICdQYXNzd29yZCcsIHR5cGU6ICdwYXNzd29yZCcgfSxcbiAgICAgIH0sXG4gICAgICBhc3luYyBhdXRob3JpemUoY3JlZGVudGlhbHMpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBpZiAoIWNyZWRlbnRpYWxzPy5lbWFpbCB8fCAhY3JlZGVudGlhbHM/LnBhc3N3b3JkKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdNaXNzaW5nIGNyZWRlbnRpYWxzJyk7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0VtYWlsIGFuZCBwYXNzd29yZCBhcmUgcmVxdWlyZWQnKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICAvLyBGaW5kIHRoZSB1c2VyIGJ5IGVtYWlsIChjYXNlIGluc2Vuc2l0aXZlKVxuICAgICAgICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBmaW5kVXNlckJ5RW1haWwoY3JlZGVudGlhbHMuZW1haWwpO1xuXG4gICAgICAgICAgLy8gSWYgdXNlciBkb2Vzbid0IGV4aXN0XG4gICAgICAgICAgaWYgKCF1c2VyKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdVc2VyIG5vdCBmb3VuZCcpO1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIGVtYWlsIG9yIHBhc3N3b3JkJyk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgLy8gVmVyaWZ5IHRoZSBwYXNzd29yZFxuICAgICAgICAgIGNvbnN0IGlzUGFzc3dvcmRWYWxpZCA9IGF3YWl0IGNvbXBhcmVQYXNzd29yZHMoY3JlZGVudGlhbHMucGFzc3dvcmQsIHVzZXIucGFzc3dvcmQpO1xuICAgICAgICAgIGlmICghaXNQYXNzd29yZFZhbGlkKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdQYXNzd29yZCBpbnZhbGlkJyk7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgZW1haWwgb3IgcGFzc3dvcmQnKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBjb25zb2xlLmxvZygnQXV0aGVudGljYXRpb24gc3VjY2Vzc2Z1bCBmb3I6JywgY3JlZGVudGlhbHMuZW1haWwpO1xuXG4gICAgICAgICAgLy8gUmV0dXJuIHVzZXIgb2JqZWN0IHdpdGhvdXQgcGFzc3dvcmRcbiAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgaWQ6IHVzZXIuaWQsXG4gICAgICAgICAgICBuYW1lOiB1c2VyLm5hbWUsXG4gICAgICAgICAgICBlbWFpbDogdXNlci5lbWFpbCxcbiAgICAgICAgICAgIHJvbGU6IHVzZXIucm9sZSBhcyBSb2xlXG4gICAgICAgICAgfTtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICBjb25zb2xlLmVycm9yKCdBdXRoZW50aWNhdGlvbiBlcnJvcjonLCBlcnJvcik7XG4gICAgICAgICAgLy8gUmUtdGhyb3cgdG8gYmUgaGFuZGxlZCBieSBOZXh0QXV0aFxuICAgICAgICAgIHRocm93IGVycm9yO1xuICAgICAgICB9XG4gICAgICB9LFxuICAgIH0pLFxuICAgIFxuICAgIC8vIEFkZCBHb29nbGUgUHJvdmlkZXJcbiAgICBHb29nbGVQcm92aWRlcih7XG4gICAgICBjbGllbnRJZDogcHJvY2Vzcy5lbnYuR09PR0xFX0NMSUVOVF9JRCB8fCAnJyxcbiAgICAgIGNsaWVudFNlY3JldDogcHJvY2Vzcy5lbnYuR09PR0xFX0NMSUVOVF9TRUNSRVQgfHwgJycsXG4gICAgICBhdXRob3JpemF0aW9uOiB7XG4gICAgICAgIHBhcmFtczoge1xuICAgICAgICAgIHByb21wdDogXCJjb25zZW50XCIsXG4gICAgICAgICAgYWNjZXNzX3R5cGU6IFwib2ZmbGluZVwiLFxuICAgICAgICAgIHJlc3BvbnNlX3R5cGU6IFwiY29kZVwiXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KSxcbiAgICBcbiAgICAvLyBBZGQgR2l0SHViIFByb3ZpZGVyXG4gICAgR2l0SHViUHJvdmlkZXIoe1xuICAgICAgY2xpZW50SWQ6IHByb2Nlc3MuZW52LkdJVEhVQl9DTElFTlRfSUQgfHwgJycsXG4gICAgICBjbGllbnRTZWNyZXQ6IHByb2Nlc3MuZW52LkdJVEhVQl9DTElFTlRfU0VDUkVUIHx8ICcnLFxuICAgIH0pLFxuICAgIFxuICAgIC8vIEFkZCBGYWNlYm9vayBQcm92aWRlclxuICAgIEZhY2Vib29rUHJvdmlkZXIoe1xuICAgICAgY2xpZW50SWQ6IHByb2Nlc3MuZW52LkZBQ0VCT09LX0NMSUVOVF9JRCB8fCAnJyxcbiAgICAgIGNsaWVudFNlY3JldDogcHJvY2Vzcy5lbnYuRkFDRUJPT0tfQ0xJRU5UX1NFQ1JFVCB8fCAnJyxcbiAgICAgIHZlcnNpb246IFwiMTIuMFwiLCAvLyBTZXQgbGF0ZXN0IEFQSSB2ZXJzaW9uXG4gICAgICBhdXRob3JpemF0aW9uOiB7XG4gICAgICAgIHBhcmFtczoge1xuICAgICAgICAgIHNjb3BlOiBcImVtYWlsLHB1YmxpY19wcm9maWxlXCIsXG4gICAgICAgICAgZGlzcGxheTogXCJwb3B1cFwiLFxuICAgICAgICAgIGF1dGhfdHlwZTogXCJyZXJlcXVlc3RcIlxuICAgICAgICB9LFxuICAgICAgfSxcbiAgICAgIHVzZXJpbmZvOiB7XG4gICAgICAgIHVybDogXCJodHRwczovL2dyYXBoLmZhY2Vib29rLmNvbS9tZVwiLFxuICAgICAgICBwYXJhbXM6IHsgXG4gICAgICAgICAgZmllbGRzOiBcImlkLG5hbWUsZW1haWwscGljdHVyZVwiIFxuICAgICAgICB9LFxuICAgICAgfSxcbiAgICAgIHByb2ZpbGUocHJvZmlsZSkge1xuICAgICAgICBjb25zb2xlLmxvZygnRmFjZWJvb2sgcHJvZmlsZSBkYXRhOicsIHByb2ZpbGUpO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIGlkOiBwcm9maWxlLmlkLFxuICAgICAgICAgIG5hbWU6IHByb2ZpbGUubmFtZSxcbiAgICAgICAgICBlbWFpbDogcHJvZmlsZS5lbWFpbCB8fCBgJHtwcm9maWxlLmlkfUBmYWNlYm9vay5jb21gLCAvLyBQcm92aWRlIGZhbGxiYWNrIGVtYWlsXG4gICAgICAgICAgaW1hZ2U6IHByb2ZpbGUucGljdHVyZT8uZGF0YT8udXJsLFxuICAgICAgICAgIHJvbGU6IFJvbGUuc3R1ZGVudCxcbiAgICAgICAgfTtcbiAgICAgIH0sXG4gICAgICBjaGVja3M6IFtcInN0YXRlXCJdLFxuICAgIH0pLFxuICAgIFxuICAgIC8vIEFkZCBNaWNyb3NvZnQgUHJvdmlkZXIgKHZpYSBBenVyZSBBRClcbiAgICBNaWNyb3NvZnRQcm92aWRlcih7XG4gICAgICBjbGllbnRJZDogcHJvY2Vzcy5lbnYuTUlDUk9TT0ZUX0NMSUVOVF9JRCB8fCAnJyxcbiAgICAgIGNsaWVudFNlY3JldDogcHJvY2Vzcy5lbnYuTUlDUk9TT0ZUX0NMSUVOVF9TRUNSRVQgfHwgJycsXG4gICAgICB0ZW5hbnRJZDogcHJvY2Vzcy5lbnYuTUlDUk9TT0ZUX1RFTkFOVF9JRCB8fCBcIm9yZ2FuaXphdGlvbnNcIiwgLy8gQ2hhbmdlIGZyb20gXCJjb21tb25cIiB0byBcIm9yZ2FuaXphdGlvbnNcIiBcbiAgICAgIGF1dGhvcml6YXRpb246IHtcbiAgICAgICAgcGFyYW1zOiB7XG4gICAgICAgICAgc2NvcGU6IFwib3BlbmlkIHByb2ZpbGUgZW1haWwgVXNlci5SZWFkXCIsXG4gICAgICAgIH0sXG4gICAgICB9LFxuICAgICAgcHJvZmlsZShwcm9maWxlKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdNaWNyb3NvZnQgcHJvZmlsZSBkYXRhOicsIHByb2ZpbGUpO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIGlkOiBwcm9maWxlLnN1YiB8fCBwcm9maWxlLm9pZCxcbiAgICAgICAgICBuYW1lOiBwcm9maWxlLm5hbWUgfHwgcHJvZmlsZS5wcmVmZXJyZWRfdXNlcm5hbWUsXG4gICAgICAgICAgZW1haWw6IHByb2ZpbGUuZW1haWwgfHwgcHJvZmlsZS5wcmVmZXJyZWRfdXNlcm5hbWUgfHwgYCR7cHJvZmlsZS5zdWIgfHwgcHJvZmlsZS5vaWR9QG1pY3Jvc29mdC5jb21gLCAvLyBQcm92aWRlIGZhbGxiYWNrIGVtYWlsXG4gICAgICAgICAgaW1hZ2U6IG51bGwsXG4gICAgICAgICAgcm9sZTogUm9sZS5zdHVkZW50LFxuICAgICAgICB9O1xuICAgICAgfSxcbiAgICAgIGNoZWNrczogW1wicGtjZVwiLCBcInN0YXRlXCJdLFxuICAgIH0pLFxuICBdLFxuICBjYWxsYmFja3M6IHtcbiAgICBhc3luYyBzaWduSW4oeyB1c2VyLCBhY2NvdW50LCBwcm9maWxlLCBlbWFpbCB9KSB7XG4gICAgICB0cnkge1xuICAgICAgICBjb25zb2xlLmxvZygnU2lnbkluIGNhbGxiYWNrIHRyaWdnZXJlZDonLCB7IFxuICAgICAgICAgIHByb3ZpZGVyOiBhY2NvdW50Py5wcm92aWRlcixcbiAgICAgICAgICBoYXNVc2VyOiAhIXVzZXIsXG4gICAgICAgICAgaGFzUHJvZmlsZTogISFwcm9maWxlXG4gICAgICAgIH0pO1xuICAgICAgICBcbiAgICAgICAgLy8gRm9yIE9BdXRoIHByb3ZpZGVyc1xuICAgICAgICBpZiAoYWNjb3VudCAmJiBhY2NvdW50LnByb3ZpZGVyICYmIGFjY291bnQucHJvdmlkZXIgIT09ICdjcmVkZW50aWFscycpIHtcbiAgICAgICAgICBjb25zb2xlLmxvZyhgT0F1dGggbG9naW4gYXR0ZW1wdCB3aXRoICR7YWNjb3VudC5wcm92aWRlcn06YCwge1xuICAgICAgICAgICAgYWNjb3VudFR5cGU6IGFjY291bnQudHlwZSxcbiAgICAgICAgICAgIGFjY291bnRJZDogYWNjb3VudC5wcm92aWRlckFjY291bnRJZCxcbiAgICAgICAgICAgIGhhc1Rva2VuczogISFhY2NvdW50LmFjY2Vzc190b2tlblxuICAgICAgICAgIH0pO1xuICAgICAgICAgIFxuICAgICAgICAgIC8vIFNwZWNpYWwgaGFuZGxpbmcgZm9yIE1pY3Jvc29mdCBwcm92aWRlclxuICAgICAgICAgIGlmIChhY2NvdW50LnByb3ZpZGVyID09PSAnYXp1cmUtYWQnKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnTWljcm9zb2Z0IGxvZ2luIGRldGFpbHM6Jywge1xuICAgICAgICAgICAgICB0b2tlblR5cGU6IGFjY291bnQudG9rZW5fdHlwZSxcbiAgICAgICAgICAgICAgc2NvcGVzOiBhY2NvdW50LnNjb3BlLFxuICAgICAgICAgICAgICBleHBpcmVzQXQ6IGFjY291bnQuZXhwaXJlc19hdFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIFxuICAgICAgICAgIC8vIFNwZWNpYWwgaGFuZGxpbmcgZm9yIEZhY2Vib29rIHByb3ZpZGVyXG4gICAgICAgICAgaWYgKGFjY291bnQucHJvdmlkZXIgPT09ICdmYWNlYm9vaycpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdGYWNlYm9vayBsb2dpbiBkZXRhaWxzOicsIHtcbiAgICAgICAgICAgICAgdG9rZW5UeXBlOiBhY2NvdW50LnRva2VuX3R5cGUsXG4gICAgICAgICAgICAgIHNjb3BlczogYWNjb3VudC5zY29wZSxcbiAgICAgICAgICAgICAgZXhwaXJlc0F0OiBhY2NvdW50LmV4cGlyZXNfYXRcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgICBcbiAgICAgICAgICAvLyBWYWxpZGF0ZSBlbWFpbCBwcmVzZW5jZVxuICAgICAgICAgIGxldCB1c2VyRW1haWwgPSB1c2VyLmVtYWlsIHx8IHByb2ZpbGU/LmVtYWlsIHx8IGVtYWlsO1xuICAgICAgICAgIGlmICghdXNlckVtYWlsIHx8IHR5cGVvZiB1c2VyRW1haWwgIT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdPQXV0aCBhY2NvdW50IG1pc3NpbmcgZW1haWw6JywgeyBcbiAgICAgICAgICAgICAgcHJvdmlkZXI6IGFjY291bnQucHJvdmlkZXIsIFxuICAgICAgICAgICAgICB1c2VyLFxuICAgICAgICAgICAgICBwcm9maWxlLFxuICAgICAgICAgICAgICBlbWFpbCBcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgLy8gSW5zdGVhZCBvZiB0aHJvd2luZyBhbiBlcnJvciwgY29udGludWUgd2l0aCBhIGdlbmVyYXRlZCBlbWFpbFxuICAgICAgICAgICAgaWYgKGFjY291bnQucHJvdmlkZXIgPT09ICdmYWNlYm9vaycpIHtcbiAgICAgICAgICAgICAgdXNlci5lbWFpbCA9IGAke3VzZXIuaWR9QGZhY2Vib29rLmNvbWA7XG4gICAgICAgICAgICAgIHVzZXJFbWFpbCA9IHVzZXIuZW1haWw7XG4gICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdVc2luZyBnZW5lcmF0ZWQgZW1haWwgZm9yIEZhY2Vib29rOicsIHVzZXIuZW1haWwpO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChhY2NvdW50LnByb3ZpZGVyID09PSAnYXp1cmUtYWQnKSB7XG4gICAgICAgICAgICAgIHVzZXIuZW1haWwgPSBgJHt1c2VyLmlkfUBtaWNyb3NvZnQuY29tYDtcbiAgICAgICAgICAgICAgdXNlckVtYWlsID0gdXNlci5lbWFpbDtcbiAgICAgICAgICAgICAgY29uc29sZS5sb2coJ1VzaW5nIGdlbmVyYXRlZCBlbWFpbCBmb3IgTWljcm9zb2Z0OicsIHVzZXIuZW1haWwpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdFbWFpbCBpcyByZXF1aXJlZCBmb3IgYXV0aGVudGljYXRpb24nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgXG4gICAgICAgICAgLy8gRW5zdXJlIHVzZXJFbWFpbCBpcyBhIHN0cmluZyBmb3IgZGF0YWJhc2Ugb3BlcmF0aW9uc1xuICAgICAgICAgIGNvbnN0IG5vcm1hbGl6ZWRFbWFpbCA9IHR5cGVvZiB1c2VyRW1haWwgPT09ICdzdHJpbmcnID8gdXNlckVtYWlsLnRvTG93ZXJDYXNlKCkgOiBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICh0eXBlb2YgdXNlci5lbWFpbCA9PT0gJ3N0cmluZycgPyB1c2VyLmVtYWlsLnRvTG93ZXJDYXNlKCkgOiAnJyk7XG4gICAgICAgICAgXG4gICAgICAgICAgLy8gQ2hlY2sgaWYgdXNlciBhbHJlYWR5IGV4aXN0c1xuICAgICAgICAgIGNvbnN0IGV4aXN0aW5nVXNlciA9IGF3YWl0IGZpbmRVc2VyQnlFbWFpbChub3JtYWxpemVkRW1haWwpO1xuICAgICAgICAgIFxuICAgICAgICAgIGlmIChleGlzdGluZ1VzZXIpIHtcbiAgICAgICAgICAgIC8vIFVzZXIgZXhpc3RzLCB1cGRhdGUgdGhlaXIgT0F1dGggaW5mbyBhbmQgbG9naW4gaGlzdG9yeVxuICAgICAgICAgICAgY29uc29sZS5sb2coYEV4aXN0aW5nIHVzZXIgJHtub3JtYWxpemVkRW1haWx9IHNpZ25lZCBpbiB2aWEgJHthY2NvdW50LnByb3ZpZGVyfWApO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAvLyBVcGRhdGUgbG9naW4gaGlzdG9yeSBhbmQgT0F1dGggaW5mb1xuICAgICAgICAgICAgICBhd2FpdCBwcmlzbWEudXNlci51cGRhdGUoe1xuICAgICAgICAgICAgICAgIHdoZXJlOiB7IGlkOiBleGlzdGluZ1VzZXIuaWQgfSxcbiAgICAgICAgICAgICAgICBkYXRhOiB7IFxuICAgICAgICAgICAgICAgICAgdXBkYXRlZEF0OiBuZXcgRGF0ZSgpLFxuICAgICAgICAgICAgICAgICAgbmFtZTogdXNlci5uYW1lIHx8IGV4aXN0aW5nVXNlci5uYW1lLFxuICAgICAgICAgICAgICAgICAgLy8gTm90ZTogQWRkIG1vcmUgZmllbGRzIGFzIG5lZWRlZCBiYXNlZCBvbiB5b3VyIFVzZXIgbW9kZWxcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSBjYXRjaCAodXBkYXRlRXJyb3IpIHtcbiAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgdXBkYXRpbmcgdXNlciBsb2dpbiBoaXN0b3J5OicsIHVwZGF0ZUVycm9yKTtcbiAgICAgICAgICAgICAgLy8gQ29udGludWUgd2l0aCBzaWduIGluIGV2ZW4gaWYgdXBkYXRlIGZhaWxzXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIFNldCB0aGUgdXNlciBJRCBmb3IgdGhlIHNlc3Npb25cbiAgICAgICAgICAgIHVzZXIuaWQgPSBleGlzdGluZ1VzZXIuaWQ7XG4gICAgICAgICAgICB1c2VyLnJvbGUgPSBleGlzdGluZ1VzZXIucm9sZSBhcyBSb2xlO1xuICAgICAgICAgICAgXG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vIENyZWF0ZSBhIG5ldyB1c2VyIGZyb20gT0F1dGggZGF0YVxuICAgICAgICAgICAgY29uc29sZS5sb2coYENyZWF0aW5nIG5ldyB1c2VyIGZyb20gJHthY2NvdW50LnByb3ZpZGVyfSBPQXV0aDpgLCB1c2VyRW1haWwpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICBjb25zdCBuZXdVc2VyID0gYXdhaXQgcHJpc21hLnVzZXIuY3JlYXRlKHtcbiAgICAgICAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICAgICAgICBuYW1lOiB1c2VyLm5hbWUgfHwgcHJvZmlsZT8ubmFtZSB8fCAnT0F1dGggVXNlcicsXG4gICAgICAgICAgICAgICAgICBlbWFpbDogbm9ybWFsaXplZEVtYWlsLFxuICAgICAgICAgICAgICAgICAgcGFzc3dvcmQ6ICcnLCAvLyBFbXB0eSBwYXNzd29yZCBmb3IgT0F1dGggdXNlcnNcbiAgICAgICAgICAgICAgICAgIHJvbGU6ICdzdHVkZW50JyxcbiAgICAgICAgICAgICAgICAgIC8vIEFkZCBvdGhlciBmaWVsZHMgYXMgbmVlZGVkXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdDcmVhdGVkIG5ldyB1c2VyIGZyb20gT0F1dGg6JywgbmV3VXNlci5pZCk7XG4gICAgICAgICAgICAgIHVzZXIuaWQgPSBuZXdVc2VyLmlkO1xuICAgICAgICAgICAgICB1c2VyLnJvbGUgPSBuZXdVc2VyLnJvbGUgYXMgUm9sZTtcbiAgICAgICAgICAgICAgXG4gICAgICAgICAgICB9IGNhdGNoIChjcmVhdGVFcnJvcikge1xuICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBjcmVhdGluZyBuZXcgdXNlcjonLCBjcmVhdGVFcnJvcik7XG4gICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignRmFpbGVkIHRvIGNyZWF0ZSB1c2VyIGFjY291bnQnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZiAoYWNjb3VudCAmJiBhY2NvdW50LnByb3ZpZGVyID09PSAnY3JlZGVudGlhbHMnKSB7XG4gICAgICAgICAgLy8gRm9yIGNyZWRlbnRpYWxzIGxvZ2luLCB1cGRhdGUgbG9naW4gaGlzdG9yeVxuICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICBpZiAodXNlci5lbWFpbCkge1xuICAgICAgICAgICAgICBjb25zdCBleGlzdGluZ1VzZXIgPSBhd2FpdCBmaW5kVXNlckJ5RW1haWwodXNlci5lbWFpbCk7XG4gICAgICAgICAgICAgIGlmIChleGlzdGluZ1VzZXIpIHtcbiAgICAgICAgICAgICAgICBhd2FpdCB1cGRhdGVVc2VyTG9naW5JbmZvKGV4aXN0aW5nVXNlci5pZCk7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgLy8gQ2hlY2sgYW5kIGF3YXJkIGFjaGlldmVtZW50cyBmb3IgbG9naW4gaWYgbmVlZGVkXG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgIC8vIFdlIG5lZWQgdG8gZHluYW1pY2FsbHkgaW1wb3J0IHRoaXMgdG8gYXZvaWQgY2lyY3VsYXIgZGVwZW5kZW5jaWVzXG4gICAgICAgICAgICAgICAgICBjb25zdCB7IGNoZWNrQW5kQXdhcmRBY2hpZXZlbWVudHMgfSA9IGF3YWl0IGltcG9ydCgnQC9zZXJ2aWNlcy9hY2hpZXZlbWVudHMnKTtcbiAgICAgICAgICAgICAgICAgIGF3YWl0IGNoZWNrQW5kQXdhcmRBY2hpZXZlbWVudHMoZXhpc3RpbmdVc2VyLmlkKTtcbiAgICAgICAgICAgICAgICB9IGNhdGNoIChhY2hpZXZlbWVudEVycm9yKSB7XG4gICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBjaGVja2luZyBhY2hpZXZlbWVudHM6JywgYWNoaWV2ZW1lbnRFcnJvcik7XG4gICAgICAgICAgICAgICAgICAvLyBEb24ndCBmYWlsIGxvZ2luIGlmIGFjaGlldmVtZW50cyBjaGVjayBmYWlsc1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciB1cGRhdGluZyBsb2dpbiBoaXN0b3J5OicsIGVycm9yKTtcbiAgICAgICAgICAgIC8vIERvbid0IHByZXZlbnQgbG9naW4gaWYgdGhpcyBmYWlsc1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBpbiBzaWduSW4gY2FsbGJhY2s6JywgZXJyb3IpO1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgfSxcbiAgICBcbiAgICBhc3luYyBqd3QoeyB0b2tlbiwgdXNlciwgYWNjb3VudCB9KSB7XG4gICAgICBpZiAodXNlcikge1xuICAgICAgICB0b2tlbi5pZCA9IHVzZXIuaWQ7XG4gICAgICAgIHRva2VuLnJvbGUgPSB1c2VyLnJvbGUgfHwgUm9sZS5zdHVkZW50O1xuICAgICAgfVxuICAgICAgcmV0dXJuIHRva2VuO1xuICAgIH0sXG4gICAgXG4gICAgYXN5bmMgc2Vzc2lvbih7IHNlc3Npb24sIHRva2VuIH0pIHtcbiAgICAgIGlmIChzZXNzaW9uLnVzZXIpIHtcbiAgICAgICAgc2Vzc2lvbi51c2VyLmlkID0gdG9rZW4uaWQ7XG4gICAgICAgIHNlc3Npb24udXNlci5yb2xlID0gdG9rZW4ucm9sZTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBzZXNzaW9uO1xuICAgIH0sXG4gICAgXG4gICAgYXN5bmMgcmVkaXJlY3QoeyB1cmwsIGJhc2VVcmwgfSkge1xuICAgICAgY29uc29sZS5sb2coJ1JlZGlyZWN0IGNhbGxiYWNrIGNhbGxlZCB3aXRoOicsIHsgdXJsLCBiYXNlVXJsIH0pO1xuICAgICAgXG4gICAgICB0cnkge1xuICAgICAgICAvLyBIYW5kbGUgcmVkaXJlY3QgYWZ0ZXIgc2lnbiBpblxuICAgICAgICBpZiAodXJsLnN0YXJ0c1dpdGgoJy8nKSkge1xuICAgICAgICAgIC8vIEZvciByZWxhdGl2ZSBVUkxzLCBwcmVmaXggd2l0aCBiYXNlIFVSTFxuICAgICAgICAgIHJldHVybiBgJHtiYXNlVXJsfSR7dXJsfWA7XG4gICAgICAgIH0gZWxzZSBpZiAobmV3IFVSTCh1cmwpLm9yaWdpbiA9PT0gYmFzZVVybCkge1xuICAgICAgICAgIC8vIEFsbG93IHJlZGlyZWN0cyB0byBzYW1lIG9yaWdpblxuICAgICAgICAgIHJldHVybiB1cmw7XG4gICAgICAgIH1cbiAgICAgICAgLy8gRGVmYXVsdCB0byBkYXNoYm9hcmQgZm9yIGFsbCBvdGhlciBjYXNlc1xuICAgICAgICByZXR1cm4gYCR7YmFzZVVybH0vZGFzaGJvYXJkYDtcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGluIHJlZGlyZWN0IGNhbGxiYWNrOicsIGVycm9yKTtcbiAgICAgICAgcmV0dXJuIGAke2Jhc2VVcmx9L2Rhc2hib2FyZGA7XG4gICAgICB9XG4gICAgfSxcbiAgfSxcbiAgcGFnZXM6IHtcbiAgICBzaWduSW46ICcvbG9naW4nLFxuICAgIHNpZ25PdXQ6ICcvJyxcbiAgICBlcnJvcjogJy9sb2dpbicsXG4gICAgdmVyaWZ5UmVxdWVzdDogJy9sb2dpbicsXG4gICAgbmV3VXNlcjogJy9kYXNoYm9hcmQnXG4gIH0sXG4gIHNlc3Npb246IHtcbiAgICBzdHJhdGVneTogXCJqd3RcIixcbiAgICBtYXhBZ2U6IDMwICogMjQgKiA2MCAqIDYwLCAvLyAzMCBkYXlzXG4gIH0sXG4gIHNlY3JldDogcHJvY2Vzcy5lbnYuTkVYVEFVVEhfU0VDUkVULFxuICBkZWJ1ZzogZmFsc2UsXG4gIGxvZ2dlcjoge1xuICAgIGVycm9yOiAoY29kZSwgbWV0YWRhdGEpID0+IHtcbiAgICAgIGlmIChjb2RlICE9PSAnREVCVUdfRU5BQkxFRCcpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihgW05leHRBdXRoXVtFcnJvcl1bJHtjb2RlfV06YCwgbWV0YWRhdGEpO1xuICAgICAgfVxuICAgIH0sXG4gICAgd2FybjogKGNvZGUpID0+IHtcbiAgICAgIGlmIChjb2RlICE9PSAnREVCVUdfRU5BQkxFRCcpIHtcbiAgICAgICAgY29uc29sZS53YXJuKGBbTmV4dEF1dGhdW1dhcm5pbmddWyR7Y29kZX1dYCk7XG4gICAgICB9XG4gICAgfSxcbiAgICBkZWJ1ZzogKCkgPT4ge1xuICAgIH0sXG4gIH0sXG4gIGV2ZW50czoge1xuICAgIGFzeW5jIHNpZ25Jbih7IHVzZXIsIGFjY291bnQsIGlzTmV3VXNlciB9KSB7XG4gICAgICBjb25zb2xlLmxvZyhgVXNlciAke3VzZXIuZW1haWx9IHNpZ25lZCBpbiB2aWEgJHthY2NvdW50Py5wcm92aWRlcn1gLCB7XG4gICAgICAgIGlzTmV3VXNlcixcbiAgICAgICAgdXNlcklkOiB1c2VyLmlkXG4gICAgICB9KTtcbiAgICB9XG4gIH0sXG59O1xuXG5leHBvcnQgZGVmYXVsdCBhdXRoT3B0aW9uczsiXSwibmFtZXMiOlsiQ3JlZGVudGlhbHNQcm92aWRlciIsIkdvb2dsZVByb3ZpZGVyIiwiR2l0SHViUHJvdmlkZXIiLCJGYWNlYm9va1Byb3ZpZGVyIiwiTWljcm9zb2Z0UHJvdmlkZXIiLCJjb21wYXJlUGFzc3dvcmRzIiwiZmluZFVzZXJCeUVtYWlsIiwidXBkYXRlVXNlckxvZ2luSW5mbyIsInByaXNtYSIsIlJvbGUiLCJ2YWxpZGF0ZUVudlZhcmlhYmxlcyIsInJlcXVpcmVkVmFycyIsImtleSIsInZhbHVlIiwicHJvY2VzcyIsImVudiIsIk5FWFRBVVRIX1NFQ1JFVCIsIk5FWFRBVVRIX1VSTCIsIkZBQ0VCT09LX0NMSUVOVF9JRCIsIkZBQ0VCT09LX0NMSUVOVF9TRUNSRVQiLCJNSUNST1NPRlRfQ0xJRU5UX0lEIiwiTUlDUk9TT0ZUX0NMSUVOVF9TRUNSRVQiLCJtaXNzaW5nVmFycyIsImZpbHRlciIsInYiLCJsZW5ndGgiLCJjb25zb2xlIiwiZXJyb3IiLCJtYXAiLCJhdXRoT3B0aW9ucyIsInByb3ZpZGVycyIsIm5hbWUiLCJjcmVkZW50aWFscyIsImVtYWlsIiwibGFiZWwiLCJ0eXBlIiwicGFzc3dvcmQiLCJhdXRob3JpemUiLCJFcnJvciIsInVzZXIiLCJpc1Bhc3N3b3JkVmFsaWQiLCJpZCIsInJvbGUiLCJjbGllbnRJZCIsIkdPT0dMRV9DTElFTlRfSUQiLCJjbGllbnRTZWNyZXQiLCJHT09HTEVfQ0xJRU5UX1NFQ1JFVCIsImF1dGhvcml6YXRpb24iLCJwYXJhbXMiLCJwcm9tcHQiLCJhY2Nlc3NfdHlwZSIsInJlc3BvbnNlX3R5cGUiLCJHSVRIVUJfQ0xJRU5UX0lEIiwiR0lUSFVCX0NMSUVOVF9TRUNSRVQiLCJ2ZXJzaW9uIiwic2NvcGUiLCJkaXNwbGF5IiwiYXV0aF90eXBlIiwidXNlcmluZm8iLCJ1cmwiLCJmaWVsZHMiLCJwcm9maWxlIiwiaW1hZ2UiLCJwaWN0dXJlIiwiZGF0YSIsInN0dWRlbnQiLCJjaGVja3MiLCJ0ZW5hbnRJZCIsIk1JQ1JPU09GVF9URU5BTlRfSUQiLCJzdWIiLCJvaWQiLCJwcmVmZXJyZWRfdXNlcm5hbWUiLCJjYWxsYmFja3MiLCJzaWduSW4iLCJhY2NvdW50IiwicHJvdmlkZXIiLCJ1c2VyRW1haWwiLCJub3JtYWxpemVkRW1haWwiLCJ0b0xvd2VyQ2FzZSIsImV4aXN0aW5nVXNlciIsInVwZGF0ZSIsIndoZXJlIiwidXBkYXRlZEF0IiwiRGF0ZSIsInVwZGF0ZUVycm9yIiwibmV3VXNlciIsImNyZWF0ZSIsImNyZWF0ZUVycm9yIiwiY2hlY2tBbmRBd2FyZEFjaGlldmVtZW50cyIsImFjaGlldmVtZW50RXJyb3IiLCJqd3QiLCJ0b2tlbiIsInNlc3Npb24iLCJyZWRpcmVjdCIsImJhc2VVcmwiLCJzdGFydHNXaXRoIiwiVVJMIiwib3JpZ2luIiwicGFnZXMiLCJzaWduT3V0IiwidmVyaWZ5UmVxdWVzdCIsInN0cmF0ZWd5IiwibWF4QWdlIiwic2VjcmV0IiwiZGVidWciLCJsb2dnZXIiLCJjb2RlIiwibWV0YWRhdGEiLCJ3YXJuIiwiZXZlbnRzIiwiaXNOZXdVc2VyIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(app-pages-browser)/./src/lib/auth/auth-options.ts\n"));

/***/ }),

/***/ "(app-pages-browser)/./src/lib/auth/roles.ts":
/*!*******************************!*\
  !*** ./src/lib/auth/roles.ts ***!
  \*******************************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   hasPermission: function() { return /* binding */ hasPermission; },\n/* harmony export */   hasRole: function() { return /* binding */ hasRole; },\n/* harmony export */   isAdmin: function() { return /* binding */ isAdmin; },\n/* harmony export */   isAuthenticated: function() { return /* binding */ isAuthenticated; },\n/* harmony export */   isStudent: function() { return /* binding */ isStudent; }\n/* harmony export */ });\n/* harmony import */ var _auth_options__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./auth-options */ \"(app-pages-browser)/./src/lib/auth/auth-options.ts\");\n\n/**\n * Role management utilities\n * Centralized utilities for role-based access control\n */ /**\n * Check if a user has the admin role\n * @param user The user object\n * @returns True if the user is an admin, false otherwise\n */ function isAdmin(user) {\n    if (!user) return false;\n    return user.role === _auth_options__WEBPACK_IMPORTED_MODULE_0__.Role.admin;\n}\n/**\n * Check if a user has the student role\n * @param user The user object\n * @returns True if the user is a student, false otherwise\n */ function isStudent(user) {\n    if (!user) return false;\n    return user.role === _auth_options__WEBPACK_IMPORTED_MODULE_0__.Role.student;\n}\n/**\n * Check if a user has the required role\n * @param user The user object\n * @param requiredRole The required role\n * @returns True if the user has the required role, false otherwise\n */ function hasRole(user, requiredRole) {\n    if (!user) return false;\n    // Admin role has access to everything\n    if (user.role === _auth_options__WEBPACK_IMPORTED_MODULE_0__.Role.admin) return true;\n    // Check if user has the specific required role\n    return user.role === requiredRole;\n}\n/**\n * Check if a user is authenticated\n * @param user The user object\n * @returns True if the user is authenticated, false otherwise\n */ function isAuthenticated(user) {\n    return !!user;\n}\n/**\n * Check if a user has permission to perform an action on a resource\n * @param user The user object\n * @param resourceOwnerId The ID of the resource owner\n * @returns True if the user has permission, false otherwise\n */ function hasPermission(user, resourceOwnerId) {\n    if (!user) return false;\n    // Admins have permission to do anything\n    if (user.role === _auth_options__WEBPACK_IMPORTED_MODULE_0__.Role.admin) return true;\n    // If no resource owner, only admins have permission\n    if (!resourceOwnerId) return false;\n    // Users can only modify their own resources\n    return user.id === resourceOwnerId;\n}\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL3NyYy9saWIvYXV0aC9yb2xlcy50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFBc0M7QUFHdEM7OztDQUdDLEdBRUQ7Ozs7Q0FJQyxHQUNNLFNBQVNDLFFBQVFDLElBQTZCO0lBQ25ELElBQUksQ0FBQ0EsTUFBTSxPQUFPO0lBQ2xCLE9BQU9BLEtBQUtDLElBQUksS0FBS0gscURBQVU7QUFDakM7QUFFQTs7OztDQUlDLEdBQ00sU0FBU0ssVUFBVUgsSUFBNkI7SUFDckQsSUFBSSxDQUFDQSxNQUFNLE9BQU87SUFDbEIsT0FBT0EsS0FBS0MsSUFBSSxLQUFLSCx1REFBWTtBQUNuQztBQUVBOzs7OztDQUtDLEdBQ00sU0FBU08sUUFBUUwsSUFBNkIsRUFBRU0sWUFBa0I7SUFDdkUsSUFBSSxDQUFDTixNQUFNLE9BQU87SUFFbEIsc0NBQXNDO0lBQ3RDLElBQUlBLEtBQUtDLElBQUksS0FBS0gscURBQVUsRUFBRSxPQUFPO0lBRXJDLCtDQUErQztJQUMvQyxPQUFPRSxLQUFLQyxJQUFJLEtBQUtLO0FBQ3ZCO0FBRUE7Ozs7Q0FJQyxHQUNNLFNBQVNDLGdCQUFnQlAsSUFBNkI7SUFDM0QsT0FBTyxDQUFDLENBQUNBO0FBQ1g7QUFFQTs7Ozs7Q0FLQyxHQUNNLFNBQVNRLGNBQWNSLElBQTZCLEVBQUVTLGVBQThCO0lBQ3pGLElBQUksQ0FBQ1QsTUFBTSxPQUFPO0lBRWxCLHdDQUF3QztJQUN4QyxJQUFJQSxLQUFLQyxJQUFJLEtBQUtILHFEQUFVLEVBQUUsT0FBTztJQUVyQyxvREFBb0Q7SUFDcEQsSUFBSSxDQUFDVyxpQkFBaUIsT0FBTztJQUU3Qiw0Q0FBNEM7SUFDNUMsT0FBT1QsS0FBS1UsRUFBRSxLQUFLRDtBQUNyQiIsInNvdXJjZXMiOlsid2VicGFjazovL19OX0UvLi9zcmMvbGliL2F1dGgvcm9sZXMudHM/ZmI3NyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBSb2xlIH0gZnJvbSAnLi9hdXRoLW9wdGlvbnMnO1xuaW1wb3J0IHsgVXNlciB9IGZyb20gJ25leHQtYXV0aCc7XG5cbi8qKlxuICogUm9sZSBtYW5hZ2VtZW50IHV0aWxpdGllc1xuICogQ2VudHJhbGl6ZWQgdXRpbGl0aWVzIGZvciByb2xlLWJhc2VkIGFjY2VzcyBjb250cm9sXG4gKi9cblxuLyoqXG4gKiBDaGVjayBpZiBhIHVzZXIgaGFzIHRoZSBhZG1pbiByb2xlXG4gKiBAcGFyYW0gdXNlciBUaGUgdXNlciBvYmplY3RcbiAqIEByZXR1cm5zIFRydWUgaWYgdGhlIHVzZXIgaXMgYW4gYWRtaW4sIGZhbHNlIG90aGVyd2lzZVxuICovXG5leHBvcnQgZnVuY3Rpb24gaXNBZG1pbih1c2VyOiBVc2VyIHwgbnVsbCB8IHVuZGVmaW5lZCk6IGJvb2xlYW4ge1xuICBpZiAoIXVzZXIpIHJldHVybiBmYWxzZTtcbiAgcmV0dXJuIHVzZXIucm9sZSA9PT0gUm9sZS5hZG1pbjtcbn1cblxuLyoqXG4gKiBDaGVjayBpZiBhIHVzZXIgaGFzIHRoZSBzdHVkZW50IHJvbGVcbiAqIEBwYXJhbSB1c2VyIFRoZSB1c2VyIG9iamVjdFxuICogQHJldHVybnMgVHJ1ZSBpZiB0aGUgdXNlciBpcyBhIHN0dWRlbnQsIGZhbHNlIG90aGVyd2lzZVxuICovXG5leHBvcnQgZnVuY3Rpb24gaXNTdHVkZW50KHVzZXI6IFVzZXIgfCBudWxsIHwgdW5kZWZpbmVkKTogYm9vbGVhbiB7XG4gIGlmICghdXNlcikgcmV0dXJuIGZhbHNlO1xuICByZXR1cm4gdXNlci5yb2xlID09PSBSb2xlLnN0dWRlbnQ7XG59XG5cbi8qKlxuICogQ2hlY2sgaWYgYSB1c2VyIGhhcyB0aGUgcmVxdWlyZWQgcm9sZVxuICogQHBhcmFtIHVzZXIgVGhlIHVzZXIgb2JqZWN0XG4gKiBAcGFyYW0gcmVxdWlyZWRSb2xlIFRoZSByZXF1aXJlZCByb2xlXG4gKiBAcmV0dXJucyBUcnVlIGlmIHRoZSB1c2VyIGhhcyB0aGUgcmVxdWlyZWQgcm9sZSwgZmFsc2Ugb3RoZXJ3aXNlXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBoYXNSb2xlKHVzZXI6IFVzZXIgfCBudWxsIHwgdW5kZWZpbmVkLCByZXF1aXJlZFJvbGU6IFJvbGUpOiBib29sZWFuIHtcbiAgaWYgKCF1c2VyKSByZXR1cm4gZmFsc2U7XG4gIFxuICAvLyBBZG1pbiByb2xlIGhhcyBhY2Nlc3MgdG8gZXZlcnl0aGluZ1xuICBpZiAodXNlci5yb2xlID09PSBSb2xlLmFkbWluKSByZXR1cm4gdHJ1ZTtcbiAgXG4gIC8vIENoZWNrIGlmIHVzZXIgaGFzIHRoZSBzcGVjaWZpYyByZXF1aXJlZCByb2xlXG4gIHJldHVybiB1c2VyLnJvbGUgPT09IHJlcXVpcmVkUm9sZTtcbn1cblxuLyoqXG4gKiBDaGVjayBpZiBhIHVzZXIgaXMgYXV0aGVudGljYXRlZFxuICogQHBhcmFtIHVzZXIgVGhlIHVzZXIgb2JqZWN0XG4gKiBAcmV0dXJucyBUcnVlIGlmIHRoZSB1c2VyIGlzIGF1dGhlbnRpY2F0ZWQsIGZhbHNlIG90aGVyd2lzZVxuICovXG5leHBvcnQgZnVuY3Rpb24gaXNBdXRoZW50aWNhdGVkKHVzZXI6IFVzZXIgfCBudWxsIHwgdW5kZWZpbmVkKTogYm9vbGVhbiB7XG4gIHJldHVybiAhIXVzZXI7XG59XG5cbi8qKlxuICogQ2hlY2sgaWYgYSB1c2VyIGhhcyBwZXJtaXNzaW9uIHRvIHBlcmZvcm0gYW4gYWN0aW9uIG9uIGEgcmVzb3VyY2VcbiAqIEBwYXJhbSB1c2VyIFRoZSB1c2VyIG9iamVjdFxuICogQHBhcmFtIHJlc291cmNlT3duZXJJZCBUaGUgSUQgb2YgdGhlIHJlc291cmNlIG93bmVyXG4gKiBAcmV0dXJucyBUcnVlIGlmIHRoZSB1c2VyIGhhcyBwZXJtaXNzaW9uLCBmYWxzZSBvdGhlcndpc2VcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGhhc1Blcm1pc3Npb24odXNlcjogVXNlciB8IG51bGwgfCB1bmRlZmluZWQsIHJlc291cmNlT3duZXJJZDogc3RyaW5nIHwgbnVsbCk6IGJvb2xlYW4ge1xuICBpZiAoIXVzZXIpIHJldHVybiBmYWxzZTtcbiAgXG4gIC8vIEFkbWlucyBoYXZlIHBlcm1pc3Npb24gdG8gZG8gYW55dGhpbmdcbiAgaWYgKHVzZXIucm9sZSA9PT0gUm9sZS5hZG1pbikgcmV0dXJuIHRydWU7XG4gIFxuICAvLyBJZiBubyByZXNvdXJjZSBvd25lciwgb25seSBhZG1pbnMgaGF2ZSBwZXJtaXNzaW9uXG4gIGlmICghcmVzb3VyY2VPd25lcklkKSByZXR1cm4gZmFsc2U7XG4gIFxuICAvLyBVc2VycyBjYW4gb25seSBtb2RpZnkgdGhlaXIgb3duIHJlc291cmNlc1xuICByZXR1cm4gdXNlci5pZCA9PT0gcmVzb3VyY2VPd25lcklkO1xufVxuIl0sIm5hbWVzIjpbIlJvbGUiLCJpc0FkbWluIiwidXNlciIsInJvbGUiLCJhZG1pbiIsImlzU3R1ZGVudCIsInN0dWRlbnQiLCJoYXNSb2xlIiwicmVxdWlyZWRSb2xlIiwiaXNBdXRoZW50aWNhdGVkIiwiaGFzUGVybWlzc2lvbiIsInJlc291cmNlT3duZXJJZCIsImlkIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(app-pages-browser)/./src/lib/auth/roles.ts\n"));

/***/ }),

/***/ "(app-pages-browser)/./src/types/auth/roles.ts":
/*!*********************************!*\
  !*** ./src/types/auth/roles.ts ***!
  \*********************************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Role: function() { return /* binding */ Role; }\n/* harmony export */ });\n/**\n * @file Role definitions for user authentication and authorization\n * @description Centralized definition of roles used throughout the application\n */ /**\n * User roles in the system\n * @enum {string}\n */ var Role;\n(function(Role) {\n    Role[\"student\"] = \"student\";\n    Role[\"instructor\"] = \"instructor\";\n    Role[\"admin\"] = \"admin\";\n})(Role || (Role = {}));\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL3NyYy90eXBlcy9hdXRoL3JvbGVzLnRzIiwibWFwcGluZ3MiOiI7Ozs7QUFBQTs7O0NBR0MsR0FFRDs7O0NBR0M7VUFDV0E7Ozs7R0FBQUEsU0FBQUEiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9fTl9FLy4vc3JjL3R5cGVzL2F1dGgvcm9sZXMudHM/Y2RjMSJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEBmaWxlIFJvbGUgZGVmaW5pdGlvbnMgZm9yIHVzZXIgYXV0aGVudGljYXRpb24gYW5kIGF1dGhvcml6YXRpb25cbiAqIEBkZXNjcmlwdGlvbiBDZW50cmFsaXplZCBkZWZpbml0aW9uIG9mIHJvbGVzIHVzZWQgdGhyb3VnaG91dCB0aGUgYXBwbGljYXRpb25cbiAqL1xuXG4vKipcbiAqIFVzZXIgcm9sZXMgaW4gdGhlIHN5c3RlbVxuICogQGVudW0ge3N0cmluZ31cbiAqL1xuZXhwb3J0IGVudW0gUm9sZSB7XG4gIHN0dWRlbnQgPSAnc3R1ZGVudCcsXG4gIGluc3RydWN0b3IgPSAnaW5zdHJ1Y3RvcicsXG4gIGFkbWluID0gJ2FkbWluJ1xufVxuIl0sIm5hbWVzIjpbIlJvbGUiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(app-pages-browser)/./src/types/auth/roles.ts\n"));

/***/ })

});